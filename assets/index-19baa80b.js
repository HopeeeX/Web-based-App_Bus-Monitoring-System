(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var tM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function LI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var MI={exports:{}},cf={},DI={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vu=Symbol.for("react.element"),nM=Symbol.for("react.portal"),iM=Symbol.for("react.fragment"),rM=Symbol.for("react.strict_mode"),sM=Symbol.for("react.profiler"),oM=Symbol.for("react.provider"),aM=Symbol.for("react.context"),lM=Symbol.for("react.forward_ref"),uM=Symbol.for("react.suspense"),cM=Symbol.for("react.memo"),hM=Symbol.for("react.lazy"),Mx=Symbol.iterator;function dM(t){return t===null||typeof t!="object"?null:(t=Mx&&t[Mx]||t["@@iterator"],typeof t=="function"?t:null)}var OI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jI=Object.assign,BI={};function xa(t,e,n){this.props=t,this.context=e,this.refs=BI,this.updater=n||OI}xa.prototype.isReactComponent={};xa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function FI(){}FI.prototype=xa.prototype;function cy(t,e,n){this.props=t,this.context=e,this.refs=BI,this.updater=n||OI}var hy=cy.prototype=new FI;hy.constructor=cy;jI(hy,xa.prototype);hy.isPureReactComponent=!0;var Dx=Array.isArray,UI=Object.prototype.hasOwnProperty,dy={current:null},zI={key:!0,ref:!0,__self:!0,__source:!0};function VI(t,e,n){var i,r={},s=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)UI.call(e,i)&&!zI.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:Vu,type:t,key:s,ref:a,props:r,_owner:dy.current}}function fM(t,e){return{$$typeof:Vu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fy(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vu}function pM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ox=/\/+/g;function rm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?pM(""+t.key):e.toString(36)}function bh(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Vu:case nM:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+rm(a,0):i,Dx(r)?(n="",t!=null&&(n=t.replace(Ox,"$&/")+"/"),bh(r,e,n,"",function(d){return d})):r!=null&&(fy(r)&&(r=fM(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Ox,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",Dx(t))for(var u=0;u<t.length;u++){s=t[u];var c=i+rm(s,u);a+=bh(s,e,n,c,r)}else if(c=dM(t),typeof c=="function")for(t=c.call(t),u=0;!(s=t.next()).done;)s=s.value,c=i+rm(s,u++),a+=bh(s,e,n,c,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Wc(t,e,n){if(t==null)return t;var i=[],r=0;return bh(t,i,"","",function(s){return e.call(n,s,r++)}),i}function mM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var un={current:null},Rh={transition:null},gM={ReactCurrentDispatcher:un,ReactCurrentBatchConfig:Rh,ReactCurrentOwner:dy};_e.Children={map:Wc,forEach:function(t,e,n){Wc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Wc(t,function(){e++}),e},toArray:function(t){return Wc(t,function(e){return e})||[]},only:function(t){if(!fy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_e.Component=xa;_e.Fragment=iM;_e.Profiler=sM;_e.PureComponent=cy;_e.StrictMode=rM;_e.Suspense=uM;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gM;_e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=jI({},t.props),r=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=dy.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)UI.call(e,c)&&!zI.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];i.children=u}return{$$typeof:Vu,type:t.type,key:r,ref:s,props:i,_owner:a}};_e.createContext=function(t){return t={$$typeof:aM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:oM,_context:t},t.Consumer=t};_e.createElement=VI;_e.createFactory=function(t){var e=VI.bind(null,t);return e.type=t,e};_e.createRef=function(){return{current:null}};_e.forwardRef=function(t){return{$$typeof:lM,render:t}};_e.isValidElement=fy;_e.lazy=function(t){return{$$typeof:hM,_payload:{_status:-1,_result:t},_init:mM}};_e.memo=function(t,e){return{$$typeof:cM,type:t,compare:e===void 0?null:e}};_e.startTransition=function(t){var e=Rh.transition;Rh.transition={};try{t()}finally{Rh.transition=e}};_e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};_e.useCallback=function(t,e){return un.current.useCallback(t,e)};_e.useContext=function(t){return un.current.useContext(t)};_e.useDebugValue=function(){};_e.useDeferredValue=function(t){return un.current.useDeferredValue(t)};_e.useEffect=function(t,e){return un.current.useEffect(t,e)};_e.useId=function(){return un.current.useId()};_e.useImperativeHandle=function(t,e,n){return un.current.useImperativeHandle(t,e,n)};_e.useInsertionEffect=function(t,e){return un.current.useInsertionEffect(t,e)};_e.useLayoutEffect=function(t,e){return un.current.useLayoutEffect(t,e)};_e.useMemo=function(t,e){return un.current.useMemo(t,e)};_e.useReducer=function(t,e,n){return un.current.useReducer(t,e,n)};_e.useRef=function(t){return un.current.useRef(t)};_e.useState=function(t){return un.current.useState(t)};_e.useSyncExternalStore=function(t,e,n){return un.current.useSyncExternalStore(t,e,n)};_e.useTransition=function(){return un.current.useTransition()};_e.version="18.2.0";DI.exports=_e;var T=DI.exports;const vn=LI(T);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vM=T,yM=Symbol.for("react.element"),_M=Symbol.for("react.fragment"),wM=Object.prototype.hasOwnProperty,xM=vM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,EM={key:!0,ref:!0,__self:!0,__source:!0};function WI(t,e,n){var i,r={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)wM.call(e,i)&&!EM.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:yM,type:t,key:s,ref:a,props:r,_owner:xM.current}}cf.Fragment=_M;cf.jsx=WI;cf.jsxs=WI;MI.exports=cf;var m=MI.exports,hg={},HI={exports:{}},Rn={},GI={exports:{}},$I={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,J){var F=M.length;M.push(J);e:for(;0<F;){var X=F-1>>>1,re=M[X];if(0<r(re,J))M[X]=J,M[F]=re,F=X;else break e}}function n(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var J=M[0],F=M.pop();if(F!==J){M[0]=F;e:for(var X=0,re=M.length,wt=re>>>1;X<wt;){var Be=2*(X+1)-1,Ie=M[Be],we=Be+1,hn=M[we];if(0>r(Ie,F))we<re&&0>r(hn,Ie)?(M[X]=hn,M[we]=F,X=we):(M[X]=Ie,M[Be]=F,X=Be);else if(we<re&&0>r(hn,F))M[X]=hn,M[we]=F,X=we;else break e}}return J}function r(M,J){var F=M.sortIndex-J.sortIndex;return F!==0?F:M.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var c=[],d=[],p=1,g=null,y=3,_=!1,x=!1,C=!1,k=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(M){for(var J=n(d);J!==null;){if(J.callback===null)i(d);else if(J.startTime<=M)i(d),J.sortIndex=J.expirationTime,e(c,J);else break;J=n(d)}}function R(M){if(C=!1,I(M),!x)if(n(c)!==null)x=!0,Ve(j);else{var J=n(d);J!==null&&Mt(R,J.startTime-M)}}function j(M,J){x=!1,C&&(C=!1,S(H),H=-1),_=!0;var F=y;try{for(I(J),g=n(c);g!==null&&(!(g.expirationTime>J)||M&&!ae());){var X=g.callback;if(typeof X=="function"){g.callback=null,y=g.priorityLevel;var re=X(g.expirationTime<=J);J=t.unstable_now(),typeof re=="function"?g.callback=re:g===n(c)&&i(c),I(J)}else i(c);g=n(c)}if(g!==null)var wt=!0;else{var Be=n(d);Be!==null&&Mt(R,Be.startTime-J),wt=!1}return wt}finally{g=null,y=F,_=!1}}var V=!1,W=null,H=-1,fe=5,te=-1;function ae(){return!(t.unstable_now()-te<fe)}function Le(){if(W!==null){var M=t.unstable_now();te=M;var J=!0;try{J=W(!0,M)}finally{J?Me():(V=!1,W=null)}}else V=!1}var Me;if(typeof E=="function")Me=function(){E(Le)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,Ln=je.port2;je.port1.onmessage=Le,Me=function(){Ln.postMessage(null)}}else Me=function(){k(Le,0)};function Ve(M){W=M,V||(V=!0,Me())}function Mt(M,J){H=k(function(){M(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){x||_||(x=!0,Ve(j))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(M){switch(y){case 1:case 2:case 3:var J=3;break;default:J=y}var F=y;y=J;try{return M()}finally{y=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,J){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var F=y;y=M;try{return J()}finally{y=F}},t.unstable_scheduleCallback=function(M,J,F){var X=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?X+F:X):F=X,M){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=F+re,M={id:p++,callback:J,priorityLevel:M,startTime:F,expirationTime:re,sortIndex:-1},F>X?(M.sortIndex=F,e(d,M),n(c)===null&&M===n(d)&&(C?(S(H),H=-1):C=!0,Mt(R,F-X))):(M.sortIndex=re,e(c,M),x||_||(x=!0,Ve(j))),M},t.unstable_shouldYield=ae,t.unstable_wrapCallback=function(M){var J=y;return function(){var F=y;y=J;try{return M.apply(this,arguments)}finally{y=F}}}})($I);GI.exports=$I;var SM=GI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QI=T,kn=SM;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qI=new Set,Xl={};function qs(t,e){ea(t,e),ea(t+"Capture",e)}function ea(t,e){for(Xl[t]=e,t=0;t<e.length;t++)qI.add(e[t])}var Qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dg=Object.prototype.hasOwnProperty,CM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jx={},Bx={};function IM(t){return dg.call(Bx,t)?!0:dg.call(jx,t)?!1:CM.test(t)?Bx[t]=!0:(jx[t]=!0,!1)}function TM(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function AM(t,e,n,i){if(e===null||typeof e>"u"||TM(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function cn(t,e,n,i,r,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Vt[t]=new cn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Vt[e]=new cn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Vt[t]=new cn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Vt[t]=new cn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Vt[t]=new cn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Vt[t]=new cn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Vt[t]=new cn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Vt[t]=new cn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Vt[t]=new cn(t,5,!1,t.toLowerCase(),null,!1,!1)});var py=/[\-:]([a-z])/g;function my(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(py,my);Vt[e]=new cn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(py,my);Vt[e]=new cn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(py,my);Vt[e]=new cn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Vt[t]=new cn(t,1,!1,t.toLowerCase(),null,!1,!1)});Vt.xlinkHref=new cn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Vt[t]=new cn(t,1,!1,t.toLowerCase(),null,!0,!0)});function gy(t,e,n,i){var r=Vt.hasOwnProperty(e)?Vt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(AM(e,n,r,i)&&(n=null),i||r===null?IM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var sr=QI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hc=Symbol.for("react.element"),Eo=Symbol.for("react.portal"),So=Symbol.for("react.fragment"),vy=Symbol.for("react.strict_mode"),fg=Symbol.for("react.profiler"),KI=Symbol.for("react.provider"),YI=Symbol.for("react.context"),yy=Symbol.for("react.forward_ref"),pg=Symbol.for("react.suspense"),mg=Symbol.for("react.suspense_list"),_y=Symbol.for("react.memo"),gr=Symbol.for("react.lazy"),ZI=Symbol.for("react.offscreen"),Fx=Symbol.iterator;function rl(t){return t===null||typeof t!="object"?null:(t=Fx&&t[Fx]||t["@@iterator"],typeof t=="function"?t:null)}var et=Object.assign,sm;function xl(t){if(sm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);sm=e&&e[1]||""}return`
`+sm+t}var om=!1;function am(t,e){if(!t||om)return"";om=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var i=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){i=d}t.call(e.prototype)}else{try{throw Error()}catch(d){i=d}t()}}catch(d){if(d&&i&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),s=i.stack.split(`
`),a=r.length-1,u=s.length-1;1<=a&&0<=u&&r[a]!==s[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==s[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==s[u]){var c=`
`+r[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=u);break}}}finally{om=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xl(t):""}function kM(t){switch(t.tag){case 5:return xl(t.type);case 16:return xl("Lazy");case 13:return xl("Suspense");case 19:return xl("SuspenseList");case 0:case 2:case 15:return t=am(t.type,!1),t;case 11:return t=am(t.type.render,!1),t;case 1:return t=am(t.type,!0),t;default:return""}}function gg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case So:return"Fragment";case Eo:return"Portal";case fg:return"Profiler";case vy:return"StrictMode";case pg:return"Suspense";case mg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case YI:return(t.displayName||"Context")+".Consumer";case KI:return(t._context.displayName||"Context")+".Provider";case yy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _y:return e=t.displayName||null,e!==null?e:gg(t.type)||"Memo";case gr:e=t._payload,t=t._init;try{return gg(t(e))}catch{}}return null}function bM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gg(e);case 8:return e===vy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function XI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function RM(t){var e=XI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Gc(t){t._valueTracker||(t._valueTracker=RM(t))}function JI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=XI(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Kh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vg(t,e){var n=e.checked;return et({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ux(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Wr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function e1(t,e){e=e.checked,e!=null&&gy(t,"checked",e,!1)}function yg(t,e){e1(t,e);var n=Wr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_g(t,e.type,n):e.hasOwnProperty("defaultValue")&&_g(t,e.type,Wr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function zx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _g(t,e,n){(e!=="number"||Kh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var El=Array.isArray;function jo(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Wr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function wg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return et({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Vx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(El(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Wr(n)}}function t1(t,e){var n=Wr(e.value),i=Wr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Wx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function n1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?n1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $c,i1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for($c=$c||document.createElement("div"),$c.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$c.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Jl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Nl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PM=["Webkit","ms","Moz","O"];Object.keys(Nl).forEach(function(t){PM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Nl[e]=Nl[t]})});function r1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Nl.hasOwnProperty(t)&&Nl[t]?(""+e).trim():e+"px"}function s1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=r1(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var NM=et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Eg(t,e){if(e){if(NM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Sg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cg=null;function wy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ig=null,Bo=null,Fo=null;function Hx(t){if(t=Gu(t)){if(typeof Ig!="function")throw Error(B(280));var e=t.stateNode;e&&(e=mf(e),Ig(t.stateNode,t.type,e))}}function o1(t){Bo?Fo?Fo.push(t):Fo=[t]:Bo=t}function a1(){if(Bo){var t=Bo,e=Fo;if(Fo=Bo=null,Hx(t),e)for(t=0;t<e.length;t++)Hx(e[t])}}function l1(t,e){return t(e)}function u1(){}var lm=!1;function c1(t,e,n){if(lm)return t(e,n);lm=!0;try{return l1(t,e,n)}finally{lm=!1,(Bo!==null||Fo!==null)&&(u1(),a1())}}function eu(t,e){var n=t.stateNode;if(n===null)return null;var i=mf(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Tg=!1;if(Qi)try{var sl={};Object.defineProperty(sl,"passive",{get:function(){Tg=!0}}),window.addEventListener("test",sl,sl),window.removeEventListener("test",sl,sl)}catch{Tg=!1}function LM(t,e,n,i,r,s,a,u,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var Ll=!1,Yh=null,Zh=!1,Ag=null,MM={onError:function(t){Ll=!0,Yh=t}};function DM(t,e,n,i,r,s,a,u,c){Ll=!1,Yh=null,LM.apply(MM,arguments)}function OM(t,e,n,i,r,s,a,u,c){if(DM.apply(this,arguments),Ll){if(Ll){var d=Yh;Ll=!1,Yh=null}else throw Error(B(198));Zh||(Zh=!0,Ag=d)}}function Ks(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function h1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Gx(t){if(Ks(t)!==t)throw Error(B(188))}function jM(t){var e=t.alternate;if(!e){if(e=Ks(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Gx(r),t;if(s===i)return Gx(r),e;s=s.sibling}throw Error(B(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=s;break}if(u===i){a=!0,i=r,n=s;break}u=u.sibling}if(!a){for(u=s.child;u;){if(u===n){a=!0,n=s,i=r;break}if(u===i){a=!0,i=s,n=r;break}u=u.sibling}if(!a)throw Error(B(189))}}if(n.alternate!==i)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function d1(t){return t=jM(t),t!==null?f1(t):null}function f1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=f1(t);if(e!==null)return e;t=t.sibling}return null}var p1=kn.unstable_scheduleCallback,$x=kn.unstable_cancelCallback,BM=kn.unstable_shouldYield,FM=kn.unstable_requestPaint,ht=kn.unstable_now,UM=kn.unstable_getCurrentPriorityLevel,xy=kn.unstable_ImmediatePriority,m1=kn.unstable_UserBlockingPriority,Xh=kn.unstable_NormalPriority,zM=kn.unstable_LowPriority,g1=kn.unstable_IdlePriority,hf=null,xi=null;function VM(t){if(xi&&typeof xi.onCommitFiberRoot=="function")try{xi.onCommitFiberRoot(hf,t,void 0,(t.current.flags&128)===128)}catch{}}var ni=Math.clz32?Math.clz32:GM,WM=Math.log,HM=Math.LN2;function GM(t){return t>>>=0,t===0?32:31-(WM(t)/HM|0)|0}var Qc=64,qc=4194304;function Sl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Jh(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=Sl(u):(s&=a,s!==0&&(i=Sl(s)))}else a=n&~r,a!==0?i=Sl(a):s!==0&&(i=Sl(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-ni(e),r=1<<n,i|=t[n],e&=~r;return i}function $M(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function QM(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-ni(s),u=1<<a,c=r[a];c===-1?(!(u&n)||u&i)&&(r[a]=$M(u,e)):c<=e&&(t.expiredLanes|=u),s&=~u}}function kg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function v1(){var t=Qc;return Qc<<=1,!(Qc&4194240)&&(Qc=64),t}function um(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Wu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ni(e),t[e]=n}function qM(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-ni(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function Ey(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ni(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var be=0;function y1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _1,Sy,w1,x1,E1,bg=!1,Kc=[],br=null,Rr=null,Pr=null,tu=new Map,nu=new Map,yr=[],KM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qx(t,e){switch(t){case"focusin":case"focusout":br=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":tu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":nu.delete(e.pointerId)}}function ol(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Gu(e),e!==null&&Sy(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function YM(t,e,n,i,r){switch(e){case"focusin":return br=ol(br,t,e,n,i,r),!0;case"dragenter":return Rr=ol(Rr,t,e,n,i,r),!0;case"mouseover":return Pr=ol(Pr,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return tu.set(s,ol(tu.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,nu.set(s,ol(nu.get(s)||null,t,e,n,i,r)),!0}return!1}function S1(t){var e=vs(t.target);if(e!==null){var n=Ks(e);if(n!==null){if(e=n.tag,e===13){if(e=h1(n),e!==null){t.blockedOn=e,E1(t.priority,function(){w1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ph(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Rg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Cg=i,n.target.dispatchEvent(i),Cg=null}else return e=Gu(n),e!==null&&Sy(e),t.blockedOn=n,!1;e.shift()}return!0}function qx(t,e,n){Ph(t)&&n.delete(e)}function ZM(){bg=!1,br!==null&&Ph(br)&&(br=null),Rr!==null&&Ph(Rr)&&(Rr=null),Pr!==null&&Ph(Pr)&&(Pr=null),tu.forEach(qx),nu.forEach(qx)}function al(t,e){t.blockedOn===e&&(t.blockedOn=null,bg||(bg=!0,kn.unstable_scheduleCallback(kn.unstable_NormalPriority,ZM)))}function iu(t){function e(r){return al(r,t)}if(0<Kc.length){al(Kc[0],t);for(var n=1;n<Kc.length;n++){var i=Kc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(br!==null&&al(br,t),Rr!==null&&al(Rr,t),Pr!==null&&al(Pr,t),tu.forEach(e),nu.forEach(e),n=0;n<yr.length;n++)i=yr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<yr.length&&(n=yr[0],n.blockedOn===null);)S1(n),n.blockedOn===null&&yr.shift()}var Uo=sr.ReactCurrentBatchConfig,ed=!0;function XM(t,e,n,i){var r=be,s=Uo.transition;Uo.transition=null;try{be=1,Cy(t,e,n,i)}finally{be=r,Uo.transition=s}}function JM(t,e,n,i){var r=be,s=Uo.transition;Uo.transition=null;try{be=4,Cy(t,e,n,i)}finally{be=r,Uo.transition=s}}function Cy(t,e,n,i){if(ed){var r=Rg(t,e,n,i);if(r===null)_m(t,e,i,td,n),Qx(t,i);else if(YM(r,t,e,n,i))i.stopPropagation();else if(Qx(t,i),e&4&&-1<KM.indexOf(t)){for(;r!==null;){var s=Gu(r);if(s!==null&&_1(s),s=Rg(t,e,n,i),s===null&&_m(t,e,i,td,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else _m(t,e,i,null,n)}}var td=null;function Rg(t,e,n,i){if(td=null,t=wy(i),t=vs(t),t!==null)if(e=Ks(t),e===null)t=null;else if(n=e.tag,n===13){if(t=h1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return td=t,null}function C1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UM()){case xy:return 1;case m1:return 4;case Xh:case zM:return 16;case g1:return 536870912;default:return 16}default:return 16}}var Ir=null,Iy=null,Nh=null;function I1(){if(Nh)return Nh;var t,e=Iy,n=e.length,i,r="value"in Ir?Ir.value:Ir.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[s-i];i++);return Nh=r.slice(t,1<i?1-i:void 0)}function Lh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Yc(){return!0}function Kx(){return!1}function Pn(t){function e(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(s):s[u]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Yc:Kx,this.isPropagationStopped=Kx,this}return et(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yc)},persist:function(){},isPersistent:Yc}),e}var Ea={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ty=Pn(Ea),Hu=et({},Ea,{view:0,detail:0}),eD=Pn(Hu),cm,hm,ll,df=et({},Hu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ay,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ll&&(ll&&t.type==="mousemove"?(cm=t.screenX-ll.screenX,hm=t.screenY-ll.screenY):hm=cm=0,ll=t),cm)},movementY:function(t){return"movementY"in t?t.movementY:hm}}),Yx=Pn(df),tD=et({},df,{dataTransfer:0}),nD=Pn(tD),iD=et({},Hu,{relatedTarget:0}),dm=Pn(iD),rD=et({},Ea,{animationName:0,elapsedTime:0,pseudoElement:0}),sD=Pn(rD),oD=et({},Ea,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),aD=Pn(oD),lD=et({},Ea,{data:0}),Zx=Pn(lD),uD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hD[t])?!!e[t]:!1}function Ay(){return dD}var fD=et({},Hu,{key:function(t){if(t.key){var e=uD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Lh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ay,charCode:function(t){return t.type==="keypress"?Lh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pD=Pn(fD),mD=et({},df,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xx=Pn(mD),gD=et({},Hu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ay}),vD=Pn(gD),yD=et({},Ea,{propertyName:0,elapsedTime:0,pseudoElement:0}),_D=Pn(yD),wD=et({},df,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xD=Pn(wD),ED=[9,13,27,32],ky=Qi&&"CompositionEvent"in window,Ml=null;Qi&&"documentMode"in document&&(Ml=document.documentMode);var SD=Qi&&"TextEvent"in window&&!Ml,T1=Qi&&(!ky||Ml&&8<Ml&&11>=Ml),Jx=String.fromCharCode(32),eE=!1;function A1(t,e){switch(t){case"keyup":return ED.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function k1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Co=!1;function CD(t,e){switch(t){case"compositionend":return k1(e);case"keypress":return e.which!==32?null:(eE=!0,Jx);case"textInput":return t=e.data,t===Jx&&eE?null:t;default:return null}}function ID(t,e){if(Co)return t==="compositionend"||!ky&&A1(t,e)?(t=I1(),Nh=Iy=Ir=null,Co=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return T1&&e.locale!=="ko"?null:e.data;default:return null}}var TD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!TD[t.type]:e==="textarea"}function b1(t,e,n,i){o1(i),e=nd(e,"onChange"),0<e.length&&(n=new Ty("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Dl=null,ru=null;function AD(t){U1(t,0)}function ff(t){var e=Ao(t);if(JI(e))return t}function kD(t,e){if(t==="change")return e}var R1=!1;if(Qi){var fm;if(Qi){var pm="oninput"in document;if(!pm){var nE=document.createElement("div");nE.setAttribute("oninput","return;"),pm=typeof nE.oninput=="function"}fm=pm}else fm=!1;R1=fm&&(!document.documentMode||9<document.documentMode)}function iE(){Dl&&(Dl.detachEvent("onpropertychange",P1),ru=Dl=null)}function P1(t){if(t.propertyName==="value"&&ff(ru)){var e=[];b1(e,ru,t,wy(t)),c1(AD,e)}}function bD(t,e,n){t==="focusin"?(iE(),Dl=e,ru=n,Dl.attachEvent("onpropertychange",P1)):t==="focusout"&&iE()}function RD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ff(ru)}function PD(t,e){if(t==="click")return ff(e)}function ND(t,e){if(t==="input"||t==="change")return ff(e)}function LD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var si=typeof Object.is=="function"?Object.is:LD;function su(t,e){if(si(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!dg.call(e,r)||!si(t[r],e[r]))return!1}return!0}function rE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sE(t,e){var n=rE(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rE(n)}}function N1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?N1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function L1(){for(var t=window,e=Kh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Kh(t.document)}return e}function by(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function MD(t){var e=L1(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&N1(n.ownerDocument.documentElement,n)){if(i!==null&&by(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=sE(n,s);var a=sE(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var DD=Qi&&"documentMode"in document&&11>=document.documentMode,Io=null,Pg=null,Ol=null,Ng=!1;function oE(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ng||Io==null||Io!==Kh(i)||(i=Io,"selectionStart"in i&&by(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ol&&su(Ol,i)||(Ol=i,i=nd(Pg,"onSelect"),0<i.length&&(e=new Ty("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Io)))}function Zc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var To={animationend:Zc("Animation","AnimationEnd"),animationiteration:Zc("Animation","AnimationIteration"),animationstart:Zc("Animation","AnimationStart"),transitionend:Zc("Transition","TransitionEnd")},mm={},M1={};Qi&&(M1=document.createElement("div").style,"AnimationEvent"in window||(delete To.animationend.animation,delete To.animationiteration.animation,delete To.animationstart.animation),"TransitionEvent"in window||delete To.transitionend.transition);function pf(t){if(mm[t])return mm[t];if(!To[t])return t;var e=To[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in M1)return mm[t]=e[n];return t}var D1=pf("animationend"),O1=pf("animationiteration"),j1=pf("animationstart"),B1=pf("transitionend"),F1=new Map,aE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zr(t,e){F1.set(t,e),qs(e,[t])}for(var gm=0;gm<aE.length;gm++){var vm=aE[gm],OD=vm.toLowerCase(),jD=vm[0].toUpperCase()+vm.slice(1);Zr(OD,"on"+jD)}Zr(D1,"onAnimationEnd");Zr(O1,"onAnimationIteration");Zr(j1,"onAnimationStart");Zr("dblclick","onDoubleClick");Zr("focusin","onFocus");Zr("focusout","onBlur");Zr(B1,"onTransitionEnd");ea("onMouseEnter",["mouseout","mouseover"]);ea("onMouseLeave",["mouseout","mouseover"]);ea("onPointerEnter",["pointerout","pointerover"]);ea("onPointerLeave",["pointerout","pointerover"]);qs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qs("onBeforeInput",["compositionend","keypress","textInput","paste"]);qs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cl));function lE(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,OM(i,e,void 0,t),t.currentTarget=null}function U1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==s&&r.isPropagationStopped())break e;lE(r,u,d),s=c}else for(a=0;a<i.length;a++){if(u=i[a],c=u.instance,d=u.currentTarget,u=u.listener,c!==s&&r.isPropagationStopped())break e;lE(r,u,d),s=c}}}if(Zh)throw t=Ag,Zh=!1,Ag=null,t}function He(t,e){var n=e[jg];n===void 0&&(n=e[jg]=new Set);var i=t+"__bubble";n.has(i)||(z1(e,t,2,!1),n.add(i))}function ym(t,e,n){var i=0;e&&(i|=4),z1(n,t,i,e)}var Xc="_reactListening"+Math.random().toString(36).slice(2);function ou(t){if(!t[Xc]){t[Xc]=!0,qI.forEach(function(n){n!=="selectionchange"&&(BD.has(n)||ym(n,!1,t),ym(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Xc]||(e[Xc]=!0,ym("selectionchange",!1,e))}}function z1(t,e,n,i){switch(C1(e)){case 1:var r=XM;break;case 4:r=JM;break;default:r=Cy}n=r.bind(null,e,n,t),r=void 0,!Tg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function _m(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;u!==null;){if(a=vs(u),a===null)return;if(c=a.tag,c===5||c===6){i=s=a;continue e}u=u.parentNode}}i=i.return}c1(function(){var d=s,p=wy(n),g=[];e:{var y=F1.get(t);if(y!==void 0){var _=Ty,x=t;switch(t){case"keypress":if(Lh(n)===0)break e;case"keydown":case"keyup":_=pD;break;case"focusin":x="focus",_=dm;break;case"focusout":x="blur",_=dm;break;case"beforeblur":case"afterblur":_=dm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Yx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=nD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=vD;break;case D1:case O1:case j1:_=sD;break;case B1:_=_D;break;case"scroll":_=eD;break;case"wheel":_=xD;break;case"copy":case"cut":case"paste":_=aD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Xx}var C=(e&4)!==0,k=!C&&t==="scroll",S=C?y!==null?y+"Capture":null:y;C=[];for(var E=d,I;E!==null;){I=E;var R=I.stateNode;if(I.tag===5&&R!==null&&(I=R,S!==null&&(R=eu(E,S),R!=null&&C.push(au(E,R,I)))),k)break;E=E.return}0<C.length&&(y=new _(y,x,null,n,p),g.push({event:y,listeners:C}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",y&&n!==Cg&&(x=n.relatedTarget||n.fromElement)&&(vs(x)||x[qi]))break e;if((_||y)&&(y=p.window===p?p:(y=p.ownerDocument)?y.defaultView||y.parentWindow:window,_?(x=n.relatedTarget||n.toElement,_=d,x=x?vs(x):null,x!==null&&(k=Ks(x),x!==k||x.tag!==5&&x.tag!==6)&&(x=null)):(_=null,x=d),_!==x)){if(C=Yx,R="onMouseLeave",S="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(C=Xx,R="onPointerLeave",S="onPointerEnter",E="pointer"),k=_==null?y:Ao(_),I=x==null?y:Ao(x),y=new C(R,E+"leave",_,n,p),y.target=k,y.relatedTarget=I,R=null,vs(p)===d&&(C=new C(S,E+"enter",x,n,p),C.target=I,C.relatedTarget=k,R=C),k=R,_&&x)t:{for(C=_,S=x,E=0,I=C;I;I=go(I))E++;for(I=0,R=S;R;R=go(R))I++;for(;0<E-I;)C=go(C),E--;for(;0<I-E;)S=go(S),I--;for(;E--;){if(C===S||S!==null&&C===S.alternate)break t;C=go(C),S=go(S)}C=null}else C=null;_!==null&&uE(g,y,_,C,!1),x!==null&&k!==null&&uE(g,k,x,C,!0)}}e:{if(y=d?Ao(d):window,_=y.nodeName&&y.nodeName.toLowerCase(),_==="select"||_==="input"&&y.type==="file")var j=kD;else if(tE(y))if(R1)j=ND;else{j=RD;var V=bD}else(_=y.nodeName)&&_.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(j=PD);if(j&&(j=j(t,d))){b1(g,j,n,p);break e}V&&V(t,y,d),t==="focusout"&&(V=y._wrapperState)&&V.controlled&&y.type==="number"&&_g(y,"number",y.value)}switch(V=d?Ao(d):window,t){case"focusin":(tE(V)||V.contentEditable==="true")&&(Io=V,Pg=d,Ol=null);break;case"focusout":Ol=Pg=Io=null;break;case"mousedown":Ng=!0;break;case"contextmenu":case"mouseup":case"dragend":Ng=!1,oE(g,n,p);break;case"selectionchange":if(DD)break;case"keydown":case"keyup":oE(g,n,p)}var W;if(ky)e:{switch(t){case"compositionstart":var H="onCompositionStart";break e;case"compositionend":H="onCompositionEnd";break e;case"compositionupdate":H="onCompositionUpdate";break e}H=void 0}else Co?A1(t,n)&&(H="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(H="onCompositionStart");H&&(T1&&n.locale!=="ko"&&(Co||H!=="onCompositionStart"?H==="onCompositionEnd"&&Co&&(W=I1()):(Ir=p,Iy="value"in Ir?Ir.value:Ir.textContent,Co=!0)),V=nd(d,H),0<V.length&&(H=new Zx(H,t,null,n,p),g.push({event:H,listeners:V}),W?H.data=W:(W=k1(n),W!==null&&(H.data=W)))),(W=SD?CD(t,n):ID(t,n))&&(d=nd(d,"onBeforeInput"),0<d.length&&(p=new Zx("onBeforeInput","beforeinput",null,n,p),g.push({event:p,listeners:d}),p.data=W))}U1(g,e)})}function au(t,e,n){return{instance:t,listener:e,currentTarget:n}}function nd(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=eu(t,n),s!=null&&i.unshift(au(t,s,r)),s=eu(t,e),s!=null&&i.push(au(t,s,r))),t=t.return}return i}function go(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function uE(t,e,n,i,r){for(var s=e._reactName,a=[];n!==null&&n!==i;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===i)break;u.tag===5&&d!==null&&(u=d,r?(c=eu(n,s),c!=null&&a.unshift(au(n,c,u))):r||(c=eu(n,s),c!=null&&a.push(au(n,c,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var FD=/\r\n?/g,UD=/\u0000|\uFFFD/g;function cE(t){return(typeof t=="string"?t:""+t).replace(FD,`
`).replace(UD,"")}function Jc(t,e,n){if(e=cE(e),cE(t)!==e&&n)throw Error(B(425))}function id(){}var Lg=null,Mg=null;function Dg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Og=typeof setTimeout=="function"?setTimeout:void 0,zD=typeof clearTimeout=="function"?clearTimeout:void 0,hE=typeof Promise=="function"?Promise:void 0,VD=typeof queueMicrotask=="function"?queueMicrotask:typeof hE<"u"?function(t){return hE.resolve(null).then(t).catch(WD)}:Og;function WD(t){setTimeout(function(){throw t})}function wm(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),iu(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);iu(e)}function Nr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function dE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Sa=Math.random().toString(36).slice(2),vi="__reactFiber$"+Sa,lu="__reactProps$"+Sa,qi="__reactContainer$"+Sa,jg="__reactEvents$"+Sa,HD="__reactListeners$"+Sa,GD="__reactHandles$"+Sa;function vs(t){var e=t[vi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[qi]||n[vi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=dE(t);t!==null;){if(n=t[vi])return n;t=dE(t)}return e}t=n,n=t.parentNode}return null}function Gu(t){return t=t[vi]||t[qi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ao(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function mf(t){return t[lu]||null}var Bg=[],ko=-1;function Xr(t){return{current:t}}function Qe(t){0>ko||(t.current=Bg[ko],Bg[ko]=null,ko--)}function ze(t,e){ko++,Bg[ko]=t.current,t.current=e}var Hr={},en=Xr(Hr),yn=Xr(!1),Ns=Hr;function ta(t,e){var n=t.type.contextTypes;if(!n)return Hr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function _n(t){return t=t.childContextTypes,t!=null}function rd(){Qe(yn),Qe(en)}function fE(t,e,n){if(en.current!==Hr)throw Error(B(168));ze(en,e),ze(yn,n)}function V1(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(B(108,bM(t)||"Unknown",r));return et({},n,i)}function sd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hr,Ns=en.current,ze(en,t),ze(yn,yn.current),!0}function pE(t,e,n){var i=t.stateNode;if(!i)throw Error(B(169));n?(t=V1(t,e,Ns),i.__reactInternalMemoizedMergedChildContext=t,Qe(yn),Qe(en),ze(en,t)):Qe(yn),ze(yn,n)}var Mi=null,gf=!1,xm=!1;function W1(t){Mi===null?Mi=[t]:Mi.push(t)}function $D(t){gf=!0,W1(t)}function Jr(){if(!xm&&Mi!==null){xm=!0;var t=0,e=be;try{var n=Mi;for(be=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Mi=null,gf=!1}catch(r){throw Mi!==null&&(Mi=Mi.slice(t+1)),p1(xy,Jr),r}finally{be=e,xm=!1}}return null}var bo=[],Ro=0,od=null,ad=0,jn=[],Bn=0,Ls=null,Oi=1,ji="";function fs(t,e){bo[Ro++]=ad,bo[Ro++]=od,od=t,ad=e}function H1(t,e,n){jn[Bn++]=Oi,jn[Bn++]=ji,jn[Bn++]=Ls,Ls=t;var i=Oi;t=ji;var r=32-ni(i)-1;i&=~(1<<r),n+=1;var s=32-ni(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Oi=1<<32-ni(e)+r|n<<r|i,ji=s+t}else Oi=1<<s|n<<r|i,ji=t}function Ry(t){t.return!==null&&(fs(t,1),H1(t,1,0))}function Py(t){for(;t===od;)od=bo[--Ro],bo[Ro]=null,ad=bo[--Ro],bo[Ro]=null;for(;t===Ls;)Ls=jn[--Bn],jn[Bn]=null,ji=jn[--Bn],jn[Bn]=null,Oi=jn[--Bn],jn[Bn]=null}var An=null,Cn=null,Ke=!1,Xn=null;function G1(t,e){var n=Un(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function mE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,An=t,Cn=Nr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,An=t,Cn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ls!==null?{id:Oi,overflow:ji}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Un(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,An=t,Cn=null,!0):!1;default:return!1}}function Fg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ug(t){if(Ke){var e=Cn;if(e){var n=e;if(!mE(t,e)){if(Fg(t))throw Error(B(418));e=Nr(n.nextSibling);var i=An;e&&mE(t,e)?G1(i,n):(t.flags=t.flags&-4097|2,Ke=!1,An=t)}}else{if(Fg(t))throw Error(B(418));t.flags=t.flags&-4097|2,Ke=!1,An=t}}}function gE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;An=t}function eh(t){if(t!==An)return!1;if(!Ke)return gE(t),Ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Dg(t.type,t.memoizedProps)),e&&(e=Cn)){if(Fg(t))throw $1(),Error(B(418));for(;e;)G1(t,e),e=Nr(e.nextSibling)}if(gE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Cn=Nr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Cn=null}}else Cn=An?Nr(t.stateNode.nextSibling):null;return!0}function $1(){for(var t=Cn;t;)t=Nr(t.nextSibling)}function na(){Cn=An=null,Ke=!1}function Ny(t){Xn===null?Xn=[t]:Xn.push(t)}var QD=sr.ReactCurrentBatchConfig;function Yn(t,e){if(t&&t.defaultProps){e=et({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var ld=Xr(null),ud=null,Po=null,Ly=null;function My(){Ly=Po=ud=null}function Dy(t){var e=ld.current;Qe(ld),t._currentValue=e}function zg(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function zo(t,e){ud=t,Ly=Po=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(pn=!0),t.firstContext=null)}function Hn(t){var e=t._currentValue;if(Ly!==t)if(t={context:t,memoizedValue:e,next:null},Po===null){if(ud===null)throw Error(B(308));Po=t,ud.dependencies={lanes:0,firstContext:t}}else Po=Po.next=t;return e}var ys=null;function Oy(t){ys===null?ys=[t]:ys.push(t)}function Q1(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Oy(e)):(n.next=r.next,r.next=n),e.interleaved=n,Ki(t,i)}function Ki(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var vr=!1;function jy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function q1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ce&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Ki(t,n)}return r=i.interleaved,r===null?(e.next=e,Oy(i)):(e.next=r.next,r.next=e),i.interleaved=e,Ki(t,n)}function Mh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Ey(t,n)}}function vE(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function cd(t,e,n,i){var r=t.updateQueue;vr=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var c=u,d=c.next;c.next=null,a===null?s=d:a.next=d,a=c;var p=t.alternate;p!==null&&(p=p.updateQueue,u=p.lastBaseUpdate,u!==a&&(u===null?p.firstBaseUpdate=d:u.next=d,p.lastBaseUpdate=c))}if(s!==null){var g=r.baseState;a=0,p=d=c=null,u=s;do{var y=u.lane,_=u.eventTime;if((i&y)===y){p!==null&&(p=p.next={eventTime:_,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var x=t,C=u;switch(y=e,_=n,C.tag){case 1:if(x=C.payload,typeof x=="function"){g=x.call(_,g,y);break e}g=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=C.payload,y=typeof x=="function"?x.call(_,g,y):x,y==null)break e;g=et({},g,y);break e;case 2:vr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,y=r.effects,y===null?r.effects=[u]:y.push(u))}else _={eventTime:_,lane:y,tag:u.tag,payload:u.payload,callback:u.callback,next:null},p===null?(d=p=_,c=g):p=p.next=_,a|=y;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;y=u,u=y.next,y.next=null,r.lastBaseUpdate=y,r.shared.pending=null}}while(1);if(p===null&&(c=g),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=p,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Ds|=a,t.lanes=a,t.memoizedState=g}}function yE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(B(191,r));r.call(i)}}}var K1=new QI.Component().refs;function Vg(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:et({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var vf={isMounted:function(t){return(t=t._reactInternals)?Ks(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=an(),r=Dr(t),s=Wi(i,r);s.payload=e,n!=null&&(s.callback=n),e=Lr(t,s,r),e!==null&&(ii(e,t,r,i),Mh(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=an(),r=Dr(t),s=Wi(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Lr(t,s,r),e!==null&&(ii(e,t,r,i),Mh(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=an(),i=Dr(t),r=Wi(n,i);r.tag=2,e!=null&&(r.callback=e),e=Lr(t,r,i),e!==null&&(ii(e,t,i,n),Mh(e,t,i))}};function _E(t,e,n,i,r,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!su(n,i)||!su(r,s):!0}function Y1(t,e,n){var i=!1,r=Hr,s=e.contextType;return typeof s=="object"&&s!==null?s=Hn(s):(r=_n(e)?Ns:en.current,i=e.contextTypes,s=(i=i!=null)?ta(t,r):Hr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vf,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function wE(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&vf.enqueueReplaceState(e,e.state,null)}function Wg(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=K1,jy(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Hn(s):(s=_n(e)?Ns:en.current,r.context=ta(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Vg(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&vf.enqueueReplaceState(r,r.state,null),cd(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function ul(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var i=n.stateNode}if(!i)throw Error(B(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var u=r.refs;u===K1&&(u=r.refs={}),a===null?delete u[s]:u[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function th(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xE(t){var e=t._init;return e(t._payload)}function Z1(t){function e(S,E){if(t){var I=S.deletions;I===null?(S.deletions=[E],S.flags|=16):I.push(E)}}function n(S,E){if(!t)return null;for(;E!==null;)e(S,E),E=E.sibling;return null}function i(S,E){for(S=new Map;E!==null;)E.key!==null?S.set(E.key,E):S.set(E.index,E),E=E.sibling;return S}function r(S,E){return S=Or(S,E),S.index=0,S.sibling=null,S}function s(S,E,I){return S.index=I,t?(I=S.alternate,I!==null?(I=I.index,I<E?(S.flags|=2,E):I):(S.flags|=2,E)):(S.flags|=1048576,E)}function a(S){return t&&S.alternate===null&&(S.flags|=2),S}function u(S,E,I,R){return E===null||E.tag!==6?(E=km(I,S.mode,R),E.return=S,E):(E=r(E,I),E.return=S,E)}function c(S,E,I,R){var j=I.type;return j===So?p(S,E,I.props.children,R,I.key):E!==null&&(E.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===gr&&xE(j)===E.type)?(R=r(E,I.props),R.ref=ul(S,E,I),R.return=S,R):(R=Uh(I.type,I.key,I.props,null,S.mode,R),R.ref=ul(S,E,I),R.return=S,R)}function d(S,E,I,R){return E===null||E.tag!==4||E.stateNode.containerInfo!==I.containerInfo||E.stateNode.implementation!==I.implementation?(E=bm(I,S.mode,R),E.return=S,E):(E=r(E,I.children||[]),E.return=S,E)}function p(S,E,I,R,j){return E===null||E.tag!==7?(E=As(I,S.mode,R,j),E.return=S,E):(E=r(E,I),E.return=S,E)}function g(S,E,I){if(typeof E=="string"&&E!==""||typeof E=="number")return E=km(""+E,S.mode,I),E.return=S,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Hc:return I=Uh(E.type,E.key,E.props,null,S.mode,I),I.ref=ul(S,null,E),I.return=S,I;case Eo:return E=bm(E,S.mode,I),E.return=S,E;case gr:var R=E._init;return g(S,R(E._payload),I)}if(El(E)||rl(E))return E=As(E,S.mode,I,null),E.return=S,E;th(S,E)}return null}function y(S,E,I,R){var j=E!==null?E.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return j!==null?null:u(S,E,""+I,R);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Hc:return I.key===j?c(S,E,I,R):null;case Eo:return I.key===j?d(S,E,I,R):null;case gr:return j=I._init,y(S,E,j(I._payload),R)}if(El(I)||rl(I))return j!==null?null:p(S,E,I,R,null);th(S,I)}return null}function _(S,E,I,R,j){if(typeof R=="string"&&R!==""||typeof R=="number")return S=S.get(I)||null,u(E,S,""+R,j);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Hc:return S=S.get(R.key===null?I:R.key)||null,c(E,S,R,j);case Eo:return S=S.get(R.key===null?I:R.key)||null,d(E,S,R,j);case gr:var V=R._init;return _(S,E,I,V(R._payload),j)}if(El(R)||rl(R))return S=S.get(I)||null,p(E,S,R,j,null);th(E,R)}return null}function x(S,E,I,R){for(var j=null,V=null,W=E,H=E=0,fe=null;W!==null&&H<I.length;H++){W.index>H?(fe=W,W=null):fe=W.sibling;var te=y(S,W,I[H],R);if(te===null){W===null&&(W=fe);break}t&&W&&te.alternate===null&&e(S,W),E=s(te,E,H),V===null?j=te:V.sibling=te,V=te,W=fe}if(H===I.length)return n(S,W),Ke&&fs(S,H),j;if(W===null){for(;H<I.length;H++)W=g(S,I[H],R),W!==null&&(E=s(W,E,H),V===null?j=W:V.sibling=W,V=W);return Ke&&fs(S,H),j}for(W=i(S,W);H<I.length;H++)fe=_(W,S,H,I[H],R),fe!==null&&(t&&fe.alternate!==null&&W.delete(fe.key===null?H:fe.key),E=s(fe,E,H),V===null?j=fe:V.sibling=fe,V=fe);return t&&W.forEach(function(ae){return e(S,ae)}),Ke&&fs(S,H),j}function C(S,E,I,R){var j=rl(I);if(typeof j!="function")throw Error(B(150));if(I=j.call(I),I==null)throw Error(B(151));for(var V=j=null,W=E,H=E=0,fe=null,te=I.next();W!==null&&!te.done;H++,te=I.next()){W.index>H?(fe=W,W=null):fe=W.sibling;var ae=y(S,W,te.value,R);if(ae===null){W===null&&(W=fe);break}t&&W&&ae.alternate===null&&e(S,W),E=s(ae,E,H),V===null?j=ae:V.sibling=ae,V=ae,W=fe}if(te.done)return n(S,W),Ke&&fs(S,H),j;if(W===null){for(;!te.done;H++,te=I.next())te=g(S,te.value,R),te!==null&&(E=s(te,E,H),V===null?j=te:V.sibling=te,V=te);return Ke&&fs(S,H),j}for(W=i(S,W);!te.done;H++,te=I.next())te=_(W,S,H,te.value,R),te!==null&&(t&&te.alternate!==null&&W.delete(te.key===null?H:te.key),E=s(te,E,H),V===null?j=te:V.sibling=te,V=te);return t&&W.forEach(function(Le){return e(S,Le)}),Ke&&fs(S,H),j}function k(S,E,I,R){if(typeof I=="object"&&I!==null&&I.type===So&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Hc:e:{for(var j=I.key,V=E;V!==null;){if(V.key===j){if(j=I.type,j===So){if(V.tag===7){n(S,V.sibling),E=r(V,I.props.children),E.return=S,S=E;break e}}else if(V.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===gr&&xE(j)===V.type){n(S,V.sibling),E=r(V,I.props),E.ref=ul(S,V,I),E.return=S,S=E;break e}n(S,V);break}else e(S,V);V=V.sibling}I.type===So?(E=As(I.props.children,S.mode,R,I.key),E.return=S,S=E):(R=Uh(I.type,I.key,I.props,null,S.mode,R),R.ref=ul(S,E,I),R.return=S,S=R)}return a(S);case Eo:e:{for(V=I.key;E!==null;){if(E.key===V)if(E.tag===4&&E.stateNode.containerInfo===I.containerInfo&&E.stateNode.implementation===I.implementation){n(S,E.sibling),E=r(E,I.children||[]),E.return=S,S=E;break e}else{n(S,E);break}else e(S,E);E=E.sibling}E=bm(I,S.mode,R),E.return=S,S=E}return a(S);case gr:return V=I._init,k(S,E,V(I._payload),R)}if(El(I))return x(S,E,I,R);if(rl(I))return C(S,E,I,R);th(S,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,E!==null&&E.tag===6?(n(S,E.sibling),E=r(E,I),E.return=S,S=E):(n(S,E),E=km(I,S.mode,R),E.return=S,S=E),a(S)):n(S,E)}return k}var ia=Z1(!0),X1=Z1(!1),$u={},Ei=Xr($u),uu=Xr($u),cu=Xr($u);function _s(t){if(t===$u)throw Error(B(174));return t}function By(t,e){switch(ze(cu,e),ze(uu,t),ze(Ei,$u),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xg(e,t)}Qe(Ei),ze(Ei,e)}function ra(){Qe(Ei),Qe(uu),Qe(cu)}function J1(t){_s(cu.current);var e=_s(Ei.current),n=xg(e,t.type);e!==n&&(ze(uu,t),ze(Ei,n))}function Fy(t){uu.current===t&&(Qe(Ei),Qe(uu))}var Xe=Xr(0);function hd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Em=[];function Uy(){for(var t=0;t<Em.length;t++)Em[t]._workInProgressVersionPrimary=null;Em.length=0}var Dh=sr.ReactCurrentDispatcher,Sm=sr.ReactCurrentBatchConfig,Ms=0,Je=null,xt=null,kt=null,dd=!1,jl=!1,hu=0,qD=0;function Wt(){throw Error(B(321))}function zy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!si(t[n],e[n]))return!1;return!0}function Vy(t,e,n,i,r,s){if(Ms=s,Je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Dh.current=t===null||t.memoizedState===null?XD:JD,t=n(i,r),jl){s=0;do{if(jl=!1,hu=0,25<=s)throw Error(B(301));s+=1,kt=xt=null,e.updateQueue=null,Dh.current=eO,t=n(i,r)}while(jl)}if(Dh.current=fd,e=xt!==null&&xt.next!==null,Ms=0,kt=xt=Je=null,dd=!1,e)throw Error(B(300));return t}function Wy(){var t=hu!==0;return hu=0,t}function mi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Je.memoizedState=kt=t:kt=kt.next=t,kt}function Gn(){if(xt===null){var t=Je.alternate;t=t!==null?t.memoizedState:null}else t=xt.next;var e=kt===null?Je.memoizedState:kt.next;if(e!==null)kt=e,xt=t;else{if(t===null)throw Error(B(310));xt=t,t={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},kt===null?Je.memoizedState=kt=t:kt=kt.next=t}return kt}function du(t,e){return typeof e=="function"?e(t):e}function Cm(t){var e=Gn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var i=xt,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var u=a=null,c=null,d=s;do{var p=d.lane;if((Ms&p)===p)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),i=d.hasEagerState?d.eagerState:t(i,d.action);else{var g={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=g,a=i):c=c.next=g,Je.lanes|=p,Ds|=p}d=d.next}while(d!==null&&d!==s);c===null?a=i:c.next=u,si(i,e.memoizedState)||(pn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=c,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Je.lanes|=s,Ds|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Im(t){var e=Gn(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=t(s,a.action),a=a.next;while(a!==r);si(s,e.memoizedState)||(pn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function eT(){}function tT(t,e){var n=Je,i=Gn(),r=e(),s=!si(i.memoizedState,r);if(s&&(i.memoizedState=r,pn=!0),i=i.queue,Hy(rT.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||kt!==null&&kt.memoizedState.tag&1){if(n.flags|=2048,fu(9,iT.bind(null,n,i,r,e),void 0,null),Pt===null)throw Error(B(349));Ms&30||nT(n,e,r)}return r}function nT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Je.updateQueue,e===null?(e={lastEffect:null,stores:null},Je.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function iT(t,e,n,i){e.value=n,e.getSnapshot=i,sT(e)&&oT(t)}function rT(t,e,n){return n(function(){sT(e)&&oT(t)})}function sT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!si(t,n)}catch{return!0}}function oT(t){var e=Ki(t,1);e!==null&&ii(e,t,1,-1)}function EE(t){var e=mi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:du,lastRenderedState:t},e.queue=t,t=t.dispatch=ZD.bind(null,Je,t),[e.memoizedState,t]}function fu(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Je.updateQueue,e===null?(e={lastEffect:null,stores:null},Je.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function aT(){return Gn().memoizedState}function Oh(t,e,n,i){var r=mi();Je.flags|=t,r.memoizedState=fu(1|e,n,void 0,i===void 0?null:i)}function yf(t,e,n,i){var r=Gn();i=i===void 0?null:i;var s=void 0;if(xt!==null){var a=xt.memoizedState;if(s=a.destroy,i!==null&&zy(i,a.deps)){r.memoizedState=fu(e,n,s,i);return}}Je.flags|=t,r.memoizedState=fu(1|e,n,s,i)}function SE(t,e){return Oh(8390656,8,t,e)}function Hy(t,e){return yf(2048,8,t,e)}function lT(t,e){return yf(4,2,t,e)}function uT(t,e){return yf(4,4,t,e)}function cT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hT(t,e,n){return n=n!=null?n.concat([t]):null,yf(4,4,cT.bind(null,e,t),n)}function Gy(){}function dT(t,e){var n=Gn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&zy(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function fT(t,e){var n=Gn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&zy(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function pT(t,e,n){return Ms&21?(si(n,e)||(n=v1(),Je.lanes|=n,Ds|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,pn=!0),t.memoizedState=n)}function KD(t,e){var n=be;be=n!==0&&4>n?n:4,t(!0);var i=Sm.transition;Sm.transition={};try{t(!1),e()}finally{be=n,Sm.transition=i}}function mT(){return Gn().memoizedState}function YD(t,e,n){var i=Dr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},gT(t))vT(e,n);else if(n=Q1(t,e,n,i),n!==null){var r=an();ii(n,t,i,r),yT(n,e,i)}}function ZD(t,e,n){var i=Dr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(gT(t))vT(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,u=s(a,n);if(r.hasEagerState=!0,r.eagerState=u,si(u,a)){var c=e.interleaved;c===null?(r.next=r,Oy(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=Q1(t,e,r,i),n!==null&&(r=an(),ii(n,t,i,r),yT(n,e,i))}}function gT(t){var e=t.alternate;return t===Je||e!==null&&e===Je}function vT(t,e){jl=dd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function yT(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Ey(t,n)}}var fd={readContext:Hn,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},XD={readContext:Hn,useCallback:function(t,e){return mi().memoizedState=[t,e===void 0?null:e],t},useContext:Hn,useEffect:SE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Oh(4194308,4,cT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Oh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Oh(4,2,t,e)},useMemo:function(t,e){var n=mi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=mi();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=YD.bind(null,Je,t),[i.memoizedState,t]},useRef:function(t){var e=mi();return t={current:t},e.memoizedState=t},useState:EE,useDebugValue:Gy,useDeferredValue:function(t){return mi().memoizedState=t},useTransition:function(){var t=EE(!1),e=t[0];return t=KD.bind(null,t[1]),mi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Je,r=mi();if(Ke){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),Pt===null)throw Error(B(349));Ms&30||nT(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,SE(rT.bind(null,i,s,t),[t]),i.flags|=2048,fu(9,iT.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=mi(),e=Pt.identifierPrefix;if(Ke){var n=ji,i=Oi;n=(i&~(1<<32-ni(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=hu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},JD={readContext:Hn,useCallback:dT,useContext:Hn,useEffect:Hy,useImperativeHandle:hT,useInsertionEffect:lT,useLayoutEffect:uT,useMemo:fT,useReducer:Cm,useRef:aT,useState:function(){return Cm(du)},useDebugValue:Gy,useDeferredValue:function(t){var e=Gn();return pT(e,xt.memoizedState,t)},useTransition:function(){var t=Cm(du)[0],e=Gn().memoizedState;return[t,e]},useMutableSource:eT,useSyncExternalStore:tT,useId:mT,unstable_isNewReconciler:!1},eO={readContext:Hn,useCallback:dT,useContext:Hn,useEffect:Hy,useImperativeHandle:hT,useInsertionEffect:lT,useLayoutEffect:uT,useMemo:fT,useReducer:Im,useRef:aT,useState:function(){return Im(du)},useDebugValue:Gy,useDeferredValue:function(t){var e=Gn();return xt===null?e.memoizedState=t:pT(e,xt.memoizedState,t)},useTransition:function(){var t=Im(du)[0],e=Gn().memoizedState;return[t,e]},useMutableSource:eT,useSyncExternalStore:tT,useId:mT,unstable_isNewReconciler:!1};function sa(t,e){try{var n="",i=e;do n+=kM(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Tm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Hg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var tO=typeof WeakMap=="function"?WeakMap:Map;function _T(t,e,n){n=Wi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){md||(md=!0,ev=i),Hg(t,e)},n}function wT(t,e,n){n=Wi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Hg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Hg(t,e),typeof i!="function"&&(Mr===null?Mr=new Set([this]):Mr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function CE(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new tO;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=mO.bind(null,t,e,n),e.then(t,t))}function IE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function TE(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Wi(-1,1),e.tag=2,Lr(n,e,1))),n.lanes|=1),t)}var nO=sr.ReactCurrentOwner,pn=!1;function sn(t,e,n,i){e.child=t===null?X1(e,null,n,i):ia(e,t.child,n,i)}function AE(t,e,n,i,r){n=n.render;var s=e.ref;return zo(e,r),i=Vy(t,e,n,i,s,r),n=Wy(),t!==null&&!pn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Yi(t,e,r)):(Ke&&n&&Ry(e),e.flags|=1,sn(t,e,i,r),e.child)}function kE(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Jy(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,xT(t,e,s,i,r)):(t=Uh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:su,n(a,i)&&t.ref===e.ref)return Yi(t,e,r)}return e.flags|=1,t=Or(s,i),t.ref=e.ref,t.return=e,e.child=t}function xT(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(su(s,i)&&t.ref===e.ref)if(pn=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(pn=!0);else return e.lanes=t.lanes,Yi(t,e,r)}return Gg(t,e,n,i,r)}function ET(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(Lo,Sn),Sn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ze(Lo,Sn),Sn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,ze(Lo,Sn),Sn|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,ze(Lo,Sn),Sn|=i;return sn(t,e,r,n),e.child}function ST(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Gg(t,e,n,i,r){var s=_n(n)?Ns:en.current;return s=ta(e,s),zo(e,r),n=Vy(t,e,n,i,s,r),i=Wy(),t!==null&&!pn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Yi(t,e,r)):(Ke&&i&&Ry(e),e.flags|=1,sn(t,e,n,r),e.child)}function bE(t,e,n,i,r){if(_n(n)){var s=!0;sd(e)}else s=!1;if(zo(e,r),e.stateNode===null)jh(t,e),Y1(e,n,i),Wg(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Hn(d):(d=_n(n)?Ns:en.current,d=ta(e,d));var p=n.getDerivedStateFromProps,g=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||c!==d)&&wE(e,a,i,d),vr=!1;var y=e.memoizedState;a.state=y,cd(e,i,a,r),c=e.memoizedState,u!==i||y!==c||yn.current||vr?(typeof p=="function"&&(Vg(e,n,p,i),c=e.memoizedState),(u=vr||_E(e,n,u,i,y,c,d))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),a.props=i,a.state=c,a.context=d,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,q1(t,e),u=e.memoizedProps,d=e.type===e.elementType?u:Yn(e.type,u),a.props=d,g=e.pendingProps,y=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Hn(c):(c=_n(n)?Ns:en.current,c=ta(e,c));var _=n.getDerivedStateFromProps;(p=typeof _=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==g||y!==c)&&wE(e,a,i,c),vr=!1,y=e.memoizedState,a.state=y,cd(e,i,a,r);var x=e.memoizedState;u!==g||y!==x||yn.current||vr?(typeof _=="function"&&(Vg(e,n,_,i),x=e.memoizedState),(d=vr||_E(e,n,d,i,y,x,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,x,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,x,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=x),a.props=i,a.state=x,a.context=c,i=d):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),i=!1)}return $g(t,e,n,i,s,r)}function $g(t,e,n,i,r,s){ST(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&pE(e,n,!1),Yi(t,e,s);i=e.stateNode,nO.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=ia(e,t.child,null,s),e.child=ia(e,null,u,s)):sn(t,e,u,s),e.memoizedState=i.state,r&&pE(e,n,!0),e.child}function CT(t){var e=t.stateNode;e.pendingContext?fE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fE(t,e.context,!1),By(t,e.containerInfo)}function RE(t,e,n,i,r){return na(),Ny(r),e.flags|=256,sn(t,e,n,i),e.child}var Qg={dehydrated:null,treeContext:null,retryLane:0};function qg(t){return{baseLanes:t,cachePool:null,transitions:null}}function IT(t,e,n){var i=e.pendingProps,r=Xe.current,s=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),ze(Xe,r&1),t===null)return Ug(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,s?(i=e.mode,s=e.child,a={mode:"hidden",children:a},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=xf(a,i,0,null),t=As(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=qg(n),e.memoizedState=Qg,t):$y(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return iO(t,e,a,i,u,r,n);if(s){s=i.fallback,a=e.mode,r=t.child,u=r.sibling;var c={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=Or(r,c),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?s=Or(u,s):(s=As(s,a,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,a=t.child.memoizedState,a=a===null?qg(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=Qg,i}return s=t.child,t=s.sibling,i=Or(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function $y(t,e){return e=xf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function nh(t,e,n,i){return i!==null&&Ny(i),ia(e,t.child,null,n),t=$y(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function iO(t,e,n,i,r,s,a){if(n)return e.flags&256?(e.flags&=-257,i=Tm(Error(B(422))),nh(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=xf({mode:"visible",children:i.children},r,0,null),s=As(s,r,a,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&ia(e,t.child,null,a),e.child.memoizedState=qg(a),e.memoizedState=Qg,s);if(!(e.mode&1))return nh(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,s=Error(B(419)),i=Tm(s,i,void 0),nh(t,e,a,i)}if(u=(a&t.childLanes)!==0,pn||u){if(i=Pt,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Ki(t,r),ii(i,t,r,-1))}return Xy(),i=Tm(Error(B(421))),nh(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=gO.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Cn=Nr(r.nextSibling),An=e,Ke=!0,Xn=null,t!==null&&(jn[Bn++]=Oi,jn[Bn++]=ji,jn[Bn++]=Ls,Oi=t.id,ji=t.overflow,Ls=e),e=$y(e,i.children),e.flags|=4096,e)}function PE(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),zg(t.return,e,n)}function Am(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function TT(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(sn(t,e,i.children,n),i=Xe.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&PE(t,n,e);else if(t.tag===19)PE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ze(Xe,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&hd(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Am(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&hd(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Am(e,!0,n,null,s);break;case"together":Am(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Yi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ds|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Or(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Or(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function rO(t,e,n){switch(e.tag){case 3:CT(e),na();break;case 5:J1(e);break;case 1:_n(e.type)&&sd(e);break;case 4:By(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;ze(ld,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ze(Xe,Xe.current&1),e.flags|=128,null):n&e.child.childLanes?IT(t,e,n):(ze(Xe,Xe.current&1),t=Yi(t,e,n),t!==null?t.sibling:null);ze(Xe,Xe.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return TT(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ze(Xe,Xe.current),i)break;return null;case 22:case 23:return e.lanes=0,ET(t,e,n)}return Yi(t,e,n)}var AT,Kg,kT,bT;AT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Kg=function(){};kT=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,_s(Ei.current);var s=null;switch(n){case"input":r=vg(t,r),i=vg(t,i),s=[];break;case"select":r=et({},r,{value:void 0}),i=et({},i,{value:void 0}),s=[];break;case"textarea":r=wg(t,r),i=wg(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=id)}Eg(n,i);var a;n=null;for(d in r)if(!i.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var u=r[d];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Xl.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in i){var c=i[d];if(u=r!=null?r[d]:void 0,i.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(s=s||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Xl.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&He("scroll",t),s||u===c||(s=[])):(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};bT=function(t,e,n,i){n!==i&&(e.flags|=4)};function cl(t,e){if(!Ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function sO(t,e,n){var i=e.pendingProps;switch(Py(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(e),null;case 1:return _n(e.type)&&rd(),Ht(e),null;case 3:return i=e.stateNode,ra(),Qe(yn),Qe(en),Uy(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(eh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xn!==null&&(iv(Xn),Xn=null))),Kg(t,e),Ht(e),null;case 5:Fy(e);var r=_s(cu.current);if(n=e.type,t!==null&&e.stateNode!=null)kT(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(B(166));return Ht(e),null}if(t=_s(Ei.current),eh(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[vi]=e,i[lu]=s,t=(e.mode&1)!==0,n){case"dialog":He("cancel",i),He("close",i);break;case"iframe":case"object":case"embed":He("load",i);break;case"video":case"audio":for(r=0;r<Cl.length;r++)He(Cl[r],i);break;case"source":He("error",i);break;case"img":case"image":case"link":He("error",i),He("load",i);break;case"details":He("toggle",i);break;case"input":Ux(i,s),He("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},He("invalid",i);break;case"textarea":Vx(i,s),He("invalid",i)}Eg(n,s),r=null;for(var a in s)if(s.hasOwnProperty(a)){var u=s[a];a==="children"?typeof u=="string"?i.textContent!==u&&(s.suppressHydrationWarning!==!0&&Jc(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(s.suppressHydrationWarning!==!0&&Jc(i.textContent,u,t),r=["children",""+u]):Xl.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&He("scroll",i)}switch(n){case"input":Gc(i),zx(i,s,!0);break;case"textarea":Gc(i),Wx(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=id)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=n1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[vi]=e,t[lu]=i,AT(t,e,!1,!1),e.stateNode=t;e:{switch(a=Sg(n,i),n){case"dialog":He("cancel",t),He("close",t),r=i;break;case"iframe":case"object":case"embed":He("load",t),r=i;break;case"video":case"audio":for(r=0;r<Cl.length;r++)He(Cl[r],t);r=i;break;case"source":He("error",t),r=i;break;case"img":case"image":case"link":He("error",t),He("load",t),r=i;break;case"details":He("toggle",t),r=i;break;case"input":Ux(t,i),r=vg(t,i),He("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=et({},i,{value:void 0}),He("invalid",t);break;case"textarea":Vx(t,i),r=wg(t,i),He("invalid",t);break;default:r=i}Eg(n,r),u=r;for(s in u)if(u.hasOwnProperty(s)){var c=u[s];s==="style"?s1(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&i1(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Jl(t,c):typeof c=="number"&&Jl(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Xl.hasOwnProperty(s)?c!=null&&s==="onScroll"&&He("scroll",t):c!=null&&gy(t,s,c,a))}switch(n){case"input":Gc(t),zx(t,i,!1);break;case"textarea":Gc(t),Wx(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Wr(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?jo(t,!!i.multiple,s,!1):i.defaultValue!=null&&jo(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=id)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ht(e),null;case 6:if(t&&e.stateNode!=null)bT(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(B(166));if(n=_s(cu.current),_s(Ei.current),eh(e)){if(i=e.stateNode,n=e.memoizedProps,i[vi]=e,(s=i.nodeValue!==n)&&(t=An,t!==null))switch(t.tag){case 3:Jc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Jc(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[vi]=e,e.stateNode=i}return Ht(e),null;case 13:if(Qe(Xe),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ke&&Cn!==null&&e.mode&1&&!(e.flags&128))$1(),na(),e.flags|=98560,s=!1;else if(s=eh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(B(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[vi]=e}else na(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ht(e),s=!1}else Xn!==null&&(iv(Xn),Xn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Xe.current&1?St===0&&(St=3):Xy())),e.updateQueue!==null&&(e.flags|=4),Ht(e),null);case 4:return ra(),Kg(t,e),t===null&&ou(e.stateNode.containerInfo),Ht(e),null;case 10:return Dy(e.type._context),Ht(e),null;case 17:return _n(e.type)&&rd(),Ht(e),null;case 19:if(Qe(Xe),s=e.memoizedState,s===null)return Ht(e),null;if(i=(e.flags&128)!==0,a=s.rendering,a===null)if(i)cl(s,!1);else{if(St!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=hd(t),a!==null){for(e.flags|=128,cl(s,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ze(Xe,Xe.current&1|2),e.child}t=t.sibling}s.tail!==null&&ht()>oa&&(e.flags|=128,i=!0,cl(s,!1),e.lanes=4194304)}else{if(!i)if(t=hd(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),cl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Ke)return Ht(e),null}else 2*ht()-s.renderingStartTime>oa&&n!==1073741824&&(e.flags|=128,i=!0,cl(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ht(),e.sibling=null,n=Xe.current,ze(Xe,i?n&1|2:n&1),e):(Ht(e),null);case 22:case 23:return Zy(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Sn&1073741824&&(Ht(e),e.subtreeFlags&6&&(e.flags|=8192)):Ht(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function oO(t,e){switch(Py(e),e.tag){case 1:return _n(e.type)&&rd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ra(),Qe(yn),Qe(en),Uy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Fy(e),null;case 13:if(Qe(Xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));na()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Qe(Xe),null;case 4:return ra(),null;case 10:return Dy(e.type._context),null;case 22:case 23:return Zy(),null;case 24:return null;default:return null}}var ih=!1,Qt=!1,aO=typeof WeakSet=="function"?WeakSet:Set,Q=null;function No(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){it(t,e,i)}else n.current=null}function Yg(t,e,n){try{n()}catch(i){it(t,e,i)}}var NE=!1;function lO(t,e){if(Lg=ed,t=L1(),by(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,u=-1,c=-1,d=0,p=0,g=t,y=null;t:for(;;){for(var _;g!==n||r!==0&&g.nodeType!==3||(u=a+r),g!==s||i!==0&&g.nodeType!==3||(c=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(_=g.firstChild)!==null;)y=g,g=_;for(;;){if(g===t)break t;if(y===n&&++d===r&&(u=a),y===s&&++p===i&&(c=a),(_=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=_}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Mg={focusedElem:t,selectionRange:n},ed=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var C=x.memoizedProps,k=x.memoizedState,S=e.stateNode,E=S.getSnapshotBeforeUpdate(e.elementType===e.type?C:Yn(e.type,C),k);S.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(R){it(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return x=NE,NE=!1,x}function Bl(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Yg(e,n,s)}r=r.next}while(r!==i)}}function _f(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Zg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function RT(t){var e=t.alternate;e!==null&&(t.alternate=null,RT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vi],delete e[lu],delete e[jg],delete e[HD],delete e[GD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function PT(t){return t.tag===5||t.tag===3||t.tag===4}function LE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||PT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=id));else if(i!==4&&(t=t.child,t!==null))for(Xg(t,e,n),t=t.sibling;t!==null;)Xg(t,e,n),t=t.sibling}function Jg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Jg(t,e,n),t=t.sibling;t!==null;)Jg(t,e,n),t=t.sibling}var Ot=null,Zn=!1;function dr(t,e,n){for(n=n.child;n!==null;)NT(t,e,n),n=n.sibling}function NT(t,e,n){if(xi&&typeof xi.onCommitFiberUnmount=="function")try{xi.onCommitFiberUnmount(hf,n)}catch{}switch(n.tag){case 5:Qt||No(n,e);case 6:var i=Ot,r=Zn;Ot=null,dr(t,e,n),Ot=i,Zn=r,Ot!==null&&(Zn?(t=Ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ot.removeChild(n.stateNode));break;case 18:Ot!==null&&(Zn?(t=Ot,n=n.stateNode,t.nodeType===8?wm(t.parentNode,n):t.nodeType===1&&wm(t,n),iu(t)):wm(Ot,n.stateNode));break;case 4:i=Ot,r=Zn,Ot=n.stateNode.containerInfo,Zn=!0,dr(t,e,n),Ot=i,Zn=r;break;case 0:case 11:case 14:case 15:if(!Qt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Yg(n,e,a),r=r.next}while(r!==i)}dr(t,e,n);break;case 1:if(!Qt&&(No(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){it(n,e,u)}dr(t,e,n);break;case 21:dr(t,e,n);break;case 22:n.mode&1?(Qt=(i=Qt)||n.memoizedState!==null,dr(t,e,n),Qt=i):dr(t,e,n);break;default:dr(t,e,n)}}function ME(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new aO),e.forEach(function(i){var r=vO.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function qn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Ot=u.stateNode,Zn=!1;break e;case 3:Ot=u.stateNode.containerInfo,Zn=!0;break e;case 4:Ot=u.stateNode.containerInfo,Zn=!0;break e}u=u.return}if(Ot===null)throw Error(B(160));NT(s,a,r),Ot=null,Zn=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){it(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)LT(e,t),e=e.sibling}function LT(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qn(e,t),pi(t),i&4){try{Bl(3,t,t.return),_f(3,t)}catch(C){it(t,t.return,C)}try{Bl(5,t,t.return)}catch(C){it(t,t.return,C)}}break;case 1:qn(e,t),pi(t),i&512&&n!==null&&No(n,n.return);break;case 5:if(qn(e,t),pi(t),i&512&&n!==null&&No(n,n.return),t.flags&32){var r=t.stateNode;try{Jl(r,"")}catch(C){it(t,t.return,C)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&s.type==="radio"&&s.name!=null&&e1(r,s),Sg(u,a);var d=Sg(u,s);for(a=0;a<c.length;a+=2){var p=c[a],g=c[a+1];p==="style"?s1(r,g):p==="dangerouslySetInnerHTML"?i1(r,g):p==="children"?Jl(r,g):gy(r,p,g,d)}switch(u){case"input":yg(r,s);break;case"textarea":t1(r,s);break;case"select":var y=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var _=s.value;_!=null?jo(r,!!s.multiple,_,!1):y!==!!s.multiple&&(s.defaultValue!=null?jo(r,!!s.multiple,s.defaultValue,!0):jo(r,!!s.multiple,s.multiple?[]:"",!1))}r[lu]=s}catch(C){it(t,t.return,C)}}break;case 6:if(qn(e,t),pi(t),i&4){if(t.stateNode===null)throw Error(B(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(C){it(t,t.return,C)}}break;case 3:if(qn(e,t),pi(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{iu(e.containerInfo)}catch(C){it(t,t.return,C)}break;case 4:qn(e,t),pi(t);break;case 13:qn(e,t),pi(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Ky=ht())),i&4&&ME(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Qt=(d=Qt)||p,qn(e,t),Qt=d):qn(e,t),pi(t),i&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(Q=t,p=t.child;p!==null;){for(g=Q=p;Q!==null;){switch(y=Q,_=y.child,y.tag){case 0:case 11:case 14:case 15:Bl(4,y,y.return);break;case 1:No(y,y.return);var x=y.stateNode;if(typeof x.componentWillUnmount=="function"){i=y,n=y.return;try{e=i,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(C){it(i,n,C)}}break;case 5:No(y,y.return);break;case 22:if(y.memoizedState!==null){OE(g);continue}}_!==null?(_.return=y,Q=_):OE(g)}p=p.sibling}e:for(p=null,g=t;;){if(g.tag===5){if(p===null){p=g;try{r=g.stateNode,d?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(u=g.stateNode,c=g.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=r1("display",a))}catch(C){it(t,t.return,C)}}}else if(g.tag===6){if(p===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(C){it(t,t.return,C)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;p===g&&(p=null),g=g.return}p===g&&(p=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:qn(e,t),pi(t),i&4&&ME(t);break;case 21:break;default:qn(e,t),pi(t)}}function pi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(PT(n)){var i=n;break e}n=n.return}throw Error(B(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Jl(r,""),i.flags&=-33);var s=LE(t);Jg(t,s,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=LE(t);Xg(t,u,a);break;default:throw Error(B(161))}}catch(c){it(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uO(t,e,n){Q=t,MT(t)}function MT(t,e,n){for(var i=(t.mode&1)!==0;Q!==null;){var r=Q,s=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||ih;if(!a){var u=r.alternate,c=u!==null&&u.memoizedState!==null||Qt;u=ih;var d=Qt;if(ih=a,(Qt=c)&&!d)for(Q=r;Q!==null;)a=Q,c=a.child,a.tag===22&&a.memoizedState!==null?jE(r):c!==null?(c.return=a,Q=c):jE(r);for(;s!==null;)Q=s,MT(s),s=s.sibling;Q=r,ih=u,Qt=d}DE(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Q=s):DE(t)}}function DE(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qt||_f(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Qt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Yn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&yE(e,s,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}yE(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var g=p.dehydrated;g!==null&&iu(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Qt||e.flags&512&&Zg(e)}catch(y){it(e,e.return,y)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function OE(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function jE(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_f(4,e)}catch(c){it(e,n,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(c){it(e,r,c)}}var s=e.return;try{Zg(e)}catch(c){it(e,s,c)}break;case 5:var a=e.return;try{Zg(e)}catch(c){it(e,a,c)}}}catch(c){it(e,e.return,c)}if(e===t){Q=null;break}var u=e.sibling;if(u!==null){u.return=e.return,Q=u;break}Q=e.return}}var cO=Math.ceil,pd=sr.ReactCurrentDispatcher,Qy=sr.ReactCurrentOwner,zn=sr.ReactCurrentBatchConfig,Ce=0,Pt=null,vt=null,Ut=0,Sn=0,Lo=Xr(0),St=0,pu=null,Ds=0,wf=0,qy=0,Fl=null,dn=null,Ky=0,oa=1/0,Li=null,md=!1,ev=null,Mr=null,rh=!1,Tr=null,gd=0,Ul=0,tv=null,Bh=-1,Fh=0;function an(){return Ce&6?ht():Bh!==-1?Bh:Bh=ht()}function Dr(t){return t.mode&1?Ce&2&&Ut!==0?Ut&-Ut:QD.transition!==null?(Fh===0&&(Fh=v1()),Fh):(t=be,t!==0||(t=window.event,t=t===void 0?16:C1(t.type)),t):1}function ii(t,e,n,i){if(50<Ul)throw Ul=0,tv=null,Error(B(185));Wu(t,n,i),(!(Ce&2)||t!==Pt)&&(t===Pt&&(!(Ce&2)&&(wf|=n),St===4&&_r(t,Ut)),wn(t,i),n===1&&Ce===0&&!(e.mode&1)&&(oa=ht()+500,gf&&Jr()))}function wn(t,e){var n=t.callbackNode;QM(t,e);var i=Jh(t,t===Pt?Ut:0);if(i===0)n!==null&&$x(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&$x(n),e===1)t.tag===0?$D(BE.bind(null,t)):W1(BE.bind(null,t)),VD(function(){!(Ce&6)&&Jr()}),n=null;else{switch(y1(i)){case 1:n=xy;break;case 4:n=m1;break;case 16:n=Xh;break;case 536870912:n=g1;break;default:n=Xh}n=VT(n,DT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function DT(t,e){if(Bh=-1,Fh=0,Ce&6)throw Error(B(327));var n=t.callbackNode;if(Vo()&&t.callbackNode!==n)return null;var i=Jh(t,t===Pt?Ut:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=vd(t,i);else{e=i;var r=Ce;Ce|=2;var s=jT();(Pt!==t||Ut!==e)&&(Li=null,oa=ht()+500,Ts(t,e));do try{fO();break}catch(u){OT(t,u)}while(1);My(),pd.current=s,Ce=r,vt!==null?e=0:(Pt=null,Ut=0,e=St)}if(e!==0){if(e===2&&(r=kg(t),r!==0&&(i=r,e=nv(t,r))),e===1)throw n=pu,Ts(t,0),_r(t,i),wn(t,ht()),n;if(e===6)_r(t,i);else{if(r=t.current.alternate,!(i&30)&&!hO(r)&&(e=vd(t,i),e===2&&(s=kg(t),s!==0&&(i=s,e=nv(t,s))),e===1))throw n=pu,Ts(t,0),_r(t,i),wn(t,ht()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(B(345));case 2:ps(t,dn,Li);break;case 3:if(_r(t,i),(i&130023424)===i&&(e=Ky+500-ht(),10<e)){if(Jh(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){an(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Og(ps.bind(null,t,dn,Li),e);break}ps(t,dn,Li);break;case 4:if(_r(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-ni(i);s=1<<a,a=e[a],a>r&&(r=a),i&=~s}if(i=r,i=ht()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*cO(i/1960))-i,10<i){t.timeoutHandle=Og(ps.bind(null,t,dn,Li),i);break}ps(t,dn,Li);break;case 5:ps(t,dn,Li);break;default:throw Error(B(329))}}}return wn(t,ht()),t.callbackNode===n?DT.bind(null,t):null}function nv(t,e){var n=Fl;return t.current.memoizedState.isDehydrated&&(Ts(t,e).flags|=256),t=vd(t,e),t!==2&&(e=dn,dn=n,e!==null&&iv(e)),t}function iv(t){dn===null?dn=t:dn.push.apply(dn,t)}function hO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!si(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _r(t,e){for(e&=~qy,e&=~wf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ni(e),i=1<<n;t[n]=-1,e&=~i}}function BE(t){if(Ce&6)throw Error(B(327));Vo();var e=Jh(t,0);if(!(e&1))return wn(t,ht()),null;var n=vd(t,e);if(t.tag!==0&&n===2){var i=kg(t);i!==0&&(e=i,n=nv(t,i))}if(n===1)throw n=pu,Ts(t,0),_r(t,e),wn(t,ht()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ps(t,dn,Li),wn(t,ht()),null}function Yy(t,e){var n=Ce;Ce|=1;try{return t(e)}finally{Ce=n,Ce===0&&(oa=ht()+500,gf&&Jr())}}function Os(t){Tr!==null&&Tr.tag===0&&!(Ce&6)&&Vo();var e=Ce;Ce|=1;var n=zn.transition,i=be;try{if(zn.transition=null,be=1,t)return t()}finally{be=i,zn.transition=n,Ce=e,!(Ce&6)&&Jr()}}function Zy(){Sn=Lo.current,Qe(Lo)}function Ts(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,zD(n)),vt!==null)for(n=vt.return;n!==null;){var i=n;switch(Py(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&rd();break;case 3:ra(),Qe(yn),Qe(en),Uy();break;case 5:Fy(i);break;case 4:ra();break;case 13:Qe(Xe);break;case 19:Qe(Xe);break;case 10:Dy(i.type._context);break;case 22:case 23:Zy()}n=n.return}if(Pt=t,vt=t=Or(t.current,null),Ut=Sn=e,St=0,pu=null,qy=wf=Ds=0,dn=Fl=null,ys!==null){for(e=0;e<ys.length;e++)if(n=ys[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var a=s.next;s.next=r,i.next=a}n.pending=i}ys=null}return t}function OT(t,e){do{var n=vt;try{if(My(),Dh.current=fd,dd){for(var i=Je.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}dd=!1}if(Ms=0,kt=xt=Je=null,jl=!1,hu=0,Qy.current=null,n===null||n.return===null){St=1,pu=e,vt=null;break}e:{var s=t,a=n.return,u=n,c=e;if(e=Ut,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,p=u,g=p.tag;if(!(p.mode&1)&&(g===0||g===11||g===15)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var _=IE(a);if(_!==null){_.flags&=-257,TE(_,a,u,s,e),_.mode&1&&CE(s,d,e),e=_,c=d;var x=e.updateQueue;if(x===null){var C=new Set;C.add(c),e.updateQueue=C}else x.add(c);break e}else{if(!(e&1)){CE(s,d,e),Xy();break e}c=Error(B(426))}}else if(Ke&&u.mode&1){var k=IE(a);if(k!==null){!(k.flags&65536)&&(k.flags|=256),TE(k,a,u,s,e),Ny(sa(c,u));break e}}s=c=sa(c,u),St!==4&&(St=2),Fl===null?Fl=[s]:Fl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=_T(s,c,e);vE(s,S);break e;case 1:u=c;var E=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Mr===null||!Mr.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=wT(s,u,e);vE(s,R);break e}}s=s.return}while(s!==null)}FT(n)}catch(j){e=j,vt===n&&n!==null&&(vt=n=n.return);continue}break}while(1)}function jT(){var t=pd.current;return pd.current=fd,t===null?fd:t}function Xy(){(St===0||St===3||St===2)&&(St=4),Pt===null||!(Ds&268435455)&&!(wf&268435455)||_r(Pt,Ut)}function vd(t,e){var n=Ce;Ce|=2;var i=jT();(Pt!==t||Ut!==e)&&(Li=null,Ts(t,e));do try{dO();break}catch(r){OT(t,r)}while(1);if(My(),Ce=n,pd.current=i,vt!==null)throw Error(B(261));return Pt=null,Ut=0,St}function dO(){for(;vt!==null;)BT(vt)}function fO(){for(;vt!==null&&!BM();)BT(vt)}function BT(t){var e=zT(t.alternate,t,Sn);t.memoizedProps=t.pendingProps,e===null?FT(t):vt=e,Qy.current=null}function FT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=oO(n,e),n!==null){n.flags&=32767,vt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{St=6,vt=null;return}}else if(n=sO(n,e,Sn),n!==null){vt=n;return}if(e=e.sibling,e!==null){vt=e;return}vt=e=t}while(e!==null);St===0&&(St=5)}function ps(t,e,n){var i=be,r=zn.transition;try{zn.transition=null,be=1,pO(t,e,n,i)}finally{zn.transition=r,be=i}return null}function pO(t,e,n,i){do Vo();while(Tr!==null);if(Ce&6)throw Error(B(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(qM(t,s),t===Pt&&(vt=Pt=null,Ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||rh||(rh=!0,VT(Xh,function(){return Vo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=zn.transition,zn.transition=null;var a=be;be=1;var u=Ce;Ce|=4,Qy.current=null,lO(t,n),LT(n,t),MD(Mg),ed=!!Lg,Mg=Lg=null,t.current=n,uO(n),FM(),Ce=u,be=a,zn.transition=s}else t.current=n;if(rh&&(rh=!1,Tr=t,gd=r),s=t.pendingLanes,s===0&&(Mr=null),VM(n.stateNode),wn(t,ht()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(md)throw md=!1,t=ev,ev=null,t;return gd&1&&t.tag!==0&&Vo(),s=t.pendingLanes,s&1?t===tv?Ul++:(Ul=0,tv=t):Ul=0,Jr(),null}function Vo(){if(Tr!==null){var t=y1(gd),e=zn.transition,n=be;try{if(zn.transition=null,be=16>t?16:t,Tr===null)var i=!1;else{if(t=Tr,Tr=null,gd=0,Ce&6)throw Error(B(331));var r=Ce;for(Ce|=4,Q=t.current;Q!==null;){var s=Q,a=s.child;if(Q.flags&16){var u=s.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(Q=d;Q!==null;){var p=Q;switch(p.tag){case 0:case 11:case 15:Bl(8,p,s)}var g=p.child;if(g!==null)g.return=p,Q=g;else for(;Q!==null;){p=Q;var y=p.sibling,_=p.return;if(RT(p),p===d){Q=null;break}if(y!==null){y.return=_,Q=y;break}Q=_}}}var x=s.alternate;if(x!==null){var C=x.child;if(C!==null){x.child=null;do{var k=C.sibling;C.sibling=null,C=k}while(C!==null)}}Q=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Q=a;else e:for(;Q!==null;){if(s=Q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Bl(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,Q=S;break e}Q=s.return}}var E=t.current;for(Q=E;Q!==null;){a=Q;var I=a.child;if(a.subtreeFlags&2064&&I!==null)I.return=a,Q=I;else e:for(a=E;Q!==null;){if(u=Q,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:_f(9,u)}}catch(j){it(u,u.return,j)}if(u===a){Q=null;break e}var R=u.sibling;if(R!==null){R.return=u.return,Q=R;break e}Q=u.return}}if(Ce=r,Jr(),xi&&typeof xi.onPostCommitFiberRoot=="function")try{xi.onPostCommitFiberRoot(hf,t)}catch{}i=!0}return i}finally{be=n,zn.transition=e}}return!1}function FE(t,e,n){e=sa(n,e),e=_T(t,e,1),t=Lr(t,e,1),e=an(),t!==null&&(Wu(t,1,e),wn(t,e))}function it(t,e,n){if(t.tag===3)FE(t,t,n);else for(;e!==null;){if(e.tag===3){FE(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Mr===null||!Mr.has(i))){t=sa(n,t),t=wT(e,t,1),e=Lr(e,t,1),t=an(),e!==null&&(Wu(e,1,t),wn(e,t));break}}e=e.return}}function mO(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=an(),t.pingedLanes|=t.suspendedLanes&n,Pt===t&&(Ut&n)===n&&(St===4||St===3&&(Ut&130023424)===Ut&&500>ht()-Ky?Ts(t,0):qy|=n),wn(t,e)}function UT(t,e){e===0&&(t.mode&1?(e=qc,qc<<=1,!(qc&130023424)&&(qc=4194304)):e=1);var n=an();t=Ki(t,e),t!==null&&(Wu(t,e,n),wn(t,n))}function gO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),UT(t,n)}function vO(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(B(314))}i!==null&&i.delete(e),UT(t,n)}var zT;zT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||yn.current)pn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return pn=!1,rO(t,e,n);pn=!!(t.flags&131072)}else pn=!1,Ke&&e.flags&1048576&&H1(e,ad,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;jh(t,e),t=e.pendingProps;var r=ta(e,en.current);zo(e,n),r=Vy(null,e,i,t,r,n);var s=Wy();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_n(i)?(s=!0,sd(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,jy(e),r.updater=vf,e.stateNode=r,r._reactInternals=e,Wg(e,i,t,n),e=$g(null,e,i,!0,s,n)):(e.tag=0,Ke&&s&&Ry(e),sn(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(jh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=_O(i),t=Yn(i,t),r){case 0:e=Gg(null,e,i,t,n);break e;case 1:e=bE(null,e,i,t,n);break e;case 11:e=AE(null,e,i,t,n);break e;case 14:e=kE(null,e,i,Yn(i.type,t),n);break e}throw Error(B(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Yn(i,r),Gg(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Yn(i,r),bE(t,e,i,r,n);case 3:e:{if(CT(e),t===null)throw Error(B(387));i=e.pendingProps,s=e.memoizedState,r=s.element,q1(t,e),cd(e,i,null,n);var a=e.memoizedState;if(i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=sa(Error(B(423)),e),e=RE(t,e,i,n,r);break e}else if(i!==r){r=sa(Error(B(424)),e),e=RE(t,e,i,n,r);break e}else for(Cn=Nr(e.stateNode.containerInfo.firstChild),An=e,Ke=!0,Xn=null,n=X1(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(na(),i===r){e=Yi(t,e,n);break e}sn(t,e,i,n)}e=e.child}return e;case 5:return J1(e),t===null&&Ug(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,a=r.children,Dg(i,r)?a=null:s!==null&&Dg(i,s)&&(e.flags|=32),ST(t,e),sn(t,e,a,n),e.child;case 6:return t===null&&Ug(e),null;case 13:return IT(t,e,n);case 4:return By(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ia(e,null,i,n):sn(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Yn(i,r),AE(t,e,i,r,n);case 7:return sn(t,e,e.pendingProps,n),e.child;case 8:return sn(t,e,e.pendingProps.children,n),e.child;case 12:return sn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,a=r.value,ze(ld,i._currentValue),i._currentValue=a,s!==null)if(si(s.value,a)){if(s.children===r.children&&!yn.current){e=Yi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var u=s.dependencies;if(u!==null){a=s.child;for(var c=u.firstContext;c!==null;){if(c.context===i){if(s.tag===1){c=Wi(-1,n&-n),c.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?c.next=c:(c.next=p.next,p.next=c),d.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),zg(s.return,n,e),u.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(B(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),zg(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}sn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,zo(e,n),r=Hn(r),i=i(r),e.flags|=1,sn(t,e,i,n),e.child;case 14:return i=e.type,r=Yn(i,e.pendingProps),r=Yn(i.type,r),kE(t,e,i,r,n);case 15:return xT(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Yn(i,r),jh(t,e),e.tag=1,_n(i)?(t=!0,sd(e)):t=!1,zo(e,n),Y1(e,i,r),Wg(e,i,r,n),$g(null,e,i,!0,t,n);case 19:return TT(t,e,n);case 22:return ET(t,e,n)}throw Error(B(156,e.tag))};function VT(t,e){return p1(t,e)}function yO(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(t,e,n,i){return new yO(t,e,n,i)}function Jy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _O(t){if(typeof t=="function")return Jy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===yy)return 11;if(t===_y)return 14}return 2}function Or(t,e){var n=t.alternate;return n===null?(n=Un(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Uh(t,e,n,i,r,s){var a=2;if(i=t,typeof t=="function")Jy(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case So:return As(n.children,r,s,e);case vy:a=8,r|=8;break;case fg:return t=Un(12,n,e,r|2),t.elementType=fg,t.lanes=s,t;case pg:return t=Un(13,n,e,r),t.elementType=pg,t.lanes=s,t;case mg:return t=Un(19,n,e,r),t.elementType=mg,t.lanes=s,t;case ZI:return xf(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case KI:a=10;break e;case YI:a=9;break e;case yy:a=11;break e;case _y:a=14;break e;case gr:a=16,i=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=Un(a,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function As(t,e,n,i){return t=Un(7,t,i,e),t.lanes=n,t}function xf(t,e,n,i){return t=Un(22,t,i,e),t.elementType=ZI,t.lanes=n,t.stateNode={isHidden:!1},t}function km(t,e,n){return t=Un(6,t,null,e),t.lanes=n,t}function bm(t,e,n){return e=Un(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function wO(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=um(0),this.expirationTimes=um(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=um(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function e_(t,e,n,i,r,s,a,u,c){return t=new wO(t,e,n,u,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Un(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jy(s),t}function xO(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Eo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function WT(t){if(!t)return Hr;t=t._reactInternals;e:{if(Ks(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_n(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(_n(n))return V1(t,n,e)}return e}function HT(t,e,n,i,r,s,a,u,c){return t=e_(n,i,!0,t,r,s,a,u,c),t.context=WT(null),n=t.current,i=an(),r=Dr(n),s=Wi(i,r),s.callback=e??null,Lr(n,s,r),t.current.lanes=r,Wu(t,r,i),wn(t,i),t}function Ef(t,e,n,i){var r=e.current,s=an(),a=Dr(r);return n=WT(n),e.context===null?e.context=n:e.pendingContext=n,e=Wi(s,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Lr(r,e,a),t!==null&&(ii(t,r,a,s),Mh(t,r,a)),a}function yd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function UE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function t_(t,e){UE(t,e),(t=t.alternate)&&UE(t,e)}function EO(){return null}var GT=typeof reportError=="function"?reportError:function(t){console.error(t)};function n_(t){this._internalRoot=t}Sf.prototype.render=n_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Ef(t,e,null,null)};Sf.prototype.unmount=n_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Os(function(){Ef(null,t,null,null)}),e[qi]=null}};function Sf(t){this._internalRoot=t}Sf.prototype.unstable_scheduleHydration=function(t){if(t){var e=x1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<yr.length&&e!==0&&e<yr[n].priority;n++);yr.splice(n,0,t),n===0&&S1(t)}};function i_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function zE(){}function SO(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var d=yd(a);s.call(d)}}var a=HT(e,i,t,0,null,!1,!1,"",zE);return t._reactRootContainer=a,t[qi]=a.current,ou(t.nodeType===8?t.parentNode:t),Os(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var d=yd(c);u.call(d)}}var c=e_(t,0,!1,null,null,!1,!1,"",zE);return t._reactRootContainer=c,t[qi]=c.current,ou(t.nodeType===8?t.parentNode:t),Os(function(){Ef(e,c,n,i)}),c}function If(t,e,n,i,r){var s=n._reactRootContainer;if(s){var a=s;if(typeof r=="function"){var u=r;r=function(){var c=yd(a);u.call(c)}}Ef(e,a,t,r)}else a=SO(n,e,t,r,i);return yd(a)}_1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Sl(e.pendingLanes);n!==0&&(Ey(e,n|1),wn(e,ht()),!(Ce&6)&&(oa=ht()+500,Jr()))}break;case 13:Os(function(){var i=Ki(t,1);if(i!==null){var r=an();ii(i,t,1,r)}}),t_(t,1)}};Sy=function(t){if(t.tag===13){var e=Ki(t,134217728);if(e!==null){var n=an();ii(e,t,134217728,n)}t_(t,134217728)}};w1=function(t){if(t.tag===13){var e=Dr(t),n=Ki(t,e);if(n!==null){var i=an();ii(n,t,e,i)}t_(t,e)}};x1=function(){return be};E1=function(t,e){var n=be;try{return be=t,e()}finally{be=n}};Ig=function(t,e,n){switch(e){case"input":if(yg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=mf(i);if(!r)throw Error(B(90));JI(i),yg(i,r)}}}break;case"textarea":t1(t,n);break;case"select":e=n.value,e!=null&&jo(t,!!n.multiple,e,!1)}};l1=Yy;u1=Os;var CO={usingClientEntryPoint:!1,Events:[Gu,Ao,mf,o1,a1,Yy]},hl={findFiberByHostInstance:vs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},IO={bundleType:hl.bundleType,version:hl.version,rendererPackageName:hl.rendererPackageName,rendererConfig:hl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=d1(t),t===null?null:t.stateNode},findFiberByHostInstance:hl.findFiberByHostInstance||EO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{hf=sh.inject(IO),xi=sh}catch{}}Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CO;Rn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!i_(e))throw Error(B(200));return xO(t,e,null,n)};Rn.createRoot=function(t,e){if(!i_(t))throw Error(B(299));var n=!1,i="",r=GT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=e_(t,1,!1,null,null,n,!1,i,r),t[qi]=e.current,ou(t.nodeType===8?t.parentNode:t),new n_(e)};Rn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=d1(e),t=t===null?null:t.stateNode,t};Rn.flushSync=function(t){return Os(t)};Rn.hydrate=function(t,e,n){if(!Cf(e))throw Error(B(200));return If(null,t,e,!0,n)};Rn.hydrateRoot=function(t,e,n){if(!i_(t))throw Error(B(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",a=GT;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=HT(e,null,t,1,n??null,r,!1,s,a),t[qi]=e.current,ou(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Sf(e)};Rn.render=function(t,e,n){if(!Cf(e))throw Error(B(200));return If(null,t,e,!1,n)};Rn.unmountComponentAtNode=function(t){if(!Cf(t))throw Error(B(40));return t._reactRootContainer?(Os(function(){If(null,null,t,!1,function(){t._reactRootContainer=null,t[qi]=null})}),!0):!1};Rn.unstable_batchedUpdates=Yy;Rn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Cf(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return If(t,e,n,!1,i)};Rn.version="18.2.0-next-9e3b772b8-20220608";function $T(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($T)}catch(t){console.error(t)}}$T(),HI.exports=Rn;var QT=HI.exports,VE=QT;hg.createRoot=VE.createRoot,hg.hydrateRoot=VE.hydrateRoot;const r_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAmVSURBVHgB7Zx9jBxlHcd/v2ev0IJYEbRVRKJGQYmCUQmIROoLLYUWenu3u7eFQ5r4UhUFjGA0ak1ItBiViLQq0oPK7ct094qXSrVe6VGFQuIf/gG+JCYG36JGY1t6Unu38/j9zc7iUfaZ3enN7OzdPp+kuensb2afeb7P9/c88zwzS2SxWCwWi8VisVgsFovFYrFYLBaLxWKxWCwWi8UyD2CKge1jY69Mue5LaIHCxxZNzcwcOjI8PDxFETNnQTZt2qTOfctbB1nXBl3ii5h4OXYvop6A/6lZP6WI9ilyC5lM5vc0RxTNEQjikqbzNak0xDibekYMQZ/Jmi7Xmr5S06kbKQIiS1nF8o7bcbqvUQ/CpO/MZQdvpwiYs0MaDGUHN6PFfI56j81RiSFE3qkXytXb0GI2U2+weSg7EGkjDO2QQrmyplTa+QbT5/ls+k5N/Hla8PAXg8QoFh86u+A476WQhE9ZTLdqmpkcrVTeaAqBKF+FKJHZuPvQXxjKpu8wfTparZ5DPD3Jmj9LIQmVshzHWTLj8r+Z+WQU6u8p1u/DUO/XpviSU7kVI5Bv0IJCnBEshpp2HyHm17ta/2eR0qejjo5Rm4RySK2mzquL4RVsWU3zRKk09mZTfC4z8E1m+gwtEHAttwWJ4aXyab1fxJD/K+ZToMS5FIJQgmhF57xwD79Kc21foVA533SMiKI136IBzWOkYeFavm76XFK4pHLF9NrZ+1OUeh2FIJQgcMfLmuxdhrOIKG8zHZfPpe/Cn43zURTtwbdIwzLFIEu8iWdoHyroNU0+XkohCOcQ1z252X60nldwiveiYBeYjs3nBr8HQW+aT6J4UjDf7DeopkjKdsl9FHVwVtNzuO4pFIKwDgkYBOgz0ctMlkrVd5kiMEy8B6f4KDZd6nLqDUd9GmX+timmUKmch5S9F7Wy3BQTXGcvJrI7dUF7Kc3dM+o4F5licIH34lq7WhQRQyn+FJxxtynGG8xImkI/ShESqSCCiMKu2gOnXGyKQfr6AZrOR6gLRfHT1E3oM75jikGDuxCzvPuDnHGiRC6IgIIuxRTwT3CneokpZiiTvg9/PkxdJIrfv31SUqspplisvF3VeKKeoqMnFkEEEYW1+lmxuONyUwwufBtq4DpUQ40Sxk9Tn4B7t5hi4Ix3aKYJ3GCcQTERmyA+p6Lwu8rl6gpTQD47UFSkIYqeoeRwWakNSFNbTQFwxjsVGhga2sspRuIWRDh1Rru74JT3mwJyucESKiQRUcSdcOkGpND7TTFoUJeipvZi83SKmU4I4k0huEzj5XLlA6YYVEgZeW59J0URMeDODXDpA6YY9IPvqWl3NzZfSh2gI4J4XwRRalrvKpV2XG2KQcU4KFC+E6KIGKz4RrhzuykGrr6MXLUbo67TqEN0TBBBJiYxpKrImoopBhW0A+lrCJvTFBPeIILpQ3DlD00xspaB8e/D6DM6+vRMRwURvNliTRU45RpTDCqqgsA8xSCKn6ZugBsfNMWgbFfUnUEdf5Sp44IIuNCTXGIHTrnWFCOisNY5ilAU3xnXw4WjppiCM7YKzvgRyriEEiARQQQRBZM8DlpjvykGFTeGwHXoU/5Lc2cazsjIMNsUgLJcydrdic3FlBCJCeKzSJxSdKp5UwCc8mO02P65iAJnHMPQNuMJbABluAr9W6JiCEkLIk5JaVdvR/q6zhSzPjvwMAq6DptHKSQiBtJUFs54yBSD704jcOf/V0OTI3FBBBEFFTKCihkyxaB170bgQBinSCzSVLqFGBkElqhLnrjsCkF8akrrZ4MC/PQlo7OWThFnYPgsaWpXUFyK+G9wRhR9VCR0iyBHpaJbVZ6A9PVTjL5ElMOmGIhxBM5YAwHHqQXZbHo/KuFaHPMcdQGJCyIVIRUsFd3uMRBuD2aSL8X9zNMvOh/Rb7RyL5OYds+XzQ5MpJjWdoMoiQriVYBS14SpvAa5XP9Ty5edcSEEyGNF5V4mvQXb2WcP/uuC9ZnMrygkIgoaxpqkRemjhJALl1aZzfRPmGIwFF2Lij7LNC2+YsUKmfMq+v9aUixXPoZKPyizy80+Hxoa3Iv5qzUY/o7L3BslQCIOeV4MtEpTzGi5slq7ruO6+p5CqXozzRERA6OuLbjveTBoiC2iKE2rpB+iBOi4IPJ4paSGIDE8Z2jy7gvYQ3+r5FS+JMvdFBI5pliufhmbW+vnkiE23Y+78pzpGIjyc0mlUlbqMB0VRC4QrW+ttEJTTMMZMrUye7+8pQShyuPj422nkpGRkcWlUhXT63rT7P0iSiun5DP9jyThlI4JImL0sbo6SAyZAW44o9nnsMfgkeeOPumtU7RA1vIXLzntl7jCppXecErQzWgSTgmVAiQP489WCs+UIkaaSu8zBYgYMq91vDNMIHk9jtbkYDX8SaVqf63VTsIga+bVnKKLdY2zpPQlbZ2nvlA1jHuWgilGngmQZegT7Og3DmUHvttucOwOkdalWa0NEkPSFEY25XbFEOCkd6My79KsD9S0eobUzB9xNU/IvnbF8M7jz6UhHV5vipGydyp9xSpII01JPjbFyCwrOvmxJCf2fFFGgkSppy/3yrhFiU2QhhhBzhAx0IFXu2GWtSEKUuewKSafyfwiblHiEmRqPonRwB99bUtSlDgEmYI95p0YDcKJEjw7fSJELYgnBvLtpCmgm8Vo0L4oenXUooR7YSfgZRspGIa2K1uIsa5bVuZa0RAlqKMXUVJIzSQN0UDYF5TCOYTZtDA0hdYi9xmPmQ71HmbQukzz6LdQ/JVMuXm8wRRTX0/hlSanoIJDzR6HEgQregeb7D6MNHUFWsujpuNEDCxAdc0yaUiw1kX3BaUvaYjiFENHf4hCfVkIXJf/cNwu7w4caepx0zHzXAwPb0jMPNLKKSnmVcc7BevSz1AIQgnS1+f+dta8zmHN7gelIKb4hSDGLBTmmba1EOUxzCBc1XCKPGSBC/8dhfmSMMHyiwQp1pP4wkOseSXS1AFTrDxas4DEaNBSFLmjx8zDak8UxQdQZ/H1IYLLfXejFazM5dJPmGJEDK6v4i3EHzNrSxS5T0Hf830KSQw/z7SgxXgefzi7Ud6/pwiJ9MawV8QQ/PfPt/pLEtGdlyKil8SYjf8a9cfDrHkEEYkgvSpGgyhFiSZlpehpGPgOrOLJCOwv3gPOPYC8eqdJ/4mJH8DI6s8UAbH8kLLgOM7SaaVie587aWpKHRnu7/8HWSwWi8VisVgsFovFYrFYLBaLxWKxWCwWi8VisfQi/wNJPIrg+DUdaAAAAABJRU5ErkJggg==";/**
 * @remix-run/router v1.6.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mu(){return mu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},mu.apply(this,arguments)}var Ar;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ar||(Ar={}));const WE="popstate";function TO(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:a,hash:u}=i.location;return rv("",{pathname:s,search:a,hash:u},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:_d(r)}return kO(e,n,null,t)}function dt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function s_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AO(){return Math.random().toString(36).substr(2,8)}function HE(t,e){return{usr:t.state,key:t.key,idx:e}}function rv(t,e,n,i){return n===void 0&&(n=null),mu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ca(e):e,{state:n,key:e&&e.key||i||AO()})}function _d(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ca(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function kO(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,u=Ar.Pop,c=null,d=p();d==null&&(d=0,a.replaceState(mu({},a.state,{idx:d}),""));function p(){return(a.state||{idx:null}).idx}function g(){u=Ar.Pop;let k=p(),S=k==null?null:k-d;d=k,c&&c({action:u,location:C.location,delta:S})}function y(k,S){u=Ar.Push;let E=rv(C.location,k,S);n&&n(E,k),d=p()+1;let I=HE(E,d),R=C.createHref(E);try{a.pushState(I,"",R)}catch{r.location.assign(R)}s&&c&&c({action:u,location:C.location,delta:1})}function _(k,S){u=Ar.Replace;let E=rv(C.location,k,S);n&&n(E,k),d=p();let I=HE(E,d),R=C.createHref(E);a.replaceState(I,"",R),s&&c&&c({action:u,location:C.location,delta:0})}function x(k){let S=r.location.origin!=="null"?r.location.origin:r.location.href,E=typeof k=="string"?k:_d(k);return dt(S,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,S)}let C={get action(){return u},get location(){return t(r,a)},listen(k){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(WE,g),c=k,()=>{r.removeEventListener(WE,g),c=null}},createHref(k){return e(r,k)},createURL:x,encodeLocation(k){let S=x(k);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:y,replace:_,go(k){return a.go(k)}};return C}var GE;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(GE||(GE={}));function bO(t,e,n){n===void 0&&(n="/");let i=typeof e=="string"?Ca(e):e,r=o_(i.pathname||"/",n);if(r==null)return null;let s=qT(t);RO(s);let a=null;for(let u=0;a==null&&u<s.length;++u)a=FO(s[u],VO(r));return a}function qT(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,a,u)=>{let c={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(dt(c.relativePath.startsWith(i),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(i.length));let d=jr([i,c.relativePath]),p=n.concat(c);s.children&&s.children.length>0&&(dt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),qT(s.children,e,p,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:jO(d,s.index),routesMeta:p})};return t.forEach((s,a)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))r(s,a);else for(let c of KT(s.path))r(s,a,c)}),e}function KT(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=KT(i.join("/")),u=[];return u.push(...a.map(c=>c===""?s:[s,c].join("/"))),r&&u.push(...a),u.map(c=>t.startsWith("/")&&c===""?"/":c)}function RO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:BO(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const PO=/^:\w+$/,NO=3,LO=2,MO=1,DO=10,OO=-2,$E=t=>t==="*";function jO(t,e){let n=t.split("/"),i=n.length;return n.some($E)&&(i+=OO),e&&(i+=LO),n.filter(r=>!$E(r)).reduce((r,s)=>r+(PO.test(s)?NO:s===""?MO:DO),i)}function BO(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function FO(t,e){let{routesMeta:n}=t,i={},r="/",s=[];for(let a=0;a<n.length;++a){let u=n[a],c=a===n.length-1,d=r==="/"?e:e.slice(r.length)||"/",p=UO({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d);if(!p)return null;Object.assign(i,p.params);let g=u.route;s.push({params:i,pathname:jr([r,p.pathname]),pathnameBase:$O(jr([r,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(r=jr([r,p.pathnameBase]))}return s}function UO(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=zO(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),u=r.slice(1);return{params:i.reduce((d,p,g)=>{if(p==="*"){let y=u[g]||"";a=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}return d[p]=WO(u[g]||"",p),d},{}),pathname:s,pathnameBase:a,pattern:t}}function zO(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),s_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(a,u)=>(i.push(u),"/([^\\/]+)"));return t.endsWith("*")?(i.push("*"),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function VO(t){try{return decodeURI(t)}catch(e){return s_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function WO(t,e){try{return decodeURIComponent(t)}catch(n){return s_(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function o_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function HO(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Ca(t):t;return{pathname:n?n.startsWith("/")?n:GO(n,e):e,search:QO(i),hash:qO(r)}}function GO(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Rm(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function a_(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function l_(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Ca(t):(r=mu({},t),dt(!r.pathname||!r.pathname.includes("?"),Rm("?","pathname","search",r)),dt(!r.pathname||!r.pathname.includes("#"),Rm("#","pathname","hash",r)),dt(!r.search||!r.search.includes("#"),Rm("#","search","hash",r)));let s=t===""||r.pathname==="",a=s?"/":r.pathname,u;if(i||a==null)u=n;else{let g=e.length-1;if(a.startsWith("..")){let y=a.split("/");for(;y[0]==="..";)y.shift(),g-=1;r.pathname=y.join("/")}u=g>=0?e[g]:"/"}let c=HO(r,u),d=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||p)&&(c.pathname+="/"),c}const jr=t=>t.join("/").replace(/\/\/+/g,"/"),$O=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),QO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,qO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function KO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const YT=["post","put","patch","delete"];new Set(YT);const YO=["get",...YT];new Set(YO);/**
 * React Router v6.11.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wd(){return wd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},wd.apply(this,arguments)}const ZT=T.createContext(null),ZO=T.createContext(null),Ia=T.createContext(null),Tf=T.createContext(null),Ai=T.createContext({outlet:null,matches:[],isDataRoute:!1}),XT=T.createContext(null);function XO(t,e){let{relative:n}=e===void 0?{}:e;Ta()||dt(!1);let{basename:i,navigator:r}=T.useContext(Ia),{hash:s,pathname:a,search:u}=tA(t,{relative:n}),c=a;return i!=="/"&&(c=a==="/"?i:jr([i,a])),r.createHref({pathname:c,search:u,hash:s})}function Ta(){return T.useContext(Tf)!=null}function Ys(){return Ta()||dt(!1),T.useContext(Tf).location}function JT(t){T.useContext(Ia).static||T.useLayoutEffect(t)}function es(){let{isDataRoute:t}=T.useContext(Ai);return t?f2():JO()}function JO(){Ta()||dt(!1);let{basename:t,navigator:e}=T.useContext(Ia),{matches:n}=T.useContext(Ai),{pathname:i}=Ys(),r=JSON.stringify(a_(n).map(u=>u.pathnameBase)),s=T.useRef(!1);return JT(()=>{s.current=!0}),T.useCallback(function(u,c){if(c===void 0&&(c={}),!s.current)return;if(typeof u=="number"){e.go(u);return}let d=l_(u,JSON.parse(r),i,c.relative==="path");t!=="/"&&(d.pathname=d.pathname==="/"?t:jr([t,d.pathname])),(c.replace?e.replace:e.push)(d,c.state,c)},[t,e,r,i])}const e2=T.createContext(null);function t2(t){let e=T.useContext(Ai).outlet;return e&&T.createElement(e2.Provider,{value:t},e)}function eA(){let{matches:t}=T.useContext(Ai),e=t[t.length-1];return e?e.params:{}}function tA(t,e){let{relative:n}=e===void 0?{}:e,{matches:i}=T.useContext(Ai),{pathname:r}=Ys(),s=JSON.stringify(a_(i).map(a=>a.pathnameBase));return T.useMemo(()=>l_(t,JSON.parse(s),r,n==="path"),[t,s,r,n])}function n2(t,e){return i2(t,e)}function i2(t,e,n){Ta()||dt(!1);let{navigator:i}=T.useContext(Ia),{matches:r}=T.useContext(Ai),s=r[r.length-1],a=s?s.params:{};s&&s.pathname;let u=s?s.pathnameBase:"/";s&&s.route;let c=Ys(),d;if(e){var p;let C=typeof e=="string"?Ca(e):e;u==="/"||(p=C.pathname)!=null&&p.startsWith(u)||dt(!1),d=C}else d=c;let g=d.pathname||"/",y=u==="/"?g:g.slice(u.length)||"/",_=bO(t,{pathname:y}),x=l2(_&&_.map(C=>Object.assign({},C,{params:Object.assign({},a,C.params),pathname:jr([u,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?u:jr([u,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),r,n);return e&&x?T.createElement(Tf.Provider,{value:{location:wd({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ar.Pop}},x):x}function r2(){let t=d2(),e=KO(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),n?T.createElement("pre",{style:r},n):null,s)}const s2=T.createElement(r2,null);class o2 extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?T.createElement(Ai.Provider,{value:this.props.routeContext},T.createElement(XT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function a2(t){let{routeContext:e,match:n,children:i}=t,r=T.useContext(ZT);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),T.createElement(Ai.Provider,{value:e},i)}function l2(t,e,n){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var r;if((r=n)!=null&&r.errors)t=n.matches;else return null}let s=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=s.findIndex(c=>c.route.id&&(a==null?void 0:a[c.route.id]));u>=0||dt(!1),s=s.slice(0,Math.min(s.length,u+1))}return s.reduceRight((u,c,d)=>{let p=c.route.id?a==null?void 0:a[c.route.id]:null,g=null;n&&(g=c.route.errorElement||s2);let y=e.concat(s.slice(0,d+1)),_=()=>{let x;return p?x=g:c.route.Component?x=T.createElement(c.route.Component,null):c.route.element?x=c.route.element:x=u,T.createElement(a2,{match:c,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:x})};return n&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?T.createElement(o2,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:_(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):_()},null)}var sv;(function(t){t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate"})(sv||(sv={}));var gu;(function(t){t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId"})(gu||(gu={}));function u2(t){let e=T.useContext(ZT);return e||dt(!1),e}function c2(t){let e=T.useContext(ZO);return e||dt(!1),e}function h2(t){let e=T.useContext(Ai);return e||dt(!1),e}function nA(t){let e=h2(),n=e.matches[e.matches.length-1];return n.route.id||dt(!1),n.route.id}function d2(){var t;let e=T.useContext(XT),n=c2(gu.UseRouteError),i=nA(gu.UseRouteError);return e||((t=n.errors)==null?void 0:t[i])}function f2(){let{router:t}=u2(sv.UseNavigateStable),e=nA(gu.UseNavigateStable),n=T.useRef(!1);return JT(()=>{n.current=!0}),T.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,wd({fromRouteId:e},s)))},[t,e])}function iA(t){let{to:e,replace:n,state:i,relative:r}=t;Ta()||dt(!1);let{matches:s}=T.useContext(Ai),{pathname:a}=Ys(),u=es(),c=l_(e,a_(s).map(p=>p.pathnameBase),a,r==="path"),d=JSON.stringify(c);return T.useEffect(()=>u(JSON.parse(d),{replace:n,state:i,relative:r}),[u,d,r,n,i]),null}function u_(t){return t2(t.context)}function nt(t){dt(!1)}function p2(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Ar.Pop,navigator:s,static:a=!1}=t;Ta()&&dt(!1);let u=e.replace(/^\/*/,"/"),c=T.useMemo(()=>({basename:u,navigator:s,static:a}),[u,s,a]);typeof i=="string"&&(i=Ca(i));let{pathname:d="/",search:p="",hash:g="",state:y=null,key:_="default"}=i,x=T.useMemo(()=>{let C=o_(d,u);return C==null?null:{location:{pathname:C,search:p,hash:g,state:y,key:_},navigationType:r}},[u,d,p,g,y,_,r]);return x==null?null:T.createElement(Ia.Provider,{value:c},T.createElement(Tf.Provider,{children:n,value:x}))}function m2(t){let{children:e,location:n}=t;return n2(ov(e),n)}var QE;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(QE||(QE={}));new Promise(()=>{});function ov(t,e){e===void 0&&(e=[]);let n=[];return T.Children.forEach(t,(i,r)=>{if(!T.isValidElement(i))return;let s=[...e,r];if(i.type===T.Fragment){n.push.apply(n,ov(i.props.children,s));return}i.type!==nt&&dt(!1),!i.props.index||!i.props.children||dt(!1);let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=ov(i.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.11.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function av(){return av=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},av.apply(this,arguments)}function g2(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function v2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function y2(t,e){return t.button===0&&(!e||e==="_self")&&!v2(t)}const _2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function w2(t){let{basename:e,children:n,window:i}=t,r=T.useRef();r.current==null&&(r.current=TO({window:i,v5Compat:!0}));let s=r.current,[a,u]=T.useState({action:s.action,location:s.location});return T.useLayoutEffect(()=>s.listen(u),[s]),T.createElement(p2,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:s})}const x2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",E2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Aa=T.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:a,state:u,target:c,to:d,preventScrollReset:p}=e,g=g2(e,_2),{basename:y}=T.useContext(Ia),_,x=!1;if(typeof d=="string"&&E2.test(d)&&(_=d,x2))try{let E=new URL(window.location.href),I=d.startsWith("//")?new URL(E.protocol+d):new URL(d),R=o_(I.pathname,y);I.origin===E.origin&&R!=null?d=R+I.search+I.hash:x=!0}catch{}let C=XO(d,{relative:r}),k=S2(d,{replace:a,state:u,target:c,preventScrollReset:p,relative:r});function S(E){i&&i(E),E.defaultPrevented||k(E)}return T.createElement("a",av({},g,{href:_||C,onClick:x||s?i:S,ref:n,target:c}))});var qE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})(qE||(qE={}));var KE;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(KE||(KE={}));function S2(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:a}=e===void 0?{}:e,u=es(),c=Ys(),d=tA(t,{relative:a});return T.useCallback(p=>{if(y2(p,n)){p.preventDefault();let g=i!==void 0?i:_d(c)===_d(d);u(t,{replace:g,state:r,preventScrollReset:s,relative:a})}},[c,u,d,i,r,n,t,s,a])}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z=function(t,e){if(!t)throw ka(e)},ka=function(t){return new Error("Firebase Database ("+rA.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},C2=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],a=t[n++],u=t[n++],c=((r&7)<<18|(s&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},c_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],a=r+1<t.length,u=a?t[r+1]:0,c=r+2<t.length,d=c?t[r+2]:0,p=s>>2,g=(s&3)<<4|u>>4;let y=(u&15)<<2|d>>6,_=d&63;c||(_=64,a||(y=64)),i.push(n[p],n[g],n[y],n[_])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):C2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const d=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||u==null||d==null||g==null)throw new I2;const y=s<<2|u>>4;if(i.push(y),d!==64){const _=u<<4&240|d>>2;if(i.push(_),g!==64){const x=d<<6&192|g;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class I2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oA=function(t){const e=sA(t);return c_.encodeByteArray(e,!0)},xd=function(t){return oA(t).replace(/\./g,"")},Ed=function(t){try{return c_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(t){return aA(void 0,t)}function aA(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!A2(n)||(t[n]=aA(t[n],e[n]));return t}function A2(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=()=>k2().__FIREBASE_DEFAULTS__,R2=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},P2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ed(t[1]);return e&&JSON.parse(e)},Af=()=>{try{return b2()||R2()||P2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},lA=t=>{var e,n;return(n=(e=Af())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},h_=t=>{const e=lA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},N2=()=>{var t;return(t=Af())===null||t===void 0?void 0:t.config},uA=t=>{var e;return(e=Af())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),u="";return[xd(JSON.stringify(n)),xd(JSON.stringify(a)),u].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function f_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function L2(){var t;const e=(t=Af())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function M2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function D2(){const t=tn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hA(){return rA.NODE_ADMIN===!0}function O2(){try{return typeof indexedDB=="object"}catch{return!1}}function j2(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="FirebaseError";class ki extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=B2,Object.setPrototypeOf(this,ki.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qu.prototype.create)}}class Qu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?F2(s,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new ki(r,u,i)}}function F2(t,e){return t.replace(U2,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const U2=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(t){return JSON.parse(t)}function Rt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=function(t){let e={},n={},i={},r="";try{const s=t.split(".");e=vu(Ed(s[0])||""),n=vu(Ed(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:r}},z2=function(t){const e=dA(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},V2=function(t){const e=dA(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function aa(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function lv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Sd(t,e,n){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function Cd(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],a=e[r];if(YE(s)&&YE(a)){if(!Cd(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function YE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Il(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Tl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let g=0;g<16;g++)i[g]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let g=0;g<16;g++)i[g]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let g=16;g<80;g++){const y=i[g-3]^i[g-8]^i[g-14]^i[g-16];i[g]=(y<<1|y>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],a=this.chain_[2],u=this.chain_[3],c=this.chain_[4],d,p;for(let g=0;g<80;g++){g<40?g<20?(d=u^s&(a^u),p=1518500249):(d=s^a^u,p=1859775393):g<60?(d=s&a|u&(s|a),p=2400959708):(d=s^a^u,p=3395469782);const y=(r<<5|r>>>27)+d+c+p+i[g]&4294967295;c=u,u=a,a=(s<<30|s>>>2)&4294967295,s=r,r=y}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let r=0;const s=this.buf_;let a=this.inbuf_;for(;r<n;){if(a===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(s[a]=e.charCodeAt(r),++a,++r,a===this.blockSize){this.compress_(s),a=0;break}}else for(;r<n;)if(s[a]=e[r],++a,++r,a===this.blockSize){this.compress_(s),a=0;break}}this.inbuf_=a,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[i]=this.chain_[r]>>s&255,++i;return e}}function H2(t,e){const n=new G2(t,e);return n.subscribe.bind(n)}class G2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");$2(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Pm),r.error===void 0&&(r.error=Pm),r.complete===void 0&&(r.complete=Pm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Pm(){}function p_(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){const s=r-55296;i++,z(i<t.length,"Surrogate pair missing trail surrogate.");const a=t.charCodeAt(i)-56320;r=65536+(s<<10)+a}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},bf=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t){return t&&t._delegate?t._delegate:t}class Zi{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new kf;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Y2(e))try{this.getOrInitializeService({instanceIdentifier:ms})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=ms){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ms){return this.instances.has(e)}getOptions(e=ms){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);i===u&&a.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:K2(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ms){return this.component?this.component.multipleInstances?e:ms:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function K2(t){return t===ms?void 0:t}function Y2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new q2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Se||(Se={}));const X2={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},J2=Se.INFO,ej={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},tj=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=ej[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rf{constructor(e){this.name=e,this._logLevel=J2,this._logHandler=tj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?X2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}const nj=(t,e)=>e.some(n=>t instanceof n);let ZE,XE;function ij(){return ZE||(ZE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rj(){return XE||(XE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fA=new WeakMap,uv=new WeakMap,pA=new WeakMap,Nm=new WeakMap,m_=new WeakMap;function sj(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Br(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&fA.set(n,t)}).catch(()=>{}),m_.set(e,t),e}function oj(t){if(uv.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});uv.set(t,e)}let cv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return uv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||pA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Br(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function aj(t){cv=t(cv)}function lj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Lm(this),e,...n);return pA.set(i,e.sort?e.sort():[e]),Br(i)}:rj().includes(t)?function(...e){return t.apply(Lm(this),e),Br(fA.get(this))}:function(...e){return Br(t.apply(Lm(this),e))}}function uj(t){return typeof t=="function"?lj(t):(t instanceof IDBTransaction&&oj(t),nj(t,ij())?new Proxy(t,cv):t)}function Br(t){if(t instanceof IDBRequest)return sj(t);if(Nm.has(t))return Nm.get(t);const e=uj(t);return e!==t&&(Nm.set(t,e),m_.set(e,t)),e}const Lm=t=>m_.get(t);function cj(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(t,e),u=Br(a);return i&&a.addEventListener("upgradeneeded",c=>{i(Br(a.result),c.oldVersion,c.newVersion,Br(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const hj=["get","getKey","getAll","getAllKeys","count"],dj=["put","add","delete","clear"],Mm=new Map;function JE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Mm.get(e))return Mm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=dj.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||hj.includes(n)))return;const s=async function(a,...u){const c=this.transaction(a,r?"readwrite":"readonly");let d=c.store;return i&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),r&&c.done]))[0]};return Mm.set(e,s),s}aj(t=>({...t,get:(e,n,i)=>JE(e,n)||t.get(e,n,i),has:(e,n)=>!!JE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pj(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function pj(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hv="@firebase/app",eS="0.9.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new Rf("@firebase/app"),mj="@firebase/app-compat",gj="@firebase/analytics-compat",vj="@firebase/analytics",yj="@firebase/app-check-compat",_j="@firebase/app-check",wj="@firebase/auth",xj="@firebase/auth-compat",Ej="@firebase/database",Sj="@firebase/database-compat",Cj="@firebase/functions",Ij="@firebase/functions-compat",Tj="@firebase/installations",Aj="@firebase/installations-compat",kj="@firebase/messaging",bj="@firebase/messaging-compat",Rj="@firebase/performance",Pj="@firebase/performance-compat",Nj="@firebase/remote-config",Lj="@firebase/remote-config-compat",Mj="@firebase/storage",Dj="@firebase/storage-compat",Oj="@firebase/firestore",jj="@firebase/firestore-compat",Bj="firebase",Fj="9.21.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="[DEFAULT]",Uj={[hv]:"fire-core",[mj]:"fire-core-compat",[vj]:"fire-analytics",[gj]:"fire-analytics-compat",[_j]:"fire-app-check",[yj]:"fire-app-check-compat",[wj]:"fire-auth",[xj]:"fire-auth-compat",[Ej]:"fire-rtdb",[Sj]:"fire-rtdb-compat",[Cj]:"fire-fn",[Ij]:"fire-fn-compat",[Tj]:"fire-iid",[Aj]:"fire-iid-compat",[kj]:"fire-fcm",[bj]:"fire-fcm-compat",[Rj]:"fire-perf",[Pj]:"fire-perf-compat",[Nj]:"fire-rc",[Lj]:"fire-rc-compat",[Mj]:"fire-gcs",[Dj]:"fire-gcs-compat",[Oj]:"fire-fst",[jj]:"fire-fst-compat","fire-js":"fire-js",[Bj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id=new Map,fv=new Map;function zj(t,e){try{t.container.addComponent(e)}catch(n){js.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Gr(t){const e=t.name;if(fv.has(e))return js.debug(`There were multiple attempts to register component ${e}.`),!1;fv.set(e,t);for(const n of Id.values())zj(n,t);return!0}function qu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Fr=new Qu("app","Firebase",Vj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Zi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts=Fj;function mA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:dv,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Fr.create("bad-app-name",{appName:String(r)});if(n||(n=N2()),!n)throw Fr.create("no-options");const s=Id.get(r);if(s){if(Cd(n,s.options)&&Cd(i,s.config))return s;throw Fr.create("duplicate-app",{appName:r})}const a=new Z2(r);for(const c of fv.values())a.addComponent(c);const u=new Wj(n,i,a);return Id.set(r,u),u}function Pf(t=dv){const e=Id.get(t);if(!e&&t===dv)return mA();if(!e)throw Fr.create("no-app",{appName:t});return e}function Vn(t,e,n){var i;let r=(i=Uj[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const u=[`Unable to register library "${r}" with version "${e}":`];s&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),js.warn(u.join(" "));return}Gr(new Zi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj="firebase-heartbeat-database",Gj=1,yu="firebase-heartbeat-store";let Dm=null;function gA(){return Dm||(Dm=cj(Hj,Gj,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(yu)}}}).catch(t=>{throw Fr.create("idb-open",{originalErrorMessage:t.message})})),Dm}async function $j(t){try{return(await gA()).transaction(yu).objectStore(yu).get(vA(t))}catch(e){if(e instanceof ki)js.warn(e.message);else{const n=Fr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});js.warn(n.message)}}}async function tS(t,e){try{const i=(await gA()).transaction(yu,"readwrite");return await i.objectStore(yu).put(e,vA(t)),i.done}catch(n){if(n instanceof ki)js.warn(n.message);else{const i=Fr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});js.warn(i.message)}}}function vA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj=1024,qj=30*24*60*60*1e3;class Kj{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Zj(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=nS();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const s=new Date(r.date).valueOf();return Date.now()-s<=qj}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=nS(),{heartbeatsToSend:n,unsentEntries:i}=Yj(this._heartbeatsCache.heartbeats),r=xd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function nS(){return new Date().toISOString().substring(0,10)}function Yj(t,e=Qj){const n=[];let i=t.slice();for(const r of t){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),iS(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),iS(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Zj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return O2()?j2().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await $j(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return tS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return tS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function iS(t){return xd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(t){Gr(new Zi("platform-logger",e=>new fj(e),"PRIVATE")),Gr(new Zi("heartbeat",e=>new Kj(e),"PRIVATE")),Vn(hv,eS,t),Vn(hv,eS,"esm2017"),Vn("fire-js","")}Xj("");var Jj="firebase",eB="9.21.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vn(Jj,eB,"app");function g_(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function yA(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tB=yA,_A=new Qu("auth","Firebase",yA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td=new Rf("@firebase/auth");function nB(t,...e){Td.logLevel<=Se.WARN&&Td.warn(`Auth (${ts}): ${t}`,...e)}function zh(t,...e){Td.logLevel<=Se.ERROR&&Td.error(`Auth (${ts}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(t,...e){throw v_(t,...e)}function Si(t,...e){return v_(t,...e)}function iB(t,e,n){const i=Object.assign(Object.assign({},tB()),{[e]:n});return new Qu("auth","Firebase",i).create(e,{appName:t.name})}function v_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return _A.create(t,...e)}function ee(t,e,...n){if(!t)throw v_(e,...n)}function Bi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw zh(e),new Error(e)}function Xi(t,e){t||Bi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function rB(){return rS()==="http:"||rS()==="https:"}function rS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rB()||M2()||"connection"in navigator)?navigator.onLine:!0}function oB(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xi(n>e,"Short delay should be less than long delay!"),this.isMobile=f_()||cA()}get(){return sB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(t,e){Xi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lB=new Ku(3e4,6e4);function Zs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Xs(t,e,n,i,r={}){return xA(t,r,async()=>{let s={},a={};i&&(e==="GET"?a=i:s={body:JSON.stringify(i)});const u=ba(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),wA.fetch()(EA(t,t.config.apiHost,n,u),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},s))})}async function xA(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},aB),e);try{const r=new uB(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw oh(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const u=s.ok?a.errorMessage:a.error.message,[c,d]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw oh(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw oh(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw oh(t,"user-disabled",a);const p=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw iB(t,p,d);oi(t,p)}}catch(r){if(r instanceof ki)throw r;oi(t,"network-request-failed",{message:String(r)})}}async function Yu(t,e,n,i,r={}){const s=await Xs(t,e,n,i,r);return"mfaPendingCredential"in s&&oi(t,"multi-factor-auth-required",{_serverResponse:s}),s}function EA(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?y_(t.config,r):`${t.config.apiScheme}://${r}`}class uB{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Si(this.auth,"network-request-failed")),lB.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function oh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Si(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cB(t,e){return Xs(t,"POST","/v1/accounts:delete",e)}async function hB(t,e){return Xs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dB(t,e=!1){const n=Ne(t),i=await n.getIdToken(e),r=__(i);ee(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:zl(Om(r.auth_time)),issuedAtTime:zl(Om(r.iat)),expirationTime:zl(Om(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Om(t){return Number(t)*1e3}function __(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return zh("JWT malformed, contained fewer than 3 sections"),null;try{const r=Ed(n);return r?JSON.parse(r):(zh("Failed to decode base64 JWT payload"),null)}catch(r){return zh("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function fB(t){const e=__(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _u(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ki&&pB(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function pB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zl(this.lastLoginAt),this.creationTime=zl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ad(t){var e;const n=t.auth,i=await t.getIdToken(),r=await _u(t,hB(n,{idToken:i}));ee(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?yB(s.providerUserInfo):[],u=vB(t.providerData,a),c=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!(u!=null&&u.length),p=c?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new SA(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,g)}async function gB(t){const e=Ne(t);await Ad(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vB(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function yB(t){return t.map(e=>{var{providerId:n}=e,i=g_(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _B(t,e){const n=await xA(t,{},async()=>{const i=ba({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,a=EA(t,r,"/v1/token",`key=${s}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",wA.fetch()(a,{method:"POST",headers:u,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fB(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ee(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await _B(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new wu;return i&&(ee(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(ee(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(ee(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wu,this.toJSON())}_performRefresh(){return Bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ks{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=g_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new SA(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await _u(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return dB(this,e)}reload(){return gB(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ks(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Ad(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await _u(this,cB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,a,u,c,d,p;const g=(i=n.displayName)!==null&&i!==void 0?i:void 0,y=(r=n.email)!==null&&r!==void 0?r:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,x=(a=n.photoURL)!==null&&a!==void 0?a:void 0,C=(u=n.tenantId)!==null&&u!==void 0?u:void 0,k=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,S=(d=n.createdAt)!==null&&d!==void 0?d:void 0,E=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:I,emailVerified:R,isAnonymous:j,providerData:V,stsTokenManager:W}=n;ee(I&&W,e,"internal-error");const H=wu.fromJSON(this.name,W);ee(typeof I=="string",e,"internal-error"),fr(g,e.name),fr(y,e.name),ee(typeof R=="boolean",e,"internal-error"),ee(typeof j=="boolean",e,"internal-error"),fr(_,e.name),fr(x,e.name),fr(C,e.name),fr(k,e.name),fr(S,e.name),fr(E,e.name);const fe=new ks({uid:I,auth:e,email:y,emailVerified:R,displayName:g,isAnonymous:j,photoURL:x,phoneNumber:_,tenantId:C,stsTokenManager:H,createdAt:S,lastLoginAt:E});return V&&Array.isArray(V)&&(fe.providerData=V.map(te=>Object.assign({},te))),k&&(fe._redirectEventId=k),fe}static async _fromIdTokenResponse(e,n,i=!1){const r=new wu;r.updateFromServerResponse(n);const s=new ks({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Ad(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS=new Map;function Fi(t){Xi(t instanceof Function,"Expected a class definition");let e=sS.get(t);return e?(Xi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}CA.type="NONE";const oS=CA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(t,e,n){return`firebase:${t}:${e}:${n}`}class Wo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Vh(this.userKey,r.apiKey,s),this.fullPersistenceKey=Vh("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ks._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Wo(Fi(oS),e,i);const r=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=r[0]||Fi(oS);const a=Vh(i,e.config.apiKey,e.name);let u=null;for(const d of n)try{const p=await d._get(a);if(p){const g=ks._fromJSON(e,p);d!==s&&(u=g),s=d;break}}catch{}const c=r.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Wo(s,e,i):(s=c[0],u&&await s._set(a,u.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(a)}catch{}})),new Wo(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(IA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bA(e))return"Blackberry";if(RA(e))return"Webos";if(w_(e))return"Safari";if((e.includes("chrome/")||TA(e))&&!e.includes("edge/"))return"Chrome";if(kA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function IA(t=tn()){return/firefox\//i.test(t)}function w_(t=tn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TA(t=tn()){return/crios\//i.test(t)}function AA(t=tn()){return/iemobile/i.test(t)}function kA(t=tn()){return/android/i.test(t)}function bA(t=tn()){return/blackberry/i.test(t)}function RA(t=tn()){return/webos/i.test(t)}function Nf(t=tn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function wB(t=tn()){var e;return Nf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function xB(){return D2()&&document.documentMode===10}function PA(t=tn()){return Nf(t)||kA(t)||RA(t)||bA(t)||/windows phone/i.test(t)||AA(t)}function EB(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(t,e=[]){let n;switch(t){case"Browser":n=aS(tn());break;case"Worker":n=`${aS(tn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ts}/${i}`}async function LA(t,e){return Xs(t,"GET","/v2/recaptchaConfig",Zs(t,e))}function lS(t){return t!==void 0&&t.enterprise!==void 0}class MA{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function DA(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Si("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",SB().appendChild(i)})}function CB(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const IB="https://www.google.com/recaptcha/enterprise.js?render=",TB="recaptcha-enterprise",AB="NO_RECAPTCHA";class OA{constructor(e){this.type=TB,this.auth=Js(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,u)=>{LA(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const d=new MA(c);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,a(d.siteKey)}}).catch(c=>{u(c)})})}function r(s,a,u){const c=window.grecaptcha;lS(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(d=>{a(d)}).catch(()=>{a(AB)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{i(this.auth).then(u=>{if(!n&&lS(window.grecaptcha))r(u,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}DA(IB+u).then(()=>{r(u,s,a)}).catch(c=>{a(c)})}}).catch(u=>{a(u)})})}}async function la(t,e,n,i=!1){const r=new OA(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const a=Object.assign({},e);return i?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((a,u)=>{try{const c=e(s);a(c)}catch(c){u(c)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uS(this),this.idTokenSubscription=new uS(this),this.beforeStateQueue=new kB(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_A,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Fi(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Wo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===u)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ad(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Ne(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Fi(e))})}async initializeRecaptchaConfig(){const e=await LA(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new MA(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new OA(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Qu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Fi(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await Wo.create(this,[Fi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),a=this._isInitialized?Promise.resolve():this._initializationPromise;return ee(a,this,"internal-error"),a.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,i,r):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=NA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&nB(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Js(t){return Ne(t)}class uS{constructor(e){this.auth=e,this.observer=null,this.addObserver=H2(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RB(t,e){const n=qu(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Cd(s,e??{}))return r;oi(r,"already-initialized")}return n.initialize({options:e})}function PB(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Fi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function NB(t,e,n){const i=Js(t);ee(i._canInitEmulator,i,"emulator-config-failed"),ee(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),s=jA(e),{host:a,port:u}=LB(e),c=u===null?"":`:${u}`;i.config.emulator={url:`${s}//${a}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||MB()}function jA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function LB(t){const e=jA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:cS(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:cS(a)}}}function cS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function MB(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Bi("not implemented")}_getIdTokenResponse(e){return Bi("not implemented")}_linkToIdToken(e,n){return Bi("not implemented")}_getReauthenticationResolver(e){return Bi("not implemented")}}async function DB(t,e){return Xs(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jm(t,e){return Yu(t,"POST","/v1/accounts:signInWithPassword",Zs(t,e))}async function OB(t,e){return Xs(t,"POST","/v1/accounts:sendOobCode",Zs(t,e))}async function Bm(t,e){return OB(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jB(t,e){return Yu(t,"POST","/v1/accounts:signInWithEmailLink",Zs(t,e))}async function BB(t,e){return Yu(t,"POST","/v1/accounts:signInWithEmailLink",Zs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu extends x_{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new xu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new xu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const r=await la(e,i,"signInWithPassword");return jm(e,r)}else return jm(e,i).catch(async r=>{if(r.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const s=await la(e,i,"signInWithPassword");return jm(e,s)}else return Promise.reject(r)});case"emailLink":return jB(e,{email:this._email,oobCode:this._password});default:oi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return DB(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return BB(e,{idToken:n,email:this._email,oobCode:this._password});default:oi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ho(t,e){return Yu(t,"POST","/v1/accounts:signInWithIdp",Zs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FB="http://localhost";class Bs extends x_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Bs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):oi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=g_(n,["providerId","signInMethod"]);if(!i||!r)return null;const a=new Bs(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Ho(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ho(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ho(e,n)}buildRequest(){const e={requestUri:FB,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ba(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zB(t){const e=Il(Tl(t)).link,n=e?Il(Tl(e)).deep_link_id:null,i=Il(Tl(t)).deep_link_id;return(i?Il(Tl(i)).link:null)||i||n||e||t}class E_{constructor(e){var n,i,r,s,a,u;const c=Il(Tl(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,p=(i=c.oobCode)!==null&&i!==void 0?i:null,g=UB((r=c.mode)!==null&&r!==void 0?r:null);ee(d&&p&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=p,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=zB(e);try{return new E_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(){this.providerId=Ra.PROVIDER_ID}static credential(e,n){return xu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=E_.parseLink(n);return ee(i,"argument-error"),xu._fromEmailAndCode(e,i.code,i.tenantId)}}Ra.PROVIDER_ID="password";Ra.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ra.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu extends BA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends Zu{constructor(){super("facebook.com")}static credential(e){return Bs._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wr.credential(e.oauthAccessToken)}catch{return null}}}wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";wr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends Zu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Bs._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return xr.credential(n,i)}catch{return null}}}xr.GOOGLE_SIGN_IN_METHOD="google.com";xr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends Zu{constructor(){super("github.com")}static credential(e){return Bs._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Er.credential(e.oauthAccessToken)}catch{return null}}}Er.GITHUB_SIGN_IN_METHOD="github.com";Er.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends Zu{constructor(){super("twitter.com")}static credential(e,n){return Bs._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Sr.credential(n,i)}catch{return null}}}Sr.TWITTER_SIGN_IN_METHOD="twitter.com";Sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fm(t,e){return Yu(t,"POST","/v1/accounts:signUp",Zs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await ks._fromIdTokenResponse(e,i,r),a=hS(i);return new Fs({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=hS(i);return new Fs({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function hS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd extends ki{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,kd.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new kd(e,n,i,r)}}function FA(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?kd._fromErrorAndOperation(t,s,e,i):s})}async function VB(t,e,n=!1){const i=await _u(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Fs._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WB(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const s=await _u(t,FA(i,r,e,t),n);ee(s.idToken,i,"internal-error");const a=__(s.idToken);ee(a,i,"internal-error");const{sub:u}=a;return ee(t.uid===u,i,"user-mismatch"),Fs._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&oi(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UA(t,e,n=!1){const i="signIn",r=await FA(t,i,e),s=await Fs._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function HB(t,e){return UA(Js(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t,e,n){var i;ee(((i=n.url)===null||i===void 0?void 0:i.length)>0,t,"invalid-continue-uri"),ee(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ee(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(ee(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GB(t,e,n){var i;const r=Js(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};if(!((i=r._getRecaptchaConfig())===null||i===void 0)&&i.emailPasswordEnabled){const a=await la(r,s,"getOobCode",!0);n&&Um(r,a,n),await Bm(r,a)}else n&&Um(r,s,n),await Bm(r,s).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const u=await la(r,s,"getOobCode",!0);n&&Um(r,u,n),await Bm(r,u)}else return Promise.reject(a)})}async function $B(t,e,n){var i;const r=Js(t),s={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let a;if(!((i=r._getRecaptchaConfig())===null||i===void 0)&&i.emailPasswordEnabled){const d=await la(r,s,"signUpPassword");a=Fm(r,d)}else a=Fm(r,s).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const p=await la(r,s,"signUpPassword");return Fm(r,p)}else return Promise.reject(d)});const u=await a.catch(d=>Promise.reject(d)),c=await Fs._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(c.user),c}function QB(t,e,n){return HB(Ne(t),Ra.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qB(t,e){return Ne(t).setPersistence(e)}function KB(t,e,n,i){return Ne(t).onIdTokenChanged(e,n,i)}function YB(t,e,n){return Ne(t).beforeAuthStateChanged(e,n)}function ZB(t,e,n,i){return Ne(t).onAuthStateChanged(e,n,i)}function XB(t){return Ne(t).signOut()}const bd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bd,"1"),this.storage.removeItem(bd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JB(){const t=tn();return w_(t)||Nf(t)}const eF=1e3,tF=10;class VA extends zA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=JB()&&EB(),this.fallbackToPolling=PA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);xB()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,tF):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},eF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}VA.type="LOCAL";const nF=VA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA extends zA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}WA.type="SESSION";const S_=WA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Lf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async d=>d(n.origin,s)),c=await iF(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((u,c)=>{const d=C_("",20);r.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const y=g;if(y.data.eventId===d)switch(y.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(y.data.response);break;default:clearTimeout(p),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(){return window}function sF(t){Ci().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(){return typeof Ci().WorkerGlobalScope<"u"&&typeof Ci().importScripts=="function"}async function oF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function aF(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function lF(){return HA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA="firebaseLocalStorageDb",uF=1,Rd="firebaseLocalStorage",$A="fbase_key";class Xu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mf(t,e){return t.transaction([Rd],e?"readwrite":"readonly").objectStore(Rd)}function cF(){const t=indexedDB.deleteDatabase(GA);return new Xu(t).toPromise()}function mv(){const t=indexedDB.open(GA,uF);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Rd,{keyPath:$A})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Rd)?e(i):(i.close(),await cF(),e(await mv()))})})}async function dS(t,e,n){const i=Mf(t,!0).put({[$A]:e,value:n});return new Xu(i).toPromise()}async function hF(t,e){const n=Mf(t,!1).get(e),i=await new Xu(n).toPromise();return i===void 0?null:i.value}function fS(t,e){const n=Mf(t,!0).delete(e);return new Xu(n).toPromise()}const dF=800,fF=3;class QA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>fF)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return HA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lf._getInstance(lF()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await oF(),!this.activeServiceWorker)return;this.sender=new rF(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||aF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mv();return await dS(e,bd,"1"),await fS(e,bd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>dS(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>hF(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>fS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Mf(r,!1).getAll();return new Xu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}QA.type="LOCAL";const pF=QA;new Ku(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mF(t,e){return e?Fi(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_ extends x_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ho(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ho(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ho(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function gF(t){return UA(t.auth,new I_(t),t.bypassAuthState)}function vF(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),WB(n,new I_(t),t.bypassAuthState)}async function yF(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),VB(n,new I_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:u}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gF;case"linkViaPopup":case"linkViaRedirect":return yF;case"reauthViaPopup":case"reauthViaRedirect":return vF;default:oi(this.auth,"internal-error")}}resolve(e){Xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F=new Ku(2e3,1e4);class Mo extends qA{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Mo.currentPopupAction&&Mo.currentPopupAction.cancel(),Mo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){Xi(this.filter.length===1,"Popup operations only handle one event");const e=C_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Mo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_F.get())};e()}}Mo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF="pendingRedirect",Wh=new Map;class xF extends qA{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Wh.get(this.auth._key());if(!e){try{const i=await EF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Wh.set(this.auth._key(),e)}return this.bypassAuthState||Wh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function EF(t,e){const n=IF(e),i=CF(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function SF(t,e){Wh.set(t._key(),e)}function CF(t){return Fi(t._redirectPersistence)}function IF(t){return Vh(wF,t.config.apiKey,t.name)}async function TF(t,e,n=!1){const i=Js(t),r=mF(i,e),a=await new xF(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AF=10*60*1e3;class kF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!KA(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Si(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=AF&&this.cachedEventUids.clear(),this.cachedEventUids.has(pS(e))}saveEventToCache(e){this.cachedEventUids.add(pS(e)),this.lastProcessedEventTime=Date.now()}}function pS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function KA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RF(t,e={}){return Xs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NF=/^https?/;async function LF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await RF(t);for(const n of e)try{if(MF(n))return}catch{}oi(t,"unauthorized-domain")}function MF(t){const e=pv(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!NF.test(n))return!1;if(PF.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DF=new Ku(3e4,6e4);function mS(){const t=Ci().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function OF(t){return new Promise((e,n)=>{var i,r,s;function a(){mS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mS(),n(Si(t,"network-request-failed"))},timeout:DF.get()})}if(!((r=(i=Ci().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Ci().gapi)===null||s===void 0)&&s.load)a();else{const u=CB("iframefcb");return Ci()[u]=()=>{gapi.load?a():n(Si(t,"network-request-failed"))},DA(`https://apis.google.com/js/api.js?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw Hh=null,e})}let Hh=null;function jF(t){return Hh=Hh||OF(t),Hh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF=new Ku(5e3,15e3),FF="__/auth/iframe",UF="emulator/auth/iframe",zF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WF(t){const e=t.config;ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?y_(e,UF):`https://${t.config.authDomain}/${FF}`,i={apiKey:e.apiKey,appName:t.name,v:ts},r=VF.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${ba(i).slice(1)}`}async function HF(t){const e=await jF(t),n=Ci().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:WF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zF,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=Si(t,"network-request-failed"),u=Ci().setTimeout(()=>{s(a)},BF.get());function c(){Ci().clearTimeout(u),r(i)}i.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$F=500,QF=600,qF="_blank",KF="http://localhost";class gS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YF(t,e,n,i=$F,r=QF){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const c=Object.assign(Object.assign({},GF),{width:i.toString(),height:r.toString(),top:s,left:a}),d=tn().toLowerCase();n&&(u=TA(d)?qF:n),IA(d)&&(e=e||KF,c.scrollbars="yes");const p=Object.entries(c).reduce((y,[_,x])=>`${y}${_}=${x},`,"");if(wB(d)&&u!=="_self")return ZF(e||"",u),new gS(null);const g=window.open(e||"",u,p);ee(g,t,"popup-blocked");try{g.focus()}catch{}return new gS(g)}function ZF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF="__/auth/handler",JF="emulator/auth/handler",eU=encodeURIComponent("fac");async function vS(t,e,n,i,r,s){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ts,eventId:r};if(e instanceof BA){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",lv(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries(s||{}))a[p]=g}if(e instanceof Zu){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(a.scopes=p.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const c=await t._getAppCheckToken(),d=c?`#${eU}=${encodeURIComponent(c)}`:"";return`${tU(t)}?${ba(u).slice(1)}${d}`}function tU({config:t}){return t.emulator?y_(t,JF):`https://${t.authDomain}/${XF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="webStorageSupport";class nU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=S_,this._completeRedirectFn=TF,this._overrideRedirectResult=SF}async _openPopup(e,n,i,r){var s;Xi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await vS(e,n,i,pv(),r);return YF(e,a,C_())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await vS(e,n,i,pv(),r);return sF(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Xi(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await HF(e),i=new kF(e);return n.register("authEvent",r=>(ee(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(zm,{type:zm},r=>{var s;const a=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[zm];a!==void 0&&n(!!a),oi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=LF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return PA()||w_()||Nf()}}const iU=nU;var yS="@firebase/auth",_S="0.23.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function oU(t){Gr(new Zi("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;ee(a&&!a.includes(":"),"invalid-api-key",{appName:i.name}),ee(!(u!=null&&u.includes(":")),"argument-error",{appName:i.name});const c={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:NA(t)},d=new bB(i,r,s,c);return PB(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Gr(new Zi("auth-internal",e=>{const n=Js(e.getProvider("auth").getImmediate());return(i=>new rU(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vn(yS,_S,sU(t)),Vn(yS,_S,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aU=5*60,lU=uA("authIdTokenMaxAge")||aU;let wS=null;const uU=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>lU)return;const r=n==null?void 0:n.token;wS!==r&&(wS=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function cU(t=Pf()){const e=qu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=RB(t,{popupRedirectResolver:iU,persistence:[pF,nF,S_]}),i=uA("authTokenSyncURL");if(i){const s=uU(i);YB(n,s,()=>s(n.currentUser)),KB(n,a=>s(a))}const r=lA("auth");return r&&NB(n,`http://${r}`),n}oU("Browser");var hU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$,T_=T_||{},le=hU||self;function Pd(){}function Df(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Ju(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function dU(t){return Object.prototype.hasOwnProperty.call(t,Vm)&&t[Vm]||(t[Vm]=++fU)}var Vm="closure_uid_"+(1e9*Math.random()>>>0),fU=0;function pU(t,e,n){return t.call.apply(t.bind,arguments)}function mU(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function Zt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Zt=pU:Zt=mU,Zt.apply(null,arguments)}function ah(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function Lt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(i,r,s){for(var a=Array(arguments.length-2),u=2;u<arguments.length;u++)a[u-2]=arguments[u];return e.prototype[r].apply(i,a)}}function ns(){this.s=this.s,this.o=this.o}var gU=0;ns.prototype.s=!1;ns.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),gU!=0)&&dU(this)};ns.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const YA=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function A_(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function xS(t,e){for(let n=1;n<arguments.length;n++){const i=arguments[n];if(Df(i)){const r=t.length||0,s=i.length||0;t.length=r+s;for(let a=0;a<s;a++)t[r+a]=i[a]}else t.push(i)}}function Xt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Xt.prototype.h=function(){this.defaultPrevented=!0};var vU=function(){if(!le.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{le.addEventListener("test",Pd,e),le.removeEventListener("test",Pd,e)}catch{}return t}();function Nd(t){return/^[\s\xa0]*$/.test(t)}var ES=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Wm(t,e){return t<e?-1:t>e?1:0}function Of(){var t=le.navigator;return t&&(t=t.userAgent)?t:""}function yi(t){return Of().indexOf(t)!=-1}function k_(t){return k_[" "](t),t}k_[" "]=Pd;function ZA(t,e,n){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:t[e]=n(e)}var yU=yi("Opera"),ua=yi("Trident")||yi("MSIE"),XA=yi("Edge"),gv=XA||ua,JA=yi("Gecko")&&!(Of().toLowerCase().indexOf("webkit")!=-1&&!yi("Edge"))&&!(yi("Trident")||yi("MSIE"))&&!yi("Edge"),_U=Of().toLowerCase().indexOf("webkit")!=-1&&!yi("Edge");function ek(){var t=le.document;return t?t.documentMode:void 0}var Ld;e:{var Hm="",Gm=function(){var t=Of();if(JA)return/rv:([^\);]+)(\)|;)/.exec(t);if(XA)return/Edge\/([\d\.]+)/.exec(t);if(ua)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(_U)return/WebKit\/(\S+)/.exec(t);if(yU)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Gm&&(Hm=Gm?Gm[1]:""),ua){var $m=ek();if($m!=null&&$m>parseFloat(Hm)){Ld=String($m);break e}}Ld=Hm}var wU={};function xU(){return ZA(wU,9,function(){let t=0;const e=ES(String(Ld)).split("."),n=ES("9").split("."),i=Math.max(e.length,n.length);for(let a=0;t==0&&a<i;a++){var r=e[a]||"",s=n[a]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],r[0].length==0&&s[0].length==0)break;t=Wm(r[1].length==0?0:parseInt(r[1],10),s[1].length==0?0:parseInt(s[1],10))||Wm(r[2].length==0,s[2].length==0)||Wm(r[2],s[2]),r=r[3],s=s[3]}while(t==0)}return 0<=t})}var vv;if(le.document&&ua){var SS=ek();vv=SS||parseInt(Ld,10)||void 0}else vv=void 0;var EU=vv;function Eu(t,e){if(Xt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(JA){e:{try{k_(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:SU[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Eu.$.h.call(this)}}Lt(Eu,Xt);var SU={2:"touch",3:"pen",4:"mouse"};Eu.prototype.h=function(){Eu.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ec="closure_listenable_"+(1e6*Math.random()|0),CU=0;function IU(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++CU,this.fa=this.ia=!1}function jf(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function b_(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function tk(t){const e={};for(const n in t)e[n]=t[n];return e}const CS="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nk(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let s=0;s<CS.length;s++)n=CS[s],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Bf(t){this.src=t,this.g={},this.h=0}Bf.prototype.add=function(t,e,n,i,r){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var a=_v(t,e,i,r);return-1<a?(e=t[a],n||(e.ia=!1)):(e=new IU(e,this.src,s,!!i,r),e.ia=n,t.push(e)),e};function yv(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=YA(i,e),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(jf(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function _v(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}var R_="closure_lm_"+(1e6*Math.random()|0),Qm={};function ik(t,e,n,i,r){if(i&&i.once)return sk(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)ik(t,e[s],n,i,r);return null}return n=L_(n),t&&t[ec]?t.O(e,n,Ju(i)?!!i.capture:!!i,r):rk(t,e,n,!1,i,r)}function rk(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var a=Ju(r)?!!r.capture:!!r,u=N_(t);if(u||(t[R_]=u=new Bf(t)),n=u.add(e,n,i,a,s),n.proxy)return n;if(i=TU(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)vU||(r=a),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(ak(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function TU(){function t(n){return e.call(t.src,t.listener,n)}const e=AU;return t}function sk(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)sk(t,e[s],n,i,r);return null}return n=L_(n),t&&t[ec]?t.P(e,n,Ju(i)?!!i.capture:!!i,r):rk(t,e,n,!0,i,r)}function ok(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)ok(t,e[s],n,i,r);else i=Ju(i)?!!i.capture:!!i,n=L_(n),t&&t[ec]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=_v(s,n,i,r),-1<n&&(jf(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=N_(t))&&(e=t.g[e.toString()],t=-1,e&&(t=_v(e,n,i,r)),(n=-1<t?e[t]:null)&&P_(n))}function P_(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[ec])yv(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(ak(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=N_(e))?(yv(n,t),n.h==0&&(n.src=null,e[R_]=null)):jf(t)}}}function ak(t){return t in Qm?Qm[t]:Qm[t]="on"+t}function AU(t,e){if(t.fa)t=!0;else{e=new Eu(e,this);var n=t.listener,i=t.la||t.src;t.ia&&P_(t),t=n.call(i,e)}return t}function N_(t){return t=t[R_],t instanceof Bf?t:null}var qm="__closure_events_fn_"+(1e9*Math.random()>>>0);function L_(t){return typeof t=="function"?t:(t[qm]||(t[qm]=function(e){return t.handleEvent(e)}),t[qm])}function Nt(){ns.call(this),this.i=new Bf(this),this.S=this,this.J=null}Lt(Nt,ns);Nt.prototype[ec]=!0;Nt.prototype.removeEventListener=function(t,e,n,i){ok(this,t,e,n,i)};function zt(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,typeof e=="string")e=new Xt(e,t);else if(e instanceof Xt)e.target=e.target||t;else{var r=e;e=new Xt(i,t),nk(e,r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var a=e.g=n[s];r=lh(a,i,!0,e)&&r}if(a=e.g=t,r=lh(a,i,!0,e)&&r,r=lh(a,i,!1,e)&&r,n)for(s=0;s<n.length;s++)a=e.g=n[s],r=lh(a,i,!1,e)&&r}Nt.prototype.N=function(){if(Nt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)jf(n[i]);delete t.g[e],t.h--}}this.J=null};Nt.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};Nt.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function lh(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var a=e[s];if(a&&!a.fa&&a.capture==n){var u=a.listener,c=a.la||a.src;a.ia&&yv(t.i,a),r=u.call(c,i)!==!1&&r}}return r&&!i.defaultPrevented}var M_=le.JSON.stringify;function kU(){var t=ck;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class bU{constructor(){this.h=this.g=null}add(e,n){const i=lk.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}}var lk=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new RU,t=>t.reset());class RU{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function PU(t){le.setTimeout(()=>{throw t},0)}function uk(t,e){wv||NU(),xv||(wv(),xv=!0),ck.add(t,e)}var wv;function NU(){var t=le.Promise.resolve(void 0);wv=function(){t.then(LU)}}var xv=!1,ck=new bU;function LU(){for(var t;t=kU();){try{t.h.call(t.g)}catch(n){PU(n)}var e=lk;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}xv=!1}function Ff(t,e){Nt.call(this),this.h=t||1,this.g=e||le,this.j=Zt(this.qb,this),this.l=Date.now()}Lt(Ff,Nt);$=Ff.prototype;$.ga=!1;$.T=null;$.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),zt(this,"tick"),this.ga&&(D_(this),this.start()))}};$.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function D_(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}$.N=function(){Ff.$.N.call(this),D_(this),delete this.g};function O_(t,e,n){if(typeof t=="function")n&&(t=Zt(t,n));else if(t&&typeof t.handleEvent=="function")t=Zt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:le.setTimeout(t,e||0)}function hk(t){t.g=O_(()=>{t.g=null,t.i&&(t.i=!1,hk(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class MU extends ns{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:hk(this)}N(){super.N(),this.g&&(le.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Su(t){ns.call(this),this.h=t,this.g={}}Lt(Su,ns);var IS=[];function dk(t,e,n,i){Array.isArray(n)||(n&&(IS[0]=n.toString()),n=IS);for(var r=0;r<n.length;r++){var s=ik(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function fk(t){b_(t.g,function(e,n){this.g.hasOwnProperty(n)&&P_(e)},t),t.g={}}Su.prototype.N=function(){Su.$.N.call(this),fk(this)};Su.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Uf(){this.g=!0}Uf.prototype.Ea=function(){this.g=!1};function DU(t,e,n,i,r,s){t.info(function(){if(t.g)if(s)for(var a="",u=s.split("&"),c=0;c<u.length;c++){var d=u[c].split("=");if(1<d.length){var p=d[0];d=d[1];var g=p.split("_");a=2<=g.length&&g[1]=="type"?a+(p+"="+d+"&"):a+(p+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+a})}function OU(t,e,n,i,r,s,a){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+s+" "+a})}function Do(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+BU(t,n)+(i?" "+i:"")})}function jU(t,e){t.info(function(){return"TIMEOUT: "+e})}Uf.prototype.info=function(){};function BU(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var a=1;a<r.length;a++)r[a]=""}}}}return M_(n)}catch{return e}}var eo={},TS=null;function zf(){return TS=TS||new Nt}eo.Ta="serverreachability";function pk(t){Xt.call(this,eo.Ta,t)}Lt(pk,Xt);function Cu(t){const e=zf();zt(e,new pk(e))}eo.STAT_EVENT="statevent";function mk(t,e){Xt.call(this,eo.STAT_EVENT,t),this.stat=e}Lt(mk,Xt);function on(t){const e=zf();zt(e,new mk(e,t))}eo.Ua="timingevent";function gk(t,e){Xt.call(this,eo.Ua,t),this.size=e}Lt(gk,Xt);function tc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return le.setTimeout(function(){t()},e)}var Vf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},vk={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function j_(){}j_.prototype.h=null;function AS(t){return t.h||(t.h=t.i())}function yk(){}var nc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function B_(){Xt.call(this,"d")}Lt(B_,Xt);function F_(){Xt.call(this,"c")}Lt(F_,Xt);var Ev;function Wf(){}Lt(Wf,j_);Wf.prototype.g=function(){return new XMLHttpRequest};Wf.prototype.i=function(){return{}};Ev=new Wf;function ic(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new Su(this),this.P=FU,t=gv?125:void 0,this.V=new Ff(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new _k}function _k(){this.i=null,this.g="",this.h=!1}var FU=45e3,Sv={},Md={};$=ic.prototype;$.setTimeout=function(t){this.P=t};function Cv(t,e,n){t.L=1,t.v=Gf(Ji(e)),t.s=n,t.S=!0,wk(t,null)}function wk(t,e){t.G=Date.now(),rc(t),t.A=Ji(t.v);var n=t.A,i=t.W;Array.isArray(i)||(i=[String(i)]),kk(n.i,"t",i),t.C=0,n=t.l.I,t.h=new _k,t.g=Kk(t.l,n?e:null,!t.s),0<t.O&&(t.M=new MU(Zt(t.Pa,t,t.g),t.O)),dk(t.U,t.g,"readystatechange",t.nb),e=t.I?tk(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Cu(),DU(t.j,t.u,t.A,t.m,t.W,t.s)}$.nb=function(t){t=t.target;const e=this.M;e&&Ui(t)==3?e.l():this.Pa(t)};$.Pa=function(t){try{if(t==this.g)e:{const p=Ui(this.g);var e=this.g.Ia();const g=this.g.da();if(!(3>p)&&(p!=3||gv||this.g&&(this.h.h||this.g.ja()||PS(this.g)))){this.J||p!=4||e==7||(e==8||0>=g?Cu(3):Cu(2)),Hf(this);var n=this.g.da();this.aa=n;t:if(xk(this)){var i=PS(this.g);t="";var r=i.length,s=Ui(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ws(this),Vl(this);var a="";break t}this.h.i=new le.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.ja();if(this.i=n==200,OU(this.j,this.u,this.A,this.m,this.W,p,n),this.i){if(this.ba&&!this.K){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Nd(u)){var d=u;break t}}d=null}if(n=d)Do(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Iv(this,n);else{this.i=!1,this.o=3,on(12),ws(this),Vl(this);break e}}this.S?(Ek(this,p,a),gv&&this.i&&p==3&&(dk(this.U,this.V,"tick",this.mb),this.V.start())):(Do(this.j,this.m,a,null),Iv(this,a)),p==4&&ws(this),this.i&&!this.J&&(p==4?Gk(this.l,this):(this.i=!1,rc(this)))}else n==400&&0<a.indexOf("Unknown SID")?(this.o=3,on(12)):(this.o=0,on(13)),ws(this),Vl(this)}}}catch{}finally{}};function xk(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function Ek(t,e,n){let i=!0,r;for(;!t.J&&t.C<n.length;)if(r=UU(t,n),r==Md){e==4&&(t.o=4,on(14),i=!1),Do(t.j,t.m,null,"[Incomplete Response]");break}else if(r==Sv){t.o=4,on(15),Do(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else Do(t.j,t.m,r,null),Iv(t,r);xk(t)&&r!=Md&&r!=Sv&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,on(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ca&&(t.ca=!0,e=t.l,e.g==t&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),$_(e),e.L=!0,on(11))):(Do(t.j,t.m,n,"[Invalid Chunked Response]"),ws(t),Vl(t))}$.mb=function(){if(this.g){var t=Ui(this.g),e=this.g.ja();this.C<e.length&&(Hf(this),Ek(this,t,e),this.i&&t!=4&&rc(this))}};function UU(t,e){var n=t.C,i=e.indexOf(`
`,n);return i==-1?Md:(n=Number(e.substring(n,i)),isNaN(n)?Sv:(i+=1,i+n>e.length?Md:(e=e.substr(i,n),t.C=i+n,e)))}$.cancel=function(){this.J=!0,ws(this)};function rc(t){t.Y=Date.now()+t.P,Sk(t,t.P)}function Sk(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=tc(Zt(t.lb,t),e)}function Hf(t){t.B&&(le.clearTimeout(t.B),t.B=null)}$.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(jU(this.j,this.A),this.L!=2&&(Cu(),on(17)),ws(this),this.o=2,Vl(this)):Sk(this,this.Y-t)};function Vl(t){t.l.H==0||t.J||Gk(t.l,t)}function ws(t){Hf(t);var e=t.M;e&&typeof e.ra=="function"&&e.ra(),t.M=null,D_(t.V),fk(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.ra())}function Iv(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Tv(n.h,t))){if(!t.K&&Tv(n.h,t)&&n.H==3){try{var i=n.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)jd(n),qf(n);else break e;G_(n),on(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.M&&n.A==0&&!n.v&&(n.v=tc(Zt(n.ib,n),6e3));if(1>=Pk(n.h)&&n.na){try{n.na()}catch{}n.na=void 0}}else xs(n,11)}else if((t.K||n.g==t)&&jd(n),!Nd(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let d=r[e];if(n.V=d[0],d=d[1],n.H==2)if(d[0]=="c"){n.J=d[1],n.oa=d[2];const p=d[3];p!=null&&(n.qa=p,n.j.info("VER="+n.qa));const g=d[4];g!=null&&(n.Ga=g,n.j.info("SVER="+n.Ga));const y=d[5];y!=null&&typeof y=="number"&&0<y&&(i=1.5*y,n.K=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const _=t.g;if(_){const x=_.g?_.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(x){var s=i.h;s.g||x.indexOf("spdy")==-1&&x.indexOf("quic")==-1&&x.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(U_(s,s.h),s.h=null))}if(i.F){const C=_.g?_.g.getResponseHeader("X-HTTP-Session-Id"):null;C&&(i.Da=C,Ye(i.G,i.F,C))}}n.H=3,n.l&&n.l.Ba(),n.ca&&(n.S=Date.now()-t.G,n.j.info("Handshake RTT: "+n.S+"ms")),i=n;var a=t;if(i.wa=qk(i,i.I?i.oa:null,i.Y),a.K){Nk(i.h,a);var u=a,c=i.K;c&&u.setTimeout(c),u.B&&(Hf(u),rc(u)),i.g=a}else Wk(i);0<n.i.length&&Kf(n)}else d[0]!="stop"&&d[0]!="close"||xs(n,7);else n.H==3&&(d[0]=="stop"||d[0]=="close"?d[0]=="stop"?xs(n,7):H_(n):d[0]!="noop"&&n.l&&n.l.Aa(d),n.A=0)}}Cu(4)}catch{}}function zU(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Df(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function VU(t){if(t.sa&&typeof t.sa=="function")return t.sa();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Df(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}function Ck(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Df(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=VU(t),i=zU(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}var Ik=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function WU(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function bs(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof bs){this.h=e!==void 0?e:t.h,Dd(this,t.j),this.s=t.s,this.g=t.g,Od(this,t.m),this.l=t.l,e=t.i;var n=new Iu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),kS(this,n),this.o=t.o}else t&&(n=String(t).match(Ik))?(this.h=!!e,Dd(this,n[1]||"",!0),this.s=Al(n[2]||""),this.g=Al(n[3]||"",!0),Od(this,n[4]),this.l=Al(n[5]||"",!0),kS(this,n[6]||"",!0),this.o=Al(n[7]||"")):(this.h=!!e,this.i=new Iu(null,this.h))}bs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(kl(e,bS,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(kl(e,bS,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(kl(n,n.charAt(0)=="/"?$U:GU,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",kl(n,qU)),t.join("")};function Ji(t){return new bs(t)}function Dd(t,e,n){t.j=n?Al(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Od(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function kS(t,e,n){e instanceof Iu?(t.i=e,KU(t.i,t.h)):(n||(e=kl(e,QU)),t.i=new Iu(e,t.h))}function Ye(t,e,n){t.i.set(e,n)}function Gf(t){return Ye(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Al(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function kl(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,HU),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function HU(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var bS=/[#\/\?@]/g,GU=/[#\?:]/g,$U=/[#\?]/g,QU=/[#\?@]/g,qU=/#/g;function Iu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function is(t){t.g||(t.g=new Map,t.h=0,t.i&&WU(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}$=Iu.prototype;$.add=function(t,e){is(this),this.i=null,t=Pa(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Tk(t,e){is(t),e=Pa(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Ak(t,e){return is(t),e=Pa(t,e),t.g.has(e)}$.forEach=function(t,e){is(this),this.g.forEach(function(n,i){n.forEach(function(r){t.call(e,r,i,this)},this)},this)};$.sa=function(){is(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let s=0;s<r.length;s++)n.push(e[i])}return n};$.Z=function(t){is(this);let e=[];if(typeof t=="string")Ak(this,t)&&(e=e.concat(this.g.get(Pa(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};$.set=function(t,e){return is(this),this.i=null,t=Pa(this,t),Ak(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};$.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function kk(t,e,n){Tk(t,e),0<n.length&&(t.i=null,t.g.set(Pa(t,e),A_(n)),t.h+=n.length)}$.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),a=this.Z(i);for(i=0;i<a.length;i++){var r=s;a[i]!==""&&(r+="="+encodeURIComponent(String(a[i]))),t.push(r)}}return this.i=t.join("&")};function Pa(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function KU(t,e){e&&!t.j&&(is(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(Tk(this,i),kk(this,r,n))},t)),t.j=e}var YU=class{constructor(t,e){this.h=t,this.g=e}};function bk(t){this.l=t||ZU,le.PerformanceNavigationTiming?(t=le.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(le.g&&le.g.Ka&&le.g.Ka()&&le.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ZU=10;function Rk(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Pk(t){return t.h?1:t.g?t.g.size:0}function Tv(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function U_(t,e){t.g?t.g.add(e):t.h=e}function Nk(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}bk.prototype.cancel=function(){if(this.i=Lk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Lk(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return A_(t.i)}function z_(){}z_.prototype.stringify=function(t){return le.JSON.stringify(t,void 0)};z_.prototype.parse=function(t){return le.JSON.parse(t,void 0)};function XU(){this.g=new z_}function JU(t,e,n){const i=n||"";try{Ck(t,function(r,s){let a=r;Ju(r)&&(a=M_(r)),e.push(i+s+"="+encodeURIComponent(a))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function e4(t,e){const n=new Uf;if(le.Image){const i=new Image;i.onload=ah(uh,n,i,"TestLoadImage: loaded",!0,e),i.onerror=ah(uh,n,i,"TestLoadImage: error",!1,e),i.onabort=ah(uh,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=ah(uh,n,i,"TestLoadImage: timeout",!1,e),le.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function uh(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function sc(t){this.l=t.fc||null,this.j=t.ob||!1}Lt(sc,j_);sc.prototype.g=function(){return new $f(this.l,this.j)};sc.prototype.i=function(t){return function(){return t}}({});function $f(t,e){Nt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=V_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Lt($f,Nt);var V_=0;$=$f.prototype;$.open=function(t,e){if(this.readyState!=V_)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Tu(this)};$.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||le).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};$.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oc(this)),this.readyState=V_};$.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Tu(this)),this.g&&(this.readyState=3,Tu(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof le.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Mk(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function Mk(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}$.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?oc(this):Tu(this),this.readyState==3&&Mk(this)}};$.Za=function(t){this.g&&(this.response=this.responseText=t,oc(this))};$.Ya=function(t){this.g&&(this.response=t,oc(this))};$.ka=function(){this.g&&oc(this)};function oc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Tu(t)}$.setRequestHeader=function(t,e){this.v.append(t,e)};$.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};$.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Tu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty($f.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var t4=le.JSON.parse;function ot(t){Nt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Dk,this.L=this.M=!1}Lt(ot,Nt);var Dk="",n4=/^https?$/i,i4=["POST","PUT"];$=ot.prototype;$.Oa=function(t){this.M=t};$.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ev.g(),this.C=this.u?AS(this.u):AS(Ev),this.g.onreadystatechange=Zt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){RS(this,s);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const s of i.keys())n.set(s,i.get(s));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),r=le.FormData&&t instanceof le.FormData,!(0<=YA(i4,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Bk(this),0<this.B&&((this.L=r4(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Zt(this.ua,this)):this.A=O_(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){RS(this,s)}};function r4(t){return ua&&xU()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}$.ua=function(){typeof T_<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,zt(this,"timeout"),this.abort(8))};function RS(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Ok(t),Qf(t)}function Ok(t){t.F||(t.F=!0,zt(t,"complete"),zt(t,"error"))}$.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,zt(this,"complete"),zt(this,"abort"),Qf(this))};$.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Qf(this,!0)),ot.$.N.call(this)};$.La=function(){this.s||(this.G||this.v||this.l?jk(this):this.kb())};$.kb=function(){jk(this)};function jk(t){if(t.h&&typeof T_<"u"&&(!t.C[1]||Ui(t)!=4||t.da()!=2)){if(t.v&&Ui(t)==4)O_(t.La,0,t);else if(zt(t,"readystatechange"),Ui(t)==4){t.h=!1;try{const u=t.da();e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=u===0){var r=String(t.I).match(Ik)[1]||null;if(!r&&le.self&&le.self.location){var s=le.self.location.protocol;r=s.substr(0,s.length-1)}i=!n4.test(r?r.toLowerCase():"")}n=i}if(n)zt(t,"complete"),zt(t,"success");else{t.m=6;try{var a=2<Ui(t)?t.g.statusText:""}catch{a=""}t.j=a+" ["+t.da()+"]",Ok(t)}}finally{Qf(t)}}}}function Qf(t,e){if(t.g){Bk(t);const n=t.g,i=t.C[0]?Pd:null;t.g=null,t.C=null,e||zt(t,"ready");try{n.onreadystatechange=i}catch{}}}function Bk(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(le.clearTimeout(t.A),t.A=null)}function Ui(t){return t.g?t.g.readyState:0}$.da=function(){try{return 2<Ui(this)?this.g.status:-1}catch{return-1}};$.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};$.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),t4(e)}};function PS(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Dk:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}$.Ia=function(){return this.m};$.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Fk(t){let e="";return b_(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function W_(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=Fk(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ye(t,e,n))}function dl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Uk(t){this.Ga=0,this.i=[],this.j=new Uf,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=dl("failFast",!1,t),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=dl("baseRetryDelayMs",5e3,t),this.hb=dl("retryDelaySeedMs",1e4,t),this.eb=dl("forwardChannelMaxRetries",2,t),this.xa=dl("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.K=void 0,this.I=t&&t.supportsCrossDomainXhr||!1,this.J="",this.h=new bk(t&&t.concurrentRequestLimit),this.Ja=new XU,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.j.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}$=Uk.prototype;$.qa=8;$.H=1;function H_(t){if(zk(t),t.H==3){var e=t.W++,n=Ji(t.G);Ye(n,"SID",t.J),Ye(n,"RID",e),Ye(n,"TYPE","terminate"),ac(t,n),e=new ic(t,t.j,e,void 0),e.L=2,e.v=Gf(Ji(n)),n=!1,le.navigator&&le.navigator.sendBeacon&&(n=le.navigator.sendBeacon(e.v.toString(),"")),!n&&le.Image&&(new Image().src=e.v,n=!0),n||(e.g=Kk(e.l,null),e.g.ha(e.v)),e.G=Date.now(),rc(e)}Qk(t)}function qf(t){t.g&&($_(t),t.g.cancel(),t.g=null)}function zk(t){qf(t),t.u&&(le.clearTimeout(t.u),t.u=null),jd(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&le.clearTimeout(t.m),t.m=null)}function Kf(t){Rk(t.h)||t.m||(t.m=!0,uk(t.Na,t),t.C=0)}function s4(t,e){return Pk(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.F.concat(t.i),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=tc(Zt(t.Na,t,e),$k(t,t.C)),t.C++,!0)}$.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new ic(this,this.j,t,void 0);let s=this.s;if(this.U&&(s?(s=tk(s),nk(s,this.U)):s=this.U),this.o!==null||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var i=this.i[n];if("__data__"in i.g&&(i=i.g.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Vk(this,r,e),n=Ji(this.G),Ye(n,"RID",t),Ye(n,"CVER",22),this.F&&Ye(n,"X-HTTP-Session-Id",this.F),ac(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Fk(s)))+"&"+e:this.o&&W_(n,this.o,s)),U_(this.h,r),this.bb&&Ye(n,"TYPE","init"),this.P?(Ye(n,"$req",e),Ye(n,"SID","null"),r.ba=!0,Cv(r,n,null)):Cv(r,n,e),this.H=2}}else this.H==3&&(t?NS(this,t):this.i.length==0||Rk(this.h)||NS(this))};function NS(t,e){var n;e?n=e.m:n=t.W++;const i=Ji(t.G);Ye(i,"SID",t.J),Ye(i,"RID",n),Ye(i,"AID",t.V),ac(t,i),t.o&&t.s&&W_(i,t.o,t.s),n=new ic(t,t.j,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.i=e.F.concat(t.i)),e=Vk(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),U_(t.h,n),Cv(n,i,e)}function ac(t,e){t.ma&&b_(t.ma,function(n,i){Ye(e,i,n)}),t.l&&Ck({},function(n,i){Ye(e,i,n)})}function Vk(t,e,n){n=Math.min(t.i.length,n);var i=t.l?Zt(t.l.Va,t.l,t):null;e:{var r=t.i;let s=-1;for(;;){const a=["count="+n];s==-1?0<n?(s=r[0].h,a.push("ofs="+s)):s=0:a.push("ofs="+s);let u=!0;for(let c=0;c<n;c++){let d=r[c].h;const p=r[c].g;if(d-=s,0>d)s=Math.max(0,r[c].h-100),u=!1;else try{JU(p,a,"req"+d+"_")}catch{i&&i(p)}}if(u){i=a.join("&");break e}}}return t=t.i.splice(0,n),e.F=t,i}function Wk(t){t.g||t.u||(t.ba=1,uk(t.Ma,t),t.A=0)}function G_(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=tc(Zt(t.Ma,t),$k(t,t.A)),t.A++,!0)}$.Ma=function(){if(this.u=null,Hk(this),this.ca&&!(this.L||this.g==null||0>=this.S)){var t=2*this.S;this.j.info("BP detection timer enabled: "+t),this.B=tc(Zt(this.jb,this),t)}};$.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,on(10),qf(this),Hk(this))};function $_(t){t.B!=null&&(le.clearTimeout(t.B),t.B=null)}function Hk(t){t.g=new ic(t,t.j,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Ji(t.wa);Ye(e,"RID","rpc"),Ye(e,"SID",t.J),Ye(e,"CI",t.M?"0":"1"),Ye(e,"AID",t.V),Ye(e,"TYPE","xmlhttp"),ac(t,e),t.o&&t.s&&W_(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.oa,n.L=1,n.v=Gf(Ji(e)),n.s=null,n.S=!0,wk(n,t)}$.ib=function(){this.v!=null&&(this.v=null,qf(this),G_(this),on(19))};function jd(t){t.v!=null&&(le.clearTimeout(t.v),t.v=null)}function Gk(t,e){var n=null;if(t.g==e){jd(t),$_(t),t.g=null;var i=2}else if(Tv(t.h,e))n=e.F,Nk(t.h,e),i=1;else return;if(t.H!=0){if(t.ta=e.aa,e.i)if(i==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var r=t.C;i=zf(),zt(i,new gk(i,n)),Kf(t)}else Wk(t);else if(r=e.o,r==3||r==0&&0<t.ta||!(i==1&&s4(t,e)||i==2&&G_(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),r){case 1:xs(t,5);break;case 4:xs(t,10);break;case 3:xs(t,6);break;default:xs(t,2)}}}function $k(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.l||(n*=2),n*e}function xs(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var i=Zt(t.pb,t);n||(n=new bs("//www.google.com/images/cleardot.gif"),le.location&&le.location.protocol=="http"||Dd(n,"https"),Gf(n)),e4(n.toString(),i)}else on(2);t.H=0,t.l&&t.l.za(e),Qk(t),zk(t)}$.pb=function(t){t?(this.j.info("Successfully pinged google.com"),on(2)):(this.j.info("Failed to ping google.com"),on(1))};function Qk(t){if(t.H=0,t.pa=[],t.l){const e=Lk(t.h);(e.length!=0||t.i.length!=0)&&(xS(t.pa,e),xS(t.pa,t.i),t.h.i.length=0,A_(t.i),t.i.length=0),t.l.ya()}}function qk(t,e,n){var i=n instanceof bs?Ji(n):new bs(n,void 0);if(i.g!="")e&&(i.g=e+"."+i.g),Od(i,i.m);else{var r=le.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new bs(null,void 0);i&&Dd(s,i),e&&(s.g=e),r&&Od(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&Ye(i,n,e),Ye(i,"VER",t.qa),ac(t,i),i}function Kk(t,e,n){if(e&&!t.I)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new ot(new sc({ob:!0})):new ot(t.va),e.Oa(t.I),e}function Yk(){}$=Yk.prototype;$.Ba=function(){};$.Aa=function(){};$.za=function(){};$.ya=function(){};$.Va=function(){};function Bd(){if(ua&&!(10<=Number(EU)))throw Error("Environmental error: no available transport.")}Bd.prototype.g=function(t,e){return new bn(t,e)};function bn(t,e){Nt.call(this),this.g=new Uk(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Nd(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Nd(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Na(this)}Lt(bn,Nt);bn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var t=this.g,e=this.l,n=this.h||void 0;on(0),t.Y=e,t.ma=n||{},t.M=t.aa,t.G=qk(t,null,t.Y),Kf(t)};bn.prototype.close=function(){H_(this.g)};bn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=M_(t),t=n);e.i.push(new YU(e.fb++,t)),e.H==3&&Kf(e)};bn.prototype.N=function(){this.g.l=null,delete this.j,H_(this.g),delete this.g,bn.$.N.call(this)};function Zk(t){B_.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Lt(Zk,B_);function Xk(){F_.call(this),this.status=1}Lt(Xk,F_);function Na(t){this.g=t}Lt(Na,Yk);Na.prototype.Ba=function(){zt(this.g,"a")};Na.prototype.Aa=function(t){zt(this.g,new Zk(t))};Na.prototype.za=function(t){zt(this.g,new Xk)};Na.prototype.ya=function(){zt(this.g,"b")};function o4(){this.blockSize=-1}function ai(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Lt(ai,o4);ai.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Km(t,e,n){n||(n=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],a=e+(s^n&(r^s))+i[0]+3614090360&4294967295;e=n+(a<<7&4294967295|a>>>25),a=s+(r^e&(n^r))+i[1]+3905402710&4294967295,s=e+(a<<12&4294967295|a>>>20),a=r+(n^s&(e^n))+i[2]+606105819&4294967295,r=s+(a<<17&4294967295|a>>>15),a=n+(e^r&(s^e))+i[3]+3250441966&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(s^n&(r^s))+i[4]+4118548399&4294967295,e=n+(a<<7&4294967295|a>>>25),a=s+(r^e&(n^r))+i[5]+1200080426&4294967295,s=e+(a<<12&4294967295|a>>>20),a=r+(n^s&(e^n))+i[6]+2821735955&4294967295,r=s+(a<<17&4294967295|a>>>15),a=n+(e^r&(s^e))+i[7]+4249261313&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(s^n&(r^s))+i[8]+1770035416&4294967295,e=n+(a<<7&4294967295|a>>>25),a=s+(r^e&(n^r))+i[9]+2336552879&4294967295,s=e+(a<<12&4294967295|a>>>20),a=r+(n^s&(e^n))+i[10]+4294925233&4294967295,r=s+(a<<17&4294967295|a>>>15),a=n+(e^r&(s^e))+i[11]+2304563134&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(s^n&(r^s))+i[12]+1804603682&4294967295,e=n+(a<<7&4294967295|a>>>25),a=s+(r^e&(n^r))+i[13]+4254626195&4294967295,s=e+(a<<12&4294967295|a>>>20),a=r+(n^s&(e^n))+i[14]+2792965006&4294967295,r=s+(a<<17&4294967295|a>>>15),a=n+(e^r&(s^e))+i[15]+1236535329&4294967295,n=r+(a<<22&4294967295|a>>>10),a=e+(r^s&(n^r))+i[1]+4129170786&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^r&(e^n))+i[6]+3225465664&4294967295,s=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(s^e))+i[11]+643717713&4294967295,r=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(r^s))+i[0]+3921069994&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(r^s&(n^r))+i[5]+3593408605&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^r&(e^n))+i[10]+38016083&4294967295,s=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(s^e))+i[15]+3634488961&4294967295,r=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(r^s))+i[4]+3889429448&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(r^s&(n^r))+i[9]+568446438&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^r&(e^n))+i[14]+3275163606&4294967295,s=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(s^e))+i[3]+4107603335&4294967295,r=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(r^s))+i[8]+1163531501&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(r^s&(n^r))+i[13]+2850285829&4294967295,e=n+(a<<5&4294967295|a>>>27),a=s+(n^r&(e^n))+i[2]+4243563512&4294967295,s=e+(a<<9&4294967295|a>>>23),a=r+(e^n&(s^e))+i[7]+1735328473&4294967295,r=s+(a<<14&4294967295|a>>>18),a=n+(s^e&(r^s))+i[12]+2368359562&4294967295,n=r+(a<<20&4294967295|a>>>12),a=e+(n^r^s)+i[5]+4294588738&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^r)+i[8]+2272392833&4294967295,s=e+(a<<11&4294967295|a>>>21),a=r+(s^e^n)+i[11]+1839030562&4294967295,r=s+(a<<16&4294967295|a>>>16),a=n+(r^s^e)+i[14]+4259657740&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(n^r^s)+i[1]+2763975236&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^r)+i[4]+1272893353&4294967295,s=e+(a<<11&4294967295|a>>>21),a=r+(s^e^n)+i[7]+4139469664&4294967295,r=s+(a<<16&4294967295|a>>>16),a=n+(r^s^e)+i[10]+3200236656&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(n^r^s)+i[13]+681279174&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^r)+i[0]+3936430074&4294967295,s=e+(a<<11&4294967295|a>>>21),a=r+(s^e^n)+i[3]+3572445317&4294967295,r=s+(a<<16&4294967295|a>>>16),a=n+(r^s^e)+i[6]+76029189&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(n^r^s)+i[9]+3654602809&4294967295,e=n+(a<<4&4294967295|a>>>28),a=s+(e^n^r)+i[12]+3873151461&4294967295,s=e+(a<<11&4294967295|a>>>21),a=r+(s^e^n)+i[15]+530742520&4294967295,r=s+(a<<16&4294967295|a>>>16),a=n+(r^s^e)+i[2]+3299628645&4294967295,n=r+(a<<23&4294967295|a>>>9),a=e+(r^(n|~s))+i[0]+4096336452&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~r))+i[7]+1126891415&4294967295,s=e+(a<<10&4294967295|a>>>22),a=r+(e^(s|~n))+i[14]+2878612391&4294967295,r=s+(a<<15&4294967295|a>>>17),a=n+(s^(r|~e))+i[5]+4237533241&4294967295,n=r+(a<<21&4294967295|a>>>11),a=e+(r^(n|~s))+i[12]+1700485571&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~r))+i[3]+2399980690&4294967295,s=e+(a<<10&4294967295|a>>>22),a=r+(e^(s|~n))+i[10]+4293915773&4294967295,r=s+(a<<15&4294967295|a>>>17),a=n+(s^(r|~e))+i[1]+2240044497&4294967295,n=r+(a<<21&4294967295|a>>>11),a=e+(r^(n|~s))+i[8]+1873313359&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~r))+i[15]+4264355552&4294967295,s=e+(a<<10&4294967295|a>>>22),a=r+(e^(s|~n))+i[6]+2734768916&4294967295,r=s+(a<<15&4294967295|a>>>17),a=n+(s^(r|~e))+i[13]+1309151649&4294967295,n=r+(a<<21&4294967295|a>>>11),a=e+(r^(n|~s))+i[4]+4149444226&4294967295,e=n+(a<<6&4294967295|a>>>26),a=s+(n^(e|~r))+i[11]+3174756917&4294967295,s=e+(a<<10&4294967295|a>>>22),a=r+(e^(s|~n))+i[2]+718787259&4294967295,r=s+(a<<15&4294967295|a>>>17),a=n+(s^(r|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(a<<21&4294967295|a>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}ai.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(r==0)for(;s<=n;)Km(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){Km(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){Km(this,i),r=0;break}}this.h=r,this.i+=e};ai.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};function Re(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=t[r]|0;i&&s==e||(n[r]=s,i=!1)}this.g=n}var a4={};function Q_(t){return-128<=t&&128>t?ZA(a4,t,function(e){return new Re([e|0],0>e?-1:0)}):new Re([t|0],0>t?-1:0)}function _i(t){if(isNaN(t)||!isFinite(t))return Go;if(0>t)return Bt(_i(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=Av;return new Re(e,0)}function Jk(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Bt(Jk(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=_i(Math.pow(e,8)),i=Go,r=0;r<t.length;r+=8){var s=Math.min(8,t.length-r),a=parseInt(t.substring(r,r+s),e);8>s?(s=_i(Math.pow(e,s)),i=i.R(s).add(_i(a))):(i=i.R(n),i=i.add(_i(a)))}return i}var Av=4294967296,Go=Q_(0),kv=Q_(1),LS=Q_(16777216);$=Re.prototype;$.ea=function(){if(Fn(this))return-Bt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:Av+i)*e,e*=Av}return t};$.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(zi(this))return"0";if(Fn(this))return"-"+Bt(this).toString(t);for(var e=_i(Math.pow(t,6)),n=this,i="";;){var r=Ud(n,e).g;n=Fd(n,r.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,zi(n))return s+i;for(;6>s.length;)s="0"+s;i=s+i}};$.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function zi(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Fn(t){return t.h==-1}$.X=function(t){return t=Fd(this,t),Fn(t)?-1:zi(t)?0:1};function Bt(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new Re(n,~t.h).add(kv)}$.abs=function(){return Fn(this)?Bt(this):this};$.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(this.D(r)&65535)+(t.D(r)&65535),a=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=a>>>16,s&=65535,a&=65535,n[r]=a<<16|s}return new Re(n,n[n.length-1]&-2147483648?-1:0)};function Fd(t,e){return t.add(Bt(e))}$.R=function(t){if(zi(this)||zi(t))return Go;if(Fn(this))return Fn(t)?Bt(this).R(Bt(t)):Bt(Bt(this).R(t));if(Fn(t))return Bt(this.R(Bt(t)));if(0>this.X(LS)&&0>t.X(LS))return _i(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,a=this.D(i)&65535,u=t.D(r)>>>16,c=t.D(r)&65535;n[2*i+2*r]+=a*c,ch(n,2*i+2*r),n[2*i+2*r+1]+=s*c,ch(n,2*i+2*r+1),n[2*i+2*r+1]+=a*u,ch(n,2*i+2*r+1),n[2*i+2*r+2]+=s*u,ch(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new Re(n,0)};function ch(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function fl(t,e){this.g=t,this.h=e}function Ud(t,e){if(zi(e))throw Error("division by zero");if(zi(t))return new fl(Go,Go);if(Fn(t))return e=Ud(Bt(t),e),new fl(Bt(e.g),Bt(e.h));if(Fn(e))return e=Ud(t,Bt(e)),new fl(Bt(e.g),e.h);if(30<t.g.length){if(Fn(t)||Fn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=kv,i=e;0>=i.X(t);)n=MS(n),i=MS(i);var r=vo(n,1),s=vo(i,1);for(i=vo(i,2),n=vo(n,2);!zi(i);){var a=s.add(i);0>=a.X(t)&&(r=r.add(n),s=a),i=vo(i,1),n=vo(n,1)}return e=Fd(t,r.R(e)),new fl(r,e)}for(r=Go;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),s=_i(n),a=s.R(e);Fn(a)||0<a.X(t);)n-=i,s=_i(n),a=s.R(e);zi(s)&&(s=kv),r=r.add(s),t=Fd(t,a)}return new fl(r,t)}$.gb=function(t){return Ud(this,t).h};$.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new Re(n,this.h&t.h)};$.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new Re(n,this.h|t.h)};$.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new Re(n,this.h^t.h)};function MS(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new Re(n,t.h)}function vo(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Re(r,t.h)}Bd.prototype.createWebChannel=Bd.prototype.g;bn.prototype.send=bn.prototype.u;bn.prototype.open=bn.prototype.m;bn.prototype.close=bn.prototype.close;Vf.NO_ERROR=0;Vf.TIMEOUT=8;Vf.HTTP_ERROR=6;vk.COMPLETE="complete";yk.EventType=nc;nc.OPEN="a";nc.CLOSE="b";nc.ERROR="c";nc.MESSAGE="d";Nt.prototype.listen=Nt.prototype.O;ot.prototype.listenOnce=ot.prototype.P;ot.prototype.getLastError=ot.prototype.Sa;ot.prototype.getLastErrorCode=ot.prototype.Ia;ot.prototype.getStatus=ot.prototype.da;ot.prototype.getResponseJson=ot.prototype.Wa;ot.prototype.getResponseText=ot.prototype.ja;ot.prototype.send=ot.prototype.ha;ot.prototype.setWithCredentials=ot.prototype.Oa;ai.prototype.digest=ai.prototype.l;ai.prototype.reset=ai.prototype.reset;ai.prototype.update=ai.prototype.j;Re.prototype.add=Re.prototype.add;Re.prototype.multiply=Re.prototype.R;Re.prototype.modulo=Re.prototype.gb;Re.prototype.compare=Re.prototype.X;Re.prototype.toNumber=Re.prototype.ea;Re.prototype.toString=Re.prototype.toString;Re.prototype.getBits=Re.prototype.D;Re.fromNumber=_i;Re.fromString=Jk;var l4=function(){return new Bd},u4=function(){return zf()},Ym=Vf,c4=vk,h4=eo,DS={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},d4=sc,hh=yk,f4=ot,p4=ai,$o=Re;const OS="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let La="9.21.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=new Rf("@firebase/firestore");function jS(){return Us.logLevel}function K(t,...e){if(Us.logLevel<=Se.DEBUG){const n=e.map(q_);Us.debug(`Firestore (${La}): ${t}`,...n)}}function er(t,...e){if(Us.logLevel<=Se.ERROR){const n=e.map(q_);Us.error(`Firestore (${La}): ${t}`,...n)}}function ca(t,...e){if(Us.logLevel<=Se.WARN){const n=e.map(q_);Us.warn(`Firestore (${La}): ${t}`,...n)}}function q_(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${La}) INTERNAL ASSERTION FAILED: `+t;throw er(e),new Error(e)}function qe(t,e){t||oe()}function he(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends ki{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class m4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n($t.UNAUTHENTICATED))}shutdown(){}}class g4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class v4{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let s=new Hi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Hi,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},u=c=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Hi)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(qe(typeof i.accessToken=="string"),new eb(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string"),new $t(e)}}class y4{constructor(e,n,i){this.h=e,this.l=n,this.m=i,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class _4{constructor(e,n,i){this.h=e,this.l=n,this.m=i}getToken(){return Promise.resolve(new y4(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n($t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class w4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class x4{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const i=s=>{s.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.T;return this.T=s.token,K("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?r(s):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(qe(typeof n.token=="string"),this.T=n.token,new w4(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=E4(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function Ae(t,e){return t<e?-1:t>e?1:0}function ha(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return It.fromMillis(Date.now())}static fromDate(e){return It.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new It(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ue(e)}static min(){return new ue(new It(0,0))}static max(){return new ue(new It(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,n,i){n===void 0?n=0:n>e.length&&oe(),i===void 0?i=e.length-n:i>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Au.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Au?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),a=n.get(r);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class $e extends Au{construct(e,n,i){return new $e(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new q(D.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new $e(n)}static emptyPath(){return new $e([])}}const S4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends Au{construct(e,n,i){return new Yt(e,n,i)}static isValidIdentifier(e){return S4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Yt(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new q(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new q(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new q(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(s(),r++)}if(s(),a)throw new q(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yt(n)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z($e.fromString(e))}static fromName(e){return new Z($e.fromString(e).popFirst(5))}static empty(){return new Z($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return $e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new $e(e.slice()))}}function C4(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ue.fromTimestamp(i===1e9?new It(n+1,0):new It(n,i));return new $r(r,Z.empty(),e)}function I4(t){return new $r(t.readTime,t.key,-1)}class $r{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new $r(ue.min(),Z.empty(),-1)}static max(){return new $r(ue.max(),Z.empty(),-1)}}function T4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:Ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class k4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lc(t){if(t.code!==D.FAILED_PRECONDITION||t.message!==A4)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,i)=>{n(e)})}static reject(e){return new U((n,i)=>{i(e)})}static waitFor(e){return new U((n,i)=>{let r=0,s=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++s,a&&s===r&&n()},c=>i(c))}),a=!0,s===r&&n()})}static or(e){let n=U.resolve(!1);for(const i of e)n=n.next(r=>r?U.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new U((i,r)=>{const s=e.length,a=new Array(s);let u=0;for(let c=0;c<s;c++){const d=c;n(e[d]).next(p=>{a[d]=p,++u,u===s&&i(a)},p=>r(p))}})}static doWhile(e,n){return new U((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function uc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>n.writeSequenceNumber(i))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}K_.ct=-1;function Yf(t){return t==null}function zd(t){return t===0&&1/t==-1/0}function b4(t){return typeof t=="number"&&Number.isInteger(t)&&!zd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function to(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n){this.comparator=e,this.root=n||jt.EMPTY}insert(e,n){return new tt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,jt.BLACK,null,null))}remove(e){return new tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dh(this.root,e,this.comparator,!1)}getReverseIterator(){return new dh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dh(this.root,e,this.comparator,!0)}}class dh{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??jt.RED,this.left=r??jt.EMPTY,this.right=s??jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new jt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return jt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1;jt.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(t,e,n,i,r){return this}insert(t,e,n){return new jt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new FS(this.data.getIterator())}getIteratorFrom(e){return new FS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Jt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Jt(this.comparator);return n.data=e,n}}class FS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new In([])}unionWith(e){let n=new Jt(Yt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new In(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ha(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new ib("Invalid base64 string: "+r):r}}(e);return new nn(n)}static fromUint8Array(e){const n=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(e);return new nn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const R4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qr(t){if(qe(!!t),typeof t=="string"){let e=0;const n=R4.exec(t);if(qe(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:gt(t.seconds),nanos:gt(t.nanos)}}function gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zs(t){return typeof t=="string"?nn.fromBase64String(t):nn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Z_(t){const e=t.mapValue.fields.__previous_value__;return Y_(e)?Z_(e):e}function ku(t){const e=Qr(t.mapValue.fields.__local_write_time__.timestampValue);return new It(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e,n,i,r,s,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.useFetchStreams=c}}class bu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new bu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof bu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Vs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Y_(t)?4:N4(t)?9007199254740991:10:oe()}function Ti(t,e){if(t===e)return!0;const n=Vs(t);if(n!==Vs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ku(t).isEqual(ku(e));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Qr(i.timestampValue),a=Qr(r.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,r){return zs(i.bytesValue).isEqual(zs(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,r){return gt(i.geoPointValue.latitude)===gt(r.geoPointValue.latitude)&&gt(i.geoPointValue.longitude)===gt(r.geoPointValue.longitude)}(t,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return gt(i.integerValue)===gt(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=gt(i.doubleValue),a=gt(r.doubleValue);return s===a?zd(s)===zd(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return ha(t.arrayValue.values||[],e.arrayValue.values||[],Ti);case 10:return function(i,r){const s=i.mapValue.fields||{},a=r.mapValue.fields||{};if(BS(s)!==BS(a))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Ti(s[u],a[u])))return!1;return!0}(t,e);default:return oe()}}function Ru(t,e){return(t.values||[]).find(n=>Ti(n,e))!==void 0}function da(t,e){if(t===e)return 0;const n=Vs(t),i=Vs(e);if(n!==i)return Ae(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(t.booleanValue,e.booleanValue);case 2:return function(r,s){const a=gt(r.integerValue||r.doubleValue),u=gt(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return US(t.timestampValue,e.timestampValue);case 4:return US(ku(t),ku(e));case 5:return Ae(t.stringValue,e.stringValue);case 6:return function(r,s){const a=zs(r),u=zs(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(r,s){const a=r.split("/"),u=s.split("/");for(let c=0;c<a.length&&c<u.length;c++){const d=Ae(a[c],u[c]);if(d!==0)return d}return Ae(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,s){const a=Ae(gt(r.latitude),gt(s.latitude));return a!==0?a:Ae(gt(r.longitude),gt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(r,s){const a=r.values||[],u=s.values||[];for(let c=0;c<a.length&&c<u.length;++c){const d=da(a[c],u[c]);if(d)return d}return Ae(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(r,s){if(r===fh.mapValue&&s===fh.mapValue)return 0;if(r===fh.mapValue)return 1;if(s===fh.mapValue)return-1;const a=r.fields||{},u=Object.keys(a),c=s.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let p=0;p<u.length&&p<d.length;++p){const g=Ae(u[p],d[p]);if(g!==0)return g;const y=da(a[u[p]],c[d[p]]);if(y!==0)return y}return Ae(u.length,d.length)}(t.mapValue,e.mapValue);default:throw oe()}}function US(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ae(t,e);const n=Qr(t),i=Qr(e),r=Ae(n.seconds,i.seconds);return r!==0?r:Ae(n.nanos,i.nanos)}function fa(t){return bv(t)}function bv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(i){const r=Qr(i);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?zs(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Z.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(i){let r="[",s=!0;for(const a of i.values||[])s?s=!1:r+=",",r+=bv(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",a=!0;for(const u of r)a?a=!1:s+=",",s+=`${u}:${bv(i.fields[u])}`;return s+"}"}(t.mapValue):oe();var e,n}function zS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Rv(t){return!!t&&"integerValue"in t}function X_(t){return!!t&&"arrayValue"in t}function VS(t){return!!t&&"nullValue"in t}function WS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gh(t){return!!t&&"mapValue"in t}function Wl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return to(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Wl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Wl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function N4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.value=e}static empty(){return new fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Gh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wl(n)}setAll(e){let n=Yt.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=Wl(a):r.push(u.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Gh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ti(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Gh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){to(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new fn(Wl(this.value))}}function rb(t){const e=[];return to(t.fields,(n,i)=>{const r=new Yt([n]);if(Gh(i)){const s=rb(i.mapValue).fields;if(s.length===0)e.push(r);else for(const a of s)e.push(r.child(a))}else e.push(r)}),new In(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,n,i,r,s,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=u}static newInvalidDocument(e){return new qt(e,0,ue.min(),ue.min(),ue.min(),fn.empty(),0)}static newFoundDocument(e,n,i,r){return new qt(e,1,n,ue.min(),i,r,0)}static newNoDocument(e,n){return new qt(e,2,n,ue.min(),ue.min(),fn.empty(),0)}static newUnknownDocument(e,n){return new qt(e,3,n,ue.min(),ue.min(),fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,n){this.position=e,this.inclusive=n}}function HS(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],a=t.position[r];if(s.field.isKeyField()?i=Z.comparator(Z.fromName(a.referenceValue),n.key):i=da(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function GS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ti(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n="asc"){this.field=e,this.dir=n}}function L4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{}class yt extends sb{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new D4(e,n,i):n==="array-contains"?new B4(e,i):n==="in"?new F4(e,i):n==="not-in"?new U4(e,i):n==="array-contains-any"?new z4(e,i):new yt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new O4(e,i):new j4(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(da(n,this.value)):n!==null&&Vs(this.value)===Vs(n)&&this.matchesComparison(da(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class li extends sb{constructor(e,n){super(),this.filters=e,this.op=n,this.ht=null}static create(e,n){return new li(e,n)}matches(e){return ob(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ht!==null||(this.ht=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(n=>n.isInequality());return e!==null?e.field:null}lt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function ob(t){return t.op==="and"}function ab(t){return M4(t)&&ob(t)}function M4(t){for(const e of t.filters)if(e instanceof li)return!1;return!0}function Pv(t){if(t instanceof yt)return t.field.canonicalString()+t.op.toString()+fa(t.value);if(ab(t))return t.filters.map(e=>Pv(e)).join(",");{const e=t.filters.map(n=>Pv(n)).join(",");return`${t.op}(${e})`}}function lb(t,e){return t instanceof yt?function(n,i){return i instanceof yt&&n.op===i.op&&n.field.isEqual(i.field)&&Ti(n.value,i.value)}(t,e):t instanceof li?function(n,i){return i instanceof li&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((r,s,a)=>r&&lb(s,i.filters[a]),!0):!1}(t,e):void oe()}function ub(t){return t instanceof yt?function(e){return`${e.field.canonicalString()} ${e.op} ${fa(e.value)}`}(t):t instanceof li?function(e){return e.op.toString()+" {"+e.getFilters().map(ub).join(" ,")+"}"}(t):"Filter"}class D4 extends yt{constructor(e,n,i){super(e,n,i),this.key=Z.fromName(i.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class O4 extends yt{constructor(e,n){super(e,"in",n),this.keys=cb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class j4 extends yt{constructor(e,n){super(e,"not-in",n),this.keys=cb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function cb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Z.fromName(i.referenceValue))}class B4 extends yt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return X_(n)&&Ru(n.arrayValue,this.value)}}class F4 extends yt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ru(this.value.arrayValue,n)}}class U4 extends yt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ru(this.value.arrayValue,n)}}class z4 extends yt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!X_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ru(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,n=null,i=[],r=[],s=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=u,this.ft=null}}function $S(t,e=null,n=[],i=[],r=null,s=null,a=null){return new V4(t,e,n,i,r,s,a)}function J_(t){const e=he(t);if(e.ft===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Pv(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),Yf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>fa(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>fa(i)).join(",")),e.ft=n}return e.ft}function ew(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!L4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!lb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!GS(t.startAt,e.startAt)&&GS(t.endAt,e.endAt)}function Nv(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,n=null,i=[],r=[],s=null,a="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=u,this.endAt=c,this.dt=null,this._t=null,this.startAt,this.endAt}}function W4(t,e,n,i,r,s,a,u){return new cc(t,e,n,i,r,s,a,u)}function tw(t){return new cc(t)}function QS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function hb(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function nw(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function db(t){return t.collectionGroup!==null}function Qo(t){const e=he(t);if(e.dt===null){e.dt=[];const n=nw(e),i=hb(e);if(n!==null&&i===null)n.isKeyField()||e.dt.push(new Hl(n)),e.dt.push(new Hl(Yt.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e.dt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Hl(Yt.keyField(),s))}}}return e.dt}function tr(t){const e=he(t);if(!e._t)if(e.limitType==="F")e._t=$S(e.path,e.collectionGroup,Qo(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of Qo(e)){const a=s.dir==="desc"?"asc":"desc";n.push(new Hl(s.field,a))}const i=e.endAt?new Vd(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Vd(e.startAt.position,e.startAt.inclusive):null;e._t=$S(e.path,e.collectionGroup,n,e.filters,e.limit,i,r)}return e._t}function Lv(t,e){e.getFirstInequalityField(),nw(t);const n=t.filters.concat([e]);return new cc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Mv(t,e,n){return new cc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zf(t,e){return ew(tr(t),tr(e))&&t.limitType===e.limitType}function fb(t){return`${J_(tr(t))}|lt:${t.limitType}`}function Dv(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(i=>ub(i)).join(", ")}]`),Yf(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(i=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(i)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>fa(i)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>fa(i)).join(",")),`Target(${n})`}(tr(t))}; limitType=${t.limitType})`}function Xf(t,e){return e.isFoundDocument()&&function(n,i){const r=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):Z.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,i){for(const r of Qo(n))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const r of n.filters)if(!r.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(r,s,a){const u=HS(r,s,a);return r.inclusive?u<=0:u<0}(n.startAt,Qo(n),i)||n.endAt&&!function(r,s,a){const u=HS(r,s,a);return r.inclusive?u>=0:u>0}(n.endAt,Qo(n),i))}(t,e)}function H4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function pb(t){return(e,n)=>{let i=!1;for(const r of Qo(t)){const s=G4(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function G4(t,e,n){const i=t.field.isKeyField()?Z.comparator(e.key,n.key):function(r,s,a){const u=s.data.field(r),c=a.data.field(r);return u!==null&&c!==null?da(u,c):oe()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){to(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return nb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=new tt(Z.comparator);function nr(){return $4}const mb=new tt(Z.comparator);function bl(...t){let e=mb;for(const n of t)e=e.insert(n.key,n);return e}function gb(t){let e=mb;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Es(){return Gl()}function vb(){return Gl()}function Gl(){return new Ma(t=>t.toString(),(t,e)=>t.isEqual(e))}const Q4=new tt(Z.comparator),q4=new Jt(Z.comparator);function ye(...t){let e=q4;for(const n of t)e=e.add(n);return e}const K4=new Jt(Ae);function Y4(){return K4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zd(e)?"-0":e}}function _b(t){return{integerValue:""+t}}function Z4(t,e){return b4(e)?_b(e):yb(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(){this._=void 0}}function X4(t,e,n){return t instanceof Wd?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&Y_(r)&&(r=Z_(r)),r&&(s.fields.__previous_value__=r),{mapValue:s}}(n,e):t instanceof Pu?xb(t,e):t instanceof Nu?Eb(t,e):function(i,r){const s=wb(i,r),a=qS(s)+qS(i.wt);return Rv(s)&&Rv(i.wt)?_b(a):yb(i.serializer,a)}(t,e)}function J4(t,e,n){return t instanceof Pu?xb(t,e):t instanceof Nu?Eb(t,e):n}function wb(t,e){return t instanceof Hd?Rv(n=e)||function(i){return!!i&&"doubleValue"in i}(n)?e:{integerValue:0}:null;var n}class Wd extends Jf{}class Pu extends Jf{constructor(e){super(),this.elements=e}}function xb(t,e){const n=Sb(e);for(const i of t.elements)n.some(r=>Ti(r,i))||n.push(i);return{arrayValue:{values:n}}}class Nu extends Jf{constructor(e){super(),this.elements=e}}function Eb(t,e){let n=Sb(e);for(const i of t.elements)n=n.filter(r=>!Ti(r,i));return{arrayValue:{values:n}}}class Hd extends Jf{constructor(e,n){super(),this.serializer=e,this.wt=n}}function qS(t){return gt(t.integerValue||t.doubleValue)}function Sb(t){return X_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function ez(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof Pu&&i instanceof Pu||n instanceof Nu&&i instanceof Nu?ha(n.elements,i.elements,Ti):n instanceof Hd&&i instanceof Hd?Ti(n.wt,i.wt):n instanceof Wd&&i instanceof Wd}(t.transform,e.transform)}class tz{constructor(e,n){this.version=e,this.transformResults=n}}class Wn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $h(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ep{}function Cb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new iw(t.key,Wn.none()):new hc(t.key,t.data,Wn.none());{const n=t.data,i=fn.empty();let r=new Jt(Yt.comparator);for(let s of e.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new rs(t.key,i,new In(r.toArray()),Wn.none())}}function nz(t,e,n){t instanceof hc?function(i,r,s){const a=i.value.clone(),u=YS(i.fieldTransforms,r,s.transformResults);a.setAll(u),r.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof rs?function(i,r,s){if(!$h(i.precondition,r))return void r.convertToUnknownDocument(s.version);const a=YS(i.fieldTransforms,r,s.transformResults),u=r.data;u.setAll(Ib(i)),u.setAll(a),r.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,r,s){r.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function $l(t,e,n,i){return t instanceof hc?function(r,s,a,u){if(!$h(r.precondition,s))return a;const c=r.value.clone(),d=ZS(r.fieldTransforms,u,s);return c.setAll(d),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof rs?function(r,s,a,u){if(!$h(r.precondition,s))return a;const c=ZS(r.fieldTransforms,u,s),d=s.data;return d.setAll(Ib(r)),d.setAll(c),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(p=>p.field))}(t,e,n,i):function(r,s,a){return $h(r.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function iz(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=wb(i.transform,r||null);s!=null&&(n===null&&(n=fn.empty()),n.set(i.field,s))}return n||null}function KS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&ha(n,i,(r,s)=>ez(r,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class hc extends ep{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class rs extends ep{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Ib(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function YS(t,e,n){const i=new Map;qe(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],a=s.transform,u=e.data.field(s.field);i.set(s.field,J4(a,u,n[r]))}return i}function ZS(t,e,n){const i=new Map;for(const r of t){const s=r.transform,a=n.data.field(r.field);i.set(r.field,X4(s,a,e))}return i}class iw extends ep{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rz extends ep{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sz{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&nz(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=$l(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=$l(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=vb();return this.mutations.forEach(r=>{const s=e.get(r.key),a=s.overlayedDocument;let u=this.applyToLocalView(a,s.mutatedFields);u=n.has(r.key)?null:u;const c=Cb(a,u);c!==null&&i.set(r.key,c),a.isValidDocument()||a.convertToNoDocument(ue.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&ha(this.mutations,e.mutations,(n,i)=>KS(n,i))&&ha(this.baseMutations,e.baseMutations,(n,i)=>KS(n,i))}}class rw{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){qe(e.mutations.length===i.length);let r=Q4;const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new rw(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oz{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Ee;function lz(t){switch(t){default:return oe();case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0}}function Tb(t){if(t===void 0)return er("GRPC error has no .code"),D.UNKNOWN;switch(t){case mt.OK:return D.OK;case mt.CANCELLED:return D.CANCELLED;case mt.UNKNOWN:return D.UNKNOWN;case mt.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case mt.INTERNAL:return D.INTERNAL;case mt.UNAVAILABLE:return D.UNAVAILABLE;case mt.UNAUTHENTICATED:return D.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case mt.NOT_FOUND:return D.NOT_FOUND;case mt.ALREADY_EXISTS:return D.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return D.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case mt.ABORTED:return D.ABORTED;case mt.OUT_OF_RANGE:return D.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return D.UNIMPLEMENTED;case mt.DATA_LOSS:return D.DATA_LOSS;default:return oe()}}(Ee=mt||(mt={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return ph}static getOrCreateInstance(){return ph===null&&(ph=new sw),ph}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let ph=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uz(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cz=new $o([4294967295,4294967295],0);function XS(t){const e=uz().encode(t),n=new p4;return n.update(e),new Uint8Array(n.digest())}function JS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new $o([n,i],0),new $o([r,s],0)]}class ow{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Rl(`Invalid padding: ${n}`);if(i<0)throw new Rl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Rl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Rl(`Invalid padding when bitmap length is 0: ${n}`);this.yt=8*e.length-n,this.It=$o.fromNumber(this.yt)}Tt(e,n,i){let r=e.add(n.multiply($o.fromNumber(i)));return r.compare(cz)===1&&(r=new $o([r.getBits(0),r.getBits(1)],0)),r.modulo(this.It).toNumber()}Et(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}At(e){if(this.yt===0)return!1;const n=XS(e),[i,r]=JS(n);for(let s=0;s<this.hashCount;s++){const a=this.Tt(i,r,s);if(!this.Et(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new ow(s,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.yt===0)return;const n=XS(e),[i,r]=JS(n);for(let s=0;s<this.hashCount;s++){const a=this.Tt(i,r,s);this.Rt(a)}}Rt(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Rl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,dc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new tp(ue.min(),r,new tt(Ae),nr(),ye())}}class dc{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new dc(i,n,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n,i,r){this.vt=e,this.removedTargetIds=n,this.key=i,this.Pt=r}}class Ab{constructor(e,n){this.targetId=e,this.bt=n}}class kb{constructor(e,n,i=nn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class eC{constructor(){this.Vt=0,this.St=nC(),this.Dt=nn.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}get current(){return this.Ct}get resumeToken(){return this.Dt}get Nt(){return this.Vt!==0}get kt(){return this.xt}Mt(e){e.approximateByteSize()>0&&(this.xt=!0,this.Dt=e)}Ot(){let e=ye(),n=ye(),i=ye();return this.St.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:oe()}}),new dc(this.Dt,this.Ct,e,n,i)}$t(){this.xt=!1,this.St=nC()}Ft(e,n){this.xt=!0,this.St=this.St.insert(e,n)}Bt(e){this.xt=!0,this.St=this.St.remove(e)}Lt(){this.Vt+=1}qt(){this.Vt-=1}Ut(){this.xt=!0,this.Ct=!0}}class hz{constructor(e){this.Kt=e,this.Gt=new Map,this.Qt=nr(),this.jt=tC(),this.zt=new tt(Ae)}Wt(e){for(const n of e.vt)e.Pt&&e.Pt.isFoundDocument()?this.Ht(n,e.Pt):this.Jt(n,e.key,e.Pt);for(const n of e.removedTargetIds)this.Jt(n,e.key,e.Pt)}Yt(e){this.forEachTarget(e,n=>{const i=this.Xt(n);switch(e.state){case 0:this.Zt(n)&&i.Mt(e.resumeToken);break;case 1:i.qt(),i.Nt||i.$t(),i.Mt(e.resumeToken);break;case 2:i.qt(),i.Nt||this.removeTarget(n);break;case 3:this.Zt(n)&&(i.Ut(),i.Mt(e.resumeToken));break;case 4:this.Zt(n)&&(this.te(n),i.Mt(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Gt.forEach((i,r)=>{this.Zt(r)&&n(r)})}ee(e){var n;const i=e.targetId,r=e.bt.count,s=this.ne(i);if(s){const a=s.target;if(Nv(a))if(r===0){const u=new Z(a.path);this.Jt(i,u,qt.newNoDocument(u,ue.min()))}else qe(r===1);else{const u=this.se(i);if(u!==r){const c=this.ie(e,u);if(c!==0){this.te(i);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.zt=this.zt.insert(i,d)}(n=sw.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(d,p,g){var y,_,x,C,k,S;const E={localCacheCount:p,existenceFilterCount:g.count},I=g.unchangedNames;return I&&(E.bloomFilter={applied:d===0,hashCount:(y=I==null?void 0:I.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(C=(x=(_=I==null?void 0:I.bits)===null||_===void 0?void 0:_.bitmap)===null||x===void 0?void 0:x.length)!==null&&C!==void 0?C:0,padding:(S=(k=I==null?void 0:I.bits)===null||k===void 0?void 0:k.padding)!==null&&S!==void 0?S:0}),E}(c,u,e.bt))}}}}ie(e,n){const{unchangedNames:i,count:r}=e.bt;if(!i||!i.bits)return 1;const{bits:{bitmap:s="",padding:a=0},hashCount:u=0}=i;let c,d;try{c=zs(s).toUint8Array()}catch(p){if(p instanceof ib)return ca("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw p}try{d=new ow(c,a,u)}catch(p){return ca(p instanceof Rl?"BloomFilter error: ":"Applying bloom filter failed: ",p),1}return d.yt===0?1:r!==n-this.re(e.targetId,d)?2:0}re(e,n){const i=this.Kt.getRemoteKeysForTarget(e);let r=0;return i.forEach(s=>{const a=this.Kt.oe(),u=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;n.At(u)||(this.Jt(e,s,null),r++)}),r}ue(e){const n=new Map;this.Gt.forEach((s,a)=>{const u=this.ne(a);if(u){if(s.current&&Nv(u.target)){const c=new Z(u.target.path);this.Qt.get(c)!==null||this.ce(a,c)||this.Jt(a,c,qt.newNoDocument(c,e))}s.kt&&(n.set(a,s.Ot()),s.$t())}});let i=ye();this.jt.forEach((s,a)=>{let u=!0;a.forEachWhile(c=>{const d=this.ne(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(s))}),this.Qt.forEach((s,a)=>a.setReadTime(e));const r=new tp(e,n,this.zt,this.Qt,i);return this.Qt=nr(),this.jt=tC(),this.zt=new tt(Ae),r}Ht(e,n){if(!this.Zt(e))return;const i=this.ce(e,n.key)?2:0;this.Xt(e).Ft(n.key,i),this.Qt=this.Qt.insert(n.key,n),this.jt=this.jt.insert(n.key,this.ae(n.key).add(e))}Jt(e,n,i){if(!this.Zt(e))return;const r=this.Xt(e);this.ce(e,n)?r.Ft(n,1):r.Bt(n),this.jt=this.jt.insert(n,this.ae(n).delete(e)),i&&(this.Qt=this.Qt.insert(n,i))}removeTarget(e){this.Gt.delete(e)}se(e){const n=this.Xt(e).Ot();return this.Kt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Lt(e){this.Xt(e).Lt()}Xt(e){let n=this.Gt.get(e);return n||(n=new eC,this.Gt.set(e,n)),n}ae(e){let n=this.jt.get(e);return n||(n=new Jt(Ae),this.jt=this.jt.insert(e,n)),n}Zt(e){const n=this.ne(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}ne(e){const n=this.Gt.get(e);return n&&n.Nt?null:this.Kt.he(e)}te(e){this.Gt.set(e,new eC),this.Kt.getRemoteKeysForTarget(e).forEach(n=>{this.Jt(e,n,null)})}ce(e,n){return this.Kt.getRemoteKeysForTarget(e).has(n)}}function tC(){return new tt(Z.comparator)}function nC(){return new tt(Z.comparator)}const dz=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),fz=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),pz=(()=>({and:"AND",or:"OR"}))();class mz{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ov(t,e){return t.useProto3Json||Yf(e)?e:{value:e}}function Gd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function gz(t,e){return Gd(t,e.toTimestamp())}function Ii(t){return qe(!!t),ue.fromTimestamp(function(e){const n=Qr(e);return new It(n.seconds,n.nanos)}(t))}function aw(t,e){return function(n){return new $e(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function Rb(t){const e=$e.fromString(t);return qe(Mb(e)),e}function jv(t,e){return aw(t.databaseId,e.path)}function Zm(t,e){const n=Rb(e);if(n.get(1)!==t.databaseId.projectId)throw new q(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(Pb(n))}function Bv(t,e){return aw(t.databaseId,e)}function vz(t){const e=Rb(t);return e.length===4?$e.emptyPath():Pb(e)}function Fv(t){return new $e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Pb(t){return qe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function iC(t,e,n){return{name:jv(t,e),fields:n.value.mapValue.fields}}function yz(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(qe(d===void 0||typeof d=="string"),nn.fromBase64String(d||"")):(qe(d===void 0||d instanceof Uint8Array),nn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(c){const d=c.code===void 0?D.UNKNOWN:Tb(c.code);return new q(d,c.message||"")}(a);n=new kb(i,r,s,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Zm(t,i.document.name),s=Ii(i.document.updateTime),a=i.document.createTime?Ii(i.document.createTime):ue.min(),u=new fn({mapValue:{fields:i.document.fields}}),c=qt.newFoundDocument(r,s,a,u),d=i.targetIds||[],p=i.removedTargetIds||[];n=new Qh(d,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Zm(t,i.document),s=i.readTime?Ii(i.readTime):ue.min(),a=qt.newNoDocument(r,s),u=i.removedTargetIds||[];n=new Qh([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Zm(t,i.document),s=i.removedTargetIds||[];n=new Qh([],s,r,null)}else{if(!("filter"in e))return oe();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new az(r,s),u=i.targetId;n=new Ab(u,a)}}return n}function _z(t,e){let n;if(e instanceof hc)n={update:iC(t,e.key,e.value)};else if(e instanceof iw)n={delete:jv(t,e.key)};else if(e instanceof rs)n={update:iC(t,e.key,e.data),updateMask:kz(e.fieldMask)};else{if(!(e instanceof rz))return oe();n={verify:jv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(r,s){const a=s.transform;if(a instanceof Wd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Pu)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Nu)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Hd)return{fieldPath:s.field.canonicalString(),increment:a.wt};throw oe()}(0,i))),e.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:gz(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:oe()}(t,e.precondition)),n}function wz(t,e){return t&&t.length>0?(qe(e!==void 0),t.map(n=>function(i,r){let s=i.updateTime?Ii(i.updateTime):Ii(r);return s.isEqual(ue.min())&&(s=Ii(r)),new tz(s,i.transformResults||[])}(n,e))):[]}function xz(t,e){return{documents:[Bv(t,e.path)]}}function Ez(t,e){const n={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(n.parent=Bv(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Bv(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(c){if(c.length!==0)return Lb(li.create(c,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const s=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:wo(p.field),direction:Iz(p.dir)}}(d))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=Ov(t,e.limit);var u;return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),n}function Sz(t){let e=vz(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){qe(i===1);const p=n.from[0];p.allDescendants?r=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(p){const g=Nb(p);return g instanceof li&&ab(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=n.orderBy.map(p=>function(g){return new Hl(xo(g.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(p)));let u=null;n.limit&&(u=function(p){let g;return g=typeof p=="object"?p.value:p,Yf(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){const g=!!p.before,y=p.values||[];return new Vd(y,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,y=p.values||[];return new Vd(y,g)}(n.endAt)),W4(e,r,a,s,u,"F",c,d)}function Cz(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Nb(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=xo(e.unaryFilter.field);return yt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=xo(e.unaryFilter.field);return yt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=xo(e.unaryFilter.field);return yt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=xo(e.unaryFilter.field);return yt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(e){return yt.create(xo(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return li.create(e.compositeFilter.filters.map(n=>Nb(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return oe()}}(e.compositeFilter.op))}(t):oe()}function Iz(t){return dz[t]}function Tz(t){return fz[t]}function Az(t){return pz[t]}function wo(t){return{fieldPath:t.canonicalString()}}function xo(t){return Yt.fromServerFormat(t.fieldPath)}function Lb(t){return t instanceof yt?function(e){if(e.op==="=="){if(WS(e.value))return{unaryFilter:{field:wo(e.field),op:"IS_NAN"}};if(VS(e.value))return{unaryFilter:{field:wo(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(WS(e.value))return{unaryFilter:{field:wo(e.field),op:"IS_NOT_NAN"}};if(VS(e.value))return{unaryFilter:{field:wo(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wo(e.field),op:Tz(e.op),value:e.value}}}(t):t instanceof li?function(e){const n=e.getFilters().map(i=>Lb(i));return n.length===1?n[0]:{compositeFilter:{op:Az(e.op),filters:n}}}(t):oe()}function kz(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Mb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,n,i,r,s=ue.min(),a=ue.min(),u=nn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{constructor(e){this.le=e}}function Rz(t){const e=Sz({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Mv(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pz{constructor(){this.sn=new Nz}addToCollectionParentIndex(e,n){return this.sn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.sn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve($r.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve($r.min())}updateCollectionGroup(e,n,i){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class Nz{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Jt($e.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Jt($e.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static Nn(){return new pa(0)}static kn(){return new pa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{constructor(){this.changes=new Ma(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?U.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dz{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&$l(i.mutation,r,In.empty(),It.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ye()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ye()){const r=Es();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let a=bl();return s.forEach((u,c)=>{a=a.insert(u,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Es();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ye()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let s=nr();const a=Gl(),u=Gl();return n.forEach((c,d)=>{const p=i.get(d.key);r.has(d.key)&&(p===void 0||p.mutation instanceof rs)?s=s.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),$l(p.mutation,d,p.mutation.getFieldMask(),It.now())):a.set(d.key,In.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,p)=>a.set(d,p)),n.forEach((d,p)=>{var g;return u.set(d,new Mz(p,(g=a.get(d))!==null&&g!==void 0?g:null))}),u))}recalculateAndSaveOverlays(e,n){const i=Gl();let r=new tt((a,u)=>a-u),s=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let p=i.get(c)||In.empty();p=u.applyToLocalView(d,p),i.set(c,p);const g=(r.get(u.batchId)||ye()).add(c);r=r.insert(u.batchId,g)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),d=c.key,p=c.value,g=vb();p.forEach(y=>{if(!s.has(y)){const _=Cb(n.get(y),i.get(y));_!==null&&g.set(y,_),s=s.add(y)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,g))}return U.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i){return function(r){return Z.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):db(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i):this.getDocumentsMatchingCollectionQuery(e,n,i)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):U.resolve(Es());let u=-1,c=s;return a.next(d=>U.forEach(d,(p,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),s.get(p)?U.resolve():this.remoteDocumentCache.getEntry(e,p).next(y=>{c=c.insert(p,y)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,ye())).next(p=>({batchId:u,changes:gb(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(i=>{let r=bl();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i){const r=n.collectionGroup;let s=bl();return this.indexManager.getCollectionParents(e,r).next(a=>U.forEach(a,u=>{const c=function(d,p){return new cc(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,u.child(r));return this.getDocumentsMatchingCollectionQuery(e,c,i).next(d=>{d.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,r))).next(s=>{r.forEach((u,c)=>{const d=c.getKey();s.get(d)===null&&(s=s.insert(d,qt.newInvalidDocument(d)))});let a=bl();return s.forEach((u,c)=>{const d=r.get(u);d!==void 0&&$l(d.mutation,c,In.empty(),It.now()),Xf(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{constructor(e){this.serializer=e,this.us=new Map,this.cs=new Map}getBundleMetadata(e,n){return U.resolve(this.us.get(n))}saveBundleMetadata(e,n){var i;return this.us.set(n.id,{id:(i=n).id,version:i.version,createTime:Ii(i.createTime)}),U.resolve()}getNamedQuery(e,n){return U.resolve(this.cs.get(n))}saveNamedQuery(e,n){return this.cs.set(n.name,function(i){return{name:i.name,query:Rz(i.bundledQuery),readTime:Ii(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jz{constructor(){this.overlays=new tt(Z.comparator),this.hs=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Es();return U.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.de(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.hs.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hs.delete(i)),U.resolve()}getOverlaysForCollection(e,n,i){const r=Es(),s=n.length+1,a=new Z(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const c=u.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return U.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new tt((d,p)=>d-p);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>i){let p=s.get(d.largestBatchId);p===null&&(p=Es(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const u=Es(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,p)=>u.set(d,p)),!(u.size()>=r)););return U.resolve(u)}de(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.hs.get(r.largestBatchId).delete(i.key);this.hs.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new oz(n,i));let s=this.hs.get(n);s===void 0&&(s=ye(),this.hs.set(n,s)),this.hs.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this.ls=new Jt(At.fs),this.ds=new Jt(At._s)}isEmpty(){return this.ls.isEmpty()}addReference(e,n){const i=new At(e,n);this.ls=this.ls.add(i),this.ds=this.ds.add(i)}ws(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.gs(new At(e,n))}ys(e,n){e.forEach(i=>this.removeReference(i,n))}ps(e){const n=new Z(new $e([])),i=new At(n,e),r=new At(n,e+1),s=[];return this.ds.forEachInRange([i,r],a=>{this.gs(a),s.push(a.key)}),s}Is(){this.ls.forEach(e=>this.gs(e))}gs(e){this.ls=this.ls.delete(e),this.ds=this.ds.delete(e)}Ts(e){const n=new Z(new $e([])),i=new At(n,e),r=new At(n,e+1);let s=ye();return this.ds.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new At(e,0),i=this.ls.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class At{constructor(e,n){this.key=e,this.Es=n}static fs(e,n){return Z.comparator(e.key,n.key)||Ae(e.Es,n.Es)}static _s(e,n){return Ae(e.Es,n.Es)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bz{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.As=1,this.Rs=new Jt(At.fs)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.As;this.As++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new sz(s,n,i,r);this.mutationQueue.push(a);for(const u of r)this.Rs=this.Rs.add(new At(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return U.resolve(a)}lookupMutationBatch(e,n){return U.resolve(this.vs(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Ps(i),s=r<0?0:r;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.As-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new At(n,0),r=new At(n,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([i,r],a=>{const u=this.vs(a.Es);s.push(u)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Jt(Ae);return n.forEach(r=>{const s=new At(r,0),a=new At(r,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,a],u=>{i=i.add(u.Es)})}),U.resolve(this.bs(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;Z.isDocumentKey(s)||(s=s.child(""));const a=new At(new Z(s),0);let u=new Jt(Ae);return this.Rs.forEachWhile(c=>{const d=c.key.path;return!!i.isPrefixOf(d)&&(d.length===r&&(u=u.add(c.Es)),!0)},a),U.resolve(this.bs(u))}bs(e){const n=[];return e.forEach(i=>{const r=this.vs(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){qe(this.Vs(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Rs;return U.forEach(n.mutations,r=>{const s=new At(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=i})}Dn(e){}containsKey(e,n){const i=new At(n,0),r=this.Rs.firstAfterOrEqual(i);return U.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Vs(e,n){return this.Ps(e)}Ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}vs(e){const n=this.Ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fz{constructor(e){this.Ss=e,this.docs=new tt(Z.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.Ss(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return U.resolve(i?i.document.mutableCopy():qt.newInvalidDocument(n))}getEntries(e,n){let i=nr();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():qt.newInvalidDocument(r))}),U.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=nr();const a=n.path,u=new Z(a.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:d,value:{document:p}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||T4(I4(p),i)<=0||(r.has(p.key)||Xf(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,i,r){oe()}Ds(e,n){return U.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new Uz(this)}getSize(e){return U.resolve(this.size)}}class Uz extends Lz{constructor(e){super(),this.rs=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.rs.addEntry(e,r)):this.rs.removeEntry(i)}),U.waitFor(n)}getFromCache(e,n){return this.rs.getEntry(e,n)}getAllFromCache(e,n){return this.rs.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zz{constructor(e){this.persistence=e,this.Cs=new Ma(n=>J_(n),ew),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.xs=0,this.Ns=new lw,this.targetCount=0,this.ks=pa.Nn()}forEachTarget(e,n){return this.Cs.forEach((i,r)=>n(r)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.xs)}allocateTargetId(e){return this.highestTargetId=this.ks.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.xs&&(this.xs=n),U.resolve()}$n(e){this.Cs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ks=new pa(n),this.highestTargetId=n),e.sequenceNumber>this.xs&&(this.xs=e.sequenceNumber)}addTargetData(e,n){return this.$n(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.$n(n),U.resolve()}removeTargetData(e,n){return this.Cs.delete(n.target),this.Ns.ps(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Cs.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.Cs.delete(a),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),U.waitFor(s).next(()=>r)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const i=this.Cs.get(n)||null;return U.resolve(i)}addMatchingKeys(e,n,i){return this.Ns.ws(n,i),U.resolve()}removeMatchingKeys(e,n,i){this.Ns.ys(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(e,a))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Ns.ps(n),U.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Ns.Ts(n);return U.resolve(i)}containsKey(e,n){return U.resolve(this.Ns.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vz{constructor(e,n){this.Ms={},this.overlays={},this.Os=new K_(0),this.$s=!1,this.$s=!0,this.referenceDelegate=e(this),this.Fs=new zz(this),this.indexManager=new Pz,this.remoteDocumentCache=function(i){return new Fz(i)}(i=>this.referenceDelegate.Bs(i)),this.serializer=new bz(n),this.Ls=new Oz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.$s=!1,Promise.resolve()}get started(){return this.$s}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new jz,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Ms[e.toKey()];return i||(i=new Bz(n,this.referenceDelegate),this.Ms[e.toKey()]=i),i}getTargetCache(){return this.Fs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ls}runTransaction(e,n,i){K("MemoryPersistence","Starting transaction:",e);const r=new Wz(this.Os.next());return this.referenceDelegate.qs(),i(r).next(s=>this.referenceDelegate.Us(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ks(e,n){return U.or(Object.values(this.Ms).map(i=>()=>i.containsKey(e,n)))}}class Wz extends k4{constructor(e){super(),this.currentSequenceNumber=e}}class uw{constructor(e){this.persistence=e,this.Gs=new lw,this.Qs=null}static js(e){return new uw(e)}get zs(){if(this.Qs)return this.Qs;throw oe()}addReference(e,n,i){return this.Gs.addReference(i,n),this.zs.delete(i.toString()),U.resolve()}removeReference(e,n,i){return this.Gs.removeReference(i,n),this.zs.add(i.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.zs.add(n.toString()),U.resolve()}removeTarget(e,n){this.Gs.ps(n.targetId).forEach(r=>this.zs.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.zs.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}qs(){this.Qs=new Set}Us(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.zs,i=>{const r=Z.fromPath(i);return this.Ws(e,r).next(s=>{s||n.removeEntry(r,ue.min())})}).next(()=>(this.Qs=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ws(e,n).next(i=>{i?this.zs.delete(n.toString()):this.zs.add(n.toString())})}Bs(e){return 0}Ws(e,n){return U.or([()=>U.resolve(this.Gs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ks(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Fi=r}static Bi(e,n){let i=ye(),r=ye();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new cw(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hz{constructor(){this.Li=!1}initialize(e,n){this.qi=e,this.indexManager=n,this.Li=!0}getDocumentsMatchingQuery(e,n,i,r){return this.Ui(e,n).next(s=>s||this.Ki(e,n,r,i)).next(s=>s||this.Gi(e,n))}Ui(e,n){if(QS(n))return U.resolve(null);let i=tr(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Mv(n,null,"F"),i=tr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const a=ye(...s);return this.qi.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(c=>{const d=this.Qi(n,u);return this.ji(n,d,a,c.readTime)?this.Ui(e,Mv(n,null,"F")):this.zi(e,d,n,c)}))})))}Ki(e,n,i,r){return QS(n)||r.isEqual(ue.min())?this.Gi(e,n):this.qi.getDocuments(e,i).next(s=>{const a=this.Qi(n,s);return this.ji(n,a,i,r)?this.Gi(e,n):(jS()<=Se.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Dv(n)),this.zi(e,a,n,C4(r,-1)))})}Qi(e,n){let i=new Jt(pb(e));return n.forEach((r,s)=>{Xf(e,s)&&(i=i.add(s))}),i}ji(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Gi(e,n){return jS()<=Se.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Dv(n)),this.qi.getDocumentsMatchingQuery(e,n,$r.min())}zi(e,n,i,r){return this.qi.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gz{constructor(e,n,i,r){this.persistence=e,this.Wi=n,this.serializer=r,this.Hi=new tt(Ae),this.Ji=new Ma(s=>J_(s),ew),this.Yi=new Map,this.Xi=e.getRemoteDocumentCache(),this.Fs=e.getTargetCache(),this.Ls=e.getBundleCache(),this.Zi(i)}Zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Dz(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Hi))}}function $z(t,e,n,i){return new Gz(t,e,n,i)}async function Db(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.Zi(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],u=[];let c=ye();for(const d of r){a.push(d.batchId);for(const p of d.mutations)c=c.add(p.key)}for(const d of s){u.push(d.batchId);for(const p of d.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(i,c).next(d=>({tr:d,removedBatchIds:a,addedBatchIds:u}))})})}function Qz(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.Xi.newChangeBuffer({trackRemovals:!0});return function(a,u,c,d){const p=c.batch,g=p.keys();let y=U.resolve();return g.forEach(_=>{y=y.next(()=>d.getEntry(u,_)).next(x=>{const C=c.docVersions.get(_);qe(C!==null),x.version.compareTo(C)<0&&(p.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),d.addEntry(x)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let u=ye();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function Ob(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Fs.getLastRemoteSnapshotVersion(n))}function qz(t,e){const n=he(t),i=e.snapshotVersion;let r=n.Hi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Xi.newChangeBuffer({trackRemovals:!0});r=n.Hi;const u=[];e.targetChanges.forEach((p,g)=>{const y=r.get(g);if(!y)return;u.push(n.Fs.removeMatchingKeys(s,p.removedDocuments,g).next(()=>n.Fs.addMatchingKeys(s,p.addedDocuments,g)));let _=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?_=_.withResumeToken(nn.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):p.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(p.resumeToken,i)),r=r.insert(g,_),function(x,C,k){return x.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(y,_,p)&&u.push(n.Fs.updateTargetData(s,_))});let c=nr(),d=ye();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),u.push(Kz(s,a,e.documentUpdates).next(p=>{c=p.er,d=p.nr})),!i.isEqual(ue.min())){const p=n.Fs.getLastRemoteSnapshotVersion(s).next(g=>n.Fs.setTargetsMetadata(s,s.currentSequenceNumber,i));u.push(p)}return U.waitFor(u).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(n.Hi=r,s))}function Kz(t,e,n){let i=ye(),r=ye();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let a=nr();return n.forEach((u,c)=>{const d=s.get(u);c.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(u)),c.isNoDocument()&&c.version.isEqual(ue.min())?(e.removeEntry(u,c.readTime),a=a.insert(u,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(u,c)):K("LocalStore","Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",c.version)}),{er:a,nr:r}})}function Yz(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Zz(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Fs.getTargetData(i,e).next(s=>s?(r=s,U.resolve(r)):n.Fs.allocateTargetId(i).next(a=>(r=new kr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Fs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Hi.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Hi=n.Hi.insert(i.targetId,i),n.Ji.set(e,i.targetId)),i})}async function Uv(t,e,n){const i=he(t),r=i.Hi.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!uc(a))throw a;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.Hi=i.Hi.remove(e),i.Ji.delete(r.target)}function rC(t,e,n){const i=he(t);let r=ue.min(),s=ye();return i.persistence.runTransaction("Execute query","readonly",a=>function(u,c,d){const p=he(u),g=p.Ji.get(d);return g!==void 0?U.resolve(p.Hi.get(g)):p.Fs.getTargetData(c,d)}(i,a,tr(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Fs.getMatchingKeysForTargetId(a,u.targetId).next(c=>{s=c})}).next(()=>i.Wi.getDocumentsMatchingQuery(a,e,n?r:ue.min(),n?s:ye())).next(u=>(Xz(i,H4(e),u),{documents:u,sr:s})))}function Xz(t,e,n){let i=t.Yi.get(e)||ue.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.Yi.set(e,i)}class sC{constructor(){this.activeTargetIds=Y4()}hr(e){this.activeTargetIds=this.activeTargetIds.add(e)}lr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ar(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Jz{constructor(){this.Wr=new sC,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.Wr.hr(e),this.Hr[e]||"not-current"}updateQueryState(e,n,i){this.Hr[e]=n}removeLocalQueryTarget(e){this.Wr.lr(e)}isLocalQueryTarget(e){return this.Wr.activeTargetIds.has(e)}clearQueryState(e){delete this.Hr[e]}getAllActiveQueryTargets(){return this.Wr.activeTargetIds}isActiveQueryTarget(e){return this.Wr.activeTargetIds.has(e)}start(){return this.Wr=new sC,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{Jr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(){this.Yr=()=>this.Xr(),this.Zr=()=>this.eo(),this.no=[],this.so()}Jr(e){this.no.push(e)}shutdown(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}so(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}Xr(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.no)e(0)}eo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.no)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mh=null;function Xm(){return mh===null?mh=268435456+Math.round(2147483648*Math.random()):mh++,"0x"+mh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e){this.io=e.io,this.ro=e.ro}oo(e){this.uo=e}co(e){this.ao=e}onMessage(e){this.ho=e}close(){this.ro()}send(e){this.io(e)}lo(){this.uo()}fo(e){this.ao(e)}_o(e){this.ho(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt="WebChannelConnection";class i3 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.wo=n+"://"+e.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get yo(){return!1}po(e,n,i,r,s){const a=Xm(),u=this.Io(e,n);K("RestConnection",`Sending RPC '${e}' ${a}:`,u,i);const c={};return this.To(c,r,s),this.Eo(e,u,c,i).then(d=>(K("RestConnection",`Received RPC '${e}' ${a}: `,d),d),d=>{throw ca("RestConnection",`RPC '${e}' ${a} failed with error: `,d,"url: ",u,"request:",i),d})}Ao(e,n,i,r,s,a){return this.po(e,n,i,r,s)}To(e,n,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+La,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}Io(e,n){const i=t3[e];return`${this.wo}/v1/${n}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Eo(e,n,i,r){const s=Xm();return new Promise((a,u)=>{const c=new f4;c.setWithCredentials(!0),c.listenOnce(c4.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ym.NO_ERROR:const p=c.getResponseJson();K(Gt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Ym.TIMEOUT:K(Gt,`RPC '${e}' ${s} timed out`),u(new q(D.DEADLINE_EXCEEDED,"Request time out"));break;case Ym.HTTP_ERROR:const g=c.getStatus();if(K(Gt,`RPC '${e}' ${s} failed with status:`,g,"response text:",c.getResponseText()),g>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const _=y==null?void 0:y.error;if(_&&_.status&&_.message){const x=function(C){const k=C.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(k)>=0?k:D.UNKNOWN}(_.status);u(new q(x,_.message))}else u(new q(D.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new q(D.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{K(Gt,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(r);K(Gt,`RPC '${e}' ${s} sending request:`,r),c.send(n,"POST",d,i,15)})}Ro(e,n,i){const r=Xm(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=l4(),u=u4(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(c.xmlHttpFactory=new d4({})),this.To(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;const d=s.join("");K(Gt,`Creating RPC '${e}' stream ${r}: ${d}`,c);const p=a.createWebChannel(d,c);let g=!1,y=!1;const _=new n3({io:C=>{y?K(Gt,`Not sending because RPC '${e}' stream ${r} is closed:`,C):(g||(K(Gt,`Opening RPC '${e}' stream ${r} transport.`),p.open(),g=!0),K(Gt,`RPC '${e}' stream ${r} sending:`,C),p.send(C))},ro:()=>p.close()}),x=(C,k,S)=>{C.listen(k,E=>{try{S(E)}catch(I){setTimeout(()=>{throw I},0)}})};return x(p,hh.EventType.OPEN,()=>{y||K(Gt,`RPC '${e}' stream ${r} transport opened.`)}),x(p,hh.EventType.CLOSE,()=>{y||(y=!0,K(Gt,`RPC '${e}' stream ${r} transport closed`),_.fo())}),x(p,hh.EventType.ERROR,C=>{y||(y=!0,ca(Gt,`RPC '${e}' stream ${r} transport errored:`,C),_.fo(new q(D.UNAVAILABLE,"The operation could not be completed")))}),x(p,hh.EventType.MESSAGE,C=>{var k;if(!y){const S=C.data[0];qe(!!S);const E=S,I=E.error||((k=E[0])===null||k===void 0?void 0:k.error);if(I){K(Gt,`RPC '${e}' stream ${r} received error:`,I);const R=I.status;let j=function(W){const H=mt[W];if(H!==void 0)return Tb(H)}(R),V=I.message;j===void 0&&(j=D.INTERNAL,V="Unknown error status: "+R+" with message "+I.message),y=!0,_.fo(new q(j,V)),p.close()}else K(Gt,`RPC '${e}' stream ${r} received:`,S),_._o(S)}}),x(u,h4.STAT_EVENT,C=>{C.stat===DS.PROXY?K(Gt,`RPC '${e}' stream ${r} detected buffering proxy`):C.stat===DS.NOPROXY&&K(Gt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{_.lo()},0),_}}function Jm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(t){return new mz(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,n,i=1e3,r=1.5,s=6e4){this.si=e,this.timerId=n,this.vo=i,this.Po=r,this.bo=s,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}reset(){this.Vo=0}Co(){this.Vo=this.bo}xo(e){this.cancel();const n=Math.floor(this.Vo+this.No()),i=Math.max(0,Date.now()-this.Do),r=Math.max(0,n-i);r>0&&K("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Vo} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.So=this.si.enqueueAfterDelay(this.timerId,r,()=>(this.Do=Date.now(),e())),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}ko(){this.So!==null&&(this.So.skipDelay(),this.So=null)}cancel(){this.So!==null&&(this.So.cancel(),this.So=null)}No(){return(Math.random()-.5)*this.Vo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n,i,r,s,a,u,c){this.si=e,this.Mo=i,this.Oo=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new jb(e,n)}qo(){return this.state===1||this.state===5||this.Uo()}Uo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Ko()}async stop(){this.qo()&&await this.close(0)}Go(){this.state=0,this.Lo.reset()}Qo(){this.Uo()&&this.Fo===null&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,()=>this.jo()))}zo(e){this.Wo(),this.stream.send(e)}async jo(){if(this.Uo())return this.close(0)}Wo(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}async close(e,n){this.Wo(),this.Ho(),this.Lo.cancel(),this.$o++,e!==4?this.Lo.reset():n&&n.code===D.RESOURCE_EXHAUSTED?(er(n.toString()),er("Using maximum backoff delay to prevent overloading the backend."),this.Lo.Co()):n&&n.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Jo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.co(n)}Jo(){}auth(){this.state=1;const e=this.Yo(this.$o),n=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.$o===n&&this.Xo(i,r)},i=>{e(()=>{const r=new q(D.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Zo(r)})})}Xo(e,n){const i=this.Yo(this.$o);this.stream=this.tu(e,n),this.stream.oo(()=>{i(()=>(this.state=2,this.Bo=this.si.enqueueAfterDelay(this.Oo,1e4,()=>(this.Uo()&&(this.state=3),Promise.resolve())),this.listener.oo()))}),this.stream.co(r=>{i(()=>this.Zo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Ko(){this.state=5,this.Lo.xo(async()=>{this.state=0,this.start()})}Zo(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Yo(e){return n=>{this.si.enqueueAndForget(()=>this.$o===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class r3 extends Bb{constructor(e,n,i,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}tu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.Lo.reset();const n=yz(this.serializer,e),i=function(r){if(!("targetChange"in r))return ue.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?ue.min():s.readTime?Ii(s.readTime):ue.min()}(e);return this.listener.eu(n,i)}nu(e){const n={};n.database=Fv(this.serializer),n.addTarget=function(r,s){let a;const u=s.target;if(a=Nv(u)?{documents:xz(r,u)}:{query:Ez(r,u)},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=bb(r,s.resumeToken);const c=Ov(r,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(ue.min())>0){a.readTime=Gd(r,s.snapshotVersion.toTimestamp());const c=Ov(r,s.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const i=Cz(this.serializer,e);i&&(n.labels=i),this.zo(n)}su(e){const n={};n.database=Fv(this.serializer),n.removeTarget=e,this.zo(n)}}class s3 extends Bb{constructor(e,n,i,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s,this.iu=!1}get ru(){return this.iu}start(){this.iu=!1,this.lastStreamToken=void 0,super.start()}Jo(){this.iu&&this.ou([])}tu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.iu){this.Lo.reset();const n=wz(e.writeResults,e.commitTime),i=Ii(e.commitTime);return this.listener.uu(i,n)}return qe(!e.writeResults||e.writeResults.length===0),this.iu=!0,this.listener.cu()}au(){const e={};e.database=Fv(this.serializer),this.zo(e)}ou(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>_z(this.serializer,i))};this.zo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3 extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.hu=!1}lu(){if(this.hu)throw new q(D.FAILED_PRECONDITION,"The client has already been terminated.")}po(e,n,i){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.po(e,n,i,r,s)).catch(r=>{throw r.name==="FirebaseError"?(r.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new q(D.UNKNOWN,r.toString())})}Ao(e,n,i,r){return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ao(e,n,i,s,a,r)).catch(s=>{throw s.name==="FirebaseError"?(s.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(D.UNKNOWN,s.toString())})}terminate(){this.hu=!0}}class a3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}mu(){this.du===0&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.yu("Backend didn't respond within 10 seconds."),this.gu("Offline"),Promise.resolve())))}pu(e){this.state==="Online"?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.gu("Offline")))}set(e){this.Iu(),this.du=0,e==="Online"&&(this.wu=!1),this.gu(e)}gu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}yu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.wu?(er(n),this.wu=!1):K("OnlineStateTracker",n)}Iu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=s,this.vu.Jr(a=>{i.enqueueAndForget(async()=>{no(this)&&(K("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=he(u);c.Au.add(4),await fc(c),c.Pu.set("Unknown"),c.Au.delete(4),await ip(c)}(this))})}),this.Pu=new a3(i,r)}}async function ip(t){if(no(t))for(const e of t.Ru)await e(!0)}async function fc(t){for(const e of t.Ru)await e(!1)}function Fb(t,e){const n=he(t);n.Eu.has(e.targetId)||(n.Eu.set(e.targetId,e),fw(n)?dw(n):Da(n).Uo()&&hw(n,e))}function Ub(t,e){const n=he(t),i=Da(n);n.Eu.delete(e),i.Uo()&&zb(n,e),n.Eu.size===0&&(i.Uo()?i.Qo():no(n)&&n.Pu.set("Unknown"))}function hw(t,e){if(t.bu.Lt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Da(t).nu(e)}function zb(t,e){t.bu.Lt(e),Da(t).su(e)}function dw(t){t.bu=new hz({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),he:e=>t.Eu.get(e)||null,oe:()=>t.datastore.serializer.databaseId}),Da(t).start(),t.Pu.mu()}function fw(t){return no(t)&&!Da(t).qo()&&t.Eu.size>0}function no(t){return he(t).Au.size===0}function Vb(t){t.bu=void 0}async function u3(t){t.Eu.forEach((e,n)=>{hw(t,e)})}async function c3(t,e){Vb(t),fw(t)?(t.Pu.pu(e),dw(t)):t.Pu.set("Unknown")}async function h3(t,e,n){if(t.Pu.set("Online"),e instanceof kb&&e.state===2&&e.cause)try{await async function(i,r){const s=r.cause;for(const a of r.targetIds)i.Eu.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Eu.delete(a),i.bu.removeTarget(a))}(t,e)}catch(i){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await $d(t,i)}else if(e instanceof Qh?t.bu.Wt(e):e instanceof Ab?t.bu.ee(e):t.bu.Yt(e),!n.isEqual(ue.min()))try{const i=await Ob(t.localStore);n.compareTo(i)>=0&&await function(r,s){const a=r.bu.ue(s);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=r.Eu.get(c);d&&r.Eu.set(c,d.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,c)=>{const d=r.Eu.get(u);if(!d)return;r.Eu.set(u,d.withResumeToken(nn.EMPTY_BYTE_STRING,d.snapshotVersion)),zb(r,u);const p=new kr(d.target,u,c,d.sequenceNumber);hw(r,p)}),r.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){K("RemoteStore","Failed to raise snapshot:",i),await $d(t,i)}}async function $d(t,e,n){if(!uc(e))throw e;t.Au.add(1),await fc(t),t.Pu.set("Offline"),n||(n=()=>Ob(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K("RemoteStore","Retrying IndexedDB access"),await n(),t.Au.delete(1),await ip(t)})}function Wb(t,e){return e().catch(n=>$d(t,n,e))}async function rp(t){const e=he(t),n=qr(e);let i=e.Tu.length>0?e.Tu[e.Tu.length-1].batchId:-1;for(;d3(e);)try{const r=await Yz(e.localStore,i);if(r===null){e.Tu.length===0&&n.Qo();break}i=r.batchId,f3(e,r)}catch(r){await $d(e,r)}Hb(e)&&Gb(e)}function d3(t){return no(t)&&t.Tu.length<10}function f3(t,e){t.Tu.push(e);const n=qr(t);n.Uo()&&n.ru&&n.ou(e.mutations)}function Hb(t){return no(t)&&!qr(t).qo()&&t.Tu.length>0}function Gb(t){qr(t).start()}async function p3(t){qr(t).au()}async function m3(t){const e=qr(t);for(const n of t.Tu)e.ou(n.mutations)}async function g3(t,e,n){const i=t.Tu.shift(),r=rw.from(i,e,n);await Wb(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await rp(t)}async function v3(t,e){e&&qr(t).ru&&await async function(n,i){if(r=i.code,lz(r)&&r!==D.ABORTED){const s=n.Tu.shift();qr(n).Go(),await Wb(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i)),await rp(n)}var r}(t,e),Hb(t)&&Gb(t)}async function aC(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");const i=no(n);n.Au.add(3),await fc(n),i&&n.Pu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Au.delete(3),await ip(n)}async function y3(t,e){const n=he(t);e?(n.Au.delete(2),await ip(n)):e||(n.Au.add(2),await fc(n),n.Pu.set("Unknown"))}function Da(t){return t.Vu||(t.Vu=function(e,n,i){const r=he(e);return r.lu(),new r3(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{oo:u3.bind(null,t),co:c3.bind(null,t),eu:h3.bind(null,t)}),t.Ru.push(async e=>{e?(t.Vu.Go(),fw(t)?dw(t):t.Pu.set("Unknown")):(await t.Vu.stop(),Vb(t))})),t.Vu}function qr(t){return t.Su||(t.Su=function(e,n,i){const r=he(e);return r.lu(),new s3(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{oo:p3.bind(null,t),co:v3.bind(null,t),cu:m3.bind(null,t),uu:g3.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Go(),await rp(t)):(await t.Su.stop(),t.Tu.length>0&&(K("RemoteStore",`Stopping write stream with ${t.Tu.length} pending writes`),t.Tu=[]))})),t.Su}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}static createAndSchedule(e,n,i,r,s){const a=Date.now()+i,u=new pw(e,n,a,r,s);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mw(t,e){if(er("AsyncQueue",`${e}: ${t}`),uc(t))return new q(D.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this.comparator=e?(n,i)=>e(n,i)||Z.comparator(n.key,i.key):(n,i)=>Z.comparator(n.key,i.key),this.keyedMap=bl(),this.sortedSet=new tt(this.comparator)}static emptySet(e){return new qo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new qo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this.Du=new tt(Z.comparator)}track(e){const n=e.doc.key,i=this.Du.get(n);i?e.type!==0&&i.type===3?this.Du=this.Du.insert(n,e):e.type===3&&i.type!==1?this.Du=this.Du.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Du=this.Du.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Du=this.Du.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Du=this.Du.remove(n):e.type===1&&i.type===2?this.Du=this.Du.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Du=this.Du.insert(n,{type:2,doc:e.doc}):oe():this.Du=this.Du.insert(n,e)}Cu(){const e=[];return this.Du.inorderTraversal((n,i)=>{e.push(i)}),e}}class ma{constructor(e,n,i,r,s,a,u,c,d){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,i,r,s){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new ma(e,n,qo.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(){this.xu=void 0,this.listeners=[]}}class w3{constructor(){this.queries=new Ma(e=>fb(e),Zf),this.onlineState="Unknown",this.Nu=new Set}}async function $b(t,e){const n=he(t),i=e.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new _3),r)try{s.xu=await n.onListen(i)}catch(a){const u=mw(a,`Initialization of query '${Dv(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,s),s.listeners.push(e),e.ku(n.onlineState),s.xu&&e.Mu(s.xu)&&gw(n)}async function Qb(t,e){const n=he(t),i=e.query;let r=!1;const s=n.queries.get(i);if(s){const a=s.listeners.indexOf(e);a>=0&&(s.listeners.splice(a,1),r=s.listeners.length===0)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function x3(t,e){const n=he(t);let i=!1;for(const r of e){const s=r.query,a=n.queries.get(s);if(a){for(const u of a.listeners)u.Mu(r)&&(i=!0);a.xu=r}}i&&gw(n)}function E3(t,e,n){const i=he(t),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(n);i.queries.delete(e)}function gw(t){t.Nu.forEach(e=>{e.next()})}class qb{constructor(e,n,i){this.query=e,this.Ou=n,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=i||{}}Mu(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new ma(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.$u?this.Bu(e)&&(this.Ou.next(e),n=!0):this.Lu(e,this.onlineState)&&(this.qu(e),n=!0),this.Fu=e,n}onError(e){this.Ou.error(e)}ku(e){this.onlineState=e;let n=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,e)&&(this.qu(this.Fu),n=!0),n}Lu(e,n){if(!e.fromCache)return!0;const i=n!=="Offline";return(!this.options.Uu||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Bu(e){if(e.docChanges.length>0)return!0;const n=this.Fu&&this.Fu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qu(e){e=ma.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.$u=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e){this.key=e}}class Yb{constructor(e){this.key=e}}class S3{constructor(e,n){this.query=e,this.Ju=n,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=ye(),this.mutatedKeys=ye(),this.Zu=pb(e),this.tc=new qo(this.Zu)}get ec(){return this.Ju}nc(e,n){const i=n?n.sc:new lC,r=n?n.tc:this.tc;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((p,g)=>{const y=r.get(p),_=Xf(this.query,g)?g:null,x=!!y&&this.mutatedKeys.has(y.key),C=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let k=!1;y&&_?y.data.isEqual(_.data)?x!==C&&(i.track({type:3,doc:_}),k=!0):this.ic(y,_)||(i.track({type:2,doc:_}),k=!0,(c&&this.Zu(_,c)>0||d&&this.Zu(_,d)<0)&&(u=!0)):!y&&_?(i.track({type:0,doc:_}),k=!0):y&&!_&&(i.track({type:1,doc:y}),k=!0,(c||d)&&(u=!0)),k&&(_?(a=a.add(_),s=C?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),i.track({type:1,doc:p})}return{tc:a,sc:i,ji:u,mutatedKeys:s}}ic(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i){const r=this.tc;this.tc=e.tc,this.mutatedKeys=e.mutatedKeys;const s=e.sc.Cu();s.sort((d,p)=>function(g,y){const _=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return _(g)-_(y)}(d.type,p.type)||this.Zu(d.doc,p.doc)),this.rc(i);const a=n?this.oc():[],u=this.Xu.size===0&&this.current?1:0,c=u!==this.Yu;return this.Yu=u,s.length!==0||c?{snapshot:new ma(this.query,e.tc,r,s,e.mutatedKeys,u===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),uc:a}:{uc:a}}ku(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tc:this.tc,sc:new lC,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}cc(e){return!this.Ju.has(e)&&!!this.tc.has(e)&&!this.tc.get(e).hasLocalMutations}rc(e){e&&(e.addedDocuments.forEach(n=>this.Ju=this.Ju.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ju=this.Ju.delete(n)),this.current=e.current)}oc(){if(!this.current)return[];const e=this.Xu;this.Xu=ye(),this.tc.forEach(i=>{this.cc(i.key)&&(this.Xu=this.Xu.add(i.key))});const n=[];return e.forEach(i=>{this.Xu.has(i)||n.push(new Yb(i))}),this.Xu.forEach(i=>{e.has(i)||n.push(new Kb(i))}),n}ac(e){this.Ju=e.sr,this.Xu=ye();const n=this.nc(e.documents);return this.applyChanges(n,!0)}hc(){return ma.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,this.Yu===0,this.hasCachedResults)}}class C3{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class I3{constructor(e){this.key=e,this.lc=!1}}class T3{constructor(e,n,i,r,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.fc={},this.dc=new Ma(u=>fb(u),Zf),this._c=new Map,this.wc=new Set,this.mc=new tt(Z.comparator),this.gc=new Map,this.yc=new lw,this.Ic={},this.Tc=new Map,this.Ec=pa.kn(),this.onlineState="Unknown",this.Ac=void 0}get isPrimaryClient(){return this.Ac===!0}}async function A3(t,e){const n=j3(t);let i,r;const s=n.dc.get(e);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.hc();else{const a=await Zz(n.localStore,tr(e)),u=n.sharedClientState.addLocalQueryTarget(a.targetId);i=a.targetId,r=await k3(n,e,i,u==="current",a.resumeToken),n.isPrimaryClient&&Fb(n.remoteStore,a)}return r}async function k3(t,e,n,i,r){t.Rc=(g,y,_)=>async function(x,C,k,S){let E=C.view.nc(k);E.ji&&(E=await rC(x.localStore,C.query,!1).then(({documents:j})=>C.view.nc(j,E)));const I=S&&S.targetChanges.get(C.targetId),R=C.view.applyChanges(E,x.isPrimaryClient,I);return cC(x,C.targetId,R.uc),R.snapshot}(t,g,y,_);const s=await rC(t.localStore,e,!0),a=new S3(e,s.sr),u=a.nc(s.documents),c=dc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),d=a.applyChanges(u,t.isPrimaryClient,c);cC(t,n,d.uc);const p=new C3(e,n,a);return t.dc.set(e,p),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),d.snapshot}async function b3(t,e){const n=he(t),i=n.dc.get(e),r=n._c.get(i.targetId);if(r.length>1)return n._c.set(i.targetId,r.filter(s=>!Zf(s,e))),void n.dc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Uv(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),Ub(n.remoteStore,i.targetId),zv(n,i.targetId)}).catch(lc)):(zv(n,i.targetId),await Uv(n.localStore,i.targetId,!0))}async function R3(t,e,n){const i=B3(t);try{const r=await function(s,a){const u=he(s),c=It.now(),d=a.reduce((y,_)=>y.add(_.key),ye());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let _=nr(),x=ye();return u.Xi.getEntries(y,d).next(C=>{_=C,_.forEach((k,S)=>{S.isValidDocument()||(x=x.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,_)).next(C=>{p=C;const k=[];for(const S of a){const E=iz(S,p.get(S.key).overlayedDocument);E!=null&&k.push(new rs(S.key,E,rb(E.value.mapValue),Wn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,c,k,a)}).next(C=>{g=C;const k=C.applyToLocalDocumentSet(p,x);return u.documentOverlayCache.saveOverlays(y,C.batchId,k)})}).then(()=>({batchId:g.batchId,changes:gb(p)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,a,u){let c=s.Ic[s.currentUser.toKey()];c||(c=new tt(Ae)),c=c.insert(a,u),s.Ic[s.currentUser.toKey()]=c}(i,r.batchId,n),await pc(i,r.changes),await rp(i.remoteStore)}catch(r){const s=mw(r,"Failed to persist write");n.reject(s)}}async function Zb(t,e){const n=he(t);try{const i=await qz(n.localStore,e);e.targetChanges.forEach((r,s)=>{const a=n.gc.get(s);a&&(qe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.lc=!0:r.modifiedDocuments.size>0?qe(a.lc):r.removedDocuments.size>0&&(qe(a.lc),a.lc=!1))}),await pc(n,i,e)}catch(i){await lc(i)}}function uC(t,e,n){const i=he(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.dc.forEach((s,a)=>{const u=a.view.ku(e);u.snapshot&&r.push(u.snapshot)}),function(s,a){const u=he(s);u.onlineState=a;let c=!1;u.queries.forEach((d,p)=>{for(const g of p.listeners)g.ku(a)&&(c=!0)}),c&&gw(u)}(i.eventManager,e),r.length&&i.fc.eu(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function P3(t,e,n){const i=he(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.gc.get(e),s=r&&r.key;if(s){let a=new tt(Z.comparator);a=a.insert(s,qt.newNoDocument(s,ue.min()));const u=ye().add(s),c=new tp(ue.min(),new Map,new tt(Ae),a,u);await Zb(i,c),i.mc=i.mc.remove(s),i.gc.delete(e),vw(i)}else await Uv(i.localStore,e,!1).then(()=>zv(i,e,n)).catch(lc)}async function N3(t,e){const n=he(t),i=e.batch.batchId;try{const r=await Qz(n.localStore,e);Jb(n,i,null),Xb(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await pc(n,r)}catch(r){await lc(r)}}async function L3(t,e,n){const i=he(t);try{const r=await function(s,a){const u=he(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,a).next(p=>(qe(p!==null),d=p.keys(),u.mutationQueue.removeMutationBatch(c,p))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(i.localStore,e);Jb(i,e,n),Xb(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await pc(i,r)}catch(r){await lc(r)}}function Xb(t,e){(t.Tc.get(e)||[]).forEach(n=>{n.resolve()}),t.Tc.delete(e)}function Jb(t,e,n){const i=he(t);let r=i.Ic[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ic[i.currentUser.toKey()]=r}}function zv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t._c.get(e))t.dc.delete(i),n&&t.fc.vc(i,n);t._c.delete(e),t.isPrimaryClient&&t.yc.ps(e).forEach(i=>{t.yc.containsKey(i)||eR(t,i)})}function eR(t,e){t.wc.delete(e.path.canonicalString());const n=t.mc.get(e);n!==null&&(Ub(t.remoteStore,n),t.mc=t.mc.remove(e),t.gc.delete(n),vw(t))}function cC(t,e,n){for(const i of n)i instanceof Kb?(t.yc.addReference(i.key,e),M3(t,i)):i instanceof Yb?(K("SyncEngine","Document no longer in limbo: "+i.key),t.yc.removeReference(i.key,e),t.yc.containsKey(i.key)||eR(t,i.key)):oe()}function M3(t,e){const n=e.key,i=n.path.canonicalString();t.mc.get(n)||t.wc.has(i)||(K("SyncEngine","New document in limbo: "+n),t.wc.add(i),vw(t))}function vw(t){for(;t.wc.size>0&&t.mc.size<t.maxConcurrentLimboResolutions;){const e=t.wc.values().next().value;t.wc.delete(e);const n=new Z($e.fromString(e)),i=t.Ec.next();t.gc.set(i,new I3(n)),t.mc=t.mc.insert(n,i),Fb(t.remoteStore,new kr(tr(tw(n.path)),i,"TargetPurposeLimboResolution",K_.ct))}}async function pc(t,e,n){const i=he(t),r=[],s=[],a=[];i.dc.isEmpty()||(i.dc.forEach((u,c)=>{a.push(i.Rc(c,e,n).then(d=>{if((d||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(c.targetId,d!=null&&d.fromCache?"not-current":"current"),d){r.push(d);const p=cw.Bi(c.targetId,d);s.push(p)}}))}),await Promise.all(a),i.fc.eu(r),await async function(u,c){const d=he(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>U.forEach(c,g=>U.forEach(g.$i,y=>d.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>U.forEach(g.Fi,y=>d.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!uc(p))throw p;K("LocalStore","Failed to update sequence numbers: "+p)}for(const p of c){const g=p.targetId;if(!p.fromCache){const y=d.Hi.get(g),_=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(_);d.Hi=d.Hi.insert(g,x)}}}(i.localStore,s))}async function D3(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());const i=await Db(n.localStore,e);n.currentUser=e,function(r,s){r.Tc.forEach(a=>{a.forEach(u=>{u.reject(new q(D.CANCELLED,s))})}),r.Tc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await pc(n,i.tr)}}function O3(t,e){const n=he(t),i=n.gc.get(e);if(i&&i.lc)return ye().add(i.key);{let r=ye();const s=n._c.get(e);if(!s)return r;for(const a of s){const u=n.dc.get(a);r=r.unionWith(u.view.ec)}return r}}function j3(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Zb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=O3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=P3.bind(null,e),e.fc.eu=x3.bind(null,e.eventManager),e.fc.vc=E3.bind(null,e.eventManager),e}function B3(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=N3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=L3.bind(null,e),e}class hC{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=np(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return $z(this.persistence,new Hz,e.initialUser,this.serializer)}createPersistence(e){return new Vz(uw.js,this.serializer)}createSharedClientState(e){return new Jz}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class F3{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>uC(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=D3.bind(null,this.syncEngine),await y3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new w3}createDatastore(e){const n=np(e.databaseInfo.databaseId),i=(r=e.databaseInfo,new i3(r));var r;return function(s,a,u,c){return new o3(s,a,u,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return n=this.localStore,i=this.datastore,r=e.asyncQueue,s=u=>uC(this.syncEngine,u,0),a=oC.D()?new oC:new e3,new l3(n,i,r,s,a);var n,i,r,s,a}createSyncEngine(e,n){return function(i,r,s,a,u,c,d){const p=new T3(i,r,s,a,u,c);return d&&(p.Ac=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=he(e);K("RemoteStore","RemoteStore shutting down."),n.Au.add(5),await fc(n),n.vu.shutdown(),n.Pu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Vc(this.observer.next,e)}error(e){this.observer.error?this.Vc(this.observer.error,e):er("Uncaught Error in snapshot listener:",e.toString())}Sc(){this.muted=!0}Vc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=$t.UNAUTHENTICATED,this.clientId=tb.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async s=>{K("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(i,s=>(K("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new q(D.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=mw(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function eg(t,e){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await Db(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function dC(t,e){t.asyncQueue.verifyOperationInProgress();const n=await V3(t);K("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener(r=>aC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>aC(e.remoteStore,s)),t._onlineComponents=e}function z3(t){return t.name==="FirebaseError"?t.code===D.FAILED_PRECONDITION||t.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function V3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{await eg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!z3(n))throw n;ca("Error using user provided cache. Falling back to memory cache: "+n),await eg(t,new hC)}}else K("FirestoreClient","Using default OfflineComponentProvider"),await eg(t,new hC);return t._offlineComponents}async function nR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),await dC(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),await dC(t,new F3))),t._onlineComponents}function W3(t){return nR(t).then(e=>e.syncEngine)}async function iR(t){const e=await nR(t),n=e.eventManager;return n.onListen=A3.bind(null,e.syncEngine),n.onUnlisten=b3.bind(null,e.syncEngine),n}function H3(t,e,n={}){const i=new Hi;return t.asyncQueue.enqueueAndForget(async()=>function(r,s,a,u,c){const d=new tR({next:g=>{s.enqueueAndForget(()=>Qb(r,p));const y=g.docs.has(a);!y&&g.fromCache?c.reject(new q(D.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?c.reject(new q(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new qb(tw(a.path),d,{includeMetadataChanges:!0,Uu:!0});return $b(r,p)}(await iR(t),t.asyncQueue,e,n,i)),i.promise}function G3(t,e,n={}){const i=new Hi;return t.asyncQueue.enqueueAndForget(async()=>function(r,s,a,u,c){const d=new tR({next:g=>{s.enqueueAndForget(()=>Qb(r,p)),g.fromCache&&u.source==="server"?c.reject(new q(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new qb(a,d,{includeMetadataChanges:!0,Uu:!0});return $b(r,p)}(await iR(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(t,e,n){if(!n)throw new q(D.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $3(t,e,n,i){if(e===!0&&i===!0)throw new q(D.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function pC(t){if(!Z.isDocumentKey(t))throw new q(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function mC(t){if(Z.isDocumentKey(t))throw new q(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function sp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function ui(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sp(t);throw new q(D.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new q(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!1:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gC({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new q(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new q(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gC(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new m4;switch(n.type){case"firstParty":return new _4(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new q(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=fC.get(e);n&&(K("ComponentProvider","Removing Datastore"),fC.delete(e),n.terminate())}(this),Promise.resolve()}}function Q3(t,e,n,i={}){var r;const s=(t=ui(t,op))._getSettings();if(s.host!=="firestore.googleapis.com"&&s.host!==e&&ca("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),i.mockUserToken){let a,u;if(typeof i.mockUserToken=="string")a=i.mockUserToken,u=$t.MOCK_USER;else{a=d_(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new q(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new $t(c)}t._authCredentials=new g4(new eb(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ur(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ln(this.firestore,e,this._key)}}class Oa{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Oa(this.firestore,e,this._query)}}class Ur extends Oa{constructor(e,n,i){super(e,n,tw(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ln(this.firestore,null,new Z(e))}withConverter(e){return new Ur(this.firestore,e,this._path)}}function st(t,e,...n){if(t=Ne(t),rR("collection","path",e),t instanceof op){const i=$e.fromString(e,...n);return mC(i),new Ur(t,null,i)}{if(!(t instanceof ln||t instanceof Ur))throw new q(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child($e.fromString(e,...n));return mC(i),new Ur(t.firestore,null,i)}}function Pe(t,e,...n){if(t=Ne(t),arguments.length===1&&(e=tb.A()),rR("doc","path",e),t instanceof op){const i=$e.fromString(e,...n);return pC(i),new ln(t,null,new Z(i))}{if(!(t instanceof ln||t instanceof Ur))throw new q(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child($e.fromString(e,...n));return pC(i),new ln(t.firestore,t instanceof Ur?t.converter:null,new Z(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(){this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new jb(this,"async_queue_retry"),this.Yc=()=>{const n=Jm();n&&K("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Lo.ko()};const e=Jm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Yc)}get isShuttingDown(){return this.Qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Xc(),this.Zc(e)}enterRestrictedMode(e){if(!this.Qc){this.Qc=!0,this.Hc=e||!1;const n=Jm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Yc)}}enqueue(e){if(this.Xc(),this.Qc)return new Promise(()=>{});const n=new Hi;return this.Zc(()=>this.Qc&&this.Hc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Gc.push(e),this.ta()))}async ta(){if(this.Gc.length!==0){try{await this.Gc[0](),this.Gc.shift(),this.Lo.reset()}catch(e){if(!uc(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Gc.length>0&&this.Lo.xo(()=>this.ta())}}Zc(e){const n=this.Kc.then(()=>(this.Wc=!0,e().catch(i=>{this.zc=i,this.Wc=!1;const r=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(i);throw er("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Wc=!1,i))));return this.Kc=n,n}enqueueAfterDelay(e,n,i){this.Xc(),this.Jc.indexOf(e)>-1&&(n=0);const r=pw.createAndSchedule(this,e,n,i,s=>this.ea(s));return this.jc.push(r),r}Xc(){this.zc&&oe()}verifyOperationInProgress(){}async na(){let e;do e=this.Kc,await e;while(e!==this.Kc)}sa(e){for(const n of this.jc)if(n.timerId===e)return!0;return!1}ia(e){return this.na().then(()=>{this.jc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.jc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.na()})}ra(e){this.Jc.push(e)}ea(e){const n=this.jc.indexOf(e);this.jc.splice(n,1)}}class io extends op{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new q3,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||sR(this),this._firestoreClient.terminate()}}function K3(t,e){const n=typeof t=="object"?t:Pf(),i=typeof t=="string"?t:e||"(default)",r=qu(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=h_("firestore");s&&Q3(r,...s)}return r}function yw(t){return t._firestoreClient||sR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function sR(t){var e,n,i;const r=t._freezeSettings(),s=function(a,u,c,d){return new P4(a,u,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new U3(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=r.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.cache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ga(nn.fromBase64String(e))}catch(n){throw new q(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ga(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3=/^__.*__$/;class Z3{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new rs(e,this.data,this.fieldMask,n,this.fieldTransforms):new hc(e,this.data,n,this.fieldTransforms)}}class oR{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new rs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function aR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class xw{constructor(e,n,i,r,s,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.oa(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get ua(){return this.settings.ua}ca(e){return new xw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}aa(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ca({path:i,ha:!1});return r.la(e),r}fa(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ca({path:i,ha:!1});return r.oa(),r}da(e){return this.ca({path:void 0,ha:!0})}_a(e){return Qd(e,this.settings.methodName,this.settings.wa||!1,this.path,this.settings.ma)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}oa(){if(this.path)for(let e=0;e<this.path.length;e++)this.la(this.path.get(e))}la(e){if(e.length===0)throw this._a("Document fields must not be empty");if(aR(this.ua)&&Y3.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class X3{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||np(e)}ga(e,n,i,r=!1){return new xw({ua:e,methodName:n,ma:i,path:Yt.emptyPath(),ha:!1,wa:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lp(t){const e=t._freezeSettings(),n=np(t._databaseId);return new X3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function lR(t,e,n,i,r,s={}){const a=t.ga(s.merge||s.mergeFields?2:0,e,n,r);Ew("Data must be an object, but it was:",a,i);const u=uR(i,a);let c,d;if(s.merge)c=new In(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){const p=[];for(const g of s.mergeFields){const y=Vv(e,g,n);if(!a.contains(y))throw new q(D.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);hR(p,y)||p.push(y)}c=new In(p),d=a.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=a.fieldTransforms;return new Z3(new fn(u),c,d)}class up extends _w{_toFieldTransform(e){if(e.ua!==2)throw e.ua===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof up}}function J3(t,e,n,i){const r=t.ga(1,e,n);Ew("Data must be an object, but it was:",r,i);const s=[],a=fn.empty();to(i,(c,d)=>{const p=Sw(e,c,n);d=Ne(d);const g=r.fa(p);if(d instanceof up)s.push(p);else{const y=mc(d,g);y!=null&&(s.push(p),a.set(p,y))}});const u=new In(s);return new oR(a,u,r.fieldTransforms)}function eV(t,e,n,i,r,s){const a=t.ga(1,e,n),u=[Vv(e,i,n)],c=[r];if(s.length%2!=0)throw new q(D.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)u.push(Vv(e,s[y])),c.push(s[y+1]);const d=[],p=fn.empty();for(let y=u.length-1;y>=0;--y)if(!hR(d,u[y])){const _=u[y];let x=c[y];x=Ne(x);const C=a.fa(_);if(x instanceof up)d.push(_);else{const k=mc(x,C);k!=null&&(d.push(_),p.set(_,k))}}const g=new In(d);return new oR(p,g,a.fieldTransforms)}function tV(t,e,n,i=!1){return mc(n,t.ga(i?4:3,e))}function mc(t,e){if(cR(t=Ne(t)))return Ew("Unsupported field value:",e,t),uR(t,e);if(t instanceof _w)return function(n,i){if(!aR(i.ua))throw i._a(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i._a(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ha&&e.ua!==4)throw e._a("Nested arrays are not supported");return function(n,i){const r=[];let s=0;for(const a of n){let u=mc(a,i.da(s));u==null&&(u={nullValue:"NULL_VALUE"}),r.push(u),s++}return{arrayValue:{values:r}}}(t,e)}return function(n,i){if((n=Ne(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Z4(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=It.fromDate(n);return{timestampValue:Gd(i.serializer,r)}}if(n instanceof It){const r=new It(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Gd(i.serializer,r)}}if(n instanceof ww)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ga)return{bytesValue:bb(i.serializer,n._byteString)};if(n instanceof ln){const r=i.databaseId,s=n.firestore._databaseId;if(!s.isEqual(r))throw i._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:aw(n.firestore._databaseId||i.databaseId,n._key.path)}}throw i._a(`Unsupported field value: ${sp(n)}`)}(t,e)}function uR(t,e){const n={};return nb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):to(t,(i,r)=>{const s=mc(r,e.aa(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function cR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof It||t instanceof ww||t instanceof ga||t instanceof ln||t instanceof _w)}function Ew(t,e,n){if(!cR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const i=sp(n);throw i==="an object"?e._a(t+" a custom object"):e._a(t+" "+i)}}function Vv(t,e,n){if((e=Ne(e))instanceof ap)return e._internalPath;if(typeof e=="string")return Sw(t,e);throw Qd("Field path arguments must be of type string or ",t,!1,void 0,n)}const nV=new RegExp("[~\\*/\\[\\]]");function Sw(t,e,n){if(e.search(nV)>=0)throw Qd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ap(...e.split("."))._internalPath}catch{throw Qd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Qd(t,e,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${i}`),a&&(c+=` in document ${r}`),c+=")"),new q(D.INVALID_ARGUMENT,u+t+c)}function hR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ln(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Cw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iV extends dR{data(){return super.data()}}function Cw(t,e){return typeof e=="string"?Sw(t,e):e instanceof ap?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Iw{}class sV extends Iw{}function cp(t,e,...n){let i=[];e instanceof Iw&&i.push(e),i=i.concat(n),function(r){const s=r.filter(u=>u instanceof Tw).length,a=r.filter(u=>u instanceof hp).length;if(s>1||s>0&&a>0)throw new q(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class hp extends sV{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new hp(e,n,i)}_apply(e){const n=this._parse(e);return fR(e._query,n),new Oa(e.firestore,e.converter,Lv(e._query,n))}_parse(e){const n=lp(e.firestore);return function(r,s,a,u,c,d,p){let g;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new q(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){yC(p,d);const y=[];for(const _ of p)y.push(vC(u,r,_));g={arrayValue:{values:y}}}else g=vC(u,r,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||yC(p,d),g=tV(a,s,p,d==="in"||d==="not-in");return yt.create(c,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function dp(t,e,n){const i=e,r=Cw("where",t);return hp._create(r,i,n)}class Tw extends Iw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Tw(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:li.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,r){let s=i;const a=r.getFlattenedFilters();for(const u of a)fR(s,u),s=Lv(s,u)}(e._query,n),new Oa(e.firestore,e.converter,Lv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function vC(t,e,n){if(typeof(n=Ne(n))=="string"){if(n==="")throw new q(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!db(e)&&n.indexOf("/")!==-1)throw new q(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child($e.fromString(n));if(!Z.isDocumentKey(i))throw new q(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return zS(t,new Z(i))}if(n instanceof ln)return zS(t,n._key);throw new q(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sp(n)}.`)}function yC(t,e){if(!Array.isArray(t)||t.length===0)throw new q(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fR(t,e){if(e.isInequality()){const i=nw(t),r=e.field;if(i!==null&&!i.isEqual(r))throw new q(D.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${r.toString()}'`);const s=hb(t);s!==null&&oV(t,r,s)}const n=function(i,r){for(const s of i)for(const a of s.getFlattenedFilters())if(r.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function oV(t,e,n){if(!n.isEqual(e))throw new q(D.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class aV{convertValue(e,n="none"){switch(Vs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return to(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertGeoPoint(e){return new ww(gt(e.latitude),gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Z_(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(ku(e));default:return null}}convertTimestamp(e){const n=Qr(e);return new It(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=$e.fromString(e);qe(Mb(i));const r=new bu(i.get(1),i.get(3)),s=new Z(i.popFirst(5));return r.isEqual(n)||er(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mR extends dR{constructor(e,n,i,r,s,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Cw("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class qh extends mR{data(e={}){return super.data(e)}}class lV{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Pl(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new qh(this._firestore,this._userDataWriter,i.key,i,new Pl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{const u=new qh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Pl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{const u=new qh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Pl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:uV(a.type),doc:u,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function uV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(t){t=ui(t,ln);const e=ui(t.firestore,io);return H3(yw(e),t._key).then(n=>hV(e,t,n))}class gR extends aV{constructor(e){super(),this.firestore=e}convertBytes(e){return new ga(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ln(this.firestore,null,n)}}function _t(t){t=ui(t,Oa);const e=ui(t.firestore,io),n=yw(e),i=new gR(e);return rV(t._query),G3(n,t._query).then(r=>new lV(e,i,t,r))}function Di(t,e,n){t=ui(t,ln);const i=ui(t.firestore,io),r=pR(t.converter,e,n);return fp(i,[lR(lp(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Wn.none())])}function Lu(t,e,n,...i){t=ui(t,ln);const r=ui(t.firestore,io),s=lp(r);let a;return a=typeof(e=Ne(e))=="string"||e instanceof ap?eV(s,"updateDoc",t._key,e,n,i):J3(s,"updateDoc",t._key,e),fp(r,[a.toMutation(t._key,Wn.exists(!0))])}function ja(t){return fp(ui(t.firestore,io),[new iw(t._key,Wn.none())])}function cV(t,e){const n=ui(t.firestore,io),i=Pe(t),r=pR(t.converter,e);return fp(n,[lR(lp(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Wn.exists(!1))]).then(()=>i)}function fp(t,e){return function(n,i){const r=new Hi;return n.asyncQueue.enqueueAndForget(async()=>R3(await W3(n),i,r)),r.promise}(yw(t),e)}function hV(t,e,n){const i=n.docs.get(e._key),r=new gR(t);return new mR(t,r,e._key,i,new Pl(n.hasPendingWrites,n.fromCache),e.converter)}(function(t,e=!0){(function(n){La=n})(ts),Gr(new Zi("firestore",(n,{instanceIdentifier:i,options:r})=>{const s=n.getProvider("app").getImmediate(),a=new io(new v4(n.getProvider("auth-internal")),new x4(n.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new q(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bu(u.options.projectId,c)}(s,i),s);return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),Vn(OS,"3.11.0",t),Vn(OS,"3.11.0","esm2017")})();const _C="@firebase/database",wC="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vR="";function dV(t){vR=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Rt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:vu(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return or(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new fV(e)}}catch{}return new pV},Ss=yR("localStorage"),Wv=yR("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko=new Rf("@firebase/database"),mV=function(){let t=1;return function(){return t++}}(),_R=function(t){const e=Q2(t),n=new W2;n.update(e);const i=n.digest();return c_.encodeByteArray(i)},gc=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=gc.apply(null,i):typeof i=="object"?e+=Rt(i):e+=i,e+=" "}return e};let Rs=null,xC=!0;const gV=function(t,e){z(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Ko.logLevel=Se.VERBOSE,Rs=Ko.log.bind(Ko),e&&Wv.set("logging_enabled",!0)):typeof t=="function"?Rs=t:(Rs=null,Wv.remove("logging_enabled"))},Kt=function(...t){if(xC===!0&&(xC=!1,Rs===null&&Wv.get("logging_enabled")===!0&&gV(!0)),Rs){const e=gc.apply(null,t);Rs(e)}},vc=function(t){return function(...e){Kt(t,...e)}},Hv=function(...t){const e="FIREBASE INTERNAL ERROR: "+gc(...t);Ko.error(e)},ir=function(...t){const e=`FIREBASE FATAL ERROR: ${gc(...t)}`;throw Ko.error(e),new Error(e)},xn=function(...t){const e="FIREBASE WARNING: "+gc(...t);Ko.warn(e)},vV=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&xn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},wR=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},yV=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},va="[MIN_NAME]",Ws="[MAX_NAME]",Ba=function(t,e){if(t===e)return 0;if(t===va||e===Ws)return-1;if(e===va||t===Ws)return 1;{const n=EC(t),i=EC(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},_V=function(t,e){return t===e?0:t<e?-1:1},pl=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Rt(e))},Aw=function(t){if(typeof t!="object"||t===null)return Rt(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=Rt(e[i]),n+=":",n+=Aw(t[e[i]]);return n+="}",n},xR=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function En(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const ER=function(t){z(!wR(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let r,s,a,u,c;t===0?(s=0,a=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(u=Math.min(Math.floor(Math.log(t)/Math.LN2),i),s=u+i,a=Math.round(t*Math.pow(2,n-u)-Math.pow(2,n))):(s=0,a=Math.round(t/Math.pow(2,1-i-n))));const d=[];for(c=n;c;c-=1)d.push(a%2?1:0),a=Math.floor(a/2);for(c=e;c;c-=1)d.push(s%2?1:0),s=Math.floor(s/2);d.push(r?1:0),d.reverse();const p=d.join("");let g="";for(c=0;c<64;c+=8){let y=parseInt(p.substr(c,8),2).toString(16);y.length===1&&(y="0"+y),g=g+y}return g.toLowerCase()},wV=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},xV=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function EV(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const SV=new RegExp("^-?(0*)\\d{1,10}$"),CV=-2147483648,IV=2147483647,EC=function(t){if(SV.test(t)){const e=Number(t);if(e>=CV&&e<=IV)return e}return null},Fa=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw xn("Exception was thrown by user callback.",n),e},Math.floor(0))}},TV=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ql=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){xn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Kt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',xn(e)}}class Yo{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Yo.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="5",SR="v",CR="s",IR="r",TR="f",AR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,kR="ls",bR="p",Gv="ac",RR="websocket",PR="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n,i,r,s=!1,a="",u=!1,c=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=a,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ss.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ss.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function bV(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function LR(t,e,n){z(typeof e=="string","typeof type must == string"),z(typeof n=="object","typeof params must == object");let i;if(e===RR)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===PR)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);bV(t)&&(n.ns=t.namespace);const r=[];return En(n,(s,a)=>{r.push(s+"="+a)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(){this.counters_={}}incrementCounter(e,n=1){or(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return T2(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg={},ng={};function bw(t){const e=t.toString();return tg[e]||(tg[e]=new RV),tg[e]}function PV(t,e){const n=t.toString();return ng[n]||(ng[n]=e()),ng[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Fa(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="start",LV="close",MV="pLPCommand",DV="pRTLPCB",MR="id",DR="pw",OR="ser",OV="cb",jV="seg",BV="ts",FV="d",UV="dframe",jR=1870,BR=30,zV=jR-BR,VV=25e3,WV=3e4;class Oo{constructor(e,n,i,r,s,a,u){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=a,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=vc(e),this.stats_=bw(n),this.urlFn=c=>(this.appCheckToken&&(c[Gv]=this.appCheckToken),LR(n,PR,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new NV(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(WV)),yV(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Rw((...s)=>{const[a,u,c,d,p]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===SC)this.id=u,this.password=c;else if(a===LV)u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...s)=>{const[a,u]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(a,u)},()=>{this.onClosed_()},this.urlFn);const i={};i[SC]="t",i[OR]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[OV]=this.scriptTagHolder.uniqueCallbackIdentifier),i[SR]=kw,this.transportSessionId&&(i[CR]=this.transportSessionId),this.lastSessionId&&(i[kR]=this.lastSessionId),this.applicationId&&(i[bR]=this.applicationId),this.appCheckToken&&(i[Gv]=this.appCheckToken),typeof location<"u"&&location.hostname&&AR.test(location.hostname)&&(i[IR]=TR);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Oo.forceAllow_=!0}static forceDisallow(){Oo.forceDisallow_=!0}static isAvailable(){return Oo.forceAllow_?!0:!Oo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!wV()&&!xV()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Rt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=oA(n),r=xR(i,zV);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[UV]="t",i[MR]=e,i[DR]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Rt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Rw{constructor(e,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=mV(),window[MV+this.uniqueCallbackIdentifier]=e,window[DV+this.uniqueCallbackIdentifier]=n,this.myIFrame=Rw.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){Kt("frame writing exception"),u.stack&&Kt(u.stack),Kt(u)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Kt("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[MR]=this.myID,e[DR]=this.myPW,e[OR]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+BR+i.length<=jR;){const a=this.pendingSegs.shift();i=i+"&"+jV+r+"="+a.seg+"&"+BV+r+"="+a.ts+"&"+FV+r+"="+a.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(VV)),s=()=>{clearTimeout(r),i()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Kt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV=16384,GV=45e3;let qd=null;typeof MozWebSocket<"u"?qd=MozWebSocket:typeof WebSocket<"u"&&(qd=WebSocket);class Jn{constructor(e,n,i,r,s,a,u){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=vc(this.connId),this.stats_=bw(n),this.connURL=Jn.connectionURL_(n,a,u,r,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,r,s){const a={};return a[SR]=kw,typeof location<"u"&&location.hostname&&AR.test(location.hostname)&&(a[IR]=TR),n&&(a[CR]=n),i&&(a[kR]=i),r&&(a[Gv]=r),s&&(a[bR]=s),LR(e,RR,a)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ss.set("previous_websocket_failure",!0);try{let i;hA(),this.mySock=new qd(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Jn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&qd!==null&&!Jn.forceDisallow_}static previouslyFailed(){return Ss.isInMemoryStorage||Ss.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ss.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=vu(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(z(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=Rt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=xR(n,HV);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(GV))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Jn.responsesRequiredToBeHealthy=2;Jn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Oo,Jn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Jn&&Jn.isAvailable();let i=n&&!Jn.previouslyFailed();if(e.webSocketOnly&&(n||xn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Jn];else{const r=this.transports_=[];for(const s of Mu.ALL_TRANSPORTS)s&&s.isAvailable()&&r.push(s);Mu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Mu.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V=6e4,QV=5e3,qV=10*1024,KV=100*1024,ig="t",CC="d",YV="s",IC="r",ZV="e",TC="o",AC="a",kC="n",bC="p",XV="h";class JV{constructor(e,n,i,r,s,a,u,c,d,p){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=a,this.onReady_=u,this.onDisconnect_=c,this.onKill_=d,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=vc("c:"+this.id+":"),this.transportManager_=new Mu(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Ql(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>KV?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>qV?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ig in e){const n=e[ig];n===AC?this.upgradeIfSecondaryHealthy_():n===IC?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===TC&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=pl("t",e),i=pl("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:bC,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:AC,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:kC,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=pl("t",e),i=pl("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=pl(ig,e);if(CC in e){const i=e[CC];if(n===XV){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===kC){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===YV?this.onConnectionShutdown_(i):n===IC?this.onReset_(i):n===ZV?Hv("Server Error: "+i):n===TC?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Hv("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),kw!==i&&xn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Ql(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor($V))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ql(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(QV))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:bC,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ss.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e){this.allowedEvents_=e,this.listeners_={},z(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===n&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(e){z(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd extends UR{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!f_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Kd}getInitialEvent(e){return z(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=32,PC=768;class Oe{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ke(){return new Oe("")}function pe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Kr(t){return t.pieces_.length-t.pieceNum_}function Ue(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Oe(t.pieces_,e)}function zR(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function e6(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function VR(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function WR(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Oe(e,0)}function Et(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof Oe)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new Oe(n,0)}function ge(t){return t.pieceNum_>=t.pieces_.length}function mn(t,e){const n=pe(t),i=pe(e);if(n===null)return e;if(n===i)return mn(Ue(t),Ue(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Pw(t,e){if(Kr(t)!==Kr(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function ei(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(Kr(t)>Kr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class t6{constructor(e,n){this.errorPrefix_=n,this.parts_=VR(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=bf(this.parts_[i]);HR(this)}}function n6(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=bf(e),HR(t)}function i6(t){const e=t.parts_.pop();t.byteLength_-=bf(e),t.parts_.length>0&&(t.byteLength_-=1)}function HR(t){if(t.byteLength_>PC)throw new Error(t.errorPrefix_+"has a key path longer than "+PC+" bytes ("+t.byteLength_+").");if(t.parts_.length>RC)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+RC+") or object contains a cycle "+gs(t))}function gs(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw extends UR{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new Nw}getInitialEvent(e){return z(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml=1e3,r6=60*5*1e3,NC=30*1e3,s6=1.3,o6=3e4,a6="server_kill",LC=3;class $i extends FR{constructor(e,n,i,r,s,a,u,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=u,this.authOverride_=c,this.id=$i.nextPersistentConnectionId_++,this.log_=vc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ml,this.maxReconnectDelay_=r6,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!hA())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Nw.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Kd.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const r=++this.requestNumber_,s={r,a:e,b:n};this.log_(Rt(s)),z(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const n=new kf,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{const u=a.d;a.s==="ok"?n.resolve(u):n.reject(u)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,i,r){this.initConnection_();const s=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),z(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),z(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const u={onComplete:r,hashFn:n,query:e,tag:i};this.listens.get(a).set(s,u),this.connected_&&this.sendListen_(u)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+i+" for "+r);const s={p:i},a="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(a,s,u=>{const c=u.d,d=u.s;$i.warnOnListenWarnings_(c,n),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",u),d!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(d,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&or(e,"w")){const i=aa(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();xn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||V2(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=NC)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=z2(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,r=>{const s=r.s,a=r.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),z(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,n)}sendUnlisten_(e,n,i,r){this.log_("Unlisten on "+e+" for "+n);const s={p:e},a="n";r&&(s.q=i,s.t=r),this.sendRequest(a,s)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,r){const s={p:n,d:i};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,a=>{r&&setTimeout(()=>{r(a.s,a.d)},Math.floor(0))})}put(e,n,i,r){this.putInternal("p",e,n,i,r)}merge(e,n,i,r){this.putInternal("m",e,n,i,r)}putInternal(e,n,i,r,s){this.initConnection_();const a={p:n,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;const u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Rt(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Hv("Unrecognized action received from server: "+Rt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){z(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ml,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ml,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>o6&&(this.reconnectDelay_=ml),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*s6)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+$i.nextConnectionId_++,s=this.lastSessionId;let a=!1,u=null;const c=function(){u?u.close():(a=!0,i())},d=function(g){z(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(g)};this.realtime_={close:c,sendRequest:d};const p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[g,y]=await Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);a?Kt("getToken() completed but was canceled"):(Kt("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=y&&y.token,u=new JV(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,_=>{xn(_+" ("+this.repoInfo_.toString()+")"),this.interrupt(a6)},s))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&xn(g),c())}}}interrupt(e){Kt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Kt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],lv(this.interruptReasons_)&&(this.reconnectDelay_=ml,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(s=>Aw(s)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const i=new Oe(e).toString();let r;if(this.listens.has(i)){const s=this.listens.get(i);r=s.get(n),s.delete(n),s.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,n){Kt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=LC&&(this.reconnectDelay_=NC,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Kt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=LC&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+vR.replace(/\./g,"-")]=1,f_()?e["framework.cordova"]=1:cA()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Kd.getInstance().currentlyOnline();return lv(this.interruptReasons_)&&e}}$i.nextPersistentConnectionId_=0;$i.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new me(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new me(va,e),r=new me(va,n);return this.compare(i,r)!==0}minPost(){return me.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gh;class GR extends pp{static get __EMPTY_NODE(){return gh}static set __EMPTY_NODE(e){gh=e}compare(e,n){return Ba(e.name,n.name)}isDefinedOn(e){throw ka("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return me.MIN}maxPost(){return new me(Ws,gh)}makePost(e,n){return z(typeof e=="string","KeyIndex indexValue must always be a string."),new me(e,gh)}toString(){return".key"}}const Zo=new GR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(e=e,a=n?i(e.key,n):1,r&&(a*=-1),a<0)this.isReverse_?e=e.left:e=e.right;else if(a===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class bt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??bt.RED,this.left=r??gn.EMPTY_NODE,this.right=s??gn.EMPTY_NODE}copy(e,n,i,r,s){return new bt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return s<0?r=r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return gn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,r;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return gn.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}bt.RED=!0;bt.BLACK=!1;class l6{copy(e,n,i,r,s){return this}insert(e,n,i){return new bt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class gn{constructor(e,n=gn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new gn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,bt.BLACK,null,null))}remove(e){return new gn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,bt.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new vh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new vh(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new vh(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new vh(this.root_,null,this.comparator_,!0,e)}}gn.EMPTY_NODE=new l6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u6(t,e){return Ba(t.name,e.name)}function Lw(t,e){return Ba(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $v;function c6(t){$v=t}const $R=function(t){return typeof t=="number"?"number:"+ER(t):"string:"+t},QR=function(t){if(t.isLeafNode()){const e=t.val();z(typeof e=="string"||typeof e=="number"||typeof e=="object"&&or(e,".sv"),"Priority must be a string or number.")}else z(t===$v||t.isEmpty(),"priority of unexpected type.");z(t===$v||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MC;class Tt{constructor(e,n=Tt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,z(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),QR(this.priorityNode_)}static set __childrenNodeConstructor(e){MC=e}static get __childrenNodeConstructor(){return MC}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Tt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Tt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ge(e)?this:pe(e)===".priority"?this.priorityNode_:Tt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Tt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=pe(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(z(i!==".priority"||Kr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Tt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ue(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+$R(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=ER(this.value_):e+=this.value_,this.lazyHash_=_R(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Tt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Tt.__childrenNodeConstructor?-1:(z(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,r=Tt.VALUE_TYPE_ORDER.indexOf(n),s=Tt.VALUE_TYPE_ORDER.indexOf(i);return z(r>=0,"Unknown leaf type: "+n),z(s>=0,"Unknown leaf type: "+i),r===s?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Tt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qR,KR;function h6(t){qR=t}function d6(t){KR=t}class f6 extends pp{compare(e,n){const i=e.node.getPriority(),r=n.node.getPriority(),s=i.compareTo(r);return s===0?Ba(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return me.MIN}maxPost(){return new me(Ws,new Tt("[PRIORITY-POST]",KR))}makePost(e,n){const i=qR(e);return new me(n,new Tt("[PRIORITY-POST]",i))}toString(){return".priority"}}const rt=new f6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6=Math.log(2);class m6{constructor(e){const n=s=>parseInt(Math.log(s)/p6,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Yd=function(t,e,n,i){t.sort(e);const r=function(c,d){const p=d-c;let g,y;if(p===0)return null;if(p===1)return g=t[c],y=n?n(g):g,new bt(y,g.node,bt.BLACK,null,null);{const _=parseInt(p/2,10)+c,x=r(c,_),C=r(_+1,d);return g=t[_],y=n?n(g):g,new bt(y,g.node,bt.BLACK,x,C)}},s=function(c){let d=null,p=null,g=t.length;const y=function(x,C){const k=g-x,S=g;g-=x;const E=r(k+1,S),I=t[k],R=n?n(I):I;_(new bt(R,I.node,C,null,E))},_=function(x){d?(d.left=x,d=x):(p=x,d=x)};for(let x=0;x<c.count;++x){const C=c.nextBitIsOne(),k=Math.pow(2,c.count-(x+1));C?y(k,bt.BLACK):(y(k,bt.BLACK),y(k,bt.RED))}return p},a=new m6(t.length),u=s(a);return new gn(i||e,u)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rg;const yo={};class Vi{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return z(yo&&rt,"ChildrenNode.ts has not been loaded"),rg=rg||new Vi({".priority":yo},{".priority":rt}),rg}get(e){const n=aa(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof gn?n:null}hasIndex(e){return or(this.indexSet_,e.toString())}addIndex(e,n){z(e!==Zo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=n.getIterator(me.Wrap);let a=s.getNext();for(;a;)r=r||e.isDefinedOn(a.node),i.push(a),a=s.getNext();let u;r?u=Yd(i,e.getCompare()):u=yo;const c=e.toString(),d=Object.assign({},this.indexSet_);d[c]=e;const p=Object.assign({},this.indexes_);return p[c]=u,new Vi(p,d)}addToIndexes(e,n){const i=Sd(this.indexes_,(r,s)=>{const a=aa(this.indexSet_,s);if(z(a,"Missing index implementation for "+s),r===yo)if(a.isDefinedOn(e.node)){const u=[],c=n.getIterator(me.Wrap);let d=c.getNext();for(;d;)d.name!==e.name&&u.push(d),d=c.getNext();return u.push(e),Yd(u,a.getCompare())}else return yo;else{const u=n.get(e.name);let c=r;return u&&(c=c.remove(new me(e.name,u))),c.insert(e,e.node)}});return new Vi(i,this.indexSet_)}removeFromIndexes(e,n){const i=Sd(this.indexes_,r=>{if(r===yo)return r;{const s=n.get(e.name);return s?r.remove(new me(e.name,s)):r}});return new Vi(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gl;class ie{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&QR(this.priorityNode_),this.children_.isEmpty()&&z(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return gl||(gl=new ie(new gn(Lw),null,Vi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||gl}updatePriority(e){return this.children_.isEmpty()?this:new ie(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?gl:n}}getChild(e){const n=pe(e);return n===null?this:this.getImmediateChild(n).getChild(Ue(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(z(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new me(e,n);let r,s;n.isEmpty()?(r=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(i,this.children_));const a=r.isEmpty()?gl:this.priorityNode_;return new ie(r,a,s)}}updateChild(e,n){const i=pe(e);if(i===null)return n;{z(pe(e)!==".priority"||Kr(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(Ue(e),n);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,r=0,s=!0;if(this.forEachChild(rt,(a,u)=>{n[a]=u.val(e),i++,s&&ie.INTEGER_REGEXP_.test(a)?r=Math.max(r,Number(a)):s=!1}),!e&&s&&r<2*i){const a=[];for(const u in n)a[u]=n[u];return a}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+$R(this.getPriority().val())+":"),this.forEachChild(rt,(n,i)=>{const r=i.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":_R(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const r=this.resolveIndex_(i);if(r){const s=r.getPredecessorKey(new me(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new me(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new me(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,me.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,e)<0;)r.getNext(),s=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,me.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,e)>0;)r.getNext(),s=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===yc?-1:0}withIndex(e){if(e===Zo||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ie(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Zo||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(rt),r=n.getIterator(rt);let s=i.getNext(),a=r.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=r.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===Zo?null:this.indexMap_.get(e.toString())}}ie.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class g6 extends ie{constructor(){super(new gn(Lw),ie.EMPTY_NODE,Vi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ie.EMPTY_NODE}isEmpty(){return!1}}const yc=new g6;Object.defineProperties(me,{MIN:{value:new me(va,ie.EMPTY_NODE)},MAX:{value:new me(Ws,yc)}});GR.__EMPTY_NODE=ie.EMPTY_NODE;Tt.__childrenNodeConstructor=ie;c6(yc);d6(yc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6=!0;function Ft(t,e=null){if(t===null)return ie.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),z(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Tt(n,Ft(e))}if(!(t instanceof Array)&&v6){const n=[];let i=!1;if(En(t,(a,u)=>{if(a.substring(0,1)!=="."){const c=Ft(u);c.isEmpty()||(i=i||!c.getPriority().isEmpty(),n.push(new me(a,c)))}}),n.length===0)return ie.EMPTY_NODE;const s=Yd(n,u6,a=>a.name,Lw);if(i){const a=Yd(n,rt.getCompare());return new ie(s,Ft(e),new Vi({".priority":a},{".priority":rt}))}else return new ie(s,Ft(e),Vi.Default)}else{let n=ie.EMPTY_NODE;return En(t,(i,r)=>{if(or(t,i)&&i.substring(0,1)!=="."){const s=Ft(r);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(i,s))}}),n.updatePriority(Ft(e))}}h6(Ft);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6 extends pp{constructor(e){super(),this.indexPath_=e,z(!ge(e)&&pe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),r=this.extractChild(n.node),s=i.compareTo(r);return s===0?Ba(e.name,n.name):s}makePost(e,n){const i=Ft(e),r=ie.EMPTY_NODE.updateChild(this.indexPath_,i);return new me(n,r)}maxPost(){const e=ie.EMPTY_NODE.updateChild(this.indexPath_,yc);return new me(Ws,e)}toString(){return VR(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6 extends pp{compare(e,n){const i=e.node.compareTo(n.node);return i===0?Ba(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return me.MIN}maxPost(){return me.MAX}makePost(e,n){const i=Ft(e);return new me(n,i)}toString(){return".value"}}const w6=new _6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(t){return{type:"value",snapshotNode:t}}function ya(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Du(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ou(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function x6(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e){this.index_=e}updateChild(e,n,i,r,s,a){z(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const u=e.getImmediateChild(n);return u.getChild(r).equals(i.getChild(r))&&u.isEmpty()===i.isEmpty()||(a!=null&&(i.isEmpty()?e.hasChild(n)?a.trackChildChange(Du(n,u)):z(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?a.trackChildChange(ya(n,i)):a.trackChildChange(Ou(n,i,u))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(rt,(r,s)=>{n.hasChild(r)||i.trackChildChange(Du(r,s))}),n.isLeafNode()||n.forEachChild(rt,(r,s)=>{if(e.hasChild(r)){const a=e.getImmediateChild(r);a.equals(s)||i.trackChildChange(Ou(r,s,a))}else i.trackChildChange(ya(r,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ie.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e){this.indexedFilter_=new Mw(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ju.getStartPost_(e),this.endPost_=ju.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,r,s,a){return this.matches(new me(n,i))||(i=ie.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,r,s,a)}updateFullNode(e,n,i){n.isLeafNode()&&(n=ie.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(ie.EMPTY_NODE);const s=this;return n.forEachChild(rt,(a,u)=>{s.matches(new me(a,u))||(r=r.updateImmediateChild(a,ie.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new ju(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,r,s,a){return this.rangedFilter_.matches(new me(n,i))||(i=ie.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,r,s,a):this.fullLimitUpdateChild_(e,n,i,s,a)}updateFullNode(e,n,i){let r;if(n.isLeafNode()||n.isEmpty())r=ie.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=ie.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let a=0;for(;s.hasNext()&&a<this.limit_;){const u=s.getNext();if(this.withinDirectionalStart(u))if(this.withinDirectionalEnd(u))r=r.updateImmediateChild(u.name,u.node),a++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(ie.EMPTY_NODE);let s;this.reverse_?s=r.getReverseIterator(this.index_):s=r.getIterator(this.index_);let a=0;for(;s.hasNext();){const u=s.getNext();a<this.limit_&&this.withinDirectionalStart(u)&&this.withinDirectionalEnd(u)?a++:r=r.updateImmediateChild(u.name,ie.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,r,s){let a;if(this.reverse_){const g=this.index_.getCompare();a=(y,_)=>g(_,y)}else a=this.index_.getCompare();const u=e;z(u.numChildren()===this.limit_,"");const c=new me(n,i),d=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),p=this.rangedFilter_.matches(c);if(u.hasChild(n)){const g=u.getImmediateChild(n);let y=r.getChildAfterChild(this.index_,d,this.reverse_);for(;y!=null&&(y.name===n||u.hasChild(y.name));)y=r.getChildAfterChild(this.index_,y,this.reverse_);const _=y==null?1:a(y,c);if(p&&!i.isEmpty()&&_>=0)return s!=null&&s.trackChildChange(Ou(n,i,g)),u.updateImmediateChild(n,i);{s!=null&&s.trackChildChange(Du(n,g));const C=u.updateImmediateChild(n,ie.EMPTY_NODE);return y!=null&&this.rangedFilter_.matches(y)?(s!=null&&s.trackChildChange(ya(y.name,y.node)),C.updateImmediateChild(y.name,y.node)):C}}else return i.isEmpty()?e:p&&a(d,c)>=0?(s!=null&&(s.trackChildChange(Du(d.name,d.node)),s.trackChildChange(ya(n,i))),u.updateImmediateChild(n,i).updateImmediateChild(d.name,ie.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=rt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return z(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return z(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:va}hasEnd(){return this.endSet_}getIndexEndValue(){return z(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return z(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ws}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return z(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===rt}copy(){const e=new Dw;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function S6(t){return t.loadsAllData()?new Mw(t.getIndex()):t.hasLimit()?new E6(t):new ju(t)}function DC(t){const e={};if(t.isDefault())return e;let n;if(t.index_===rt?n="$priority":t.index_===w6?n="$value":t.index_===Zo?n="$key":(z(t.index_ instanceof y6,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Rt(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=Rt(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+Rt(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=Rt(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+Rt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function OC(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==rt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd extends FR{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=vc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(z(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const a=Zd.getListenId_(e,i),u={};this.listens_[a]=u;const c=DC(e._queryParams);this.restRequest_(s+".json",c,(d,p)=>{let g=p;if(d===404&&(g=null,d=null),d===null&&this.onDataUpdate_(s,g,!1,i),aa(this.listens_,a)===u){let y;d?d===401?y="permission_denied":y="rest_error:"+d:y="ok",r(y,null)}})}unlisten(e,n){const i=Zd.getListenId_(e,n);delete this.listens_[i]}get(e){const n=DC(e._queryParams),i=e._path.toString(),r=new kf;return this.restRequest_(i+".json",n,(s,a)=>{let u=a;s===404&&(u=null,s=null),s===null?(this.onDataUpdate_(i,u,!1,null),r.resolve(u)):r.reject(new Error(u))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(n.auth=r.accessToken),s&&s.token&&(n.ac=s.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ba(n);this.log_("Sending REST request for "+a);const u=new XMLHttpRequest;u.onreadystatechange=()=>{if(i&&u.readyState===4){this.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);let c=null;if(u.status>=200&&u.status<300){try{c=vu(u.responseText)}catch{xn("Failed to parse JSON response for "+a+": "+u.responseText)}i(null,c)}else u.status!==401&&u.status!==404&&xn("Got unsuccessful REST response for "+a+" Status: "+u.status),i(u.status);i=null}},u.open("GET",a,!0),u.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(){this.rootNode_=ie.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(){return{value:null,children:new Map}}function ZR(t,e,n){if(ge(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=pe(e);t.children.has(i)||t.children.set(i,Xd());const r=t.children.get(i);e=Ue(e),ZR(r,e,n)}}function Qv(t,e,n){t.value!==null?n(e,t.value):I6(t,(i,r)=>{const s=new Oe(e.toString()+"/"+i);Qv(r,s,n)})}function I6(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&En(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=10*1e3,A6=30*1e3,k6=5*60*1e3;class b6{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new T6(e);const i=jC+(A6-jC)*Math.random();Ql(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;En(e,(r,s)=>{s>0&&or(this.statsToReport_,r)&&(n[r]=s,i=!0)}),i&&this.server_.reportStats(n),Ql(this.reportStats_.bind(this),Math.floor(Math.random()*2*k6))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ti;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ti||(ti={}));function XR(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ow(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function jw(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=ti.ACK_USER_WRITE,this.source=XR()}operationForChild(e){if(ge(this.path)){if(this.affectedTree.value!=null)return z(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Oe(e));return new Jd(ke(),n,this.revert)}}else return z(pe(this.path)===e,"operationForChild called for unrelated child."),new Jd(Ue(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n){this.source=e,this.path=n,this.type=ti.LISTEN_COMPLETE}operationForChild(e){return ge(this.path)?new Bu(this.source,ke()):new Bu(this.source,Ue(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=ti.OVERWRITE}operationForChild(e){return ge(this.path)?new Hs(this.source,ke(),this.snap.getImmediateChild(e)):new Hs(this.source,Ue(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=ti.MERGE}operationForChild(e){if(ge(this.path)){const n=this.children.subtree(new Oe(e));return n.isEmpty()?null:n.value?new Hs(this.source,ke(),n.value):new Fu(this.source,ke(),n)}else return z(pe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Fu(this.source,Ue(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ge(e))return this.isFullyInitialized()&&!this.filtered_;const n=pe(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function P6(t,e,n,i){const r=[],s=[];return e.forEach(a=>{a.type==="child_changed"&&t.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&s.push(x6(a.childName,a.snapshotNode))}),vl(t,r,"child_removed",e,i,n),vl(t,r,"child_added",e,i,n),vl(t,r,"child_moved",s,i,n),vl(t,r,"child_changed",e,i,n),vl(t,r,"value",e,i,n),r}function vl(t,e,n,i,r,s){const a=i.filter(u=>u.type===n);a.sort((u,c)=>L6(t,u,c)),a.forEach(u=>{const c=N6(t,u,s);r.forEach(d=>{d.respondsTo(u.type)&&e.push(d.createEvent(c,t.query_))})})}function N6(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function L6(t,e,n){if(e.childName==null||n.childName==null)throw ka("Should only compare child_ events.");const i=new me(e.childName,e.snapshotNode),r=new me(n.childName,n.snapshotNode);return t.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(t,e){return{eventCache:t,serverCache:e}}function ql(t,e,n,i){return mp(new Gs(e,n,i),t.serverCache)}function JR(t,e,n,i){return mp(t.eventCache,new Gs(e,n,i))}function qv(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function $s(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sg;const M6=()=>(sg||(sg=new gn(_V)),sg);class Ge{constructor(e,n=M6()){this.value=e,this.children=n}static fromObject(e){let n=new Ge(null);return En(e,(i,r)=>{n=n.set(new Oe(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ke(),value:this.value};if(ge(e))return null;{const i=pe(e),r=this.children.get(i);if(r!==null){const s=r.findRootMostMatchingPathAndValue(Ue(e),n);return s!=null?{path:Et(new Oe(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ge(e))return this;{const n=pe(e),i=this.children.get(n);return i!==null?i.subtree(Ue(e)):new Ge(null)}}set(e,n){if(ge(e))return new Ge(n,this.children);{const i=pe(e),s=(this.children.get(i)||new Ge(null)).set(Ue(e),n),a=this.children.insert(i,s);return new Ge(this.value,a)}}remove(e){if(ge(e))return this.children.isEmpty()?new Ge(null):new Ge(null,this.children);{const n=pe(e),i=this.children.get(n);if(i){const r=i.remove(Ue(e));let s;return r.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,r),this.value===null&&s.isEmpty()?new Ge(null):new Ge(this.value,s)}else return this}}get(e){if(ge(e))return this.value;{const n=pe(e),i=this.children.get(n);return i?i.get(Ue(e)):null}}setTree(e,n){if(ge(e))return n;{const i=pe(e),s=(this.children.get(i)||new Ge(null)).setTree(Ue(e),n);let a;return s.isEmpty()?a=this.children.remove(i):a=this.children.insert(i,s),new Ge(this.value,a)}}fold(e){return this.fold_(ke(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Et(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,ke(),n)}findOnPath_(e,n,i){const r=this.value?i(n,this.value):!1;if(r)return r;if(ge(e))return null;{const s=pe(e),a=this.children.get(s);return a?a.findOnPath_(Ue(e),Et(n,s),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ke(),n)}foreachOnPath_(e,n,i){if(ge(e))return this;{this.value&&i(n,this.value);const r=pe(e),s=this.children.get(r);return s?s.foreachOnPath_(Ue(e),Et(n,r),i):new Ge(null)}}foreach(e){this.foreach_(ke(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(Et(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this.writeTree_=e}static empty(){return new ri(new Ge(null))}}function Kl(t,e,n){if(ge(e))return new ri(new Ge(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let s=i.value;const a=mn(r,e);return s=s.updateChild(a,n),new ri(t.writeTree_.set(r,s))}else{const r=new Ge(n),s=t.writeTree_.setTree(e,r);return new ri(s)}}}function BC(t,e,n){let i=t;return En(n,(r,s)=>{i=Kl(i,Et(e,r),s)}),i}function FC(t,e){if(ge(e))return ri.empty();{const n=t.writeTree_.setTree(e,new Ge(null));return new ri(n)}}function Kv(t,e){return ro(t,e)!=null}function ro(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(mn(n.path,e)):null}function UC(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(rt,(i,r)=>{e.push(new me(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new me(i,r.value))}),e}function zr(t,e){if(ge(e))return t;{const n=ro(t,e);return n!=null?new ri(new Ge(n)):new ri(t.writeTree_.subtree(e))}}function Yv(t){return t.writeTree_.isEmpty()}function _a(t,e){return eP(ke(),t.writeTree_,e)}function eP(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(z(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):n=eP(Et(t,r),s,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(Et(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(t,e){return rP(e,t)}function D6(t,e,n,i,r){z(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=Kl(t.visibleWrites,e,n)),t.lastWriteId=i}function O6(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function j6(t,e){const n=t.allWrites.findIndex(u=>u.writeId===e);z(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,s=!1,a=t.allWrites.length-1;for(;r&&a>=0;){const u=t.allWrites[a];u.visible&&(a>=n&&B6(u,i.path)?r=!1:ei(i.path,u.path)&&(s=!0)),a--}if(r){if(s)return F6(t),!0;if(i.snap)t.visibleWrites=FC(t.visibleWrites,i.path);else{const u=i.children;En(u,c=>{t.visibleWrites=FC(t.visibleWrites,Et(i.path,c))})}return!0}else return!1}function B6(t,e){if(t.snap)return ei(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&ei(Et(t.path,n),e))return!0;return!1}function F6(t){t.visibleWrites=tP(t.allWrites,U6,ke()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function U6(t){return t.visible}function tP(t,e,n){let i=ri.empty();for(let r=0;r<t.length;++r){const s=t[r];if(e(s)){const a=s.path;let u;if(s.snap)ei(n,a)?(u=mn(n,a),i=Kl(i,u,s.snap)):ei(a,n)&&(u=mn(a,n),i=Kl(i,ke(),s.snap.getChild(u)));else if(s.children){if(ei(n,a))u=mn(n,a),i=BC(i,u,s.children);else if(ei(a,n))if(u=mn(a,n),ge(u))i=BC(i,ke(),s.children);else{const c=aa(s.children,pe(u));if(c){const d=c.getChild(Ue(u));i=Kl(i,ke(),d)}}}else throw ka("WriteRecord should have .snap or .children")}}return i}function nP(t,e,n,i,r){if(!i&&!r){const s=ro(t.visibleWrites,e);if(s!=null)return s;{const a=zr(t.visibleWrites,e);if(Yv(a))return n;if(n==null&&!Kv(a,ke()))return null;{const u=n||ie.EMPTY_NODE;return _a(a,u)}}}else{const s=zr(t.visibleWrites,e);if(!r&&Yv(s))return n;if(!r&&n==null&&!Kv(s,ke()))return null;{const a=function(d){return(d.visible||r)&&(!i||!~i.indexOf(d.writeId))&&(ei(d.path,e)||ei(e,d.path))},u=tP(t.allWrites,a,e),c=n||ie.EMPTY_NODE;return _a(u,c)}}}function z6(t,e,n){let i=ie.EMPTY_NODE;const r=ro(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(rt,(s,a)=>{i=i.updateImmediateChild(s,a)}),i;if(n){const s=zr(t.visibleWrites,e);return n.forEachChild(rt,(a,u)=>{const c=_a(zr(s,new Oe(a)),u);i=i.updateImmediateChild(a,c)}),UC(s).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}else{const s=zr(t.visibleWrites,e);return UC(s).forEach(a=>{i=i.updateImmediateChild(a.name,a.node)}),i}}function V6(t,e,n,i,r){z(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Et(e,n);if(Kv(t.visibleWrites,s))return null;{const a=zr(t.visibleWrites,s);return Yv(a)?r.getChild(n):_a(a,r.getChild(n))}}function W6(t,e,n,i){const r=Et(e,n),s=ro(t.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(n)){const a=zr(t.visibleWrites,r);return _a(a,i.getNode().getImmediateChild(n))}else return null}function H6(t,e){return ro(t.visibleWrites,e)}function G6(t,e,n,i,r,s,a){let u;const c=zr(t.visibleWrites,e),d=ro(c,ke());if(d!=null)u=d;else if(n!=null)u=_a(c,n);else return[];if(u=u.withIndex(a),!u.isEmpty()&&!u.isLeafNode()){const p=[],g=a.getCompare(),y=s?u.getReverseIteratorFrom(i,a):u.getIteratorFrom(i,a);let _=y.getNext();for(;_&&p.length<r;)g(_,i)!==0&&p.push(_),_=y.getNext();return p}else return[]}function $6(){return{visibleWrites:ri.empty(),allWrites:[],lastWriteId:-1}}function ef(t,e,n,i){return nP(t.writeTree,t.treePath,e,n,i)}function Fw(t,e){return z6(t.writeTree,t.treePath,e)}function zC(t,e,n,i){return V6(t.writeTree,t.treePath,e,n,i)}function tf(t,e){return H6(t.writeTree,Et(t.treePath,e))}function Q6(t,e,n,i,r,s){return G6(t.writeTree,t.treePath,e,n,i,r,s)}function Uw(t,e,n){return W6(t.writeTree,t.treePath,e,n)}function iP(t,e){return rP(Et(t.treePath,e),t.writeTree)}function rP(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;z(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),z(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(i,Ou(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(i,Du(i,r.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(i,ya(i,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(i,Ou(i,e.snapshotNode,r.oldSnap));else throw ka("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const sP=new K6;class zw{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Gs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Uw(this.writes_,e,i)}}getChildAfterChild(e,n,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:$s(this.viewCache_),s=Q6(this.writes_,r,n,1,i,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y6(t){return{filter:t}}function Z6(t,e){z(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),z(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function X6(t,e,n,i,r){const s=new q6;let a,u;if(n.type===ti.OVERWRITE){const d=n;d.source.fromUser?a=Zv(t,e,d.path,d.snap,i,r,s):(z(d.source.fromServer,"Unknown source."),u=d.source.tagged||e.serverCache.isFiltered()&&!ge(d.path),a=nf(t,e,d.path,d.snap,i,r,u,s))}else if(n.type===ti.MERGE){const d=n;d.source.fromUser?a=e5(t,e,d.path,d.children,i,r,s):(z(d.source.fromServer,"Unknown source."),u=d.source.tagged||e.serverCache.isFiltered(),a=Xv(t,e,d.path,d.children,i,r,u,s))}else if(n.type===ti.ACK_USER_WRITE){const d=n;d.revert?a=i5(t,e,d.path,i,r,s):a=t5(t,e,d.path,d.affectedTree,i,r,s)}else if(n.type===ti.LISTEN_COMPLETE)a=n5(t,e,n.path,i,s);else throw ka("Unknown operation type: "+n.type);const c=s.getChanges();return J6(e,a,c),{viewCache:a,changes:c}}function J6(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=qv(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(YR(qv(e)))}}function oP(t,e,n,i,r,s){const a=e.eventCache;if(tf(i,n)!=null)return e;{let u,c;if(ge(n))if(z(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const d=$s(e),p=d instanceof ie?d:ie.EMPTY_NODE,g=Fw(i,p);u=t.filter.updateFullNode(e.eventCache.getNode(),g,s)}else{const d=ef(i,$s(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const d=pe(n);if(d===".priority"){z(Kr(n)===1,"Can't have a priority with additional path components");const p=a.getNode();c=e.serverCache.getNode();const g=zC(i,n,p,c);g!=null?u=t.filter.updatePriority(p,g):u=a.getNode()}else{const p=Ue(n);let g;if(a.isCompleteForChild(d)){c=e.serverCache.getNode();const y=zC(i,n,a.getNode(),c);y!=null?g=a.getNode().getImmediateChild(d).updateChild(p,y):g=a.getNode().getImmediateChild(d)}else g=Uw(i,d,e.serverCache);g!=null?u=t.filter.updateChild(a.getNode(),d,g,p,r,s):u=a.getNode()}}return ql(e,u,a.isFullyInitialized()||ge(n),t.filter.filtersNodes())}}function nf(t,e,n,i,r,s,a,u){const c=e.serverCache;let d;const p=a?t.filter:t.filter.getIndexedFilter();if(ge(n))d=p.updateFullNode(c.getNode(),i,null);else if(p.filtersNodes()&&!c.isFiltered()){const _=c.getNode().updateChild(n,i);d=p.updateFullNode(c.getNode(),_,null)}else{const _=pe(n);if(!c.isCompleteForPath(n)&&Kr(n)>1)return e;const x=Ue(n),k=c.getNode().getImmediateChild(_).updateChild(x,i);_===".priority"?d=p.updatePriority(c.getNode(),k):d=p.updateChild(c.getNode(),_,k,x,sP,null)}const g=JR(e,d,c.isFullyInitialized()||ge(n),p.filtersNodes()),y=new zw(r,g,s);return oP(t,g,n,r,y,u)}function Zv(t,e,n,i,r,s,a){const u=e.eventCache;let c,d;const p=new zw(r,e,s);if(ge(n))d=t.filter.updateFullNode(e.eventCache.getNode(),i,a),c=ql(e,d,!0,t.filter.filtersNodes());else{const g=pe(n);if(g===".priority")d=t.filter.updatePriority(e.eventCache.getNode(),i),c=ql(e,d,u.isFullyInitialized(),u.isFiltered());else{const y=Ue(n),_=u.getNode().getImmediateChild(g);let x;if(ge(y))x=i;else{const C=p.getCompleteChild(g);C!=null?zR(y)===".priority"&&C.getChild(WR(y)).isEmpty()?x=C:x=C.updateChild(y,i):x=ie.EMPTY_NODE}if(_.equals(x))c=e;else{const C=t.filter.updateChild(u.getNode(),g,x,y,p,a);c=ql(e,C,u.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function VC(t,e){return t.eventCache.isCompleteForChild(e)}function e5(t,e,n,i,r,s,a){let u=e;return i.foreach((c,d)=>{const p=Et(n,c);VC(e,pe(p))&&(u=Zv(t,u,p,d,r,s,a))}),i.foreach((c,d)=>{const p=Et(n,c);VC(e,pe(p))||(u=Zv(t,u,p,d,r,s,a))}),u}function WC(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function Xv(t,e,n,i,r,s,a,u){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,d;ge(n)?d=i:d=new Ge(null).setTree(n,i);const p=e.serverCache.getNode();return d.children.inorderTraversal((g,y)=>{if(p.hasChild(g)){const _=e.serverCache.getNode().getImmediateChild(g),x=WC(t,_,y);c=nf(t,c,new Oe(g),x,r,s,a,u)}}),d.children.inorderTraversal((g,y)=>{const _=!e.serverCache.isCompleteForChild(g)&&y.value===null;if(!p.hasChild(g)&&!_){const x=e.serverCache.getNode().getImmediateChild(g),C=WC(t,x,y);c=nf(t,c,new Oe(g),C,r,s,a,u)}}),c}function t5(t,e,n,i,r,s,a){if(tf(r,n)!=null)return e;const u=e.serverCache.isFiltered(),c=e.serverCache;if(i.value!=null){if(ge(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return nf(t,e,n,c.getNode().getChild(n),r,s,u,a);if(ge(n)){let d=new Ge(null);return c.getNode().forEachChild(Zo,(p,g)=>{d=d.set(new Oe(p),g)}),Xv(t,e,n,d,r,s,u,a)}else return e}else{let d=new Ge(null);return i.foreach((p,g)=>{const y=Et(n,p);c.isCompleteForPath(y)&&(d=d.set(p,c.getNode().getChild(y)))}),Xv(t,e,n,d,r,s,u,a)}}function n5(t,e,n,i,r){const s=e.serverCache,a=JR(e,s.getNode(),s.isFullyInitialized()||ge(n),s.isFiltered());return oP(t,a,n,i,sP,r)}function i5(t,e,n,i,r,s){let a;if(tf(i,n)!=null)return e;{const u=new zw(i,e,r),c=e.eventCache.getNode();let d;if(ge(n)||pe(n)===".priority"){let p;if(e.serverCache.isFullyInitialized())p=ef(i,$s(e));else{const g=e.serverCache.getNode();z(g instanceof ie,"serverChildren would be complete if leaf node"),p=Fw(i,g)}p=p,d=t.filter.updateFullNode(c,p,s)}else{const p=pe(n);let g=Uw(i,p,e.serverCache);g==null&&e.serverCache.isCompleteForChild(p)&&(g=c.getImmediateChild(p)),g!=null?d=t.filter.updateChild(c,p,g,Ue(n),u,s):e.eventCache.getNode().hasChild(p)?d=t.filter.updateChild(c,p,ie.EMPTY_NODE,Ue(n),u,s):d=c,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=ef(i,$s(e)),a.isLeafNode()&&(d=t.filter.updateFullNode(d,a,s)))}return a=e.serverCache.isFullyInitialized()||tf(i,ke())!=null,ql(e,d,a,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new Mw(i.getIndex()),s=S6(i);this.processor_=Y6(s);const a=n.serverCache,u=n.eventCache,c=r.updateFullNode(ie.EMPTY_NODE,a.getNode(),null),d=s.updateFullNode(ie.EMPTY_NODE,u.getNode(),null),p=new Gs(c,a.isFullyInitialized(),r.filtersNodes()),g=new Gs(d,u.isFullyInitialized(),s.filtersNodes());this.viewCache_=mp(g,p),this.eventGenerator_=new R6(this.query_)}get query(){return this.query_}}function s5(t){return t.viewCache_.serverCache.getNode()}function o5(t,e){const n=$s(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ge(e)&&!n.getImmediateChild(pe(e)).isEmpty())?n.getChild(e):null}function HC(t){return t.eventRegistrations_.length===0}function a5(t,e){t.eventRegistrations_.push(e)}function GC(t,e,n){const i=[];if(n){z(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(s=>{const a=s.createCancelEvent(n,r);a&&i.push(a)})}if(e){let r=[];for(let s=0;s<t.eventRegistrations_.length;++s){const a=t.eventRegistrations_[s];if(!a.matches(e))r.push(a);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return i}function $C(t,e,n,i){e.type===ti.MERGE&&e.source.queryId!==null&&(z($s(t.viewCache_),"We should always have a full cache before handling merges"),z(qv(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,s=X6(t.processor_,r,e,n,i);return Z6(t.processor_,s.viewCache),z(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,aP(t,s.changes,s.viewCache.eventCache.getNode(),null)}function l5(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(rt,(s,a)=>{i.push(ya(s,a))}),n.isFullyInitialized()&&i.push(YR(n.getNode())),aP(t,i,n.getNode(),e)}function aP(t,e,n,i){const r=i?[i]:t.eventRegistrations_;return P6(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rf;class u5{constructor(){this.views=new Map}}function c5(t){z(!rf,"__referenceConstructor has already been defined"),rf=t}function h5(){return z(rf,"Reference.ts has not been loaded"),rf}function d5(t){return t.views.size===0}function Vw(t,e,n,i){const r=e.source.queryId;if(r!==null){const s=t.views.get(r);return z(s!=null,"SyncTree gave us an op for an invalid query."),$C(s,e,n,i)}else{let s=[];for(const a of t.views.values())s=s.concat($C(a,e,n,i));return s}}function f5(t,e,n,i,r){const s=e._queryIdentifier,a=t.views.get(s);if(!a){let u=ef(n,r?i:null),c=!1;u?c=!0:i instanceof ie?(u=Fw(n,i),c=!1):(u=ie.EMPTY_NODE,c=!1);const d=mp(new Gs(u,c,!1),new Gs(i,r,!1));return new r5(e,d)}return a}function p5(t,e,n,i,r,s){const a=f5(t,e,i,r,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,a),a5(a,n),l5(a,n)}function m5(t,e,n,i){const r=e._queryIdentifier,s=[];let a=[];const u=Yr(t);if(r==="default")for(const[c,d]of t.views.entries())a=a.concat(GC(d,n,i)),HC(d)&&(t.views.delete(c),d.query._queryParams.loadsAllData()||s.push(d.query));else{const c=t.views.get(r);c&&(a=a.concat(GC(c,n,i)),HC(c)&&(t.views.delete(r),c.query._queryParams.loadsAllData()||s.push(c.query)))}return u&&!Yr(t)&&s.push(new(h5())(e._repo,e._path)),{removed:s,events:a}}function lP(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Xo(t,e){let n=null;for(const i of t.views.values())n=n||o5(i,e);return n}function uP(t,e){if(e._queryParams.loadsAllData())return gp(t);{const i=e._queryIdentifier;return t.views.get(i)}}function cP(t,e){return uP(t,e)!=null}function Yr(t){return gp(t)!=null}function gp(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sf;function g5(t){z(!sf,"__referenceConstructor has already been defined"),sf=t}function v5(){return z(sf,"Reference.ts has not been loaded"),sf}let y5=1;class QC{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ge(null),this.pendingWriteTree_=$6(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function hP(t,e,n,i,r){return D6(t.pendingWriteTree_,e,n,i,r),r?_c(t,new Hs(XR(),e,n)):[]}function Cs(t,e,n=!1){const i=O6(t.pendingWriteTree_,e);if(j6(t.pendingWriteTree_,e)){let s=new Ge(null);return i.snap!=null?s=s.set(ke(),!0):En(i.children,a=>{s=s.set(new Oe(a),!0)}),_c(t,new Jd(i.path,s,n))}else return[]}function vp(t,e,n){return _c(t,new Hs(Ow(),e,n))}function _5(t,e,n){const i=Ge.fromObject(n);return _c(t,new Fu(Ow(),e,i))}function w5(t,e){return _c(t,new Bu(Ow(),e))}function x5(t,e,n){const i=Hw(t,n);if(i){const r=Gw(i),s=r.path,a=r.queryId,u=mn(s,e),c=new Bu(jw(a),u);return $w(t,s,c)}else return[]}function Jv(t,e,n,i,r=!1){const s=e._path,a=t.syncPointTree_.get(s);let u=[];if(a&&(e._queryIdentifier==="default"||cP(a,e))){const c=m5(a,e,n,i);d5(a)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const d=c.removed;if(u=c.events,!r){const p=d.findIndex(y=>y._queryParams.loadsAllData())!==-1,g=t.syncPointTree_.findOnPath(s,(y,_)=>Yr(_));if(p&&!g){const y=t.syncPointTree_.subtree(s);if(!y.isEmpty()){const _=C5(y);for(let x=0;x<_.length;++x){const C=_[x],k=C.query,S=pP(t,C);t.listenProvider_.startListening(Yl(k),of(t,k),S.hashFn,S.onComplete)}}}!g&&d.length>0&&!i&&(p?t.listenProvider_.stopListening(Yl(e),null):d.forEach(y=>{const _=t.queryToTagMap.get(yp(y));t.listenProvider_.stopListening(Yl(y),_)}))}I5(t,d)}return u}function E5(t,e,n,i){const r=Hw(t,i);if(r!=null){const s=Gw(r),a=s.path,u=s.queryId,c=mn(a,e),d=new Hs(jw(u),c,n);return $w(t,a,d)}else return[]}function S5(t,e,n,i){const r=Hw(t,i);if(r){const s=Gw(r),a=s.path,u=s.queryId,c=mn(a,e),d=Ge.fromObject(n),p=new Fu(jw(u),c,d);return $w(t,a,p)}else return[]}function qC(t,e,n,i=!1){const r=e._path;let s=null,a=!1;t.syncPointTree_.foreachOnPath(r,(y,_)=>{const x=mn(y,r);s=s||Xo(_,x),a=a||Yr(_)});let u=t.syncPointTree_.get(r);u?(a=a||Yr(u),s=s||Xo(u,ke())):(u=new u5,t.syncPointTree_=t.syncPointTree_.set(r,u));let c;s!=null?c=!0:(c=!1,s=ie.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((_,x)=>{const C=Xo(x,ke());C&&(s=s.updateImmediateChild(_,C))}));const d=cP(u,e);if(!d&&!e._queryParams.loadsAllData()){const y=yp(e);z(!t.queryToTagMap.has(y),"View does not exist, but we have a tag");const _=T5();t.queryToTagMap.set(y,_),t.tagToQueryMap.set(_,y)}const p=Bw(t.pendingWriteTree_,r);let g=p5(u,e,n,p,s,c);if(!d&&!a&&!i){const y=uP(u,e);g=g.concat(A5(t,e,y))}return g}function Ww(t,e,n){const r=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(a,u)=>{const c=mn(a,e),d=Xo(u,c);if(d)return d});return nP(r,e,s,n,!0)}function _c(t,e){return dP(e,t.syncPointTree_,null,Bw(t.pendingWriteTree_,ke()))}function dP(t,e,n,i){if(ge(t.path))return fP(t,e,n,i);{const r=e.get(ke());n==null&&r!=null&&(n=Xo(r,ke()));let s=[];const a=pe(t.path),u=t.operationForChild(a),c=e.children.get(a);if(c&&u){const d=n?n.getImmediateChild(a):null,p=iP(i,a);s=s.concat(dP(u,c,d,p))}return r&&(s=s.concat(Vw(r,t,i,n))),s}}function fP(t,e,n,i){const r=e.get(ke());n==null&&r!=null&&(n=Xo(r,ke()));let s=[];return e.children.inorderTraversal((a,u)=>{const c=n?n.getImmediateChild(a):null,d=iP(i,a),p=t.operationForChild(a);p&&(s=s.concat(fP(p,u,c,d)))}),r&&(s=s.concat(Vw(r,t,i,n))),s}function pP(t,e){const n=e.query,i=of(t,n);return{hashFn:()=>(s5(e)||ie.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?x5(t,n._path,i):w5(t,n._path);{const s=EV(r,n);return Jv(t,n,null,s)}}}}function of(t,e){const n=yp(e);return t.queryToTagMap.get(n)}function yp(t){return t._path.toString()+"$"+t._queryIdentifier}function Hw(t,e){return t.tagToQueryMap.get(e)}function Gw(t){const e=t.indexOf("$");return z(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Oe(t.substr(0,e))}}function $w(t,e,n){const i=t.syncPointTree_.get(e);z(i,"Missing sync point for query tag that we're tracking");const r=Bw(t.pendingWriteTree_,e);return Vw(i,n,r,null)}function C5(t){return t.fold((e,n,i)=>{if(n&&Yr(n))return[gp(n)];{let r=[];return n&&(r=lP(n)),En(i,(s,a)=>{r=r.concat(a)}),r}})}function Yl(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(v5())(t._repo,t._path):t}function I5(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const r=yp(i),s=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(s)}}}function T5(){return y5++}function A5(t,e,n){const i=e._path,r=of(t,e),s=pP(t,n),a=t.listenProvider_.startListening(Yl(e),r,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(i);if(r)z(!Yr(u.value),"If we're adding a query, it shouldn't be shadowed");else{const c=u.fold((d,p,g)=>{if(!ge(d)&&p&&Yr(p))return[gp(p).query];{let y=[];return p&&(y=y.concat(lP(p).map(_=>_.query))),En(g,(_,x)=>{y=y.concat(x)}),y}});for(let d=0;d<c.length;++d){const p=c[d];t.listenProvider_.stopListening(Yl(p),of(t,p))}}return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Qw(n)}node(){return this.node_}}class qw{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Et(this.path_,e);return new qw(this.syncTree_,n)}node(){return Ww(this.syncTree_,this.path_)}}const k5=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},KC=function(t,e,n){if(!t||typeof t!="object")return t;if(z(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return b5(t[".sv"],e,n);if(typeof t[".sv"]=="object")return R5(t[".sv"],e);z(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},b5=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:z(!1,"Unexpected server value: "+t)}},R5=function(t,e,n){t.hasOwnProperty("increment")||z(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&z(!1,"Unexpected increment value: "+i);const r=e.node();if(z(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const a=r.getValue();return typeof a!="number"?i:a+i},P5=function(t,e,n,i){return Kw(e,new qw(n,t),i)},mP=function(t,e,n){return Kw(t,new Qw(e),n)};function Kw(t,e,n){const i=t.getPriority().val(),r=KC(i,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const a=t,u=KC(a.getValue(),e,n);return u!==a.getValue()||r!==a.getPriority().val()?new Tt(u,Ft(r)):t}else{const a=t;return s=a,r!==a.getPriority().val()&&(s=s.updatePriority(new Tt(r))),a.forEachChild(rt,(u,c)=>{const d=Kw(c,e.getImmediateChild(u),n);d!==c&&(s=s.updateImmediateChild(u,d))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function Zw(t,e){let n=e instanceof Oe?e:new Oe(e),i=t,r=pe(n);for(;r!==null;){const s=aa(i.node.children,r)||{children:{},childCount:0};i=new Yw(r,i,s),n=Ue(n),r=pe(n)}return i}function Ua(t){return t.node.value}function gP(t,e){t.node.value=e,ey(t)}function vP(t){return t.node.childCount>0}function N5(t){return Ua(t)===void 0&&!vP(t)}function _p(t,e){En(t.node.children,(n,i)=>{e(new Yw(n,t,i))})}function yP(t,e,n,i){n&&!i&&e(t),_p(t,r=>{yP(r,e,!0,i)}),n&&i&&e(t)}function L5(t,e,n){let i=n?t:t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function wc(t){return new Oe(t.parent===null?t.name:wc(t.parent)+"/"+t.name)}function ey(t){t.parent!==null&&M5(t.parent,t.name,t)}function M5(t,e,n){const i=N5(n),r=or(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,ey(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,ey(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5=/[\[\].#$\/\u0000-\u001F\u007F]/,O5=/[\[\].#$\u0000-\u001F\u007F]/,og=10*1024*1024,_P=function(t){return typeof t=="string"&&t.length!==0&&!D5.test(t)},wP=function(t){return typeof t=="string"&&t.length!==0&&!O5.test(t)},j5=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),wP(t)},B5=function(t,e,n,i){i&&e===void 0||Xw(p_(t,"value"),e,n)},Xw=function(t,e,n){const i=n instanceof Oe?new t6(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+gs(i));if(typeof e=="function")throw new Error(t+"contains a function "+gs(i)+" with contents = "+e.toString());if(wR(e))throw new Error(t+"contains "+e.toString()+" "+gs(i));if(typeof e=="string"&&e.length>og/3&&bf(e)>og)throw new Error(t+"contains a string greater than "+og+" utf8 bytes "+gs(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(En(e,(a,u)=>{if(a===".value")r=!0;else if(a!==".priority"&&a!==".sv"&&(s=!0,!_P(a)))throw new Error(t+" contains an invalid key ("+a+") "+gs(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);n6(i,a),Xw(t,u,i),i6(i)}),r&&s)throw new Error(t+' contains ".value" child '+gs(i)+" in addition to actual children.")}},xP=function(t,e,n,i){if(!(i&&n===void 0)&&!wP(n))throw new Error(p_(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},F5=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),xP(t,e,n,i)},U5=function(t,e){if(pe(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},z5=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!_P(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!j5(n))throw new Error(p_(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Jw(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();n!==null&&!Pw(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(r)}n&&t.eventLists_.push(n)}function EP(t,e,n){Jw(t,n),SP(t,i=>Pw(i,e))}function rr(t,e,n){Jw(t,n),SP(t,i=>ei(i,e)||ei(e,i))}function SP(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];if(r){const s=r.path;e(s)?(W5(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function W5(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();Rs&&Kt("event: "+n.toString()),Fa(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5="repo_interrupt",G5=25;class $5{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new V5,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Xd(),this.transactionQueueTree_=new Yw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Q5(t,e,n){if(t.stats_=bw(t.repoInfo_),t.forceRestClient_||TV())t.server_=new Zd(t.repoInfo_,(i,r,s,a)=>{YC(t,i,r,s,a)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>ZC(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Rt(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new $i(t.repoInfo_,e,(i,r,s,a)=>{YC(t,i,r,s,a)},i=>{ZC(t,i)},i=>{K5(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=PV(t.repoInfo_,()=>new b6(t.stats_,t.server_)),t.infoData_=new C6,t.infoSyncTree_=new QC({startListening:(i,r,s,a)=>{let u=[];const c=t.infoData_.getNode(i._path);return c.isEmpty()||(u=vp(t.infoSyncTree_,i._path,c),setTimeout(()=>{a("ok")},0)),u},stopListening:()=>{}}),t0(t,"connected",!1),t.serverSyncTree_=new QC({startListening:(i,r,s,a)=>(t.server_.listen(i,s,r,(u,c)=>{const d=a(u,c);rr(t.eventQueue_,i._path,d)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function q5(t){const n=t.infoData_.getNode(new Oe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function e0(t){return k5({timestamp:q5(t)})}function YC(t,e,n,i,r){t.dataUpdateCount++;const s=new Oe(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let a=[];if(r)if(i){const c=Sd(n,d=>Ft(d));a=S5(t.serverSyncTree_,s,c,r)}else{const c=Ft(n);a=E5(t.serverSyncTree_,s,c,r)}else if(i){const c=Sd(n,d=>Ft(d));a=_5(t.serverSyncTree_,s,c)}else{const c=Ft(n);a=vp(t.serverSyncTree_,s,c)}let u=s;a.length>0&&(u=wp(t,s)),rr(t.eventQueue_,u,a)}function ZC(t,e){t0(t,"connected",e),e===!1&&Z5(t)}function K5(t,e){En(e,(n,i)=>{t0(t,n,i)})}function t0(t,e,n){const i=new Oe("/.info/"+e),r=Ft(n);t.infoData_.updateSnapshot(i,r);const s=vp(t.infoSyncTree_,i,r);rr(t.eventQueue_,i,s)}function CP(t){return t.nextWriteId_++}function Y5(t,e,n,i,r){n0(t,"set",{path:e.toString(),value:n,priority:i});const s=e0(t),a=Ft(n,i),u=Ww(t.serverSyncTree_,e),c=mP(a,u,s),d=CP(t),p=hP(t.serverSyncTree_,e,c,d,!0);Jw(t.eventQueue_,p),t.server_.put(e.toString(),a.val(!0),(y,_)=>{const x=y==="ok";x||xn("set at "+e+" failed: "+y);const C=Cs(t.serverSyncTree_,d,!x);rr(t.eventQueue_,e,C),e9(t,r,y,_)});const g=bP(t,e);wp(t,g),rr(t.eventQueue_,g,[])}function Z5(t){n0(t,"onDisconnectEvents");const e=e0(t),n=Xd();Qv(t.onDisconnect_,ke(),(r,s)=>{const a=P5(r,s,t.serverSyncTree_,e);ZR(n,r,a)});let i=[];Qv(n,ke(),(r,s)=>{i=i.concat(vp(t.serverSyncTree_,r,s));const a=bP(t,r);wp(t,a)}),t.onDisconnect_=Xd(),rr(t.eventQueue_,ke(),i)}function X5(t,e,n){let i;pe(e._path)===".info"?i=qC(t.infoSyncTree_,e,n):i=qC(t.serverSyncTree_,e,n),EP(t.eventQueue_,e._path,i)}function XC(t,e,n){let i;pe(e._path)===".info"?i=Jv(t.infoSyncTree_,e,n):i=Jv(t.serverSyncTree_,e,n),EP(t.eventQueue_,e._path,i)}function J5(t){t.persistentConnection_&&t.persistentConnection_.interrupt(H5)}function n0(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Kt(n,...e)}function e9(t,e,n,i){e&&Fa(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let s=r;i&&(s+=": "+i);const a=new Error(s);a.code=r,e(a)}})}function IP(t,e,n){return Ww(t.serverSyncTree_,e,n)||ie.EMPTY_NODE}function i0(t,e=t.transactionQueueTree_){if(e||xp(t,e),Ua(e)){const n=AP(t,e);z(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&t9(t,wc(e),n)}else vP(e)&&_p(e,n=>{i0(t,n)})}function t9(t,e,n){const i=n.map(d=>d.currentWriteId),r=IP(t,e,i);let s=r;const a=r.hash();for(let d=0;d<n.length;d++){const p=n[d];z(p.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=1,p.retryCount++;const g=mn(e,p.path);s=s.updateChild(g,p.currentOutputSnapshotRaw)}const u=s.val(!0),c=e;t.server_.put(c.toString(),u,d=>{n0(t,"transaction put response",{path:c.toString(),status:d});let p=[];if(d==="ok"){const g=[];for(let y=0;y<n.length;y++)n[y].status=2,p=p.concat(Cs(t.serverSyncTree_,n[y].currentWriteId)),n[y].onComplete&&g.push(()=>n[y].onComplete(null,!0,n[y].currentOutputSnapshotResolved)),n[y].unwatcher();xp(t,Zw(t.transactionQueueTree_,e)),i0(t,t.transactionQueueTree_),rr(t.eventQueue_,e,p);for(let y=0;y<g.length;y++)Fa(g[y])}else{if(d==="datastale")for(let g=0;g<n.length;g++)n[g].status===3?n[g].status=4:n[g].status=0;else{xn("transaction at "+c.toString()+" failed: "+d);for(let g=0;g<n.length;g++)n[g].status=4,n[g].abortReason=d}wp(t,e)}},a)}function wp(t,e){const n=TP(t,e),i=wc(n),r=AP(t,n);return n9(t,r,i),i}function n9(t,e,n){if(e.length===0)return;const i=[];let r=[];const a=e.filter(u=>u.status===0).map(u=>u.currentWriteId);for(let u=0;u<e.length;u++){const c=e[u],d=mn(n,c.path);let p=!1,g;if(z(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)p=!0,g=c.abortReason,r=r.concat(Cs(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=G5)p=!0,g="maxretry",r=r.concat(Cs(t.serverSyncTree_,c.currentWriteId,!0));else{const y=IP(t,c.path,a);c.currentInputSnapshot=y;const _=e[u].update(y.val());if(_!==void 0){Xw("transaction failed: Data returned ",_,c.path);let x=Ft(_);typeof _=="object"&&_!=null&&or(_,".priority")||(x=x.updatePriority(y.getPriority()));const k=c.currentWriteId,S=e0(t),E=mP(x,y,S);c.currentOutputSnapshotRaw=x,c.currentOutputSnapshotResolved=E,c.currentWriteId=CP(t),a.splice(a.indexOf(k),1),r=r.concat(hP(t.serverSyncTree_,c.path,E,c.currentWriteId,c.applyLocally)),r=r.concat(Cs(t.serverSyncTree_,k,!0))}else p=!0,g="nodata",r=r.concat(Cs(t.serverSyncTree_,c.currentWriteId,!0))}rr(t.eventQueue_,n,r),r=[],p&&(e[u].status=2,function(y){setTimeout(y,Math.floor(0))}(e[u].unwatcher),e[u].onComplete&&(g==="nodata"?i.push(()=>e[u].onComplete(null,!1,e[u].currentInputSnapshot)):i.push(()=>e[u].onComplete(new Error(g),!1,null))))}xp(t,t.transactionQueueTree_);for(let u=0;u<i.length;u++)Fa(i[u]);i0(t,t.transactionQueueTree_)}function TP(t,e){let n,i=t.transactionQueueTree_;for(n=pe(e);n!==null&&Ua(i)===void 0;)i=Zw(i,n),e=Ue(e),n=pe(e);return i}function AP(t,e){const n=[];return kP(t,e,n),n.sort((i,r)=>i.order-r.order),n}function kP(t,e,n){const i=Ua(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);_p(e,r=>{kP(t,r,n)})}function xp(t,e){const n=Ua(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,gP(e,n.length>0?n:void 0)}_p(e,i=>{xp(t,i)})}function bP(t,e){const n=wc(TP(t,e)),i=Zw(t.transactionQueueTree_,e);return L5(i,r=>{ag(t,r)}),ag(t,i),yP(i,r=>{ag(t,r)}),n}function ag(t,e){const n=Ua(e);if(n){const i=[];let r=[],s=-1;for(let a=0;a<n.length;a++)n[a].status===3||(n[a].status===1?(z(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(z(n[a].status===0,"Unexpected transaction status in abort"),n[a].unwatcher(),r=r.concat(Cs(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&i.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));s===-1?gP(e,void 0):n.length=s+1,rr(t.eventQueue_,wc(e),r);for(let a=0;a<i.length;a++)Fa(i[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i9(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function r9(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):xn(`Invalid query segment '${n}' in query '${t}'`)}return e}const JC=function(t,e){const n=s9(t),i=n.namespace;n.domain==="firebase.com"&&ir(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&ir("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||vV();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new NR(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new Oe(n.pathString)}},s9=function(t){let e="",n="",i="",r="",s="",a=!0,u="https",c=443;if(typeof t=="string"){let d=t.indexOf("//");d>=0&&(u=t.substring(0,d-1),t=t.substring(d+2));let p=t.indexOf("/");p===-1&&(p=t.length);let g=t.indexOf("?");g===-1&&(g=t.length),e=t.substring(0,Math.min(p,g)),p<g&&(r=i9(t.substring(p,g)));const y=r9(t.substring(Math.min(t.length,g)));d=e.indexOf(":"),d>=0?(a=u==="https"||u==="wss",c=parseInt(e.substring(d+1),10)):d=e.length;const _=e.slice(0,d);if(_.toLowerCase()==="localhost")n="localhost";else if(_.split(".").length<=2)n=_;else{const x=e.indexOf(".");i=e.substring(0,x).toLowerCase(),n=e.substring(x+1),s=i}"ns"in y&&(s=y.ns)}return{host:e,port:c,domain:n,subdomain:i,secure:a,scheme:u,pathString:r,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e,n,i,r){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Rt(this.snapshot.exportVal())}}class PP{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return z(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return ge(this._path)?null:zR(this._path)}get ref(){return new ar(this._repo,this._path)}get _queryIdentifier(){const e=OC(this._queryParams),n=Aw(e);return n==="{}"?"default":n}get _queryObject(){return OC(this._queryParams)}isEqual(e){if(e=Ne(e),!(e instanceof r0))return!1;const n=this._repo===e._repo,i=Pw(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+e6(this._path)}}class ar extends r0{constructor(e,n){super(e,n,new Dw,!1)}get parent(){const e=WR(this._path);return e===null?null:new ar(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Uu{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Oe(e),i=af(this.ref,e);return new Uu(this._node.getChild(n),i,rt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new Uu(r,af(this.ref,i),rt)))}hasChild(e){const n=new Oe(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function s0(t,e){return t=Ne(t),t._checkNotDeleted("ref"),e!==void 0?af(t._root,e):t._root}function af(t,e){return t=Ne(t),pe(t._path)===null?F5("child","path",e,!1):xP("child","path",e,!1),new ar(t._repo,Et(t._path,e))}function a9(t,e){t=Ne(t),U5("set",t._path),B5("set",e,t._path,!1);const n=new kf;return Y5(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class o0{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new RP("value",this,new Uu(e.snapshotNode,new ar(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new PP(this,e,n):null}matches(e){return e instanceof o0?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class a0{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new PP(this,e,n):null}createEvent(e,n){z(e.childName!=null,"Child events should have a childName.");const i=af(new ar(n._repo,n._path),e.childName),r=n._queryParams.getIndex();return new RP(e.type,this,new Uu(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof a0?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function l9(t,e,n,i,r){let s;if(typeof i=="object"&&(s=void 0,r=i),typeof i=="function"&&(s=i),r&&r.onlyOnce){const c=n,d=(p,g)=>{XC(t._repo,t,u),c(p,g)};d.userCallback=n.userCallback,d.context=n.context,n=d}const a=new o9(n,s||void 0),u=e==="value"?new o0(a):new a0(e,a);return X5(t._repo,t,u),()=>XC(t._repo,t,u)}function l0(t,e,n,i){return l9(t,"value",e,n,i)}c5(ar);g5(ar);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u9="FIREBASE_DATABASE_EMULATOR_HOST",ty={};let c9=!1;function h9(t,e,n,i){t.repoInfo_=new NR(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function d9(t,e,n,i,r){let s=i||t.options.databaseURL;s===void 0&&(t.options.projectId||ir("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Kt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let a=JC(s,r),u=a.repoInfo,c,d;typeof process<"u"&&process.env&&(d=process.env[u9]),d?(c=!0,s=`http://${d}?ns=${u.namespace}`,a=JC(s,r),u=a.repoInfo):c=!a.repoInfo.secure;const p=r&&c?new Yo(Yo.OWNER):new kV(t.name,t.options,e);z5("Invalid Firebase Database URL",a),ge(a.path)||ir("Database URL must point to the root of a Firebase Database (not including a child path).");const g=p9(u,t,p,new AV(t.name,n));return new m9(g,t)}function f9(t,e){const n=ty[e];(!n||n[t.key]!==t)&&ir(`Database ${e}(${t.repoInfo_}) has already been deleted.`),J5(t),delete n[t.key]}function p9(t,e,n,i){let r=ty[e.name];r||(r={},ty[e.name]=r);let s=r[t.toURLString()];return s&&ir("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new $5(t,c9,n,i),r[t.toURLString()]=s,s}class m9{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Q5(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ar(this._repo,ke())),this._rootInternal}_delete(){return this._rootInternal!==null&&(f9(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ir("Cannot call "+e+" on a deleted database.")}}function NP(t=Pf(),e){const n=qu(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=h_("database");i&&g9(n,...i)}return n}function g9(t,e,n,i={}){t=Ne(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&ir("Cannot call useEmulator() after instance has already been initialized.");const r=t._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&ir('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Yo(Yo.OWNER);else if(i.mockUserToken){const a=typeof i.mockUserToken=="string"?i.mockUserToken:d_(i.mockUserToken,t.app.options.projectId);s=new Yo(a)}h9(r,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v9(t){dV(ts),Gr(new Zi("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return d9(i,r,s,n)},"PUBLIC").setMultipleInstances(!0)),Vn(_C,wC,t),Vn(_C,wC,"esm2017")}$i.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};$i.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};v9();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP="firebasestorage.googleapis.com",MP="storageBucket",y9=2*60*1e3,_9=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt extends ki{constructor(e,n,i=0){super(lg(e),`Firebase Storage: ${n} (${lg(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,lt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return lg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var at;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(at||(at={}));function lg(t){return"storage/"+t}function u0(){const t="An unknown error occurred, please check the error payload for server response.";return new lt(at.UNKNOWN,t)}function w9(t){return new lt(at.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function x9(t){return new lt(at.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function E9(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new lt(at.UNAUTHENTICATED,t)}function S9(){return new lt(at.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function C9(t){return new lt(at.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function I9(){return new lt(at.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function T9(){return new lt(at.CANCELED,"User canceled the upload/download.")}function A9(t){return new lt(at.INVALID_URL,"Invalid URL '"+t+"'.")}function k9(t){return new lt(at.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function b9(){return new lt(at.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+MP+"' property when initializing the app?")}function R9(){return new lt(at.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function P9(){return new lt(at.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function N9(t){return new lt(at.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ny(t){return new lt(at.INVALID_ARGUMENT,t)}function DP(){return new lt(at.APP_DELETED,"The Firebase app was deleted.")}function L9(t){return new lt(at.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Zl(t,e){return new lt(at.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function yl(t){throw new lt(at.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Tn.makeFromUrl(e,n)}catch{return new Tn(e,"")}if(i.path==="")return i;throw k9(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const a="(/(.*))?$",u=new RegExp("^gs://"+r+a,"i"),c={bucket:1,path:3};function d(R){R.path_=decodeURIComponent(R.path)}const p="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",_=new RegExp(`^https?://${g}/${p}/b/${r}/o${y}`,"i"),x={bucket:1,path:3},C=n===LP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",S=new RegExp(`^https?://${C}/${r}/${k}`,"i"),I=[{regex:u,indices:c,postModify:s},{regex:_,indices:x,postModify:d},{regex:S,indices:{bucket:1,path:2},postModify:d}];for(let R=0;R<I.length;R++){const j=I[R],V=j.regex.exec(e);if(V){const W=V[j.indices.bucket];let H=V[j.indices.path];H||(H=""),i=new Tn(W,H),j.postModify(i);break}}if(i==null)throw A9(e);return i}}class M9{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D9(t,e,n){let i=1,r=null,s=null,a=!1,u=0;function c(){return u===2}let d=!1;function p(...k){d||(d=!0,e.apply(null,k))}function g(k){r=setTimeout(()=>{r=null,t(_,c())},k)}function y(){s&&clearTimeout(s)}function _(k,...S){if(d){y();return}if(k){y(),p.call(null,k,...S);return}if(c()||a){y(),p.call(null,k,...S);return}i<64&&(i*=2);let I;u===1?(u=2,I=0):I=(i+Math.random())*1e3,g(I)}let x=!1;function C(k){x||(x=!0,y(),!d&&(r!==null?(k||(u=2),clearTimeout(r),g(0)):k||(u=1)))}return g(0),s=setTimeout(()=>{a=!0,C(!0)},n),C}function O9(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j9(t){return t!==void 0}function B9(t){return typeof t=="object"&&!Array.isArray(t)}function c0(t){return typeof t=="string"||t instanceof String}function eI(t){return h0()&&t instanceof Blob}function h0(){return typeof Blob<"u"&&!L2()}function tI(t,e,n,i){if(i<e)throw ny(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw ny(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function OP(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ps;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ps||(Ps={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F9(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(e,n,i,r,s,a,u,c,d,p,g,y=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=p,this.connectionFactory_=g,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,x)=>{this.resolve_=_,this.reject_=x,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new yh(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=u=>{const c=u.loaded,d=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const u=s.getErrorCode()===Ps.NO_ERROR,c=s.getStatus();if(!u||F9(c,this.additionalRetryCodes_)&&this.retry){const p=s.getErrorCode()===Ps.ABORT;i(!1,new yh(!1,null,p));return}const d=this.successCodes_.indexOf(c)!==-1;i(!0,new yh(d,s))})},n=(i,r)=>{const s=this.resolve_,a=this.reject_,u=r.connection;if(r.wasSuccessCode)try{const c=this.callback_(u,u.getResponse());j9(c)?s(c):s()}catch(c){a(c)}else if(u!==null){const c=u0();c.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,c)):a(c)}else if(r.canceled){const c=this.appDelete_?DP():T9();a(c)}else{const c=I9();a(c)}};this.canceled_?n(!1,new yh(!1,null,!0)):this.backoffId_=D9(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&O9(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class yh{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function z9(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function V9(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function W9(t,e){e&&(t["X-Firebase-GMPID"]=e)}function H9(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function G9(t,e,n,i,r,s,a=!0){const u=OP(t.urlParams),c=t.url+u,d=Object.assign({},t.headers);return W9(d,e),z9(d,n),V9(d,s),H9(d,i),new U9(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $9(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Q9(...t){const e=$9();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(h0())return new Blob(t);throw new lt(at.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function q9(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K9(t){if(typeof atob>"u")throw N9("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ug{constructor(e,n){this.data=e,this.contentType=n||null}}function Y9(t,e){switch(t){case wi.RAW:return new ug(jP(e));case wi.BASE64:case wi.BASE64URL:return new ug(BP(t,e));case wi.DATA_URL:return new ug(X9(e),J9(e))}throw u0()}function jP(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=i,a=t.charCodeAt(++n);i=65536|(s&1023)<<10|a&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function Z9(t){let e;try{e=decodeURIComponent(t)}catch{throw Zl(wi.DATA_URL,"Malformed data URL.")}return jP(e)}function BP(t,e){switch(t){case wi.BASE64:{const r=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(r||s)throw Zl(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case wi.BASE64URL:{const r=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(r||s)throw Zl(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=K9(e)}catch(r){throw r.message.includes("polyfill")?r:Zl(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class FP{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Zl(wi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=eW(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function X9(t){const e=new FP(t);return e.base64?BP(wi.BASE64,e.rest):Z9(e.rest)}function J9(t){return new FP(t).contentType}function eW(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,n){let i=0,r="";eI(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(eI(this.data_)){const i=this.data_,r=q9(i,e,n);return r===null?null:new Cr(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Cr(i,!0)}}static getBlob(...e){if(h0()){const n=e.map(i=>i instanceof Cr?i.data_:i);return new Cr(Q9.apply(null,n))}else{const n=e.map(a=>c0(a)?Y9(wi.RAW,a).data:a.data_);let i=0;n.forEach(a=>{i+=a.byteLength});const r=new Uint8Array(i);let s=0;return n.forEach(a=>{for(let u=0;u<a.length;u++)r[s++]=a[u]}),new Cr(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(t){let e;try{e=JSON.parse(t)}catch{return null}return B9(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tW(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function nW(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function zP(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iW(t,e){return e}class rn{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||iW}}let _h=null;function rW(t){return!c0(t)||t.length<2?t:zP(t)}function VP(){if(_h)return _h;const t=[];t.push(new rn("bucket")),t.push(new rn("generation")),t.push(new rn("metageneration")),t.push(new rn("name","fullPath",!0));function e(s,a){return rW(a)}const n=new rn("name");n.xform=e,t.push(n);function i(s,a){return a!==void 0?Number(a):a}const r=new rn("size");return r.xform=i,t.push(r),t.push(new rn("timeCreated")),t.push(new rn("updated")),t.push(new rn("md5Hash",null,!0)),t.push(new rn("cacheControl",null,!0)),t.push(new rn("contentDisposition",null,!0)),t.push(new rn("contentEncoding",null,!0)),t.push(new rn("contentLanguage",null,!0)),t.push(new rn("contentType",null,!0)),t.push(new rn("metadata","customMetadata",!0)),_h=t,_h}function sW(t,e){function n(){const i=t.bucket,r=t.fullPath,s=new Tn(i,r);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function oW(t,e,n){const i={};i.type="file";const r=n.length;for(let s=0;s<r;s++){const a=n[s];i[a.local]=a.xform(i,e[a.server])}return sW(i,t),i}function WP(t,e,n){const i=UP(e);return i===null?null:oW(t,i,n)}function aW(t,e,n,i){const r=UP(e);if(r===null||!c0(r.downloadTokens))return null;const s=r.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(d=>{const p=t.bucket,g=t.fullPath,y="/b/"+a(p)+"/o/"+a(g),_=d0(y,n,i),x=OP({alt:"media",token:d});return _+x})[0]}function lW(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class HP{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GP(t){if(!t)throw u0()}function uW(t,e){function n(i,r){const s=WP(t,r,e);return GP(s!==null),s}return n}function cW(t,e){function n(i,r){const s=WP(t,r,e);return GP(s!==null),aW(s,r,t.host,t._protocol)}return n}function $P(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=S9():r=E9():n.getStatus()===402?r=x9(t.bucket):n.getStatus()===403?r=C9(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function hW(t){const e=$P(t);function n(i,r){let s=e(i,r);return i.getStatus()===404&&(s=w9(t.path)),s.serverResponse=r.serverResponse,s}return n}function dW(t,e,n){const i=e.fullServerUrl(),r=d0(i,t.host,t._protocol),s="GET",a=t.maxOperationRetryTime,u=new HP(r,s,cW(t,n),a);return u.errorHandler=hW(e),u}function fW(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function pW(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=fW(null,e)),i}function mW(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function u(){let I="";for(let R=0;R<2;R++)I=I+Math.random().toString().slice(2);return I}const c=u();a["Content-Type"]="multipart/related; boundary="+c;const d=pW(e,i,r),p=lW(d,n),g="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,y=`\r
--`+c+"--",_=Cr.getBlob(g,i,y);if(_===null)throw R9();const x={name:d.fullPath},C=d0(s,t.host,t._protocol),k="POST",S=t.maxUploadRetryTime,E=new HP(C,k,uW(t,n),S);return E.urlParams=x,E.headers=a,E.body=_.uploadData(),E.errorHandler=$P(e),E}class gW{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ps.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ps.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ps.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r){if(this.sent_)throw yl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw yl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw yl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw yl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw yl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class vW extends gW{initXhr(){this.xhr_.responseType="text"}}function QP(){return new vW}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,n){this._service=e,n instanceof Tn?this._location=n:this._location=Tn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Qs(e,n)}get root(){const e=new Tn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zP(this._location.path)}get storage(){return this._service}get parent(){const e=tW(this._location.path);if(e===null)return null;const n=new Tn(this._location.bucket,e);return new Qs(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw L9(e)}}function yW(t,e,n){t._throwIfRoot("uploadBytes");const i=mW(t.storage,t._location,VP(),new Cr(e,!0),n);return t.storage.makeRequestWithTokens(i,QP).then(r=>({metadata:r,ref:t}))}function _W(t){t._throwIfRoot("getDownloadURL");const e=dW(t.storage,t._location,VP());return t.storage.makeRequestWithTokens(e,QP).then(n=>{if(n===null)throw P9();return n})}function wW(t,e){const n=nW(t._location.path,e),i=new Tn(t._location.bucket,n);return new Qs(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xW(t){return/^[A-Za-z]+:\/\//.test(t)}function EW(t,e){return new Qs(t,e)}function qP(t,e){if(t instanceof f0){const n=t;if(n._bucket==null)throw b9();const i=new Qs(n,n._bucket);return e!=null?qP(i,e):i}else return e!==void 0?wW(t,e):t}function SW(t,e){if(e&&xW(e)){if(t instanceof f0)return EW(t,e);throw ny("To use ref(service, url), the first argument must be a Storage instance.")}else return qP(t,e)}function nI(t,e){const n=e==null?void 0:e[MP];return n==null?null:Tn.makeFromBucketSpec(n,t)}function CW(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:d_(r,t.app.options.projectId))}class f0{constructor(e,n,i,r,s){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=LP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=y9,this._maxUploadRetryTime=_9,this._requests=new Set,r!=null?this._bucket=Tn.makeFromBucketSpec(r,this._host):this._bucket=nI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Tn.makeFromBucketSpec(this._url,e):this._bucket=nI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){tI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){tI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qs(this,e)}_makeRequest(e,n,i,r,s=!0){if(this._deleted)return new M9(DP());{const a=G9(e,this._appId,i,r,n,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const iI="@firebase/storage",rI="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="storage";function IW(t,e,n){return t=Ne(t),yW(t,e,n)}function YP(t){return t=Ne(t),_W(t)}function ZP(t,e){return t=Ne(t),SW(t,e)}function TW(t=Pf(),e){t=Ne(t);const i=qu(t,KP).getImmediate({identifier:e}),r=h_("storage");return r&&AW(i,...r),i}function AW(t,e,n,i={}){CW(t,e,n,i)}function kW(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new f0(n,i,r,e,ts)}function bW(){Gr(new Zi(KP,kW,"PUBLIC").setMultipleInstances(!0)),Vn(iI,rI,""),Vn(iI,rI,"esm2017")}bW();const RW={apiKey:"AIzaSyA8rHrFZDliux9cjEPtDronqrbe6Xu9YWY",authDomain:"ube-express.firebaseapp.com",databaseURL:"https://ube-express-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"ube-express",storageBucket:"ube-express.appspot.com",messagingSenderId:"180420907476",appId:"1:180420907476:web:6c51eb1dcda7623d680641"},Ep=mA(RW),Jo=cU(Ep);qB(Jo,S_);const ne=K3(Ep),XP=NP(Ep),JP=TW(Ep),PW=()=>{const[t,e]=T.useState(""),[n,i]=T.useState(""),r=async s=>{s.preventDefault();try{await GB(Jo,t),i("Password reset email sent. Please check your inbox.")}catch(a){i("Failed to send password reset email. Please try again."),console.log(a)}};return m.jsx("div",{className:"w-full h-screen flex items-center",children:m.jsx("div",{className:"bg-primary m-auto rounded-xl overflow-hidden shadow-xl w-[300px] h-[350px] md:w-[400px] md:h-[380px]",children:m.jsxs("form",{className:"flex flex-col justify-center p-3 mt-4 md:p-5",children:[m.jsx("h1",{className:"text-white font-bold text-[30px] md:text-[40px] font-work-sans text-center mb-1 mt-3 md:mt-1",children:"Forgot Password?"}),m.jsx("p",{className:"font-inter sm:text-[8px] md:text-[11px] text-center text-purple-300 pl-16 pr-16",children:"Enter the email address associated with your account"}),m.jsxs("div",{className:"flex flex-col justify-center m-auto",children:[m.jsx("label",{className:"text-white font-inter text-[12px] mt-6 mb-1",htmlFor:"email",children:"Email Address"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{className:"border outline-none border-gray-300 bg-transparent text-white rounded-lg h-8 pl-4 w-[250px]",type:"text",id:"email",placeholder:"Enter email address",value:t,onChange:s=>e(s.target.value)}),m.jsx("img",{src:r_,className:"absolute right-3 top-1.5 md:top-1 w-[20px] h-[20px] md:h-[24px] md:w-[24px]"})]})]}),m.jsx("div",{className:"mx-auto",children:m.jsx("button",{type:"submit",className:"border outline-none bg-secondary text-white text-center font-inter rounded-full mt-4 font-semibold hover:bg-gray-500 w-[250px] h-[35px] md:w-[255px]",onClick:r,children:"Send Reset Link"})}),m.jsx("div",{className:"mt-12 text-sm font-semibold text-center text-white",children:m.jsx(Aa,{to:"/",children:"Back to Login"})}),n&&m.jsx("p",{className:"text-white mt-4 text-center",children:n})]})})})},NW="/assets/UbeImg-fc73db7e.jpg",eN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAZOSURBVHgB7d17iFRVHAfw7+/cWdfW2nxRkWJaKqTiI6PEjFjJMsO1XXWcSSmXSPsjgvqjIgIf/WNERCCIEpmiozv53GoTIY20zCgsMzUlFBMxNx+5j3R37vn1uxuRYT7u7MzcM/r7wMLu6npn73fOOff+zjlXQCmllFJKKaWUUkqp4kAoUqtWre9LlBliYfoR2bLge8ymxcAeYo7tSSarDqMIFVUgqdSaocbjGmZUgeiOy/1dBg7LL7feJ7t0Rjz+I4pEUQQSBMExLCDL40mE+VkW8hP1xN6riUT1HjjO6UC2bt0aO37i1Dxm+7LkEEPHtEk8b952S895FRUVGTjK2UCWrl/ftfO5zAYYegg5xVs84up4PP4HHORkIOl0unsbY4uBGYY8IMb3vn9+7PTp00/DMQaOqa+vL83AfJSvMAJMGE4lpRsl+E5wjHOBnG1sfkvewaORZ3KMB302C+AYp7qsVDo9Bpa+CHsl1QGWyY55Mh7fAUc41UII5p0ChhEwwTHhEGcCWb36w0fkbu5eFBrj/traNQ/DEc4EIgPts4iID3oGjnBiDJGrnRtkgD0ln3ZGBCxzS7fyLt0nTJhwHhFzooUwe6MQURgBQ1R2pqlpFBzgRCAWdjgiRpy/+54w3BhDmO5E9O6CAxxpIbgZEWNQVzjAiUAMo6OV3A6TKn3kryHgymVvEyLmETXCAU4EQh6OImrEv8IBbowhjJ8QMRlD9sIBTgSSKTHbgqlWRCQ4tgd/OxzgRCBPVVefIEPfICqGdsgMYgMc4EwtS2o4yxAVy8vhCGcCKevcaZmcmBMoOP4tZjSQi1RWVraQR2+g4GiudFd/whFOTVAZ2EXSd+1EgUjJ/6uf9+1ZAoc4t+pESvH9MtZ8K/OG3ZFPlk96Ht8jreMIHOLcIgc5QYfkrrlSLoLz1o0E8x/s8UTXwgg4F0hg2rTJXxrQ2OBdjBwj5jNSOxvv0sKGCzkZSCCRmPw1kTc6WNSGXCHs8mN0XzI5dRsc5WwggUSi+kB5edkoGU9ely+bkSXp/pqkNPKaBztq+pQpB+GwotmOkEqlepJX8rwUnWZeaSvCP/7ekkAftJbQwqerq3Pe/eVD0W3YCXYX1NauG2EJFfLlYBkU+pGPm9r/zEOjXMseMsR7YOnzadOqdxFRZDUypZRSSimllFJKKaWuZUVTXKyrqytrackMAPyBMNRTiozl8vK7SUm3XD7ai4vy2zTKx1kpM56WouJZKbk3kKWDZWWxg8EiChQB5wKZO3eu6T9o0OAYzBj2MdR6GCCzfAPlpPfOdodu+6pIwlEmOmB8HCQPu2HNtv37d++V41k4JPJAggfMHGtoGOZJAJbxAFkeKy2gBwpAcpIWxTtlziSYMt7e0tK4vaam5hwiFEkgy9at61Ha6j/OhibJO/9R+VYXuKGZYDfJnEqdMfxxPB4/hQIrWCDpdNpjNhU+MEtCmCSdj3PPGbmQdHI+yG41TEsknI0STisKIO+BpFIbbyWvdaZ8+oIc7nYUIQmnQd5A7/sxWjhj8uS87mXJWyDSIvr4vpnDhBmut4arJcG0GqLlbL35yeQTedngk/NAVq5c2Y280jny8p+Ti6JSXJuCgX/RuU7e/JqqqjPIoZwGkqpdM1HGh0XSInrhOiAt5rgBv5JITM3Z6vmcBBLctDU3t74HgySuRxYrPM/OysUq+g4H0j5WwGyQljEC1zOL74BYVUfHlg4FImH08uWOV/6VflDB5tUjhmNjOhJK1ktJg8E7Y81mDeNfhtCHTWt98ERVZCn7tb1e6bsyeA+C+g+CGdL5nP82spRVl5VKrxtHbDdD/a/2p2kzxiWTUz9DSFm1EGL/JahLaq9KG7yILIRuISvWru1t2viwHNKDuqSgFkZc0ieZnHQszM+FbiGxNjtSw7iy4ByxaRuJkEIHwle5N0MhOFl9EVIWY4hMm6qrks1O4iwCsUX7v/IUXvhz5fQew+uRBuIYDcQxGohjsgmkIJP91wKGCf3o8vD3IY48m7AYyGVv6GdJhg6k8czJTxh2H9RlSelk79nTv3+KkLK6p5CJqf4ZRp1U0O6GukgQhoFXmUhU/YKQsr7JW7x4cUl5t56PSR82VF7CjVCCmhj8g/Qim2bPnt0GpZRSSimllFJKKaWuYX8BGH0fLdS1YgIAAAAASUVORK5CYII=",iy="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAvXSURBVHgB7Z17cFTVHcd/v3OzmxACIhii9oWPEeqjig9sdaqgLZ2OCJWETbIEWjuM1Cetpb467TjTWsdxREWNjzLDyGM3bhIpCtbHIDAOnaKMVSkVtb7+qAMIokB57O49v37PJp1hyObe3c09mwTuZyaT7N5zX+d3Hr/XOSEKCQkJCQkJCQkJCQkJCQkJCQkJCQkJCQk5umEaZKRSqSh+jcRPTYboOKYK/EiNOSbE+4SyX5FSezTzvkrX3RWLxdI0iBjQAkHln641XyxMZ+HjOBE+E9V+GjNXFHK+iGTxih+yoi0kvBVvu4W12tjUdM2HNEAZUAKBAI5zybmCXJlMbH74VLKAEH3IQi9D0C/rzMFXW1pa9tAAod8FglbMyfb2S9FyZ2mSFsVcTWUE9z8EwT/nED0Vi9WvQe8T6kf6TSCmN2TFuYFFz7HVE4rF9BzFtCibPtjaX72m7AKBIGpc4Rtx69vx8XgagKDX7EVPaXVY3wul4CsqI2UTyJNPPhkZPmLkPNJ0BykeRYMC3okR7N662lELJ02alKUyUBaBtLV1no9W9xQpuoAGI0zvsOa5TU31fyfLWBVIbnjS6l7c5QZ8VDS4gc5BrY7Sd2IY20eWsCaQtrZnvy2k26nLhjhqEKH3IJpYPN7wDlnASqtta2ufLazfONqEYWCmsezQxrZUxzyyQKA9ZO3atRXbtu96DFe9jo4FND3hOPomDGEuBURgAlmyZMnQSFV1G8bZKXQMoWHt11RGGqZNm7aXAiAQgWDyrs0IrVakLiLbaNkhitfDofgWsXpfCe3IsvtfcwgvU8Pk1JLoM/BxPJwAl2OIqSXLaNJvRJiuQk/5nPpInwVihKG1WgO/0Dlkj90QwDIStbSxcfqmQt0bxi0DlXsCZspZLDJTmEeQJfBEm7VOXxGPx3dSH+iTQJ5+9tlR0ax+FcPUd8gOu1Gt91VXRVv7OiQsW7ZsuIoMuVGJvs2WYNBT3s5GKq786fTpu6hEShaIeUEnWrUOwhhPFtBCS92omj97+vQdFCCJxMo6crIPoMfNJAtAKG/WVFVOLLUBlSSQbjfIapz+QwqYnB9JqV80x+oTZJFkqnOWaGnFHFNDAQP766WTRtdOKcXdUpIdMnz4qIU2hGEmbCgGE20Lw4B7LBWlJ5p7UsAwqR9B/X+CSqDoHpJ8pn0+TrufggYV4zhyGTSV96iMQCkZm9XqNTvamNza3DjjwWLOKEogyWT7RGhTrxQaQi0UM0yZngHn3ZvUDySTHRdirFiHP4dSsGTQ0K5sbp7xWqEnFCyQZHLlyaTSqDCuo6BhnlnsMJXzCmzbOQEt+xQ0ktG5y8Am0Uo+Oqm29o1ix28zp6BlLKGAge9rW4XS49HztxVSviCBGH0+0d75IoywyRQwRpua2dQwu9DycFqeq1luxUNNgTBG9nLRXaLUasTmHyjGCbi8rWM5IoZxChhY83+Nz6i/qhD7qSCBJNo6b8a1FlLw7M5E1LhCVNtEInGCqOgCVJhRVwtVRqCF0tJ0pfp1IbaBUYmVSm+1ZKfc1NzY8JhfIV+BtLWtOE2TuxmtcQgFjtyBSe8+v1LoFWdDlXwOT3sKlYCJlZNL09BbtviVhdJyF6rlHgoYLbI/ouRsDF0fe5XzbWmuch+xIwza7WYOPe5XKCcM1htKFYYBre40vOmGRKLDNxzgsDwGN8uXFDAmm8Yl5TvKeAok8UxHPeaNH5MFjG/KL7PDuGY067/gz+HU1/sxHUcOrTK+N69yuaQGJjt2EDzhqNOfeBXpVSDGnY4rFKVDFwUchX5FKtL6wVzrDghca4zrKn8bqoBnKxVoXQ931W1+ehVItHLI75n4G2QDGIHGa+tVxGhT3RN4sMDzi6HL0xm6devm103GCVkA7/TNSGX173o9nu/LZZ2dXxfiW8gavM5PBcyptnZCzIoV/cqrwN13363xBOvIHvMwdH4t34G8L+yk5bf4VUW2UPK212Fj9LHWV5EtRK429/ApZSWJoZsqLXxXvgM9BJJMrhgDy/fnZBNE+rwOGwvcajIdrr19+xcXehXBCGHVpwaBzDF1feT3PQQi7MIIpChZxIRdPQs4agxZR4/xPMx6O1nE1LFW7o1Hft9DIBhfLyPLaC2ewRtoIieRbRSf7HlYO4EkLXgBoVxy5HeDPZvwqKNnDxFZT5ZRiod5l5DPyDba+x4YTnyeMYhnoA1HftVDIG6FegRDhtV1ebrbXd4brOVTso76xPOwqODDDIdfHnXM4rQe+X0Pgcysr/9UsSwiq0+Ty5vqFUQON9oyzHLAPV9XN9LTMIVrZyxZxNRxc/M1n/T4vpfCf8Kvg2QJqJTneR3PpWZqWU227q/Uc34BLAjkXLJ1f6EDoqN5Pcp5BYIK+Q9OeoisPRFNNEEvzyJCC8iMskHfWuDAFl7gVQaWuhLNE8kScFI81Nw8Le8c1quWVVMd/QOe3spYbhIKchmFHuQifQguUfA3X9LUNP2fXkXGjj3ru9YMU9Tp0CGVf+ztcK8CmTp16n5Ezn5JtmBq8SviOBqhWvo3BYXQx+Qeus2/IM8iWyh1i6nb3g77RgyTqY7nbWS0myBQNnvoW34xkVxQCcGlXDyjD2Co+go97lK/qOHiFStGVB5yP+nr/fLBpJ9vaoxN9Srjaxg6pG8x4UcKGBO3Nrm2fuVyFYiKRI1+RCViQrgVSl9SSAi3Kq1vsiEMU4eiI74edF+BmBgwutFvyAIm8TmXa+uDqch01JkAwTxNRUz0ZgKHRrcYruMJeI9/+ZVf2tkJl41YeVdTh/nU3Dzl/OlOA1ptI5yLClseb6z3nU/+z7JU6hxHK5MGdHXvEy9sGJFVTOoBvwn8cBLPdCah7jZR4MjqpljD1YGlARkQUDnRFTaJcsE7/phnm1zbYk7B8zhaOxchkHUKKvFE8x2Eu401fQRlYFOxy8ySqc6fQYiLKXDkM3Gj58fj0wryHhebSvp9tMo1+DNCAYKhZR/azqTm5oZN1A8sT6UwHPJaC/usZBTxpMbG+g2FnlCUt7crR1Vup4AxSwJgJr5gEp+pzCQ6OsaxVqssbXozvxhhGIp2v5tsbgwRrRQwxljMavW3RCr1PSoTME4v4oyst5H5zsSLmhsbis72LCkeUjf6hHnoKS9SwJhcXRb1Si7x2TJmznBNIoPi0RQwsDdeqBs98noqgZKXtK1cuXLY/v2Ztbb2L9FCCdaRWwudDAvFqLZOlhbY0abI1Ogm2G6TSt1+o0+LPjHmj+xegXseWcBY87j2/W7m0KN93b8qt1udODdDhZ9vw/DLwfQPCOMHEMYXVCJ9XhZtstK5IrrG4krcnNsDIYHlJqPQJLF15U35Y7y2OUchcwsMgLg1QVAwK3ANgWwc0C2UVRDKxWQd3snkrhdy3hKS9xFd3KGdrqQJ5fIwwZyACfUMdK/xsNMvL8veXEwbJZue0tc16l2XCojFixdXVVYPW4ILzqBjCaaVQ6uicS8PbjEElnVy7bXXHoTPqNmGSjxgEXoUc0Z9UMIwWNkvq3u9nln7EfQiygGBCcFiPpoHO+PPFDDWNjAzFjC5uh0OvrPpaEJkK2LAsZZYbDNZwFqiXLyhYWsFk7G6Fxo3OA1ycq58oYeHVldeYEsYhrJsgplMdoxHpOspjLkX0iDEqLRmU7aZsdjrZJmybRObW1e+YycMM76zHHtYBYLZdkPxPSeOHtV6VG0TezhmOVe0qnoOLOY7rWxCEARadmEwfxQeggXl3uG637Yaz23vFKm8HsH1OXiK02kgIPKBsFo0tKri8aC27CuWAfHfERAgukBpdR11rSkst6p8EG6V54/5zfjzYTzIBw6kr8BTTcZcM9laz0FPwKu/ZP5dBYzZtTY3Ri6WASWQI1ne0XEqu/CPCZ2lWI+DR/FM2DVGSIWGkDNQVT/Aue8i3v4u2v4WpWSj324K/cmAFkg+zG52Q2prj4+meZirMiMqxBmumXJrOZTQ3iy7exwd+TIdlb0HPv9899y5czMUEhISEhISEhISEhISEhISEhISEhISEhISMmD4H8ksqcyk9pvfAAAAAElFTkSuQmCC",ry="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAysSURBVHgB7Z0NcFTVFcfPuW83fKuIKLXjtIqKttQRWy3VOgN+FVATkpBlE5BKp5UWsR2ttqU6rR8z9MPW0akfwzAjIwO7SQiBREXBKnXEsX7Vqq1Vp2KtVgcsYpGEhOTd03M2LiZkd/Pe23vfbvT9ZjJJ3t7d9979v3vvueecexcgoqzAQw+sXbv2MCc+YiNoWFFfX/coRISK6v9PnxgVW1in8zRCezq9/nyICJWDLeQTMdT07DFN1KkIKqOWEh4ZQXKJkSUSJVwyXRZWjGzNJUamAOJo6b6amjbMhAjrZARRLt1EBPvyFmJRekk/EI0p9jk4hnBln0uImxFhbL7CUfdlnwFmbyRK6Rk0D4lEKS2Y62AkSunAfC9EopQGLPRiJEr44FAFIlHCZUhBhEiU8PAkiBCJEg6eBRHEfSIzdpm55ysjosRQXTJ/fu02sERzc/ORWseO1ap3gkMq7gIcroiUVs6H6LradWiXjsV2Lqqp2QXDDF+CCGGK0t7ePrqjo/sb6OCZ5MJp3DqnukCTC527P0TUrQBfZ1/cqwj4Emj9lOt2P7tw4cK9UKb4FkSwKUqqpeUUcLEakGbzh5yFiCPAICxSL3/2E0BOO8WofcG8eTugjAgkiGBSlHS67VhQBy4HgssA8RQIESR4WQNs1HFctbC29h0oMYEFEYoVpbFxw3RS9DPScAl3Rw6UEGk5fA2bCOnOhkTicSgRRQkiBBEl8x6k69kiK093PsJLqOm3r7769/SNN96oIUSKFkTwKgqCuh4U1XE3cTYMAzToFx3C5clk3UMQEkYEEbyIMmzR+Lh23J8sSCSeAcsYE0TwMnkcrvAYQ2w6rxo9Kn5tVVXVR2AJo4IIn2ZR+qB3uctdyt1YG1jAuCBCSN3XXu7j3+QbeB9RyUTPIdJj+O+j2Wo7wfYDQYCre7s7rlq0aFEHGMSKIIJpUYjgfZ6jPMAVvQVc9XR9ffW/CpVPpzcdh9hzDlfcTAKo5PdNAsPw5/5DkUokkzV/A0NYE0QwIgrCcyzGHTHUzYlE4gAEYNu2bbF3d+2+SAEt5c+aw7N/Y/ct1iNPoJZxF7YaDGBVECGwKBqfIcf9MU/StoNB1jU3nw6gVvAcaDaYRMOqvXt3X7lkyZIeKIKiBGlraxvX2dV7XVfn3hWLFy/uylfOpygdbM/cEFPuH7hFuGCJdPOGaiB9F1fB58AQBPqP3RXxusXV1R9CQAILwi7wST0EDypQZ/ClPNzVua/ahCjcL1/eMH/efRACa1pbj473uGu5Gi4EQ3CX+EpM6Uv4YXoTAhBIkMbG1pP5aXiY3318v0sxIsrHQa6LOcj1JwgBfrAc11V3goLvgzFop4t04cJE4mXwiW9B2CF4BomlA3TU4FfNiWI7yHUo6ab1K7g6loMhuKV8wLGYWclk7bN+3udLkHS6ZRqf6hFQOCFfGQ4GbY2DnstNdn/+z/EWDkblXNqQqHkMQiLd1HIH//ohmKODb6TKT0hbeS3I1slXufSjhcTIfCDBRS5h6+rVq0fmK8MX+ISDWCmVnvdzuAWRdu8PM+veQX2NDMxgjjF8I218D+d4fYOnFiKmIk+A5EkdD54Znt1XKtV2DDoHXjBqfRH8jyP+57Nz8vmhyg7ZQhobN05GrcT97EMMAWeNHD12Y6GWIpUslT1USxHRwmopDQ1VO9lXtQwMwl3z4crFLalUy5eHLFvoRTFte0lt50KTITDDs6XwIP+QPFRgEqK3SFd8XUTPVyRvC2ExxrqgNhcnhjA8WwpbJz8XlzuYBPEL6HRv4rodlbdIroMctlRTvjS1lWdpVWAMcy2Fra+57NmNKw31fAfT+Oc4yHh74R3ubv5CCjax72tTUN9XFm4lD3AVXQyGYYdnY32ipoFdaoMEz9lCppw6dYVZMYS+lsJPR0W+El5bCpLeyhf+IF/9QhZD+uXD+Idd7zCFj9XzU9bEXe0rjY3ra6CoS1b3gAUQKNnY3PLLXK8NEiTV1JLgXz8FC7CP6qw9e/YU7Aa8iOIF6Wp5rrNhXVPLrdLiIQCTJh4pE2Ar2Y/cmn/BdV1/6PEBF7qupeUkvpFVYAvENi/eUFOiCHyD1558ytRfQwBmzpzZC4T3gwWwLwawit1Qp/Y/flAQGXSdXmiGvuZvBUXa84zVpCh859fx0zgXAsBuIpuJ42N4VGzqP8gfFGTU6MNu55OfDhYhij3pp7xRUQhuLTR+5YONA1/X7Beu86+wc/O27P8ZQWTwI6AlYBFZB59Mzn0LfGJMFIQTtUbfhkpdXd3bID4pm7CnOWuAqFQqdRSrdDdYhlC/kcvM84IpUTQq34LINWvQ/wTLsAb3iBZsRVbcwqc9Biwj2SFQBEZEIfoaBICv/QOwDh6NquJmxcrUQgggqqKbvYjC3uRZhbYBGYLPQwAQ0Fpi3MATUa1CokA2um8k8c8AXlz3BQgWow/Y1fpGg8NiYCuEg7HEtaDdFyrwbVQIkoAHoYCtLEjsFu4C9oNlkPBIMEgQUbSGFyEAHAuyPsZKN+w4+iZVXz/3bW6RvwLLaIATyVC3lcWvKA5QGgKggb4IlhEN2Bn6n8z44SD9hkOXxtIhc58Qxq5rbQ00qBbCjyhasS/CJ+xOOoFN33FgEUkdOnzcmN/L3xlBxE2tyPkeZB5ke8R69DfBAl5F4Rj9Jr/xFKVxOliExXDZZPjOnDlzujPny76QTNb+mX/dCRaRxGewhK0gF1fYt8Aut9XXz3s6+88Ak3fMqIrl0nzAEpKFLonPYAnToqxcuTLOg94csIWG52NK39D/0ABBKisrOxWo+basLlkSsHPnf42lbebCy+TR6x6S446YUJk7IdAIHWxVLTg0qjloUihrHbjirgFLsJ11JVjGa97X0LutanvXivgDFuO1QYfzlU81bbiXQ42LwTCSOECKzuBH469gmWKyWbj1nM2qWXG9c73enpxfd3Wu1/K6Tbo79y6VxTJg+mIygTK1AkLAz5jCAszIHpMEbJ4L3AEW4OnFFvZXXZvv9byCSHZIr4OVkksEhpHFMpn1GSHgdUzh7uvBVHPrefK/BvUjrrlAnuFC8DW81l0RTxZa9zLkzFmy7ZSi7YR4BBiF3iO3YlqhpDGTeE4xQlzKlXIXZMKrJqH3kGLnJpPVbxQq5XVHuRn8GEk66UgwCj3CXoLZNldK9adkmxto2o3ozPCyONST610Wz/AUXpIEusAoeKGrlfVoZRYD8RTfsAnzEceCZntdqes5FrJg/rwtPCLLHKWobMBBIFzRt1gmHIqMp/hC5nPsFqn0s2jHt/dVBmPS1Mi2ku8MjsIXgisVuld+irqvPYS60u8q4sA7yrlEGyXNHgzCJuE2N+YsuKy29j0IAXvbgMgA7kg35Tv+Eih8K30xKT1DTgwGQVAzY736+aJzcj1io/uS3R3YUJkeRAyhqIART6CO50H5/o8Tng1DD2uk5eUyo/eGfvJAPFb17Zqa3RCQoiN4a9asGROPj14lWedgmMyWSAibJQtdEp8zubYBEK/t+PHjsdDyhGJFYXfI3TwDv7rYJRDGQqqpxg1XcRX+zvRg/wm0K5P4rPAxB9ztfOP/LlSaW69kKp6tUZ3PlXUpv/9pU5sbDLgqMaERlpna7MBojFs2teRu5j7+0JPBPh1sUu4gJEnA2ydB6Y+zQyYBqcn8YORYpWRux4kMHM/gOUYDjxevgyGMbz4jmdw9pG7myrq61DuN5saMKBmnNcCsZLJuKxjE2m5AmaXUoO5ls2MalBmyucGBjo+qColSqs0NrGUtinXkgJ7ONyRjSygORK/I5gZDLUT1s7lBf9d9sVjfL0vIWGIjRi1jm2m56clkMZRjSwlFkCySbo9O/BoW5rt8gxOhDGBRHmJRasplF6NQBckiK5lk8QxbZFfw7PwCKDESxevu7JhbDi2lJIL0RwZ/1OpyQKphB+NxUAqIdnBFXMcWU8HE8zB2nCi5IFlkUp5av/5MB9Qsjr1cwGazZAzGwQ4d3Fc9B0pvZSdgu59dRW2LUjaCHIrMZ9hPcjqSOpP7lNPYlX0St6ApflZ7Zb7xAPBtrWCHQ/imJv0CEj41adKEl4O6YQSbopStIPnYvHnziA/275+IrntMjNR4FxUq7R6hEXt4FrpPa5AIXZdSvXsmTpz4bjEVXwhbogw7QcoJG1+UFglSJKZFiQQxgElRIkEMYUqUSBCDmBAlEsQwxYoSCWKBYkSJBLFEUFEiQSwSRJRIEMv4FSWcfU4+w3heXuf0fRFAJEgIDJl1r/EpOtCVydaMuqwQydl9sRiuu39W9ivFI0FCZoAoh4ghRIKUgOyXM0s31V+MiDLk/2pyxosth9ifAAAAAElFTkSuQmCC";class sI{constructor(e){this.userInstance=e,this.userdata=null,this.ready=this.fetchUser(this.userInstance).then(()=>this)}async fetchUser(e){const n=["admins","drivers","mechanics","superadmins"];for(const i of n){const r=Pe(ne,i,e.uid),s=await Gi(r);if(s.exists()){this.persona=i.slice(0,-1),this.userdata=s.data();return}}}}const tN=T.createContext(),LW=(t,e,n)=>{document.cookie=`name=${e}; path=/; expires=${new Date(t.expirationTime).toUTCString()}; secure`,document.cookie=`persona=${n}; path=/; expires=${new Date(t.expirationTime).toUTCString()}; secure`,document.cookie=`session=${t.token}; path=/; expires=${new Date(t.expirationTime).toUTCString()}; secure`},MW=({children:t})=>{const[e,n]=T.useState({user:null}),i=es(),r=async(a,u)=>{var c;try{const d=await QB(Jo,a,u),p=await d.user.getIdTokenResult(),g=await new sI(d.user);let y=0;for(;g.userdata===null||g.userdata===void 0||g.persona===null||g.persona===void 0;)if(await new Promise(x=>setTimeout(x,100)),y+=100,y>=1e4&&(g.persona===null||g.persona===void 0))throw new Error("Persona is undefined for 10 seconds.");const _=(c=g.userdata)==null?void 0:c.name;switch(LW(p,_,g.persona),n({user:d.user}),g.persona){case"driver":i("/driver");break;case"mechanic":i("/mechanic");break;case"admin":i("/admin");break;case"superadmin":i("/admin");break;case"deleted":throw s(),new Error("Invalid email or password.")}}catch{throw new Error("Invalid email or password.")}},s=()=>{XB(Jo),document.cookie="name=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;",document.cookie="session=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;",n({user:null})};return T.useEffect(()=>{const a=ZB(Jo,async u=>{u!=null&&(u=await new sI(u),n({user:u}))});return()=>a()},[]),m.jsx(tN.Provider,{value:{user:e.user,logout:s,signIn:r},children:t})},so=()=>T.useContext(tN),DW=()=>{const{signIn:t}=so();es();const[e,n]=T.useState(""),[i,r]=T.useState(""),[s,a]=T.useState(""),u=async g=>{g.preventDefault();try{await t(e,i)}catch(y){a(y.message)}},[c,d]=T.useState(!1),p=()=>{d(!c)};return m.jsx("div",{className:"w-full h-screen flex",children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 m-auto md:h-[550px] shadow-lg rounded-lg sm:max-w-[900px] sm:h-[420px]",children:[m.jsx("div",{className:"w-[380px] h-[550px] hidden md:block",children:m.jsx("img",{src:NW,alt:"logo",className:"p-3 mt-6 ml-2"})}),m.jsx("div",{className:"bg-primary flex flex-col justify-center shadow-lg rounded-lg p-5",children:m.jsxs("form",{onSubmit:u,children:[m.jsx("h1",{className:"text-white font-bold text-4xl font-work-sans text-center mb-3 sm:mt-3",children:"User Login"}),m.jsx("p",{className:"font-inter text-sm text-center text-purple-300 pb-2 ",children:"Please login to continue"}),m.jsxs("div",{className:"flex flex-col items-start sm:m-2 md:ml-7",children:[m.jsx("label",{className:`text-white font-inter font-semibold text-sm mb-1 mt-5 mr-7\r
                    `,htmlFor:"username",children:"Username"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{className:"border outline-none border-gray-300 rounded-lg h-10 w-72 pl-4 bg-transparent text-white font-inter",type:"text",id:"username",placeholder:"Enter your username",value:e,onChange:g=>n(g.target.value)}),m.jsx("img",{src:eN,alt:"user",className:"absolute right-3 top-2",style:{height:"24px",width:"24px"}})]})]}),m.jsxs("div",{className:"flex flex-col items-start sm:m-2 md:ml-7",children:[m.jsx("label",{className:"text-white font-inter font-semibold text-sm mb-1 mt-5",htmlFor:"password",children:"Password"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{className:"border outline-none border-gray-300 rounded-lg h-10 w-72 pl-4 bg-transparent text-white font-inter",type:c?"text":"password",id:"password",placeholder:"Enter your password",value:i,onChange:g=>r(g.target.value)}),m.jsx("img",{src:c?iy:ry,alt:"eye",className:"absolute right-3 top-2",style:{height:"24px",width:"24px",cursor:"pointer"},onClick:p})]}),s&&m.jsx("p",{className:"bg-red-400 w-72 h-7 rounded-lg text-red-800 mt-3 ml-1 pl-2 pt-1 text-sm",children:s})]}),m.jsx("button",{type:"submit",className:"border outline-none bg-secondary text-white font-inter rounded-full px-4 py-2 mt-3 font-semibold hover:bg-gray-500 sm:ml-2.5 md:ml-8",style:{height:"40px",width:"280px"},children:"Login"}),m.jsx("div",{className:"text-center mt-6 mb-4 md:mt-8 text-sm text-white",children:m.jsx(Aa,{to:"/forgot",children:"Forgot your Password?"})})]})})]})})};var nN={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},oI=vn.createContext&&vn.createContext(nN),Vr=globalThis&&globalThis.__assign||function(){return Vr=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Vr.apply(this,arguments)},OW=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n};function iN(t){return t&&t.map(function(e,n){return vn.createElement(e.tag,Vr({key:n},e.attr),iN(e.child))})}function rN(t){return function(e){return vn.createElement(jW,Vr({attr:Vr({},t.attr)},e),iN(t.child))}}function jW(t){var e=function(n){var i=t.attr,r=t.size,s=t.title,a=OW(t,["attr","size","title"]),u=r||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),vn.createElement("svg",Vr({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,a,{className:c,style:Vr(Vr({color:t.color||n.color},n.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),s&&vn.createElement("title",null,s),t.children)};return oI!==void 0?vn.createElement(oI.Consumer,null,function(n){return e(n)}):e(nN)}function p0(t){return rN({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"}}]})(t)}function m0(t){return rN({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"}},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"}}]})(t)}function BW(){for(var t=0,e,n,i="";t<arguments.length;)(e=arguments[t++])&&(n=sN(e))&&(i&&(i+=" "),i+=n);return i}function sN(t){if(typeof t=="string")return t;for(var e,n="",i=0;i<t.length;i++)t[i]&&(e=sN(t[i]))&&(n&&(n+=" "),n+=e);return n}var g0="-";function FW(t){var e=zW(t),n=t.conflictingClassGroups,i=t.conflictingClassGroupModifiers,r=i===void 0?{}:i;function s(u){var c=u.split(g0);return c[0]===""&&c.length!==1&&c.shift(),oN(c,e)||UW(u)}function a(u,c){var d=n[u]||[];return c&&r[u]?[].concat(d,r[u]):d}return{getClassGroupId:s,getConflictingClassGroupIds:a}}function oN(t,e){var a;if(t.length===0)return e.classGroupId;var n=t[0],i=e.nextPart.get(n),r=i?oN(t.slice(1),i):void 0;if(r)return r;if(e.validators.length!==0){var s=t.join(g0);return(a=e.validators.find(function(u){var c=u.validator;return c(s)}))==null?void 0:a.classGroupId}}var aI=/^\[(.+)\]$/;function UW(t){if(aI.test(t)){var e=aI.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}}function zW(t){var e=t.theme,n=t.prefix,i={nextPart:new Map,validators:[]},r=WW(Object.entries(t.classGroups),n);return r.forEach(function(s){var a=s[0],u=s[1];sy(u,i,a,e)}),i}function sy(t,e,n,i){t.forEach(function(r){if(typeof r=="string"){var s=r===""?e:lI(e,r);s.classGroupId=n;return}if(typeof r=="function"){if(VW(r)){sy(r(i),e,n,i);return}e.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(function(a){var u=a[0],c=a[1];sy(c,lI(e,u),n,i)})})}function lI(t,e){var n=t;return e.split(g0).forEach(function(i){n.nextPart.has(i)||n.nextPart.set(i,{nextPart:new Map,validators:[]}),n=n.nextPart.get(i)}),n}function VW(t){return t.isThemeGetter}function WW(t,e){return e?t.map(function(n){var i=n[0],r=n[1],s=r.map(function(a){return typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(function(u){var c=u[0],d=u[1];return[e+c,d]})):a});return[i,s]}):t}function HW(t){if(t<1)return{get:function(){},set:function(){}};var e=0,n=new Map,i=new Map;function r(s,a){n.set(s,a),e++,e>t&&(e=0,i=n,n=new Map)}return{get:function(a){var u=n.get(a);if(u!==void 0)return u;if((u=i.get(a))!==void 0)return r(a,u),u},set:function(a,u){n.has(a)?n.set(a,u):r(a,u)}}}var aN="!";function GW(t){var e=t.separator||":",n=e.length===1,i=e[0],r=e.length;return function(a){for(var u=[],c=0,d=0,p,g=0;g<a.length;g++){var y=a[g];if(c===0){if(y===i&&(n||a.slice(g,g+r)===e)){u.push(a.slice(d,g)),d=g+r;continue}if(y==="/"){p=g;continue}}y==="["?c++:y==="]"&&c--}var _=u.length===0?a:a.substring(d),x=_.startsWith(aN),C=x?_.substring(1):_,k=p&&p>d?p-d:void 0;return{modifiers:u,hasImportantModifier:x,baseClassName:C,maybePostfixModifierPosition:k}}}function $W(t){if(t.length<=1)return t;var e=[],n=[];return t.forEach(function(i){var r=i[0]==="[";r?(e.push.apply(e,n.sort().concat([i])),n=[]):n.push(i)}),e.push.apply(e,n.sort()),e}function QW(t){return{cache:HW(t.cacheSize),splitModifiers:GW(t),...FW(t)}}var qW=/\s+/;function KW(t,e){var n=e.splitModifiers,i=e.getClassGroupId,r=e.getConflictingClassGroupIds,s=new Set;return t.trim().split(qW).map(function(a){var u=n(a),c=u.modifiers,d=u.hasImportantModifier,p=u.baseClassName,g=u.maybePostfixModifierPosition,y=i(g?p.substring(0,g):p),_=!!g;if(!y){if(!g)return{isTailwindClass:!1,originalClassName:a};if(y=i(p),!y)return{isTailwindClass:!1,originalClassName:a};_=!1}var x=$W(c).join(":"),C=d?x+aN:x;return{isTailwindClass:!0,modifierId:C,classGroupId:y,originalClassName:a,hasPostfixModifier:_}}).reverse().filter(function(a){if(!a.isTailwindClass)return!0;var u=a.modifierId,c=a.classGroupId,d=a.hasPostfixModifier,p=u+c;return s.has(p)?!1:(s.add(p),r(c,d).forEach(function(g){return s.add(u+g)}),!0)}).reverse().map(function(a){return a.originalClassName}).join(" ")}function YW(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i,r,s,a=u;function u(d){var p=e[0],g=e.slice(1),y=g.reduce(function(_,x){return x(_)},p());return i=QW(y),r=i.cache.get,s=i.cache.set,a=c,c(d)}function c(d){var p=r(d);if(p)return p;var g=KW(d,i);return s(d,g),g}return function(){return a(BW.apply(null,arguments))}}function We(t){var e=function(i){return i[t]||[]};return e.isThemeGetter=!0,e}var lN=/^\[(?:([a-z-]+):)?(.+)\]$/i,ZW=/^\d+\/\d+$/,XW=new Set(["px","full","screen"]),JW=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,eH=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))/,tH=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Kn(t){return Is(t)||XW.has(t)||ZW.test(t)||mr(t)}function mr(t){return oo(t,"length",aH)}function nH(t){return oo(t,"size",uN)}function iH(t){return oo(t,"position",uN)}function rH(t){return oo(t,"url",lH)}function wh(t){return oo(t,"number",Is)}function Is(t){return!Number.isNaN(Number(t))}function sH(t){return t.endsWith("%")&&Is(t.slice(0,-1))}function _l(t){return uI(t)||oo(t,"number",uI)}function ct(t){return lN.test(t)}function wl(){return!0}function pr(t){return JW.test(t)}function oH(t){return oo(t,"",uH)}function oo(t,e,n){var i=lN.exec(t);return i?i[1]?i[1]===e:n(i[2]):!1}function aH(t){return eH.test(t)}function uN(){return!1}function lH(t){return t.startsWith("url(")}function uI(t){return Number.isInteger(Number(t))}function uH(t){return tH.test(t)}function cH(){var t=We("colors"),e=We("spacing"),n=We("blur"),i=We("brightness"),r=We("borderColor"),s=We("borderRadius"),a=We("borderSpacing"),u=We("borderWidth"),c=We("contrast"),d=We("grayscale"),p=We("hueRotate"),g=We("invert"),y=We("gap"),_=We("gradientColorStops"),x=We("gradientColorStopPositions"),C=We("inset"),k=We("margin"),S=We("opacity"),E=We("padding"),I=We("saturate"),R=We("scale"),j=We("sepia"),V=We("skew"),W=We("space"),H=We("translate"),fe=function(){return["auto","contain","none"]},te=function(){return["auto","hidden","clip","visible","scroll"]},ae=function(){return["auto",e]},Le=function(){return["",Kn]},Me=function(){return["auto",Is,ct]},je=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},Ln=function(){return["solid","dashed","dotted","double","none"]},Ve=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},Mt=function(){return["start","end","center","between","around","evenly","stretch"]},M=function(){return["","0",ct]},J=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},F=function(){return[Is,wh]},X=function(){return[Is,ct]};return{cacheSize:500,theme:{colors:[wl],spacing:[Kn],blur:["none","",pr,mr],brightness:F(),borderColor:[t],borderRadius:["none","","full",pr,mr],borderSpacing:[e],borderWidth:Le(),contrast:F(),grayscale:M(),hueRotate:X(),invert:M(),gap:[e],gradientColorStops:[t],gradientColorStopPositions:[sH,mr],inset:ae(),margin:ae(),opacity:F(),padding:[e],saturate:F(),scale:F(),sepia:M(),skew:X(),space:[e],translate:[e]},classGroups:{aspect:[{aspect:["auto","square","video",ct]}],container:["container"],columns:[{columns:[pr]}],"break-after":[{"break-after":J()}],"break-before":[{"break-before":J()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(je(),[ct])}],overflow:[{overflow:te()}],"overflow-x":[{"overflow-x":te()}],"overflow-y":[{"overflow-y":te()}],overscroll:[{overscroll:fe()}],"overscroll-x":[{"overscroll-x":fe()}],"overscroll-y":[{"overscroll-y":fe()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[C]}],"inset-x":[{"inset-x":[C]}],"inset-y":[{"inset-y":[C]}],start:[{start:[C]}],end:[{end:[C]}],top:[{top:[C]}],right:[{right:[C]}],bottom:[{bottom:[C]}],left:[{left:[C]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",_l]}],basis:[{basis:[e]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ct]}],grow:[{grow:M()}],shrink:[{shrink:M()}],order:[{order:["first","last","none",_l]}],"grid-cols":[{"grid-cols":[wl]}],"col-start-end":[{col:["auto",{span:[_l]},ct]}],"col-start":[{"col-start":Me()}],"col-end":[{"col-end":Me()}],"grid-rows":[{"grid-rows":[wl]}],"row-start-end":[{row:["auto",{span:[_l]},ct]}],"row-start":[{"row-start":Me()}],"row-end":[{"row-end":Me()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ct]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ct]}],gap:[{gap:[y]}],"gap-x":[{"gap-x":[y]}],"gap-y":[{"gap-y":[y]}],"justify-content":[{justify:["normal"].concat(Mt())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(Mt(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(Mt(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[E]}],px:[{px:[E]}],py:[{py:[E]}],ps:[{ps:[E]}],pe:[{pe:[E]}],pt:[{pt:[E]}],pr:[{pr:[E]}],pb:[{pb:[E]}],pl:[{pl:[E]}],m:[{m:[k]}],mx:[{mx:[k]}],my:[{my:[k]}],ms:[{ms:[k]}],me:[{me:[k]}],mt:[{mt:[k]}],mr:[{mr:[k]}],mb:[{mb:[k]}],ml:[{ml:[k]}],"space-x":[{"space-x":[W]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[W]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",e]}],"min-w":[{"min-w":["min","max","fit",Kn]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[pr]},pr,mr]}],h:[{h:[e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Kn]}],"max-h":[{"max-h":[e,"min","max","fit"]}],"font-size":[{text:["base",pr,mr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",wh]}],"font-family":[{font:[wl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",mr]}],"line-clamp":[{"line-clamp":["none",Is,wh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Kn]}],"list-image":[{"list-image":["none",ct]}],"list-style-type":[{list:["none","disc","decimal",ct]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[S]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[S]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(Ln(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Kn]}],"underline-offset":[{"underline-offset":["auto",Kn]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:[e]}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",mr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ct]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[S]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(je(),[iH])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",nH]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},rH]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[_]}],"gradient-via":[{via:[_]}],"gradient-to":[{to:[_]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[S]}],"border-style":[{border:[].concat(Ln(),["hidden"])}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[S]}],"divide-style":[{divide:Ln()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:[""].concat(Ln())}],"outline-offset":[{"outline-offset":[Kn]}],"outline-w":[{outline:[Kn]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:Le()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[S]}],"ring-offset-w":[{"ring-offset":[Kn]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",pr,oH]}],"shadow-color":[{shadow:[wl]}],opacity:[{opacity:[S]}],"mix-blend":[{"mix-blend":Ve()}],"bg-blend":[{"bg-blend":Ve()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[i]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",pr,ct]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[g]}],saturate:[{saturate:[I]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[g]}],"backdrop-opacity":[{"backdrop-opacity":[S]}],"backdrop-saturate":[{"backdrop-saturate":[I]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ct]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",ct]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",ct]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[_l,ct]}],"translate-x":[{"translate-x":[H]}],"translate-y":[{"translate-y":[H]}],"skew-x":[{"skew-x":[V]}],"skew-y":[{"skew-y":[V]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ct]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ct]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":[e]}],"scroll-mx":[{"scroll-mx":[e]}],"scroll-my":[{"scroll-my":[e]}],"scroll-ms":[{"scroll-ms":[e]}],"scroll-me":[{"scroll-me":[e]}],"scroll-mt":[{"scroll-mt":[e]}],"scroll-mr":[{"scroll-mr":[e]}],"scroll-mb":[{"scroll-mb":[e]}],"scroll-ml":[{"scroll-ml":[e]}],"scroll-p":[{"scroll-p":[e]}],"scroll-px":[{"scroll-px":[e]}],"scroll-py":[{"scroll-py":[e]}],"scroll-ps":[{"scroll-ps":[e]}],"scroll-pe":[{"scroll-pe":[e]}],"scroll-pt":[{"scroll-pt":[e]}],"scroll-pr":[{"scroll-pr":[e]}],"scroll-pb":[{"scroll-pb":[e]}],"scroll-pl":[{"scroll-pl":[e]}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ct]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Kn,wh]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var hH=YW(cH),dH=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],fH=dH,cN=Symbol("isTwElement?"),pH=(t,e)=>t.reduce((n,i,r)=>n.concat(i||[],e[r]||[]),[]),mH=(t,e="")=>{let n=t.join(" ").trim().replace(/\n/g," ").replace(/\s{2,}/g," ").split(" ").filter(r=>r!==","),i=e?e.split(" "):[];return hH(...n.concat(i).filter(r=>r!==" "))},gH=([t])=>t.charAt(0)!=="$",cg=t=>t[cN]===!0,hN=t=>(e,...n)=>{let i=(r=[])=>{let s=vn.forwardRef((a,u)=>{let{$as:c=t,style:d={},...p}=a,g=cg(t)?t:c,y=r?r.reduce((x,C)=>Object.assign(x,typeof C=="function"?C(a):C),{}):{},_=cg(g)?p:Object.fromEntries(Object.entries(p).filter(gH));return vn.createElement(g,{..._,style:{...y,...d},ref:u,className:mH(pH(e,n.map(x=>x({...p,$as:c}))),p.className),...cg(t)?{$as:c}:{}})});return s[cN]=!0,typeof t!="string"?s.displayName=t.displayName||t.name||"tw.Component":s.displayName="tw."+t,s.withStyle=a=>i(r.concat(a)),s};return i()},vH=fH.reduce((t,e)=>({...t,[e]:hN(e)}),{}),yH=Object.assign(hN,vH),N=yH;const v0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGYAAABmCAYAAAA53+RiAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFtSURBVHgB7dwxSsNgGMfhr9VFwUEregdX7+JxnJxddXNx8QbOXkAQnL2DiKCCn28pQodS0kCSN/R54L9lyq8pISktBQAAAAAAAAAAAKArtdaj2G4hjwhyGnuK3cWOC8NbivJTF+7FGdiKKFWcga2JIs5QGkQRp28bRPn3EDspIzct+X3HPmO/DY+/iF27cnoQJ/kw9hj7qs35WuuDOInFSZ7FnutmbmKTQrfESUycxMRJTJzExElMnMTESUycxMRJTJzEWsa5EqcHLeK8i9MTcRITJ7GxxRnDq+WhHMRmhe7Udndo3n52SZSERElIlIRq+0cyonSlek6WjygJiZKQKAmJkpAoCYmSkCgJiZKQKAmJkkyc2GnsLPa6QRCvhru0zVGyv1qen9y92H7D4z9it7HLyWRSC92JT/5O7Dz2tg1Xyqg0iCPKUNbEEWVoK+KIksVSnBdRkqmL2+j5Xy/6wSIAAAAAAAAAAAAwnD8o4JfKsFu5gwAAAABJRU5ErkJggg==",lf="/assets/Person-213d0e00.png",cI="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAVVSURBVHgB7Z1JiB9FFMa/v/ugqLgk0SQwiIqokGASN6KQg+JGjEhGQQ9eRNCDuMWLYlzAgKhBxEhy0EsUMuglYPCgBFFMzIhoFBeEmUMSZwRxG82eyveonpDT1Oue6u43Pe8HHzWH1/9+019vVd2vGnAcx3Ecx3Ecx2mWHioQQjibzW3UYmo2dTLycpj6nfqB2tzr9X5DBpj3BWyWU5cj5n0C8nKQGqN2UB8x779RJ/yH+qiXqPHQHAep9dT5qAiXnUVtoA6F5pBt9AJ1GuqAPzyH2hHaY5i6EiWRZaiR0B7bqdnafFWnLP5gH5ut1NVolz2SA08FuzXBIZ6ivqLmoV2+pm5k3v+nArXn0GfQvhnChdTaEvFvoX0zhEXUKk1g8ggJ8QK+izodNgjUQu5t300aFMICNt+g4o1LDYxT81IXes0RcjvsmCHIBr5bEbcSdswQzqBuTQVpDFkEeyxRxCyGPZI5aQxR3yE0yBxFzLTMW2NI7k5fDk5RxEzLvHP3VJ0p4oYYww0xhhtiDDfEGG6IMdwQY7ghxnBDjOGGGMMNMUaXDdkHe+xNBXTZkD2wRzKnLhvyOezxWSqgy4YMIr4nZYVR6tNUUGcN4bPrYTbrYYfVzGl/Kqjrd1lPIb5F2DYfQrlzdNoQ7pFyV3MH9QXaYyN1H3MJmuDO90O4IeQd4WXUo1SWd4SV/EgNcP33U+pb8JMwA+AGkYv7GyGEN9leQ8krqXOp3O/dyrtX8g7bENf5PSowIwyZgBvpCJsvC5nEh06M4YYYww0xhhtiDDfEGG6IMWbUbe8E7I+cw0aqq3L3Q/6jdvH2ehwV0RjyF+zxJ0pCEy5i8wS1ArESqza4rl/YbKLW0pw/yiyrOWWNwB7DZYK5gZ5GHMp4GDWbUXApYhngr1y3prjoGBpDtsAe6py4QaQmcQ10JQy5kXLAQebwoHYBbRWuDDVcCxvIY9BLNBWtzPsBNu+gfWQs7QbmvD0VqL3Legx2nr6tUpohdZEvwwZSPPS6JlBlCDfANjaPIFbAtsmrzGWjMvYu6ErfmuI67iQLU0Hqfgg3xAbEytbSdzgZkOcJjzOHJ0sscwvskaUK9xjcIB+wuZh6kfoZ9SPPFuQZxmVct+qQP45+2KM/FTClOu7iPD0f+evY5YjYTRMq94GYmzwgugK2GOT/NDBZwJR66vxx6Zn+BCcbPpZlDDfEGG6IMdwQY7ghxnBDjFH5treYIOwqahbqQfogO6ltxftUM4JShtAE6UjeS61GHPNvglGuV4bP19GYA+g46lNWMRHm+9R7aM4MQQYI5ZnGJ8yhrqPRDCpDiiPjXeoetMdS6uNiuKazaI8QGXofQPvI8PUadJikISHOzPws7PAQc+pHR9EcITejvjupKsjTt5XoKBpDroc9lqKjaAxp4rWZsljMKQsaQ+qZ3X9q9KGj+NCJMdwQY7ghxnBDjOGGGMMNMYYbYgw3xBhuiDHcEGO4IcbQGGJpmrwJNM/Wp2XeGkNGYQ/NjKPTMm+NIUOwx1CmmKZJ5qT5sORZbORTp5Y+LLmg1+vtnDTI5ocl5zLvfyYLSh4hxZcpX4MdNqXMEBjzLeLkk1Z4JWWGoC2LlodUWxGnx2sTOQcv4T+mmrWaecs7XfJx4vloFykrX5ZtmthiEsc7qWSddY3I7A03ac0QGCsXdim0HEF7SAXzCo0ZpZEjhXo+NP+B+3XUuagIlz2Perv4rab4l3qOOrVMrpUueFzJmYh7nnzSWz5xmnvaisPUGCWFm5u5d40hAyF+aH45YjGo/H0i8iL9DMlVTpNbNNcMx3Ecx3Ecx3GctjkKFLsSOp7+h60AAAAASUVORK5CYII=",uf="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAK/SURBVHgB7d09a1RBGMXxc40YSWzVQtDCSkSx1kJ8KUUECz+AYK9NLAy7NmIs/S4iCtY2AQsVtdNGfGsEX0AM1/OQDYQQk1lmkpzZOT942OYWe/e/M3fZhL2AmZmZmZnZ9uqwBfq+n+LDGc4FzmHOLHbGd857zlPOYtd1PVrDGFc473o9i5yzaAVPtuM86LX95dxCC3ii83097kNUkWsIT/AkH15wdqEeC7ym3IaYUi/gAHXFCHN8Iw0hJnuF8KTiE9Q3zl5o+cI5kHDcXa6UIUSUeFefgF6McI3zMuG4gdI1pUSQg9D0lXOR8yrhWJntq0SQPRDFrSi2rfOoaKXUdiEeG6PESolvDFKizO10lIkPEmqK0kSQUEuUZoKEGqI0FSSoR2kuSFCO0mSQoBql2SBBMUrTQYJalOaDBKUoDjKiEsVBVlGI4iBrjKLEt8SvEw6PKAMU5CDrGH1LfA5pK2XIKDdQiIP8x5gr5SGjHEUBDrKBVX9P2SzKNGceBTjIJsbYvq5ylUwjk4MkSNy+9nGOI5ODJErcvg4h025MruvcQj6jvCecY1j/zZz93zeTHOQmKuQtS4yDiHEQMQ4ixkHEOIgYBxHjIGIcRIyDiHEQMQ4ixkHEOIgYBxHjIGIcRIyDiHEQMQ4ixkHEOIgYBxHjIGIcRIyDiHEQMQ4ixkHEOIgYBxHjIGIcRIyDiHEQMQ4ixkHEOIgYBxHjIGIcRIyDiHEQMQ4ipkSQP7AV2a9FiSCfYCs+IlOJ2+bNYPkGXDNo22/O/q7rfiJD9grhE/jFh8ewR7kxQqlbr8a9DOPWq1No0xLnFIOk3KJvQ0U+ZfGJxC92Fv2F58rcKREjlPzYe4+zgPbE77/rnje3r8uct/3ke8O5hMKKXEPW4hONa8lpLN9p4AhnFpPhB+cD5xnnObepJZiZmZmZmVXuHwphl7w2e/n0AAAAAElFTkSuQmCC",gi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAI3SURBVHgB7d29ahRRGMbxdwwIYmMj2liJ2ETEKxDESiwU8Q68Bb+FxE7jTdgJRhvRSjs7K0EF7QVNm0C+IDl5hgRSJHDeye5Onuz+f/AyzdmBnX9Okt1iJgIAAAAAAAAAAGC8NXFApZSTOlzSnNEcj+Fb1fzT/GiaZi2wP4W4rHmvWSn9WNS81pwP7NIFaTTPNBvlcKxp7gW26WLMFQ8zMel0EW4VL7MxqfTmpzR/ip/ZmER641eLrxcxZo4l1lwLXw/LmO2UTJBz4W1mnHZK9YOh3uxbHe4GMtY1C5pvmneaeX2o3ehygswOQV77jUX7G+WO5o3mu36gr3Q5AUFGa1rzVVGuZ19AkNFrv/ObL8mvfgjSj1OaV5mFBOnP7cwuIUi/btYWEKRfF2oLCNKv07UFBOlX9YM4QcwQxAxBzBDEDEHMEMQMQcwQxAxBzBDEDEHMEMQMQcwQxAxBzBDEDEHMEMQMQcwQxAxBzBDEDEHMEMQMQcwQxAxBzBDEDEHMEMQMQcwQxAxBzBDEDEHMEMQMQcwQxAxBzBDETCbIUmBYFmsLMkH+Boalei0zQb4EhuVzbUHmJphTOvzSXAwM4rdmunZTzOoO2TnBg8AgiuZ+5g6lqf+ydKIPOswFDuqlruHHzMIu//Y+0jzVbAay2h3xWPMk+4LOT9jR35T2qTrtIyNuaE4E9rOi+aR5rp3xs8sLB33kUXtf2rMxmkceHUXtna3/x/ZjmpYDAAAAAAAAAAAAe2wBmdShLdPiGEYAAAAASUVORK5CYII=";var dN={exports:{}},_H="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",wH=_H,xH=wH;function fN(){}function pN(){}pN.resetWarningCache=fN;var EH=function(){function t(i,r,s,a,u,c){if(c!==xH){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:pN,resetWarningCache:fN};return n.PropTypes=n,n};dN.exports=EH();var SH=dN.exports;const Ct=LI(SH),CH=N.img`
    w-[25px] h-[25px] ml-1.5 mr-4`,IH=N.h3`
    text-white font-inter font-semibold text-[16px]`,De=({to:t,iconSrc:e,iconAlt:n,text:i})=>{const r=Ys(),[s,a]=T.useState(null);var u="flex px-4 py-2 mt-1 ml-2 hover:bg-highlight/40 cursor-pointer rounded-lg w-[240px] md:mt-2";const c=()=>{a(t)};return r.pathname===t&&(u="flex px-4 py-2 mt-1 ml-2 hover:bg-highlight/40 cursor-pointer rounded-lg w-[240px] md:mt-2 bg-highlight/40"),m.jsx(Aa,{to:t,onClick:c,children:m.jsxs("li",{className:u,children:[m.jsx(CH,{src:e,alt:n}),m.jsx(IH,{children:i})]})})};De.propTypes={to:Ct.string.isRequired,iconSrc:Ct.string.isRequired,iconAlt:Ct.string.isRequired,text:Ct.string.isRequired};const TH="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAOzSURBVHgB7d1LaxNRGMbxNyqCF1A3oqigxZ0bN+Jdii5E3FUUuvELqKDitfWON1CsoLjXTVFRd6IgSktt0Z2fwCpYcaVCUUE0Pi8zscVLcubMJOednucHLyntLJr5N8lcko4IERERERERERFROVSkINVqtQ036zBzMZMlDj8wHzADlUrltRQgdxCE2Iibc5hVErchTDfCPJMcvIMgxCRJQhwRqqliLmCOI8xP8TBF/DHG3/QPvCv9uls8eD1C0qepJ1Lga9AEo4+UTT5PX75B9Pky9teMRoYQZI1klDkIYizGTSFbFBFoy7r1NUmy2yDkaq1k5BNkvpCrBZKRT5BpQq4yryufINREDGIMgxjDIMYwiDEMYgyDGMMgxjCIMQxiTMxB9Hz4NcwKzEJMO+aeBJbnjGGZ6enVThwavzvue+8wfTi9cAC3lySQWB8hd/6I8Ru+fxk3+yWQWIM8qPdDROmRQFFiDfKp0QKhosQaZLnLQiGixBpkN168Z7ks2OoosQZZhLmPKNNdFm5llJj3Q/S9ZY8QZabLwmmUfdJkse+pr8c8zBDlqjQ5Cg+dGIvCIAkzURhkjIkoFo9ljWLeYL5J6+lW1wlEOYwVXm20sEbBsvp23CtSEEtBdO95D+Y27uh3KQnd+kIU/bKQKFaCaIDNuHMvpYTSKPPw5SHJycprSG9ZY4xzWhyOkTViJUiflBz+oL7g5oXkxK0sY6wEaZeSS4+LrZScrATpxB3KfWcCO4WZLTlZCaJbe48RZSdmqpQMfmfdQTwoBbC0H6LnJ25ibuAODkuYHUP1FOO0Y6jSGBNyx7BmBmaZhNGPOZMhxl4pMIbiVtYYjbEVMUZdFk5j9EjBGCRhIoZiEEMxVOxBTMVQMQfRraktGWLo1lRTY6hYg7zFdKTHnxoqetO2nliDXEeMzy4LtjKGijXIK5eFWh1DxRqk4TGnEDFUrEG21fthqBgq1iDbsdJ3/OsH6Qd2gsRQsX6CSt8p0ouVr//76xZmBLNUkjdZdEhAsQZR+uywKx0zeOjEGAYxhkGMYRBjGMQYBjGGQYxhEGMYxBgGMcYnyFchV05nJMfzCfJeyNVIxuW9gvQLuXouGWUOgnPRw5JcAIvqG/S5cpvvi7peX8np/a+R0nXTJR68gqTXVroo9D9nsY68PqaX5wTVMUn+Eo4KLw5Wo+vjPOakeCriwpLt6S+xWuI2iOnyfWTUFHnp1SWSXHNJL/MzR+LwUZL/ZjqQbuwQERERERERERFF4xdE+AQSuPi90QAAAABJRU5ErkJggg==",AH=N.div`
    absolute bottom-0 w-full py-4`,kH=N.div`
    border-t border-zinc-300`,bH=N.li`
    flex px-4 py-2 mt-1 ml-2 hover:bg-highlight/40 cursor-pointer rounded-lg w-[240px] md:mt-2`,RH=N.img`
    w-[25px] h-[25px] ml-1.5 mr-4`,PH=N.h3`
    text-white font-inter font-semibold text-[16px]`,wa=()=>{const{logout:t}=so(),e=es(),n=async()=>{try{await t(),e("/")}catch(i){console.log(i.message)}};return m.jsx(AH,{children:m.jsx(kH,{children:m.jsx("div",{onClick:n,children:m.jsxs(bH,{children:[m.jsx(RH,{src:TH,alt:"logout"}),m.jsx(PH,{children:"Logout"})]})})})})},NH=N.div`
    fixed top-0 left-0 w-full h-full z-50 bg-gray-900 bg-opacity-50`,hI=N.div`
    fixed top-0 left-0 w-64 h-full bg-sidebar text-white transition-all duration-300 ease-in-out`,xh=N.div`
    h-35 px-5 md:pt-6`,Eh=N.h2`
    text-sm font-inter font-semibold font-white`,dI=N.div`
    pt-4 flex md:pt-3`,fI=N.img`
    h-[80px] w-[80px]`,LH=N.button`
    focus:outline-none pl-[215px] pt-4`,MH=N.img`
    w-[28px] h-[28px]`,pI=N.div`
    flex flex-col`,mI=N.h4`
    text-white font-inter font-semibold text-[17px] pl-2 pt-3`,gI=N.h5`
    text-white font-inter font-semibold text-[15px] pl-2 pt-2`,vI=N.ul`
    py-0 pt-5 md:pt-0 `,DH=N.button`
    block lg:hidden text-gray-500 hover:text-white focus:outline-none focus:text-white transition duration-150 ease-in-out mt-6 ml-5`,OH=t=>{const e=document.cookie.split(";");for(let n=0;n<e.length;n++){const i=e[n].trim();if(i.startsWith(t+"="))return i.substring(t.length+1)}return""},jH=({showSidebar:t,handleSidebarToggle:e})=>{const n=OH("name");return m.jsxs(m.Fragment,{children:[m.jsx(DH,{onClick:e,children:t?m.jsx(m0,{size:20}):m.jsx(p0,{size:20})}),t?m.jsx(NH,{id:"sidebar",children:m.jsxs(hI,{children:[m.jsx(LH,{onClick:e,children:m.jsx(MH,{src:v0,alt:"back"})}),m.jsxs(xh,{children:[m.jsx(Eh,{children:"Profile"}),m.jsxs(dI,{children:[m.jsx(fI,{src:lf,alt:"image"}),m.jsxs(pI,{children:[m.jsx(mI,{children:n}),m.jsx(gI,{children:"Driver"})]})]})]}),m.jsxs(vI,{children:[m.jsx(xh,{children:m.jsx(Eh,{children:"Menu"})}),m.jsx(De,{to:"/driver",iconSrc:cI,iconAlt:"dashboard",text:"Dashboard"}),m.jsx(De,{to:"/driver/reports",iconSrc:uf,iconAlt:"file",text:"Inspection Reports"}),m.jsx(De,{to:"/driver/trips",iconSrc:gi,iconAlt:"folder",text:"Trip Summary"}),m.jsx(wa,{})]})]})}):m.jsxs(hI,{className:"hidden md:block",children:[m.jsxs(xh,{children:[m.jsx(Eh,{children:"Profile"}),m.jsxs(dI,{children:[m.jsx(fI,{src:lf,alt:"image"}),m.jsxs(pI,{children:[m.jsx(mI,{children:n}),m.jsx(gI,{children:"Driver"})]})]})]}),m.jsxs(vI,{children:[m.jsx(xh,{children:m.jsx(Eh,{children:"Menu"})}),m.jsx(De,{to:"/driver",iconSrc:cI,iconAlt:"dashboard",text:"Dashboard"}),m.jsx(De,{to:"/driver/reports",iconSrc:uf,iconAlt:"file",text:"Inspection Reports"}),m.jsx(De,{to:"/driver/trips",iconSrc:gi,iconAlt:"folder",text:"Trip Summary"}),m.jsx(wa,{})]})]})]})},BH="/assets/inspectionGIF-3003bf56.gif",FH=()=>{const t=es();return m.jsxs("div",{className:"bg-white p-7 rounded-2xl drop-shadow-lg items-center flex flex-col text-center w-64 md:w-96 lg:w-[420px] text-sm md:text-base",children:[m.jsx("img",{src:BH,alt:"Inspection icon",className:"w-24 h-24 md:w-36 md:h-36"}),m.jsx("p",{children:"Start your inspection!"}),m.jsx("p",{children:"Click the Start button to proceed."}),m.jsx("button",{className:"border outline-none bg-primary w-full font-inter text-base md:text-xl text-white px-4 py-2 mt-5 text-center font-semibold rounded-2xl",onClick:()=>{t("/inspection")},children:"Start"})]})};function mN(t,e){const n=T.useRef(e);T.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const UH=1;function zH(t){return Object.freeze({__version:UH,map:t})}function VH(t,e){return Object.freeze({...t,...e})}const gN=T.createContext(null),vN=gN.Provider;function y0(){const t=T.useContext(gN);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function WH(t){function e(n,i){const{instance:r,context:s}=t(n).current;return T.useImperativeHandle(i,()=>r),n.children==null?null:vn.createElement(vN,{value:s},n.children)}return T.forwardRef(e)}function HH(t){function e(n,i){const[r,s]=T.useState(!1),{instance:a}=t(n,s).current;T.useImperativeHandle(i,()=>a),T.useEffect(function(){r&&a.update()},[a,r,n.children]);const u=a._contentNode;return u?QT.createPortal(n.children,u):null}return T.forwardRef(e)}function GH(t){function e(n,i){const{instance:r}=t(n).current;return T.useImperativeHandle(i,()=>r),null}return T.forwardRef(e)}function yN(t,e){const n=T.useRef();T.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function _0(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function $H(t,e){return function(i,r){const s=y0(),a=t(_0(i,s),s);return mN(s.map,i.attribution),yN(a.current,i.eventHandlers),e(a.current,s,i,r),a}}var oy={exports:{}};/* @preserve
 * Leaflet 1.9.3, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2022 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(tM,function(n){var i="1.9.3";function r(o){var l,h,f,v;for(h=1,f=arguments.length;h<f;h++){v=arguments[h];for(l in v)o[l]=v[l]}return o}var s=Object.create||function(){function o(){}return function(l){return o.prototype=l,new o}}();function a(o,l){var h=Array.prototype.slice;if(o.bind)return o.bind.apply(o,h.call(arguments,1));var f=h.call(arguments,2);return function(){return o.apply(l,f.length?f.concat(h.call(arguments)):arguments)}}var u=0;function c(o){return"_leaflet_id"in o||(o._leaflet_id=++u),o._leaflet_id}function d(o,l,h){var f,v,w,A;return A=function(){f=!1,v&&(w.apply(h,v),v=!1)},w=function(){f?v=arguments:(o.apply(h,arguments),setTimeout(A,l),f=!0)},w}function p(o,l,h){var f=l[1],v=l[0],w=f-v;return o===f&&h?o:((o-v)%w+w)%w+v}function g(){return!1}function y(o,l){if(l===!1)return o;var h=Math.pow(10,l===void 0?6:l);return Math.round(o*h)/h}function _(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function x(o){return _(o).split(/\s+/)}function C(o,l){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?s(o.options):{});for(var h in l)o.options[h]=l[h];return o.options}function k(o,l,h){var f=[];for(var v in o)f.push(encodeURIComponent(h?v.toUpperCase():v)+"="+encodeURIComponent(o[v]));return(!l||l.indexOf("?")===-1?"?":"&")+f.join("&")}var S=/\{ *([\w_ -]+) *\}/g;function E(o,l){return o.replace(S,function(h,f){var v=l[f];if(v===void 0)throw new Error("No value provided for variable "+h);return typeof v=="function"&&(v=v(l)),v})}var I=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function R(o,l){for(var h=0;h<o.length;h++)if(o[h]===l)return h;return-1}var j="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function V(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var W=0;function H(o){var l=+new Date,h=Math.max(0,16-(l-W));return W=l+h,window.setTimeout(o,h)}var fe=window.requestAnimationFrame||V("RequestAnimationFrame")||H,te=window.cancelAnimationFrame||V("CancelAnimationFrame")||V("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function ae(o,l,h){if(h&&fe===H)o.call(l);else return fe.call(window,a(o,l))}function Le(o){o&&te.call(window,o)}var Me={__proto__:null,extend:r,create:s,bind:a,get lastId(){return u},stamp:c,throttle:d,wrapNum:p,falseFn:g,formatNum:y,trim:_,splitWords:x,setOptions:C,getParamString:k,template:E,isArray:I,indexOf:R,emptyImageUrl:j,requestFn:fe,cancelFn:te,requestAnimFrame:ae,cancelAnimFrame:Le};function je(){}je.extend=function(o){var l=function(){C(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=l.__super__=this.prototype,f=s(h);f.constructor=l,l.prototype=f;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(l[v]=this[v]);return o.statics&&r(l,o.statics),o.includes&&(Ln(o.includes),r.apply(null,[f].concat(o.includes))),r(f,o),delete f.statics,delete f.includes,f.options&&(f.options=h.options?s(h.options):{},r(f.options,o.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,A=f._initHooks.length;w<A;w++)f._initHooks[w].call(this)}},l},je.include=function(o){var l=this.prototype.options;return r(this.prototype,o),o.options&&(this.prototype.options=l,this.mergeOptions(o.options)),this},je.mergeOptions=function(o){return r(this.prototype.options,o),this},je.addInitHook=function(o){var l=Array.prototype.slice.call(arguments,1),h=typeof o=="function"?o:function(){this[o].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function Ln(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=I(o)?o:[o];for(var l=0;l<o.length;l++)o[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ve={on:function(o,l,h){if(typeof o=="object")for(var f in o)this._on(f,o[f],l);else{o=x(o);for(var v=0,w=o.length;v<w;v++)this._on(o[v],l,h)}return this},off:function(o,l,h){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var f in o)this._off(f,o[f],l);else{o=x(o);for(var v=arguments.length===1,w=0,A=o.length;w<A;w++)v?this._off(o[w]):this._off(o[w],l,h)}return this},_on:function(o,l,h,f){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(o,l,h)===!1){h===this&&(h=void 0);var v={fn:l,ctx:h};f&&(v.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(v)}},_off:function(o,l,h){var f,v,w;if(this._events&&(f=this._events[o],!!f)){if(arguments.length===1){if(this._firingCount)for(v=0,w=f.length;v<w;v++)f[v].fn=g;delete this._events[o];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var A=this._listens(o,l,h);if(A!==!1){var b=f[A];this._firingCount&&(b.fn=g,this._events[o]=f=f.slice()),f.splice(A,1)}}},fire:function(o,l,h){if(!this.listens(o,h))return this;var f=r({},l,{type:o,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var v=this._events[o];if(v){this._firingCount=this._firingCount+1||1;for(var w=0,A=v.length;w<A;w++){var b=v[w],P=b.fn;b.once&&this.off(o,P,b.ctx),P.call(b.ctx||this,f)}this._firingCount--}}return h&&this._propagateEvent(f),this},listens:function(o,l,h,f){typeof o!="string"&&console.warn('"string" type argument expected');var v=l;typeof l!="function"&&(f=!!l,v=void 0,h=void 0);var w=this._events&&this._events[o];if(w&&w.length&&this._listens(o,v,h)!==!1)return!0;if(f){for(var A in this._eventParents)if(this._eventParents[A].listens(o,l,h,f))return!0}return!1},_listens:function(o,l,h){if(!this._events)return!1;var f=this._events[o]||[];if(!l)return!!f.length;h===this&&(h=void 0);for(var v=0,w=f.length;v<w;v++)if(f[v].fn===l&&f[v].ctx===h)return v;return!1},once:function(o,l,h){if(typeof o=="object")for(var f in o)this._on(f,o[f],l,!0);else{o=x(o);for(var v=0,w=o.length;v<w;v++)this._on(o[v],l,h,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[c(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[c(o)],this},_propagateEvent:function(o){for(var l in this._eventParents)this._eventParents[l].fire(o.type,r({layer:o.target,propagatedFrom:o.target},o),!0)}};Ve.addEventListener=Ve.on,Ve.removeEventListener=Ve.clearAllEventListeners=Ve.off,Ve.addOneTimeEventListener=Ve.once,Ve.fireEvent=Ve.fire,Ve.hasEventListeners=Ve.listens;var Mt=je.extend(Ve);function M(o,l,h){this.x=h?Math.round(o):o,this.y=h?Math.round(l):l}var J=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};M.prototype={clone:function(){return new M(this.x,this.y)},add:function(o){return this.clone()._add(F(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(F(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new M(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new M(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=J(this.x),this.y=J(this.y),this},distanceTo:function(o){o=F(o);var l=o.x-this.x,h=o.y-this.y;return Math.sqrt(l*l+h*h)},equals:function(o){return o=F(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=F(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function F(o,l,h){return o instanceof M?o:I(o)?new M(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new M(o.x,o.y):new M(o,l,h)}function X(o,l){if(o)for(var h=l?[o,l]:o,f=0,v=h.length;f<v;f++)this.extend(h[f])}X.prototype={extend:function(o){var l,h;if(!o)return this;if(o instanceof M||typeof o[0]=="number"||"x"in o)l=h=F(o);else if(o=re(o),l=o.min,h=o.max,!l||!h)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=h.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(o){return F((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return F(this.min.x,this.max.y)},getTopRight:function(){return F(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var l,h;return typeof o[0]=="number"||o instanceof M?o=F(o):o=re(o),o instanceof X?(l=o.min,h=o.max):l=h=o,l.x>=this.min.x&&h.x<=this.max.x&&l.y>=this.min.y&&h.y<=this.max.y},intersects:function(o){o=re(o);var l=this.min,h=this.max,f=o.min,v=o.max,w=v.x>=l.x&&f.x<=h.x,A=v.y>=l.y&&f.y<=h.y;return w&&A},overlaps:function(o){o=re(o);var l=this.min,h=this.max,f=o.min,v=o.max,w=v.x>l.x&&f.x<h.x,A=v.y>l.y&&f.y<h.y;return w&&A},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var l=this.min,h=this.max,f=Math.abs(l.x-h.x)*o,v=Math.abs(l.y-h.y)*o;return re(F(l.x-f,l.y-v),F(h.x+f,h.y+v))},equals:function(o){return o?(o=re(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function re(o,l){return!o||o instanceof X?o:new X(o,l)}function wt(o,l){if(o)for(var h=l?[o,l]:o,f=0,v=h.length;f<v;f++)this.extend(h[f])}wt.prototype={extend:function(o){var l=this._southWest,h=this._northEast,f,v;if(o instanceof Ie)f=o,v=o;else if(o instanceof wt){if(f=o._southWest,v=o._northEast,!f||!v)return this}else return o?this.extend(we(o)||Be(o)):this;return!l&&!h?(this._southWest=new Ie(f.lat,f.lng),this._northEast=new Ie(v.lat,v.lng)):(l.lat=Math.min(f.lat,l.lat),l.lng=Math.min(f.lng,l.lng),h.lat=Math.max(v.lat,h.lat),h.lng=Math.max(v.lng,h.lng)),this},pad:function(o){var l=this._southWest,h=this._northEast,f=Math.abs(l.lat-h.lat)*o,v=Math.abs(l.lng-h.lng)*o;return new wt(new Ie(l.lat-f,l.lng-v),new Ie(h.lat+f,h.lng+v))},getCenter:function(){return new Ie((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ie(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ie(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof Ie||"lat"in o?o=we(o):o=Be(o);var l=this._southWest,h=this._northEast,f,v;return o instanceof wt?(f=o.getSouthWest(),v=o.getNorthEast()):f=v=o,f.lat>=l.lat&&v.lat<=h.lat&&f.lng>=l.lng&&v.lng<=h.lng},intersects:function(o){o=Be(o);var l=this._southWest,h=this._northEast,f=o.getSouthWest(),v=o.getNorthEast(),w=v.lat>=l.lat&&f.lat<=h.lat,A=v.lng>=l.lng&&f.lng<=h.lng;return w&&A},overlaps:function(o){o=Be(o);var l=this._southWest,h=this._northEast,f=o.getSouthWest(),v=o.getNorthEast(),w=v.lat>l.lat&&f.lat<h.lat,A=v.lng>l.lng&&f.lng<h.lng;return w&&A},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,l){return o?(o=Be(o),this._southWest.equals(o.getSouthWest(),l)&&this._northEast.equals(o.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Be(o,l){return o instanceof wt?o:new wt(o,l)}function Ie(o,l,h){if(isNaN(o)||isNaN(l))throw new Error("Invalid LatLng object: ("+o+", "+l+")");this.lat=+o,this.lng=+l,h!==void 0&&(this.alt=+h)}Ie.prototype={equals:function(o,l){if(!o)return!1;o=we(o);var h=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return h<=(l===void 0?1e-9:l)},toString:function(o){return"LatLng("+y(this.lat,o)+", "+y(this.lng,o)+")"},distanceTo:function(o){return lr.distance(this,we(o))},wrap:function(){return lr.wrapLatLng(this)},toBounds:function(o){var l=180*o/40075017,h=l/Math.cos(Math.PI/180*this.lat);return Be([this.lat-l,this.lng-h],[this.lat+l,this.lng+h])},clone:function(){return new Ie(this.lat,this.lng,this.alt)}};function we(o,l,h){return o instanceof Ie?o:I(o)&&typeof o[0]!="object"?o.length===3?new Ie(o[0],o[1],o[2]):o.length===2?new Ie(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new Ie(o.lat,"lng"in o?o.lng:o.lon,o.alt):l===void 0?null:new Ie(o,l,h)}var hn={latLngToPoint:function(o,l){var h=this.projection.project(o),f=this.scale(l);return this.transformation._transform(h,f)},pointToLatLng:function(o,l){var h=this.scale(l),f=this.transformation.untransform(o,h);return this.projection.unproject(f)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var l=this.projection.bounds,h=this.scale(o),f=this.transformation.transform(l.min,h),v=this.transformation.transform(l.max,h);return new X(f,v)},infinite:!1,wrapLatLng:function(o){var l=this.wrapLng?p(o.lng,this.wrapLng,!0):o.lng,h=this.wrapLat?p(o.lat,this.wrapLat,!0):o.lat,f=o.alt;return new Ie(h,l,f)},wrapLatLngBounds:function(o){var l=o.getCenter(),h=this.wrapLatLng(l),f=l.lat-h.lat,v=l.lng-h.lng;if(f===0&&v===0)return o;var w=o.getSouthWest(),A=o.getNorthEast(),b=new Ie(w.lat-f,w.lng-v),P=new Ie(A.lat-f,A.lng-v);return new wt(b,P)}},lr=r({},hn,{wrapLng:[-180,180],R:6371e3,distance:function(o,l){var h=Math.PI/180,f=o.lat*h,v=l.lat*h,w=Math.sin((l.lat-o.lat)*h/2),A=Math.sin((l.lng-o.lng)*h/2),b=w*w+Math.cos(f)*Math.cos(v)*A*A,P=2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b));return this.R*P}}),C0=6378137,Cp={R:C0,MAX_LATITUDE:85.0511287798,project:function(o){var l=Math.PI/180,h=this.MAX_LATITUDE,f=Math.max(Math.min(h,o.lat),-h),v=Math.sin(f*l);return new M(this.R*o.lng*l,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(o){var l=180/Math.PI;return new Ie((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*l,o.x*l/this.R)},bounds:function(){var o=C0*Math.PI;return new X([-o,-o],[o,o])}()};function Ip(o,l,h,f){if(I(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=l,this._c=h,this._d=f}Ip.prototype={transform:function(o,l){return this._transform(o.clone(),l)},_transform:function(o,l){return l=l||1,o.x=l*(this._a*o.x+this._b),o.y=l*(this._c*o.y+this._d),o},untransform:function(o,l){return l=l||1,new M((o.x/l-this._b)/this._a,(o.y/l-this._d)/this._c)}};function Ha(o,l,h,f){return new Ip(o,l,h,f)}var Tp=r({},lr,{code:"EPSG:3857",projection:Cp,transformation:function(){var o=.5/(Math.PI*Cp.R);return Ha(o,.5,-o,.5)}()}),PN=r({},Tp,{code:"EPSG:900913"});function I0(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function T0(o,l){var h="",f,v,w,A,b,P;for(f=0,w=o.length;f<w;f++){for(b=o[f],v=0,A=b.length;v<A;v++)P=b[v],h+=(v?"L":"M")+P.x+" "+P.y;h+=l?Y.svg?"z":"x":""}return h||"M0 0"}var Ap=document.documentElement.style,Sc="ActiveXObject"in window,NN=Sc&&!document.addEventListener,A0="msLaunchUri"in navigator&&!("documentMode"in document),kp=ci("webkit"),k0=ci("android"),b0=ci("android 2")||ci("android 3"),LN=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),MN=k0&&ci("Google")&&LN<537&&!("AudioNode"in window),bp=!!window.opera,R0=!A0&&ci("chrome"),P0=ci("gecko")&&!kp&&!bp&&!Sc,DN=!R0&&ci("safari"),N0=ci("phantom"),L0="OTransition"in Ap,ON=navigator.platform.indexOf("Win")===0,M0=Sc&&"transition"in Ap,Rp="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!b0,D0="MozPerspective"in Ap,jN=!window.L_DISABLE_3D&&(M0||Rp||D0)&&!L0&&!N0,Ga=typeof orientation<"u"||ci("mobile"),BN=Ga&&kp,FN=Ga&&Rp,O0=!window.PointerEvent&&window.MSPointerEvent,j0=!!(window.PointerEvent||O0),B0="ontouchstart"in window||!!window.TouchEvent,UN=!window.L_NO_TOUCH&&(B0||j0),zN=Ga&&bp,VN=Ga&&P0,WN=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,HN=function(){var o=!1;try{var l=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",g,l),window.removeEventListener("testPassiveEventSupport",g,l)}catch{}return o}(),GN=function(){return!!document.createElement("canvas").getContext}(),Pp=!!(document.createElementNS&&I0("svg").createSVGRect),$N=!!Pp&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),QN=!Pp&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var l=o.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),qN=navigator.platform.indexOf("Mac")===0,KN=navigator.platform.indexOf("Linux")===0;function ci(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var Y={ie:Sc,ielt9:NN,edge:A0,webkit:kp,android:k0,android23:b0,androidStock:MN,opera:bp,chrome:R0,gecko:P0,safari:DN,phantom:N0,opera12:L0,win:ON,ie3d:M0,webkit3d:Rp,gecko3d:D0,any3d:jN,mobile:Ga,mobileWebkit:BN,mobileWebkit3d:FN,msPointer:O0,pointer:j0,touch:UN,touchNative:B0,mobileOpera:zN,mobileGecko:VN,retina:WN,passiveEvents:HN,canvas:GN,svg:Pp,vml:QN,inlineSvg:$N,mac:qN,linux:KN},F0=Y.msPointer?"MSPointerDown":"pointerdown",U0=Y.msPointer?"MSPointerMove":"pointermove",z0=Y.msPointer?"MSPointerUp":"pointerup",V0=Y.msPointer?"MSPointerCancel":"pointercancel",Np={touchstart:F0,touchmove:U0,touchend:z0,touchcancel:V0},W0={touchstart:tL,touchmove:Cc,touchend:Cc,touchcancel:Cc},ao={},H0=!1;function YN(o,l,h){return l==="touchstart"&&eL(),W0[l]?(h=W0[l].bind(this,h),o.addEventListener(Np[l],h,!1),h):(console.warn("wrong event specified:",l),g)}function ZN(o,l,h){if(!Np[l]){console.warn("wrong event specified:",l);return}o.removeEventListener(Np[l],h,!1)}function XN(o){ao[o.pointerId]=o}function JN(o){ao[o.pointerId]&&(ao[o.pointerId]=o)}function G0(o){delete ao[o.pointerId]}function eL(){H0||(document.addEventListener(F0,XN,!0),document.addEventListener(U0,JN,!0),document.addEventListener(z0,G0,!0),document.addEventListener(V0,G0,!0),H0=!0)}function Cc(o,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var h in ao)l.touches.push(ao[h]);l.changedTouches=[l],o(l)}}function tL(o,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Dt(l),Cc(o,l)}function nL(o){var l={},h,f;for(f in o)h=o[f],l[f]=h&&h.bind?h.bind(o):h;return o=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var iL=200;function rL(o,l){o.addEventListener("dblclick",l);var h=0,f;function v(w){if(w.detail!==1){f=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var A=Y0(w);if(!(A.some(function(P){return P instanceof HTMLLabelElement&&P.attributes.for})&&!A.some(function(P){return P instanceof HTMLInputElement||P instanceof HTMLSelectElement}))){var b=Date.now();b-h<=iL?(f++,f===2&&l(nL(w))):f=1,h=b}}}return o.addEventListener("click",v),{dblclick:l,simDblclick:v}}function sL(o,l){o.removeEventListener("dblclick",l.dblclick),o.removeEventListener("click",l.simDblclick)}var Lp=Ac(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),$a=Ac(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),$0=$a==="webkitTransition"||$a==="OTransition"?$a+"End":"transitionend";function Q0(o){return typeof o=="string"?document.getElementById(o):o}function Qa(o,l){var h=o.style[l]||o.currentStyle&&o.currentStyle[l];if((!h||h==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(o,null);h=f?f[l]:null}return h==="auto"?null:h}function Te(o,l,h){var f=document.createElement(o);return f.className=l||"",h&&h.appendChild(f),f}function Ze(o){var l=o.parentNode;l&&l.removeChild(o)}function Ic(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function lo(o){var l=o.parentNode;l&&l.lastChild!==o&&l.appendChild(o)}function uo(o){var l=o.parentNode;l&&l.firstChild!==o&&l.insertBefore(o,l.firstChild)}function Mp(o,l){if(o.classList!==void 0)return o.classList.contains(l);var h=Tc(o);return h.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(h)}function de(o,l){if(o.classList!==void 0)for(var h=x(l),f=0,v=h.length;f<v;f++)o.classList.add(h[f]);else if(!Mp(o,l)){var w=Tc(o);Dp(o,(w?w+" ":"")+l)}}function ut(o,l){o.classList!==void 0?o.classList.remove(l):Dp(o,_((" "+Tc(o)+" ").replace(" "+l+" "," ")))}function Dp(o,l){o.className.baseVal===void 0?o.className=l:o.className.baseVal=l}function Tc(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function Mn(o,l){"opacity"in o.style?o.style.opacity=l:"filter"in o.style&&oL(o,l)}function oL(o,l){var h=!1,f="DXImageTransform.Microsoft.Alpha";try{h=o.filters.item(f)}catch{if(l===1)return}l=Math.round(l*100),h?(h.Enabled=l!==100,h.Opacity=l):o.style.filter+=" progid:"+f+"(opacity="+l+")"}function Ac(o){for(var l=document.documentElement.style,h=0;h<o.length;h++)if(o[h]in l)return o[h];return!1}function as(o,l,h){var f=l||new M(0,0);o.style[Lp]=(Y.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(h?" scale("+h+")":"")}function ft(o,l){o._leaflet_pos=l,Y.any3d?as(o,l):(o.style.left=l.x+"px",o.style.top=l.y+"px")}function ls(o){return o._leaflet_pos||new M(0,0)}var qa,Ka,Op;if("onselectstart"in document)qa=function(){ce(window,"selectstart",Dt)},Ka=function(){Fe(window,"selectstart",Dt)};else{var Ya=Ac(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);qa=function(){if(Ya){var o=document.documentElement.style;Op=o[Ya],o[Ya]="none"}},Ka=function(){Ya&&(document.documentElement.style[Ya]=Op,Op=void 0)}}function jp(){ce(window,"dragstart",Dt)}function Bp(){Fe(window,"dragstart",Dt)}var kc,Fp;function Up(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(bc(),kc=o,Fp=o.style.outline,o.style.outline="none",ce(window,"keydown",bc))}function bc(){kc&&(kc.style.outline=Fp,kc=void 0,Fp=void 0,Fe(window,"keydown",bc))}function q0(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function zp(o){var l=o.getBoundingClientRect();return{x:l.width/o.offsetWidth||1,y:l.height/o.offsetHeight||1,boundingClientRect:l}}var aL={__proto__:null,TRANSFORM:Lp,TRANSITION:$a,TRANSITION_END:$0,get:Q0,getStyle:Qa,create:Te,remove:Ze,empty:Ic,toFront:lo,toBack:uo,hasClass:Mp,addClass:de,removeClass:ut,setClass:Dp,getClass:Tc,setOpacity:Mn,testProp:Ac,setTransform:as,setPosition:ft,getPosition:ls,get disableTextSelection(){return qa},get enableTextSelection(){return Ka},disableImageDrag:jp,enableImageDrag:Bp,preventOutline:Up,restoreOutline:bc,getSizedParentNode:q0,getScale:zp};function ce(o,l,h,f){if(l&&typeof l=="object")for(var v in l)Wp(o,v,l[v],h);else{l=x(l);for(var w=0,A=l.length;w<A;w++)Wp(o,l[w],h,f)}return this}var hi="_leaflet_events";function Fe(o,l,h,f){if(arguments.length===1)K0(o),delete o[hi];else if(l&&typeof l=="object")for(var v in l)Hp(o,v,l[v],h);else if(l=x(l),arguments.length===2)K0(o,function(b){return R(l,b)!==-1});else for(var w=0,A=l.length;w<A;w++)Hp(o,l[w],h,f);return this}function K0(o,l){for(var h in o[hi]){var f=h.split(/\d/)[0];(!l||l(f))&&Hp(o,f,null,null,h)}}var Vp={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Wp(o,l,h,f){var v=l+c(h)+(f?"_"+c(f):"");if(o[hi]&&o[hi][v])return this;var w=function(b){return h.call(f||o,b||window.event)},A=w;!Y.touchNative&&Y.pointer&&l.indexOf("touch")===0?w=YN(o,l,w):Y.touch&&l==="dblclick"?w=rL(o,w):"addEventListener"in o?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?o.addEventListener(Vp[l]||l,w,Y.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(w=function(b){b=b||window.event,$p(o,b)&&A(b)},o.addEventListener(Vp[l],w,!1)):o.addEventListener(l,A,!1):o.attachEvent("on"+l,w),o[hi]=o[hi]||{},o[hi][v]=w}function Hp(o,l,h,f,v){v=v||l+c(h)+(f?"_"+c(f):"");var w=o[hi]&&o[hi][v];if(!w)return this;!Y.touchNative&&Y.pointer&&l.indexOf("touch")===0?ZN(o,l,w):Y.touch&&l==="dblclick"?sL(o,w):"removeEventListener"in o?o.removeEventListener(Vp[l]||l,w,!1):o.detachEvent("on"+l,w),o[hi][v]=null}function us(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function Gp(o){return Wp(o,"wheel",us),this}function Za(o){return ce(o,"mousedown touchstart dblclick contextmenu",us),o._leaflet_disable_click=!0,this}function Dt(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function cs(o){return Dt(o),us(o),this}function Y0(o){if(o.composedPath)return o.composedPath();for(var l=[],h=o.target;h;)l.push(h),h=h.parentNode;return l}function Z0(o,l){if(!l)return new M(o.clientX,o.clientY);var h=zp(l),f=h.boundingClientRect;return new M((o.clientX-f.left)/h.x-l.clientLeft,(o.clientY-f.top)/h.y-l.clientTop)}var lL=Y.linux&&Y.chrome?window.devicePixelRatio:Y.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function X0(o){return Y.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/lL:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function $p(o,l){var h=l.relatedTarget;if(!h)return!0;try{for(;h&&h!==o;)h=h.parentNode}catch{return!1}return h!==o}var uL={__proto__:null,on:ce,off:Fe,stopPropagation:us,disableScrollPropagation:Gp,disableClickPropagation:Za,preventDefault:Dt,stop:cs,getPropagationPath:Y0,getMousePosition:Z0,getWheelDelta:X0,isExternalTarget:$p,addListener:ce,removeListener:Fe},J0=Mt.extend({run:function(o,l,h,f){this.stop(),this._el=o,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=ls(o),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ae(this._animate,this),this._step()},_step:function(o){var l=+new Date-this._startTime,h=this._duration*1e3;l<h?this._runFrame(this._easeOut(l/h),o):(this._runFrame(1),this._complete())},_runFrame:function(o,l){var h=this._startPos.add(this._offset.multiplyBy(o));l&&h._round(),ft(this._el,h),this.fire("step")},_complete:function(){Le(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),xe=Mt.extend({options:{crs:Tp,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,l){l=C(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(we(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=$a&&Y.any3d&&!Y.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ce(this._proxy,$0,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,l,h){if(l=l===void 0?this._zoom:this._limitZoom(l),o=this._limitCenter(we(o),l,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=r({animate:h.animate},h.zoom),h.pan=r({animate:h.animate,duration:h.duration},h.pan));var f=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,l,h.zoom):this._tryAnimatedPan(o,h.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(o,l,h.pan&&h.pan.noMoveStart),this},setZoom:function(o,l){return this._loaded?this.setView(this.getCenter(),o,{zoom:l}):(this._zoom=o,this)},zoomIn:function(o,l){return o=o||(Y.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,l)},zoomOut:function(o,l){return o=o||(Y.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,l)},setZoomAround:function(o,l,h){var f=this.getZoomScale(l),v=this.getSize().divideBy(2),w=o instanceof M?o:this.latLngToContainerPoint(o),A=w.subtract(v).multiplyBy(1-1/f),b=this.containerPointToLatLng(v.add(A));return this.setView(b,l,{zoom:h})},_getBoundsCenterZoom:function(o,l){l=l||{},o=o.getBounds?o.getBounds():Be(o);var h=F(l.paddingTopLeft||l.padding||[0,0]),f=F(l.paddingBottomRight||l.padding||[0,0]),v=this.getBoundsZoom(o,!1,h.add(f));if(v=typeof l.maxZoom=="number"?Math.min(l.maxZoom,v):v,v===1/0)return{center:o.getCenter(),zoom:v};var w=f.subtract(h).divideBy(2),A=this.project(o.getSouthWest(),v),b=this.project(o.getNorthEast(),v),P=this.unproject(A.add(b).divideBy(2).add(w),v);return{center:P,zoom:v}},fitBounds:function(o,l){if(o=Be(o),!o.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(o,l);return this.setView(h.center,h.zoom,l)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,l){return this.setView(o,this._zoom,{pan:l})},panBy:function(o,l){if(o=F(o).round(),l=l||{},!o.x&&!o.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new J0,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){de(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,h,l.duration||.25,l.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,l,h){if(h=h||{},h.animate===!1||!Y.any3d)return this.setView(o,l,h);this._stop();var f=this.project(this.getCenter()),v=this.project(o),w=this.getSize(),A=this._zoom;o=we(o),l=l===void 0?A:l;var b=Math.max(w.x,w.y),P=b*this.getZoomScale(A,l),O=v.distanceTo(f)||1,G=1.42,se=G*G;function ve(pt){var Vc=pt?-1:1,ZL=pt?P:b,XL=P*P-b*b+Vc*se*se*O*O,JL=2*ZL*se*O,im=XL/JL,Lx=Math.sqrt(im*im+1)-im,eM=Lx<1e-9?-18:Math.log(Lx);return eM}function On(pt){return(Math.exp(pt)-Math.exp(-pt))/2}function ds(pt){return(Math.exp(pt)+Math.exp(-pt))/2}function zc(pt){return On(pt)/ds(pt)}var hr=ve(0);function nm(pt){return b*(ds(hr)/ds(hr+G*pt))}function QL(pt){return b*(ds(hr)*zc(hr+G*pt)-On(hr))/se}function qL(pt){return 1-Math.pow(1-pt,1.5)}var KL=Date.now(),Px=(ve(1)-hr)/G,YL=h.duration?1e3*h.duration:1e3*Px*.8;function Nx(){var pt=(Date.now()-KL)/YL,Vc=qL(pt)*Px;pt<=1?(this._flyToFrame=ae(Nx,this),this._move(this.unproject(f.add(v.subtract(f).multiplyBy(QL(Vc)/O)),A),this.getScaleZoom(b/nm(Vc),A),{flyTo:!0})):this._move(o,l)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),Nx.call(this),this},flyToBounds:function(o,l){var h=this._getBoundsCenterZoom(o,l);return this.flyTo(h.center,h.zoom,l)},setMaxBounds:function(o){return o=Be(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var l=this.options.minZoom;return this.options.minZoom=o,this._loaded&&l!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var l=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&l!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,l){this._enforcingBounds=!0;var h=this.getCenter(),f=this._limitCenter(h,this._zoom,Be(o));return h.equals(f)||this.panTo(f,l),this._enforcingBounds=!1,this},panInside:function(o,l){l=l||{};var h=F(l.paddingTopLeft||l.padding||[0,0]),f=F(l.paddingBottomRight||l.padding||[0,0]),v=this.project(this.getCenter()),w=this.project(o),A=this.getPixelBounds(),b=re([A.min.add(h),A.max.subtract(f)]),P=b.getSize();if(!b.contains(w)){this._enforcingBounds=!0;var O=w.subtract(b.getCenter()),G=b.extend(w).getSize().subtract(P);v.x+=O.x<0?-G.x:G.x,v.y+=O.y<0?-G.y:G.y,this.panTo(this.unproject(v),l),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=r({animate:!1,pan:!0},o===!0?{animate:!0}:o);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),f=l.divideBy(2).round(),v=h.divideBy(2).round(),w=f.subtract(v);return!w.x&&!w.y?this:(o.animate&&o.pan?this.panBy(w):(o.pan&&this._rawPanBy(w),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=r({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),h=a(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,h,o):navigator.geolocation.getCurrentPosition(l,h,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var l=o.code,h=o.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var l=o.coords.latitude,h=o.coords.longitude,f=new Ie(l,h),v=f.toBounds(o.coords.accuracy*2),w=this._locateOptions;if(w.setView){var A=this.getBoundsZoom(v);this.setView(f,w.maxZoom?Math.min(A,w.maxZoom):A)}var b={latlng:f,bounds:v,timestamp:o.timestamp};for(var P in o.coords)typeof o.coords[P]=="number"&&(b[P]=o.coords[P]);this.fire("locationfound",b)}},addHandler:function(o,l){if(!l)return this;var h=this[o]=new l(this);return this._handlers.push(h),this.options[o]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ze(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Le(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)Ze(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,l){var h="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),f=Te("div",h,l||this._mapPane);return o&&(this._panes[o]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),l=this.unproject(o.getBottomLeft()),h=this.unproject(o.getTopRight());return new wt(l,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,l,h){o=Be(o),h=F(h||[0,0]);var f=this.getZoom()||0,v=this.getMinZoom(),w=this.getMaxZoom(),A=o.getNorthWest(),b=o.getSouthEast(),P=this.getSize().subtract(h),O=re(this.project(b,f),this.project(A,f)).getSize(),G=Y.any3d?this.options.zoomSnap:1,se=P.x/O.x,ve=P.y/O.y,On=l?Math.max(se,ve):Math.min(se,ve);return f=this.getScaleZoom(On,f),G&&(f=Math.round(f/(G/100))*(G/100),f=l?Math.ceil(f/G)*G:Math.floor(f/G)*G),Math.max(v,Math.min(w,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new M(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,l){var h=this._getTopLeftPoint(o,l);return new X(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,l){var h=this.options.crs;return l=l===void 0?this._zoom:l,h.scale(o)/h.scale(l)},getScaleZoom:function(o,l){var h=this.options.crs;l=l===void 0?this._zoom:l;var f=h.zoom(o*h.scale(l));return isNaN(f)?1/0:f},project:function(o,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(we(o),l)},unproject:function(o,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(F(o),l)},layerPointToLatLng:function(o){var l=F(o).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(o){var l=this.project(we(o))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(we(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(Be(o))},distance:function(o,l){return this.options.crs.distance(we(o),we(l))},containerPointToLayerPoint:function(o){return F(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return F(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var l=this.containerPointToLayerPoint(F(o));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(we(o)))},mouseEventToContainerPoint:function(o){return Z0(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var l=this._container=Q0(o);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ce(l,"scroll",this._onScroll,this),this._containerId=c(l)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&Y.any3d,de(o,"leaflet-container"+(Y.touch?" leaflet-touch":"")+(Y.retina?" leaflet-retina":"")+(Y.ielt9?" leaflet-oldie":"")+(Y.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Qa(o,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ft(this._mapPane,new M(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(de(o.markerPane,"leaflet-zoom-hide"),de(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,l,h){ft(this._mapPane,new M(0,0));var f=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var v=this._zoom!==l;this._moveStart(v,h)._move(o,l)._moveEnd(v),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(o,l){return o&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(o,l,h,f){l===void 0&&(l=this._zoom);var v=this._zoom!==l;return this._zoom=l,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),f?h&&h.pinch&&this.fire("zoom",h):((v||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Le(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){ft(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[c(this._container)]=this;var l=o?Fe:ce;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),Y.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Le(this._resizeRequest),this._resizeRequest=ae(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,l){for(var h=[],f,v=l==="mouseout"||l==="mouseover",w=o.target||o.srcElement,A=!1;w;){if(f=this._targets[c(w)],f&&(l==="click"||l==="preclick")&&this._draggableMoved(f)){A=!0;break}if(f&&f.listens(l,!0)&&(v&&!$p(w,o)||(h.push(f),v))||w===this._container)break;w=w.parentNode}return!h.length&&!A&&!v&&this.listens(l,!0)&&(h=[this]),h},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var l=o.target||o.srcElement;if(!(!this._loaded||l._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(l))){var h=o.type;h==="mousedown"&&Up(l),this._fireDOMEvent(o,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,l,h){if(o.type==="click"){var f=r({},o);f.type="preclick",this._fireDOMEvent(f,f.type,h)}var v=this._findEventTargets(o,l);if(h){for(var w=[],A=0;A<h.length;A++)h[A].listens(l,!0)&&w.push(h[A]);v=w.concat(v)}if(v.length){l==="contextmenu"&&Dt(o);var b=v[0],P={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var O=b.getLatLng&&(!b._radius||b._radius<=10);P.containerPoint=O?this.latLngToContainerPoint(b.getLatLng()):this.mouseEventToContainerPoint(o),P.layerPoint=this.containerPointToLayerPoint(P.containerPoint),P.latlng=O?b.getLatLng():this.layerPointToLatLng(P.layerPoint)}for(A=0;A<v.length;A++)if(v[A].fire(l,P,!0),P.originalEvent._stopped||v[A].options.bubblingMouseEvents===!1&&R(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,l=this._handlers.length;o<l;o++)this._handlers[o].disable()},whenReady:function(o,l){return this._loaded?o.call(l||this,{target:this}):this.on("load",o,l),this},_getMapPanePos:function(){return ls(this._mapPane)||new M(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,l){var h=o&&l!==void 0?this._getNewPixelOrigin(o,l):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,l){var h=this.getSize()._divideBy(2);return this.project(o,l)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,l,h){var f=this._getNewPixelOrigin(h,l);return this.project(o,l)._subtract(f)},_latLngBoundsToNewLayerBounds:function(o,l,h){var f=this._getNewPixelOrigin(h,l);return re([this.project(o.getSouthWest(),l)._subtract(f),this.project(o.getNorthWest(),l)._subtract(f),this.project(o.getSouthEast(),l)._subtract(f),this.project(o.getNorthEast(),l)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,l,h){if(!h)return o;var f=this.project(o,l),v=this.getSize().divideBy(2),w=new X(f.subtract(v),f.add(v)),A=this._getBoundsOffset(w,h,l);return Math.abs(A.x)<=1&&Math.abs(A.y)<=1?o:this.unproject(f.add(A),l)},_limitOffset:function(o,l){if(!l)return o;var h=this.getPixelBounds(),f=new X(h.min.add(o),h.max.add(o));return o.add(this._getBoundsOffset(f,l))},_getBoundsOffset:function(o,l,h){var f=re(this.project(l.getNorthEast(),h),this.project(l.getSouthWest(),h)),v=f.min.subtract(o.min),w=f.max.subtract(o.max),A=this._rebound(v.x,-w.x),b=this._rebound(v.y,-w.y);return new M(A,b)},_rebound:function(o,l){return o+l>0?Math.round(o-l)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(l))},_limitZoom:function(o){var l=this.getMinZoom(),h=this.getMaxZoom(),f=Y.any3d?this.options.zoomSnap:1;return f&&(o=Math.round(o/f)*f),Math.max(l,Math.min(h,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ut(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,l){var h=this._getCenterOffset(o)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,l),!0)},_createAnimProxy:function(){var o=this._proxy=Te("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(l){var h=Lp,f=this._proxy.style[h];as(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),f===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ze(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),l=this.getZoom();as(this._proxy,this.project(o,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,l,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(l),v=this._getCenterOffset(o)._divideBy(1-1/f);return h.animate!==!0&&!this.getSize().contains(v)?!1:(ae(function(){this._moveStart(!0,!1)._animateZoom(o,l,!0)},this),!0)},_animateZoom:function(o,l,h,f){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=l,de(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:l,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ut(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function cL(o,l){return new xe(o,l)}var $n=je.extend({options:{position:"topright"},initialize:function(o){C(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var l=this._map;return l&&l.removeControl(this),this.options.position=o,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var l=this._container=this.onAdd(o),h=this.getPosition(),f=o._controlCorners[h];return de(l,"leaflet-control"),h.indexOf("bottom")!==-1?f.insertBefore(l,f.firstChild):f.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ze(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),Xa=function(o){return new $n(o)};xe.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},l="leaflet-",h=this._controlContainer=Te("div",l+"control-container",this._container);function f(v,w){var A=l+v+" "+l+w;o[v+w]=Te("div",A,h)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)Ze(this._controlCorners[o]);Ze(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ex=$n.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,l,h,f){return h<f?-1:f<h?1:0}},initialize:function(o,l,h){C(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var f in o)this._addLayer(o[f],f);for(f in l)this._addLayer(l[f],f,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return $n.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,l){return this._addLayer(o,l),this._map?this._update():this},addOverlay:function(o,l){return this._addLayer(o,l,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var l=this._getLayer(c(o));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){de(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(de(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):ut(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ut(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",l=this._container=Te("div",o),h=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Za(l),Gp(l);var f=this._section=Te("section",o+"-list");h&&(this._map.on("click",this.collapse,this),ce(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=Te("a",o+"-toggle",l);v.href="#",v.title="Layers",v.setAttribute("role","button"),ce(v,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){Dt(w),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=Te("div",o+"-base",f),this._separator=Te("div",o+"-separator",f),this._overlaysList=Te("div",o+"-overlays",f),l.appendChild(f)},_getLayer:function(o){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&c(this._layers[l].layer)===o)return this._layers[l]},_addLayer:function(o,l,h){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:l,overlay:h}),this.options.sortLayers&&this._layers.sort(a(function(f,v){return this.options.sortFunction(f.layer,v.layer,f.name,v.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ic(this._baseLayersList),Ic(this._overlaysList),this._layerControlInputs=[];var o,l,h,f,v=0;for(h=0;h<this._layers.length;h++)f=this._layers[h],this._addItem(f),l=l||f.overlay,o=o||!f.overlay,v+=f.overlay?0:1;return this.options.hideSingleBase&&(o=o&&v>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=l&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var l=this._getLayer(c(o.target)),h=l.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;h&&this._map.fire(h,l)},_createRadioElement:function(o,l){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(l?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=h,f.firstChild},_addItem:function(o){var l=document.createElement("label"),h=this._map.hasLayer(o.layer),f;o.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=h):f=this._createRadioElement("leaflet-base-layers_"+c(this),h),this._layerControlInputs.push(f),f.layerId=c(o.layer),ce(f,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+o.name;var w=document.createElement("span");l.appendChild(w),w.appendChild(f),w.appendChild(v);var A=o.overlay?this._overlaysList:this._baseLayersList;return A.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){var o=this._layerControlInputs,l,h,f=[],v=[];this._handlingClick=!0;for(var w=o.length-1;w>=0;w--)l=o[w],h=this._getLayer(l.layerId).layer,l.checked?f.push(h):l.checked||v.push(h);for(w=0;w<v.length;w++)this._map.hasLayer(v[w])&&this._map.removeLayer(v[w]);for(w=0;w<f.length;w++)this._map.hasLayer(f[w])||this._map.addLayer(f[w]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,l,h,f=this._map.getZoom(),v=o.length-1;v>=0;v--)l=o[v],h=this._getLayer(l.layerId).layer,l.disabled=h.options.minZoom!==void 0&&f<h.options.minZoom||h.options.maxZoom!==void 0&&f>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;ce(o,"click",Dt),this.expand(),setTimeout(function(){Fe(o,"click",Dt)})}}),hL=function(o,l,h){return new ex(o,l,h)},Qp=$n.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var l="leaflet-control-zoom",h=Te("div",l+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,l+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,l+"-out",h,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,l,h,f,v){var w=Te("a",h,f);return w.innerHTML=o,w.href="#",w.title=l,w.setAttribute("role","button"),w.setAttribute("aria-label",l),Za(w),ce(w,"click",cs),ce(w,"click",v,this),ce(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var o=this._map,l="leaflet-disabled";ut(this._zoomInButton,l),ut(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(de(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(de(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});xe.mergeOptions({zoomControl:!0}),xe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Qp,this.addControl(this.zoomControl))});var dL=function(o){return new Qp(o)},tx=$n.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var l="leaflet-control-scale",h=Te("div",l),f=this.options;return this._addScales(f,l+"-line",h),o.on(f.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),h},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,l,h){o.metric&&(this._mScale=Te("div",l,h)),o.imperial&&(this._iScale=Te("div",l,h))},_update:function(){var o=this._map,l=o.getSize().y/2,h=o.distance(o.containerPointToLatLng([0,l]),o.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(h)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var l=this._getRoundNum(o),h=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,h,l/o)},_updateImperial:function(o){var l=o*3.2808399,h,f,v;l>5280?(h=l/5280,f=this._getRoundNum(h),this._updateScale(this._iScale,f+" mi",f/h)):(v=this._getRoundNum(l),this._updateScale(this._iScale,v+" ft",v/l))},_updateScale:function(o,l,h){o.style.width=Math.round(this.options.maxWidth*h)+"px",o.innerHTML=l},_getRoundNum:function(o){var l=Math.pow(10,(Math.floor(o)+"").length-1),h=o/l;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,l*h}}),fL=function(o){return new tx(o)},pL='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',qp=$n.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Y.inlineSvg?pL+" ":"")+"Leaflet</a>"},initialize:function(o){C(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=Te("div","leaflet-control-attribution"),Za(this._container);for(var l in o._layers)o._layers[l].getAttribution&&this.addAttribution(o._layers[l].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var l in this._attributions)this._attributions[l]&&o.push(l);var h=[];this.options.prefix&&h.push(this.options.prefix),o.length&&h.push(o.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});xe.mergeOptions({attributionControl:!0}),xe.addInitHook(function(){this.options.attributionControl&&new qp().addTo(this)});var mL=function(o){return new qp(o)};$n.Layers=ex,$n.Zoom=Qp,$n.Scale=tx,$n.Attribution=qp,Xa.layers=hL,Xa.zoom=dL,Xa.scale=fL,Xa.attribution=mL;var di=je.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});di.addTo=function(o,l){return o.addHandler(l,this),this};var gL={Events:Ve},nx=Y.touch?"touchstart mousedown":"mousedown",ur=Mt.extend({options:{clickTolerance:3},initialize:function(o,l,h,f){C(this,f),this._element=o,this._dragStartTarget=l||o,this._preventOutline=h},enable:function(){this._enabled||(ce(this._dragStartTarget,nx,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ur._dragging===this&&this.finishDrag(!0),Fe(this._dragStartTarget,nx,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!Mp(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){ur._dragging===this&&this.finishDrag();return}if(!(ur._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(ur._dragging=this,this._preventOutline&&Up(this._element),jp(),qa(),!this._moving)){this.fire("down");var l=o.touches?o.touches[0]:o,h=q0(this._element);this._startPoint=new M(l.clientX,l.clientY),this._startPos=ls(this._element),this._parentScale=zp(h);var f=o.type==="mousedown";ce(document,f?"mousemove":"touchmove",this._onMove,this),ce(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var l=o.touches&&o.touches.length===1?o.touches[0]:o,h=new M(l.clientX,l.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,Dt(o),this._moved||(this.fire("dragstart"),this._moved=!0,de(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),de(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),ft(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){ut(document.body,"leaflet-dragging"),this._lastTarget&&(ut(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Fe(document,"mousemove touchmove",this._onMove,this),Fe(document,"mouseup touchend touchcancel",this._onUp,this),Bp(),Ka(),this._moved&&this._moving&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,ur._dragging=!1}});function ix(o,l){if(!l||!o.length)return o.slice();var h=l*l;return o=_L(o,h),o=yL(o,h),o}function rx(o,l,h){return Math.sqrt(Ja(o,l,h,!0))}function vL(o,l,h){return Ja(o,l,h)}function yL(o,l){var h=o.length,f=typeof Uint8Array!=void 0+""?Uint8Array:Array,v=new f(h);v[0]=v[h-1]=1,Kp(o,v,l,0,h-1);var w,A=[];for(w=0;w<h;w++)v[w]&&A.push(o[w]);return A}function Kp(o,l,h,f,v){var w=0,A,b,P;for(b=f+1;b<=v-1;b++)P=Ja(o[b],o[f],o[v],!0),P>w&&(A=b,w=P);w>h&&(l[A]=1,Kp(o,l,h,f,A),Kp(o,l,h,A,v))}function _L(o,l){for(var h=[o[0]],f=1,v=0,w=o.length;f<w;f++)wL(o[f],o[v])>l&&(h.push(o[f]),v=f);return v<w-1&&h.push(o[w-1]),h}var sx;function ox(o,l,h,f,v){var w=f?sx:hs(o,h),A=hs(l,h),b,P,O;for(sx=A;;){if(!(w|A))return[o,l];if(w&A)return!1;b=w||A,P=Rc(o,l,b,h,v),O=hs(P,h),b===w?(o=P,w=O):(l=P,A=O)}}function Rc(o,l,h,f,v){var w=l.x-o.x,A=l.y-o.y,b=f.min,P=f.max,O,G;return h&8?(O=o.x+w*(P.y-o.y)/A,G=P.y):h&4?(O=o.x+w*(b.y-o.y)/A,G=b.y):h&2?(O=P.x,G=o.y+A*(P.x-o.x)/w):h&1&&(O=b.x,G=o.y+A*(b.x-o.x)/w),new M(O,G,v)}function hs(o,l){var h=0;return o.x<l.min.x?h|=1:o.x>l.max.x&&(h|=2),o.y<l.min.y?h|=4:o.y>l.max.y&&(h|=8),h}function wL(o,l){var h=l.x-o.x,f=l.y-o.y;return h*h+f*f}function Ja(o,l,h,f){var v=l.x,w=l.y,A=h.x-v,b=h.y-w,P=A*A+b*b,O;return P>0&&(O=((o.x-v)*A+(o.y-w)*b)/P,O>1?(v=h.x,w=h.y):O>0&&(v+=A*O,w+=b*O)),A=o.x-v,b=o.y-w,f?A*A+b*b:new M(v,w)}function Dn(o){return!I(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function ax(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Dn(o)}function lx(o,l){var h,f,v,w,A,b,P,O;if(!o||o.length===0)throw new Error("latlngs not passed");Dn(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var G=[];for(var se in o)G.push(l.project(we(o[se])));var ve=G.length;for(h=0,f=0;h<ve-1;h++)f+=G[h].distanceTo(G[h+1])/2;if(f===0)O=G[0];else for(h=0,w=0;h<ve-1;h++)if(A=G[h],b=G[h+1],v=A.distanceTo(b),w+=v,w>f){P=(w-f)/v,O=[b.x-P*(b.x-A.x),b.y-P*(b.y-A.y)];break}return l.unproject(F(O))}var xL={__proto__:null,simplify:ix,pointToSegmentDistance:rx,closestPointOnSegment:vL,clipSegment:ox,_getEdgeIntersection:Rc,_getBitCode:hs,_sqClosestPointOnSegment:Ja,isFlat:Dn,_flat:ax,polylineCenter:lx};function ux(o,l,h){var f,v=[1,4,2,8],w,A,b,P,O,G,se,ve;for(w=0,G=o.length;w<G;w++)o[w]._code=hs(o[w],l);for(b=0;b<4;b++){for(se=v[b],f=[],w=0,G=o.length,A=G-1;w<G;A=w++)P=o[w],O=o[A],P._code&se?O._code&se||(ve=Rc(O,P,se,l,h),ve._code=hs(ve,l),f.push(ve)):(O._code&se&&(ve=Rc(O,P,se,l,h),ve._code=hs(ve,l),f.push(ve)),f.push(P));o=f}return o}function cx(o,l){var h,f,v,w,A,b,P,O,G;if(!o||o.length===0)throw new Error("latlngs not passed");Dn(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var se=[];for(var ve in o)se.push(l.project(we(o[ve])));var On=se.length;for(b=P=O=0,h=0,f=On-1;h<On;f=h++)v=se[h],w=se[f],A=v.y*w.x-w.y*v.x,P+=(v.x+w.x)*A,O+=(v.y+w.y)*A,b+=A*3;return b===0?G=se[0]:G=[P/b,O/b],l.unproject(F(G))}var EL={__proto__:null,clipPolygon:ux,polygonCenter:cx},Yp={project:function(o){return new M(o.lng,o.lat)},unproject:function(o){return new Ie(o.y,o.x)},bounds:new X([-180,-90],[180,90])},Zp={R:6378137,R_MINOR:6356752314245179e-9,bounds:new X([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var l=Math.PI/180,h=this.R,f=o.lat*l,v=this.R_MINOR/h,w=Math.sqrt(1-v*v),A=w*Math.sin(f),b=Math.tan(Math.PI/4-f/2)/Math.pow((1-A)/(1+A),w/2);return f=-h*Math.log(Math.max(b,1e-10)),new M(o.lng*l*h,f)},unproject:function(o){for(var l=180/Math.PI,h=this.R,f=this.R_MINOR/h,v=Math.sqrt(1-f*f),w=Math.exp(-o.y/h),A=Math.PI/2-2*Math.atan(w),b=0,P=.1,O;b<15&&Math.abs(P)>1e-7;b++)O=v*Math.sin(A),O=Math.pow((1-O)/(1+O),v/2),P=Math.PI/2-2*Math.atan(w*O)-A,A+=P;return new Ie(A*l,o.x*l/h)}},SL={__proto__:null,LonLat:Yp,Mercator:Zp,SphericalMercator:Cp},CL=r({},lr,{code:"EPSG:3395",projection:Zp,transformation:function(){var o=.5/(Math.PI*Zp.R);return Ha(o,.5,-o,.5)}()}),hx=r({},lr,{code:"EPSG:4326",projection:Yp,transformation:Ha(1/180,1,-1/180,.5)}),IL=r({},hn,{projection:Yp,transformation:Ha(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,l){var h=l.lng-o.lng,f=l.lat-o.lat;return Math.sqrt(h*h+f*f)},infinite:!0});hn.Earth=lr,hn.EPSG3395=CL,hn.EPSG3857=Tp,hn.EPSG900913=PN,hn.EPSG4326=hx,hn.Simple=IL;var Qn=Mt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[c(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[c(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var l=o.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var h=this.getEvents();l.on(h,this),this.once("remove",function(){l.off(h,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});xe.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var l=c(o);return this._layers[l]?this:(this._layers[l]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var l=c(o);return this._layers[l]?(this._loaded&&o.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return c(o)in this._layers},eachLayer:function(o,l){for(var h in this._layers)o.call(l,this._layers[h]);return this},_addLayers:function(o){o=o?I(o)?o:[o]:[];for(var l=0,h=o.length;l<h;l++)this.addLayer(o[l])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[c(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var l=c(o);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,l=-1/0,h=this._getZoomSpan();for(var f in this._zoomBoundLayers){var v=this._zoomBoundLayers[f].options;o=v.minZoom===void 0?o:Math.min(o,v.minZoom),l=v.maxZoom===void 0?l:Math.max(l,v.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=o===1/0?void 0:o,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var co=Qn.extend({initialize:function(o,l){C(this,l),this._layers={};var h,f;if(o)for(h=0,f=o.length;h<f;h++)this.addLayer(o[h])},addLayer:function(o){var l=this.getLayerId(o);return this._layers[l]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var l=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(o){var l=typeof o=="number"?o:this.getLayerId(o);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var l=Array.prototype.slice.call(arguments,1),h,f;for(h in this._layers)f=this._layers[h],f[o]&&f[o].apply(f,l);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,l){for(var h in this._layers)o.call(l,this._layers[h]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return c(o)}}),TL=function(o,l){return new co(o,l)},bi=co.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),co.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),co.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new wt;for(var l in this._layers){var h=this._layers[l];o.extend(h.getBounds?h.getBounds():h.getLatLng())}return o}}),AL=function(o,l){return new bi(o,l)},ho=je.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){C(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,l){var h=this._getIconUrl(o);if(!h){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(h,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(f,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(o,l){var h=this.options,f=h[l+"Size"];typeof f=="number"&&(f=[f,f]);var v=F(f),w=F(l==="shadow"&&h.shadowAnchor||h.iconAnchor||v&&v.divideBy(2,!0));o.className="leaflet-marker-"+l+" "+(h.className||""),w&&(o.style.marginLeft=-w.x+"px",o.style.marginTop=-w.y+"px"),v&&(o.style.width=v.x+"px",o.style.height=v.y+"px")},_createImg:function(o,l){return l=l||document.createElement("img"),l.src=o,l},_getIconUrl:function(o){return Y.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function kL(o){return new ho(o)}var el=ho.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof el.imagePath!="string"&&(el.imagePath=this._detectIconPath()),(this.options.imagePath||el.imagePath)+ho.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var l=function(h,f,v){var w=f.exec(h);return w&&w[v]};return o=l(o,/^url\((['"])?(.+)\1\)$/,2),o&&l(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=Te("div","leaflet-default-icon-path",document.body),l=Qa(o,"background-image")||Qa(o,"backgroundImage");if(document.body.removeChild(o),l=this._stripUrl(l),l)return l;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),dx=di.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new ur(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),de(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ut(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var l=this._marker,h=l._map,f=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,w=ls(l._icon),A=h.getPixelBounds(),b=h.getPixelOrigin(),P=re(A.min._subtract(b).add(v),A.max._subtract(b).subtract(v));if(!P.contains(w)){var O=F((Math.max(P.max.x,w.x)-P.max.x)/(A.max.x-P.max.x)-(Math.min(P.min.x,w.x)-P.min.x)/(A.min.x-P.min.x),(Math.max(P.max.y,w.y)-P.max.y)/(A.max.y-P.max.y)-(Math.min(P.min.y,w.y)-P.min.y)/(A.min.y-P.min.y)).multiplyBy(f);h.panBy(O,{animate:!1}),this._draggable._newPos._add(O),this._draggable._startPos._add(O),ft(l._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=ae(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(Le(this._panRequest),this._panRequest=ae(this._adjustPan.bind(this,o)))},_onDrag:function(o){var l=this._marker,h=l._shadow,f=ls(l._icon),v=l._map.layerPointToLatLng(f);h&&ft(h,f),l._latlng=v,o.latlng=v,o.oldLatLng=this._oldLatLng,l.fire("move",o).fire("drag",o)},_onDragEnd:function(o){Le(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),Pc=Qn.extend({options:{icon:new el,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,l){C(this,l),this._latlng=we(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var l=this._latlng;return this._latlng=we(o),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=o.icon.createIcon(this._icon),f=!1;h!==this._icon&&(this._icon&&this._removeIcon(),f=!0,o.title&&(h.title=o.title),h.tagName==="IMG"&&(h.alt=o.alt||"")),de(h,l),o.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ce(h,"focus",this._panOnFocus,this);var v=o.icon.createShadow(this._shadow),w=!1;v!==this._shadow&&(this._removeShadow(),w=!0),v&&(de(v,l),v.alt=""),this._shadow=v,o.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&w&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Fe(this._icon,"focus",this._panOnFocus,this),Ze(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ze(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&ft(this._icon,o),this._shadow&&ft(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var l=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(de(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),dx)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new dx(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&Mn(this._icon,o),this._shadow&&Mn(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var l=this.options.icon.options,h=l.iconSize?F(l.iconSize):F(0,0),f=l.iconAnchor?F(l.iconAnchor):F(0,0);o.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:h.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function bL(o,l){return new Pc(o,l)}var cr=Qn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return C(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Nc=cr.extend({options:{fill:!0,radius:10},initialize:function(o,l){C(this,l),this._latlng=we(o),this._radius=this.options.radius},setLatLng:function(o){var l=this._latlng;return this._latlng=we(o),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var l=o&&o.radius||this._radius;return cr.prototype.setStyle.call(this,o),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,l=this._radiusY||o,h=this._clickTolerance(),f=[o+h,l+h];this._pxBounds=new X(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function RL(o,l){return new Nc(o,l)}var Xp=Nc.extend({initialize:function(o,l,h){if(typeof l=="number"&&(l=r({},h,{radius:l})),C(this,l),this._latlng=we(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new wt(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:cr.prototype.setStyle,_project:function(){var o=this._latlng.lng,l=this._latlng.lat,h=this._map,f=h.options.crs;if(f.distance===lr.distance){var v=Math.PI/180,w=this._mRadius/lr.R/v,A=h.project([l+w,o]),b=h.project([l-w,o]),P=A.add(b).divideBy(2),O=h.unproject(P).lat,G=Math.acos((Math.cos(w*v)-Math.sin(l*v)*Math.sin(O*v))/(Math.cos(l*v)*Math.cos(O*v)))/v;(isNaN(G)||G===0)&&(G=w/Math.cos(Math.PI/180*l)),this._point=P.subtract(h.getPixelOrigin()),this._radius=isNaN(G)?0:P.x-h.project([O,o-G]).x,this._radiusY=P.y-A.y}else{var se=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(se).x}this._updateBounds()}});function PL(o,l,h){return new Xp(o,l,h)}var Ri=cr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,l){C(this,l),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var l=1/0,h=null,f=Ja,v,w,A=0,b=this._parts.length;A<b;A++)for(var P=this._parts[A],O=1,G=P.length;O<G;O++){v=P[O-1],w=P[O];var se=f(o,v,w,!0);se<l&&(l=se,h=f(o,v,w))}return h&&(h.distance=Math.sqrt(l)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return lx(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,l){return l=l||this._defaultShape(),o=we(o),l.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new wt,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return Dn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var l=[],h=Dn(o),f=0,v=o.length;f<v;f++)h?(l[f]=we(o[f]),this._bounds.extend(l[f])):l[f]=this._convertLatLngs(o[f]);return l},_project:function(){var o=new X;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),l=new M(o,o);this._rawPxBounds&&(this._pxBounds=new X([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(o,l,h){var f=o[0]instanceof Ie,v=o.length,w,A;if(f){for(A=[],w=0;w<v;w++)A[w]=this._map.latLngToLayerPoint(o[w]),h.extend(A[w]);l.push(A)}else for(w=0;w<v;w++)this._projectLatlngs(o[w],l,h)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,h,f,v,w,A,b,P;for(h=0,v=0,w=this._rings.length;h<w;h++)for(P=this._rings[h],f=0,A=P.length;f<A-1;f++)b=ox(P[f],P[f+1],o,f,!0),b&&(l[v]=l[v]||[],l[v].push(b[0]),(b[1]!==P[f+1]||f===A-2)&&(l[v].push(b[1]),v++))}},_simplifyPoints:function(){for(var o=this._parts,l=this.options.smoothFactor,h=0,f=o.length;h<f;h++)o[h]=ix(o[h],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,l){var h,f,v,w,A,b,P=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(h=0,w=this._parts.length;h<w;h++)for(b=this._parts[h],f=0,A=b.length,v=A-1;f<A;v=f++)if(!(!l&&f===0)&&rx(o,b[v],b[f])<=P)return!0;return!1}});function NL(o,l){return new Ri(o,l)}Ri._flat=ax;var fo=Ri.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return cx(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var l=Ri.prototype._convertLatLngs.call(this,o),h=l.length;return h>=2&&l[0]instanceof Ie&&l[0].equals(l[h-1])&&l.pop(),l},_setLatLngs:function(o){Ri.prototype._setLatLngs.call(this,o),Dn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Dn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,l=this.options.weight,h=new M(l,l);if(o=new X(o.min.subtract(h),o.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,v=this._rings.length,w;f<v;f++)w=ux(this._rings[f],o,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var l=!1,h,f,v,w,A,b,P,O;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(w=0,P=this._parts.length;w<P;w++)for(h=this._parts[w],A=0,O=h.length,b=O-1;A<O;b=A++)f=h[A],v=h[b],f.y>o.y!=v.y>o.y&&o.x<(v.x-f.x)*(o.y-f.y)/(v.y-f.y)+f.x&&(l=!l);return l||Ri.prototype._containsPoint.call(this,o,!0)}});function LL(o,l){return new fo(o,l)}var Pi=bi.extend({initialize:function(o,l){C(this,l),this._layers={},o&&this.addData(o)},addData:function(o){var l=I(o)?o:o.features,h,f,v;if(l){for(h=0,f=l.length;h<f;h++)v=l[h],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var w=this.options;if(w.filter&&!w.filter(o))return this;var A=Lc(o,w);return A?(A.feature=Oc(o),A.defaultOptions=A.options,this.resetStyle(A),w.onEachFeature&&w.onEachFeature(o,A),this.addLayer(A)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=r({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(l){this._setLayerStyle(l,o)},this)},_setLayerStyle:function(o,l){o.setStyle&&(typeof l=="function"&&(l=l(o.feature)),o.setStyle(l))}});function Lc(o,l){var h=o.type==="Feature"?o.geometry:o,f=h?h.coordinates:null,v=[],w=l&&l.pointToLayer,A=l&&l.coordsToLatLng||Jp,b,P,O,G;if(!f&&!h)return null;switch(h.type){case"Point":return b=A(f),fx(w,o,b,l);case"MultiPoint":for(O=0,G=f.length;O<G;O++)b=A(f[O]),v.push(fx(w,o,b,l));return new bi(v);case"LineString":case"MultiLineString":return P=Mc(f,h.type==="LineString"?0:1,A),new Ri(P,l);case"Polygon":case"MultiPolygon":return P=Mc(f,h.type==="Polygon"?1:2,A),new fo(P,l);case"GeometryCollection":for(O=0,G=h.geometries.length;O<G;O++){var se=Lc({geometry:h.geometries[O],type:"Feature",properties:o.properties},l);se&&v.push(se)}return new bi(v);case"FeatureCollection":for(O=0,G=h.features.length;O<G;O++){var ve=Lc(h.features[O],l);ve&&v.push(ve)}return new bi(v);default:throw new Error("Invalid GeoJSON object.")}}function fx(o,l,h,f){return o?o(l,h):new Pc(h,f&&f.markersInheritOptions&&f)}function Jp(o){return new Ie(o[1],o[0],o[2])}function Mc(o,l,h){for(var f=[],v=0,w=o.length,A;v<w;v++)A=l?Mc(o[v],l-1,h):(h||Jp)(o[v]),f.push(A);return f}function em(o,l){return o=we(o),o.alt!==void 0?[y(o.lng,l),y(o.lat,l),y(o.alt,l)]:[y(o.lng,l),y(o.lat,l)]}function Dc(o,l,h,f){for(var v=[],w=0,A=o.length;w<A;w++)v.push(l?Dc(o[w],Dn(o[w])?0:l-1,h,f):em(o[w],f));return!l&&h&&v.push(v[0].slice()),v}function po(o,l){return o.feature?r({},o.feature,{geometry:l}):Oc(l)}function Oc(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var tm={toGeoJSON:function(o){return po(this,{type:"Point",coordinates:em(this.getLatLng(),o)})}};Pc.include(tm),Xp.include(tm),Nc.include(tm),Ri.include({toGeoJSON:function(o){var l=!Dn(this._latlngs),h=Dc(this._latlngs,l?1:0,!1,o);return po(this,{type:(l?"Multi":"")+"LineString",coordinates:h})}}),fo.include({toGeoJSON:function(o){var l=!Dn(this._latlngs),h=l&&!Dn(this._latlngs[0]),f=Dc(this._latlngs,h?2:l?1:0,!0,o);return l||(f=[f]),po(this,{type:(h?"Multi":"")+"Polygon",coordinates:f})}}),co.include({toMultiPoint:function(o){var l=[];return this.eachLayer(function(h){l.push(h.toGeoJSON(o).geometry.coordinates)}),po(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(o){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(o);var h=l==="GeometryCollection",f=[];return this.eachLayer(function(v){if(v.toGeoJSON){var w=v.toGeoJSON(o);if(h)f.push(w.geometry);else{var A=Oc(w);A.type==="FeatureCollection"?f.push.apply(f,A.features):f.push(A)}}}),h?po(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function px(o,l){return new Pi(o,l)}var ML=px,jc=Qn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,l,h){this._url=o,this._bounds=Be(l),C(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(de(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ze(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&lo(this._image),this},bringToBack:function(){return this._map&&uo(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=Be(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",l=this._image=o?this._url:Te("img");if(de(l,"leaflet-image-layer"),this._zoomAnimated&&de(l,"leaflet-zoom-animated"),this.options.className&&de(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(o){var l=this._map.getZoomScale(o.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;as(this._image,h,l)},_reset:function(){var o=this._image,l=new X(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=l.getSize();ft(o,l.min),o.style.width=h.x+"px",o.style.height=h.y+"px"},_updateOpacity:function(){Mn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),DL=function(o,l,h){return new jc(o,l,h)},mx=jc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",l=this._image=o?this._url:Te("video");if(de(l,"leaflet-image-layer"),this._zoomAnimated&&de(l,"leaflet-zoom-animated"),this.options.className&&de(l,this.options.className),l.onselectstart=g,l.onmousemove=g,l.onloadeddata=a(this.fire,this,"load"),o){for(var h=l.getElementsByTagName("source"),f=[],v=0;v<h.length;v++)f.push(h[v].src);this._url=h.length>0?f:[l.src];return}I(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var A=Te("source");A.src=this._url[w],l.appendChild(A)}}});function OL(o,l,h){return new mx(o,l,h)}var gx=jc.extend({_initImage:function(){var o=this._image=this._url;de(o,"leaflet-image-layer"),this._zoomAnimated&&de(o,"leaflet-zoom-animated"),this.options.className&&de(o,this.options.className),o.onselectstart=g,o.onmousemove=g}});function jL(o,l,h){return new gx(o,l,h)}var fi=Qn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,l){o&&(o instanceof Ie||I(o))?(this._latlng=we(o),C(this,l)):(C(this,o),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&Mn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&Mn(this._container,1),this.bringToFront(),this.options.interactive&&(de(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(Mn(this._container,0),this._removeTimeout=setTimeout(a(Ze,void 0,this._container),200)):Ze(this._container),this.options.interactive&&(ut(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=we(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&lo(this._container),this},bringToBack:function(){return this._map&&uo(this._container),this},_prepareOpen:function(o){var l=this._source;if(!l._map)return!1;if(l instanceof bi){l=null;var h=this._source._layers;for(var f in h)if(h[f]._map){l=h[f];break}if(!l)return!1;this._source=l}if(!o)if(l.getCenter)o=l.getCenter();else if(l.getLatLng)o=l.getLatLng();else if(l.getBounds)o=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")o.innerHTML=l;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),l=F(this.options.offset),h=this._getAnchor();this._zoomAnimated?ft(this._container,o.add(h)):l=l.add(o).add(h);var f=this._containerBottom=-l.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=f+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});xe.include({_initOverlay:function(o,l,h,f){var v=l;return v instanceof o||(v=new o(f).setContent(l)),h&&v.setLatLng(h),v}}),Qn.include({_initOverlay:function(o,l,h,f){var v=h;return v instanceof o?(C(v,f),v._source=this):(v=l&&!f?l:new o(f,this),v.setContent(h)),v}});var Bc=fi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,fi.prototype.openOn.call(this,o)},onAdd:function(o){fi.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof cr||this._source.on("preclick",us))},onRemove:function(o){fi.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof cr||this._source.off("preclick",us))},getEvents:function(){var o=fi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",l=this._container=Te("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=Te("div",o+"-content-wrapper",l);if(this._contentNode=Te("div",o+"-content",h),Za(l),Gp(this._contentNode),ce(l,"contextmenu",us),this._tipContainer=Te("div",o+"-tip-container",l),this._tip=Te("div",o+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Te("a",o+"-close-button",l);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',ce(f,"click",function(v){Dt(v),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,l=o.style;l.width="",l.whiteSpace="nowrap";var h=o.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),l.width=h+1+"px",l.whiteSpace="",l.height="";var f=o.offsetHeight,v=this.options.maxHeight,w="leaflet-popup-scrolled";v&&f>v?(l.height=v+"px",de(o,w)):ut(o,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var l=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),h=this._getAnchor();ft(this._container,l.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,l=parseInt(Qa(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+l,f=this._containerWidth,v=new M(this._containerLeft,-h-this._containerBottom);v._add(ls(this._container));var w=o.layerPointToContainerPoint(v),A=F(this.options.autoPanPadding),b=F(this.options.autoPanPaddingTopLeft||A),P=F(this.options.autoPanPaddingBottomRight||A),O=o.getSize(),G=0,se=0;w.x+f+P.x>O.x&&(G=w.x+f-O.x+P.x),w.x-G-b.x<0&&(G=w.x-b.x),w.y+h+P.y>O.y&&(se=w.y+h-O.y+P.y),w.y-se-b.y<0&&(se=w.y-b.y),(G||se)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([G,se]))}},_getAnchor:function(){return F(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),BL=function(o,l){return new Bc(o,l)};xe.mergeOptions({closePopupOnClick:!0}),xe.include({openPopup:function(o,l,h){return this._initOverlay(Bc,o,l,h).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),Qn.include({bindPopup:function(o,l){return this._popup=this._initOverlay(Bc,this._popup,o,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof bi||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){cs(o);var l=o.layer||o.target;if(this._popup._source===l&&!(l instanceof cr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=l,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var Fc=fi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){fi.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){fi.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=fi.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",l=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Te("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var l,h,f=this._map,v=this._container,w=f.latLngToContainerPoint(f.getCenter()),A=f.layerPointToContainerPoint(o),b=this.options.direction,P=v.offsetWidth,O=v.offsetHeight,G=F(this.options.offset),se=this._getAnchor();b==="top"?(l=P/2,h=O):b==="bottom"?(l=P/2,h=0):b==="center"?(l=P/2,h=O/2):b==="right"?(l=0,h=O/2):b==="left"?(l=P,h=O/2):A.x<w.x?(b="right",l=0,h=O/2):(b="left",l=P+(G.x+se.x)*2,h=O/2),o=o.subtract(F(l,h,!0)).add(G).add(se),ut(v,"leaflet-tooltip-right"),ut(v,"leaflet-tooltip-left"),ut(v,"leaflet-tooltip-top"),ut(v,"leaflet-tooltip-bottom"),de(v,"leaflet-tooltip-"+b),ft(v,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&Mn(this._container,o)},_animateZoom:function(o){var l=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(l)},_getAnchor:function(){return F(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),FL=function(o,l){return new Fc(o,l)};xe.include({openTooltip:function(o,l,h){return this._initOverlay(Fc,o,l,h).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),Qn.include({bindTooltip:function(o,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Fc,this._tooltip,o,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var l=o?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[l](h),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof bi||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var l=o.getElement();l&&(ce(l,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),ce(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var l=o.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0))},_moveTooltip:function(o){var l=o.latlng,h,f;this._tooltip.options.sticky&&o.originalEvent&&(h=this._map.mouseEventToContainerPoint(o.originalEvent),f=this._map.containerPointToLayerPoint(h),l=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(l)}});var vx=ho.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var l=o&&o.tagName==="DIV"?o:document.createElement("div"),h=this.options;if(h.html instanceof Element?(Ic(l),l.appendChild(h.html)):l.innerHTML=h.html!==!1?h.html:"",h.bgPos){var f=F(h.bgPos);l.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function UL(o){return new vx(o)}ho.Default=el;var tl=Qn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Y.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){C(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),Ze(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(lo(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(uo(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof M?o:new M(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var l=this.getPane().children,h=-o(-1/0,1/0),f=0,v=l.length,w;f<v;f++)w=l[f].style.zIndex,l[f]!==this._container&&w&&(h=o(h,+w));isFinite(h)&&(this.options.zIndex=h+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Y.ielt9){Mn(this._container,this.options.opacity);var o=+new Date,l=!1,h=!1;for(var f in this._tiles){var v=this._tiles[f];if(!(!v.current||!v.loaded)){var w=Math.min(1,(o-v.loaded)/200);Mn(v.el,w),w<1?l=!0:(v.active?h=!0:this._onOpaqueTile(v),v.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),l&&(Le(this._fadeFrame),this._fadeFrame=ae(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Te("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,l=this.options.maxZoom;if(o!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===o?(this._levels[h].el.style.zIndex=l-Math.abs(o-h),this._onUpdateLevel(h)):(Ze(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var f=this._levels[o],v=this._map;return f||(f=this._levels[o]={},f.el=Te("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=l,f.origin=v.project(v.unproject(v.getPixelOrigin()),o).round(),f.zoom=o,this._setZoomTransform(f,v.getCenter(),v.getZoom()),g(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var o,l,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)l=this._tiles[o],l.retain=l.current;for(o in this._tiles)if(l=this._tiles[o],l.current&&!l.active){var f=l.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var l in this._tiles)this._tiles[l].coords.z===o&&this._removeTile(l)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)Ze(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,l,h,f){var v=Math.floor(o/2),w=Math.floor(l/2),A=h-1,b=new M(+v,+w);b.z=+A;var P=this._tileCoordsToKey(b),O=this._tiles[P];return O&&O.active?(O.retain=!0,!0):(O&&O.loaded&&(O.retain=!0),A>f?this._retainParent(v,w,A,f):!1)},_retainChildren:function(o,l,h,f){for(var v=2*o;v<2*o+2;v++)for(var w=2*l;w<2*l+2;w++){var A=new M(v,w);A.z=h+1;var b=this._tileCoordsToKey(A),P=this._tiles[b];if(P&&P.active){P.retain=!0;continue}else P&&P.loaded&&(P.retain=!0);h+1<f&&this._retainChildren(v,w,h+1,f)}},_resetView:function(o){var l=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var l=this.options;return l.minNativeZoom!==void 0&&o<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<o?l.maxNativeZoom:o},_setView:function(o,l,h,f){var v=Math.round(l);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var w=this.options.updateWhenZooming&&v!==this._tileZoom;(!f||w)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(o),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(o,l)},_setZoomTransforms:function(o,l){for(var h in this._levels)this._setZoomTransform(this._levels[h],o,l)},_setZoomTransform:function(o,l,h){var f=this._map.getZoomScale(h,o.zoom),v=o.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(l,h)).round();Y.any3d?as(o.el,v,f):ft(o.el,v)},_resetGrid:function(){var o=this._map,l=o.options.crs,h=this._tileSize=this.getTileSize(),f=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,l.wrapLng[0]],f).x/h.x),Math.ceil(o.project([0,l.wrapLng[1]],f).x/h.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([l.wrapLat[0],0],f).y/h.x),Math.ceil(o.project([l.wrapLat[1],0],f).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var l=this._map,h=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),f=l.getZoomScale(h,this._tileZoom),v=l.project(o,this._tileZoom).floor(),w=l.getSize().divideBy(f*2);return new X(v.subtract(w),v.add(w))},_update:function(o){var l=this._map;if(l){var h=this._clampZoom(l.getZoom());if(o===void 0&&(o=l.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(o),v=this._pxBoundsToTileRange(f),w=v.getCenter(),A=[],b=this.options.keepBuffer,P=new X(v.getBottomLeft().subtract([b,-b]),v.getTopRight().add([b,-b]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var O in this._tiles){var G=this._tiles[O].coords;(G.z!==this._tileZoom||!P.contains(new M(G.x,G.y)))&&(this._tiles[O].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(o,h);return}for(var se=v.min.y;se<=v.max.y;se++)for(var ve=v.min.x;ve<=v.max.x;ve++){var On=new M(ve,se);if(On.z=this._tileZoom,!!this._isValidTile(On)){var ds=this._tiles[this._tileCoordsToKey(On)];ds?ds.current=!0:A.push(On)}}if(A.sort(function(hr,nm){return hr.distanceTo(w)-nm.distanceTo(w)}),A.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var zc=document.createDocumentFragment();for(ve=0;ve<A.length;ve++)this._addTile(A[ve],zc);this._level.el.appendChild(zc)}}}},_isValidTile:function(o){var l=this._map.options.crs;if(!l.infinite){var h=this._globalTileRange;if(!l.wrapLng&&(o.x<h.min.x||o.x>h.max.x)||!l.wrapLat&&(o.y<h.min.y||o.y>h.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(o);return Be(this.options.bounds).overlaps(f)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var l=this._map,h=this.getTileSize(),f=o.scaleBy(h),v=f.add(h),w=l.unproject(f,o.z),A=l.unproject(v,o.z);return[w,A]},_tileCoordsToBounds:function(o){var l=this._tileCoordsToNwSe(o),h=new wt(l[0],l[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var l=o.split(":"),h=new M(+l[0],+l[1]);return h.z=+l[2],h},_removeTile:function(o){var l=this._tiles[o];l&&(Ze(l.el),delete this._tiles[o],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){de(o,"leaflet-tile");var l=this.getTileSize();o.style.width=l.x+"px",o.style.height=l.y+"px",o.onselectstart=g,o.onmousemove=g,Y.ielt9&&this.options.opacity<1&&Mn(o,this.options.opacity)},_addTile:function(o,l){var h=this._getTilePos(o),f=this._tileCoordsToKey(o),v=this.createTile(this._wrapCoords(o),a(this._tileReady,this,o));this._initTile(v),this.createTile.length<2&&ae(a(this._tileReady,this,o,null,v)),ft(v,h),this._tiles[f]={el:v,coords:o,current:!0},l.appendChild(v),this.fire("tileloadstart",{tile:v,coords:o})},_tileReady:function(o,l,h){l&&this.fire("tileerror",{error:l,tile:h,coords:o});var f=this._tileCoordsToKey(o);h=this._tiles[f],h&&(h.loaded=+new Date,this._map._fadeAnimated?(Mn(h.el,0),Le(this._fadeFrame),this._fadeFrame=ae(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),l||(de(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Y.ielt9||!this._map._fadeAnimated?ae(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var l=new M(this._wrapX?p(o.x,this._wrapX):o.x,this._wrapY?p(o.y,this._wrapY):o.y);return l.z=o.z,l},_pxBoundsToTileRange:function(o){var l=this.getTileSize();return new X(o.min.unscaleBy(l).floor(),o.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function zL(o){return new tl(o)}var mo=tl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,l){this._url=o,l=C(this,l),l.detectRetina&&Y.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,l){return this._url===o&&l===void 0&&(l=!0),this._url=o,l||this.redraw(),this},createTile:function(o,l){var h=document.createElement("img");return ce(h,"load",a(this._tileOnLoad,this,l,h)),ce(h,"error",a(this._tileOnError,this,l,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(o),h},getTileUrl:function(o){var l={r:Y.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-o.y;this.options.tms&&(l.y=h),l["-y"]=h}return E(this._url,r(l,this.options))},_tileOnLoad:function(o,l){Y.ielt9?setTimeout(a(o,this,null,l),0):o(null,l)},_tileOnError:function(o,l,h){var f=this.options.errorTileUrl;f&&l.getAttribute("src")!==f&&(l.src=f),o(h,l)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,l=this.options.maxZoom,h=this.options.zoomReverse,f=this.options.zoomOffset;return h&&(o=l-o),o+f},_getSubdomain:function(o){var l=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var o,l;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(l=this._tiles[o].el,l.onload=g,l.onerror=g,!l.complete)){l.src=j;var h=this._tiles[o].coords;Ze(l),delete this._tiles[o],this.fire("tileabort",{tile:l,coords:h})}},_removeTile:function(o){var l=this._tiles[o];if(l)return l.el.setAttribute("src",j),tl.prototype._removeTile.call(this,o)},_tileReady:function(o,l,h){if(!(!this._map||h&&h.getAttribute("src")===j))return tl.prototype._tileReady.call(this,o,l,h)}});function yx(o,l){return new mo(o,l)}var _x=mo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,l){this._url=o;var h=r({},this.defaultWmsParams);for(var f in l)f in this.options||(h[f]=l[f]);l=C(this,l);var v=l.detectRetina&&Y.retina?2:1,w=this.getTileSize();h.width=w.x*v,h.height=w.y*v,this.wmsParams=h},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,mo.prototype.onAdd.call(this,o)},getTileUrl:function(o){var l=this._tileCoordsToNwSe(o),h=this._crs,f=re(h.project(l[0]),h.project(l[1])),v=f.min,w=f.max,A=(this._wmsVersion>=1.3&&this._crs===hx?[v.y,v.x,w.y,w.x]:[v.x,v.y,w.x,w.y]).join(","),b=mo.prototype.getTileUrl.call(this,o);return b+k(this.wmsParams,b,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+A},setParams:function(o,l){return r(this.wmsParams,o),l||this.redraw(),this}});function VL(o,l){return new _x(o,l)}mo.WMS=_x,yx.wms=VL;var Ni=Qn.extend({options:{padding:.1},initialize:function(o){C(this,o),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&de(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,l){var h=this._map.getZoomScale(l,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,l),w=f.multiplyBy(-h).add(v).subtract(this._map._getNewPixelOrigin(o,l));Y.any3d?as(this._container,w,h):ft(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,l=this._map.getSize(),h=this._map.containerPointToLayerPoint(l.multiplyBy(-o)).round();this._bounds=new X(h,h.add(l.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),wx=Ni.extend({options:{tolerance:0},getEvents:function(){var o=Ni.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ni.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");ce(o,"mousemove",this._onMouseMove,this),ce(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ce(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){Le(this._redrawRequest),delete this._ctx,Ze(this._container),Fe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var l in this._layers)o=this._layers[l],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ni.prototype._update.call(this);var o=this._bounds,l=this._container,h=o.getSize(),f=Y.retina?2:1;ft(l,o.min),l.width=f*h.x,l.height=f*h.y,l.style.width=h.x+"px",l.style.height=h.y+"px",Y.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){Ni.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[c(o)]=o;var l=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var l=o._order,h=l.next,f=l.prev;h?h.prev=f:this._drawLast=f,f?f.next=h:this._drawFirst=h,delete o._order,delete this._layers[c(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var l=o.options.dashArray.split(/[, ]+/),h=[],f,v;for(v=0;v<l.length;v++){if(f=Number(l[v]),isNaN(f))return;h.push(f)}o.options._dashArray=h}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||ae(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var l=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new X,this._redrawBounds.extend(o._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(o._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var l=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,l=this._redrawBounds;if(this._ctx.save(),l){var h=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)o=f.layer,(!l||o._pxBounds&&o._pxBounds.intersects(l))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,l){if(this._drawing){var h,f,v,w,A=o._parts,b=A.length,P=this._ctx;if(b){for(P.beginPath(),h=0;h<b;h++){for(f=0,v=A[h].length;f<v;f++)w=A[h][f],P[f?"lineTo":"moveTo"](w.x,w.y);l&&P.closePath()}this._fillStroke(P,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var l=o._point,h=this._ctx,f=Math.max(Math.round(o._radius),1),v=(Math.max(Math.round(o._radiusY),1)||f)/f;v!==1&&(h.save(),h.scale(1,v)),h.beginPath(),h.arc(l.x,l.y/v,f,0,Math.PI*2,!1),v!==1&&h.restore(),this._fillStroke(h,o)}},_fillStroke:function(o,l){var h=l.options;h.fill&&(o.globalAlpha=h.fillOpacity,o.fillStyle=h.fillColor||h.color,o.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(o.setLineDash&&o.setLineDash(l.options&&l.options._dashArray||[]),o.globalAlpha=h.opacity,o.lineWidth=h.weight,o.strokeStyle=h.color,o.lineCap=h.lineCap,o.lineJoin=h.lineJoin,o.stroke())},_onClick:function(o){for(var l=this._map.mouseEventToLayerPoint(o),h,f,v=this._drawFirst;v;v=v.next)h=v.layer,h.options.interactive&&h._containsPoint(l)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(h))&&(f=h);this._fireEvent(f?[f]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,l)}},_handleMouseOut:function(o){var l=this._hoveredLayer;l&&(ut(this._container,"leaflet-interactive"),this._fireEvent([l],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,l){if(!this._mouseHoverThrottled){for(var h,f,v=this._drawFirst;v;v=v.next)h=v.layer,h.options.interactive&&h._containsPoint(l)&&(f=h);f!==this._hoveredLayer&&(this._handleMouseOut(o),f&&(de(this._container,"leaflet-interactive"),this._fireEvent([f],o,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,l,h){this._map._fireDOMEvent(l,h||l.type,o)},_bringToFront:function(o){var l=o._order;if(l){var h=l.next,f=l.prev;if(h)h.prev=f;else return;f?f.next=h:h&&(this._drawFirst=h),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(o)}},_bringToBack:function(o){var l=o._order;if(l){var h=l.next,f=l.prev;if(f)f.next=h;else return;h?h.prev=f:f&&(this._drawLast=f),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(o)}}});function xx(o){return Y.canvas?new wx(o):null}var nl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),WL={_initContainer:function(){this._container=Te("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ni.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var l=o._container=nl("shape");de(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",o._path=nl("path"),l.appendChild(o._path),this._updateStyle(o),this._layers[c(o)]=o},_addPath:function(o){var l=o._container;this._container.appendChild(l),o.options.interactive&&o.addInteractiveTarget(l)},_removePath:function(o){var l=o._container;Ze(l),o.removeInteractiveTarget(l),delete this._layers[c(o)]},_updateStyle:function(o){var l=o._stroke,h=o._fill,f=o.options,v=o._container;v.stroked=!!f.stroke,v.filled=!!f.fill,f.stroke?(l||(l=o._stroke=nl("stroke")),v.appendChild(l),l.weight=f.weight+"px",l.color=f.color,l.opacity=f.opacity,f.dashArray?l.dashStyle=I(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=f.lineCap.replace("butt","flat"),l.joinstyle=f.lineJoin):l&&(v.removeChild(l),o._stroke=null),f.fill?(h||(h=o._fill=nl("fill")),v.appendChild(h),h.color=f.fillColor||f.color,h.opacity=f.fillOpacity):h&&(v.removeChild(h),o._fill=null)},_updateCircle:function(o){var l=o._point.round(),h=Math.round(o._radius),f=Math.round(o._radiusY||h);this._setPath(o,o._empty()?"M0 0":"AL "+l.x+","+l.y+" "+h+","+f+" 0,"+65535*360)},_setPath:function(o,l){o._path.v=l},_bringToFront:function(o){lo(o._container)},_bringToBack:function(o){uo(o._container)}},Uc=Y.vml?nl:I0,il=Ni.extend({_initContainer:function(){this._container=Uc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Uc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ze(this._container),Fe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ni.prototype._update.call(this);var o=this._bounds,l=o.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,h.setAttribute("width",l.x),h.setAttribute("height",l.y)),ft(h,o.min),h.setAttribute("viewBox",[o.min.x,o.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(o){var l=o._path=Uc("path");o.options.className&&de(l,o.options.className),o.options.interactive&&de(l,"leaflet-interactive"),this._updateStyle(o),this._layers[c(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){Ze(o._path),o.removeInteractiveTarget(o._path),delete this._layers[c(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var l=o._path,h=o.options;l&&(h.stroke?(l.setAttribute("stroke",h.color),l.setAttribute("stroke-opacity",h.opacity),l.setAttribute("stroke-width",h.weight),l.setAttribute("stroke-linecap",h.lineCap),l.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?l.setAttribute("stroke-dasharray",h.dashArray):l.removeAttribute("stroke-dasharray"),h.dashOffset?l.setAttribute("stroke-dashoffset",h.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),h.fill?(l.setAttribute("fill",h.fillColor||h.color),l.setAttribute("fill-opacity",h.fillOpacity),l.setAttribute("fill-rule",h.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(o,l){this._setPath(o,T0(o._parts,l))},_updateCircle:function(o){var l=o._point,h=Math.max(Math.round(o._radius),1),f=Math.max(Math.round(o._radiusY),1)||h,v="a"+h+","+f+" 0 1,0 ",w=o._empty()?"M0 0":"M"+(l.x-h)+","+l.y+v+h*2+",0 "+v+-h*2+",0 ";this._setPath(o,w)},_setPath:function(o,l){o._path.setAttribute("d",l)},_bringToFront:function(o){lo(o._path)},_bringToBack:function(o){uo(o._path)}});Y.vml&&il.include(WL);function Ex(o){return Y.svg||Y.vml?new il(o):null}xe.include({getRenderer:function(o){var l=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var l=this._paneRenderers[o];return l===void 0&&(l=this._createRenderer({pane:o}),this._paneRenderers[o]=l),l},_createRenderer:function(o){return this.options.preferCanvas&&xx(o)||Ex(o)}});var Sx=fo.extend({initialize:function(o,l){fo.prototype.initialize.call(this,this._boundsToLatLngs(o),l)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=Be(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function HL(o,l){return new Sx(o,l)}il.create=Uc,il.pointsToPath=T0,Pi.geometryToLayer=Lc,Pi.coordsToLatLng=Jp,Pi.coordsToLatLngs=Mc,Pi.latLngToCoords=em,Pi.latLngsToCoords=Dc,Pi.getFeature=po,Pi.asFeature=Oc,xe.mergeOptions({boxZoom:!0});var Cx=di.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){ce(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Fe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ze(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),qa(),jp(),this._startPoint=this._map.mouseEventToContainerPoint(o),ce(document,{contextmenu:cs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=Te("div","leaflet-zoom-box",this._container),de(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var l=new X(this._point,this._startPoint),h=l.getSize();ft(this._box,l.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(Ze(this._box),ut(this._container,"leaflet-crosshair")),Ka(),Bp(),Fe(document,{contextmenu:cs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new wt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});xe.addInitHook("addHandler","boxZoom",Cx),xe.mergeOptions({doubleClickZoom:!0});var Ix=di.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var l=this._map,h=l.getZoom(),f=l.options.zoomDelta,v=o.originalEvent.shiftKey?h-f:h+f;l.options.doubleClickZoom==="center"?l.setZoom(v):l.setZoomAround(o.containerPoint,v)}});xe.addInitHook("addHandler","doubleClickZoom",Ix),xe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Tx=di.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new ur(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}de(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ut(this._map._container,"leaflet-grab"),ut(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Be(this._map.options.maxBounds);this._offsetLimit=re(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var l=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(l),this._prunePositions(l)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,l){return o-(o-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;o.x<l.min.x&&(o.x=this._viscousLimit(o.x,l.min.x)),o.y<l.min.y&&(o.y=this._viscousLimit(o.y,l.min.y)),o.x>l.max.x&&(o.x=this._viscousLimit(o.x,l.max.x)),o.y>l.max.y&&(o.y=this._viscousLimit(o.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,l=Math.round(o/2),h=this._initialWorldOffset,f=this._draggable._newPos.x,v=(f-l+h)%o+l-h,w=(f+l+h)%o-l-h,A=Math.abs(v+h)<Math.abs(w+h)?v:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=A},_onDragEnd:function(o){var l=this._map,h=l.options,f=!h.inertia||o.noInertia||this._times.length<2;if(l.fire("dragend",o),f)l.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,A=h.easeLinearity,b=v.multiplyBy(A/w),P=b.distanceTo([0,0]),O=Math.min(h.inertiaMaxSpeed,P),G=b.multiplyBy(O/P),se=O/(h.inertiaDeceleration*A),ve=G.multiplyBy(-se/2).round();!ve.x&&!ve.y?l.fire("moveend"):(ve=l._limitOffset(ve,l.options.maxBounds),ae(function(){l.panBy(ve,{duration:se,easeLinearity:A,noMoveStart:!0,animate:!0})}))}}});xe.addInitHook("addHandler","dragging",Tx),xe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ax=di.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),ce(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Fe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,l=document.documentElement,h=o.scrollTop||l.scrollTop,f=o.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(f,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var l=this._panKeys={},h=this.keyCodes,f,v;for(f=0,v=h.left.length;f<v;f++)l[h.left[f]]=[-1*o,0];for(f=0,v=h.right.length;f<v;f++)l[h.right[f]]=[o,0];for(f=0,v=h.down.length;f<v;f++)l[h.down[f]]=[0,o];for(f=0,v=h.up.length;f<v;f++)l[h.up[f]]=[0,-1*o]},_setZoomDelta:function(o){var l=this._zoomKeys={},h=this.keyCodes,f,v;for(f=0,v=h.zoomIn.length;f<v;f++)l[h.zoomIn[f]]=o;for(f=0,v=h.zoomOut.length;f<v;f++)l[h.zoomOut[f]]=-o},_addHooks:function(){ce(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Fe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var l=o.keyCode,h=this._map,f;if(l in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(f=this._panKeys[l],o.shiftKey&&(f=F(f).multiplyBy(3)),h.options.maxBounds&&(f=h._limitOffset(F(f),h.options.maxBounds)),h.options.worldCopyJump){var v=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(f)));h.panTo(v)}else h.panBy(f)}else if(l in this._zoomKeys)h.setZoom(h.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;cs(o)}}});xe.addInitHook("addHandler","keyboard",Ax),xe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var kx=di.extend({addHooks:function(){ce(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Fe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var l=X0(o),h=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var f=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),f),cs(o)},_performZoom:function(){var o=this._map,l=o.getZoom(),h=this._map.options.zoomSnap||0;o._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,w=h?Math.ceil(v/h)*h:v,A=o._limitZoom(l+(this._delta>0?w:-w))-l;this._delta=0,this._startTime=null,A&&(o.options.scrollWheelZoom==="center"?o.setZoom(l+A):o.setZoomAround(this._lastMousePos,l+A))}});xe.addInitHook("addHandler","scrollWheelZoom",kx);var GL=600;xe.mergeOptions({tapHold:Y.touchNative&&Y.safari&&Y.mobile,tapTolerance:15});var bx=di.extend({addHooks:function(){ce(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Fe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var l=o.touches[0];this._startPos=this._newPos=new M(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(ce(document,"touchend",Dt),ce(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),GL),ce(document,"touchend touchcancel contextmenu",this._cancel,this),ce(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){Fe(document,"touchend",Dt),Fe(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),Fe(document,"touchend touchcancel contextmenu",this._cancel,this),Fe(document,"touchmove",this._onMove,this)},_onMove:function(o){var l=o.touches[0];this._newPos=new M(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,l){var h=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});h._simulated=!0,l.target.dispatchEvent(h)}});xe.addInitHook("addHandler","tapHold",bx),xe.mergeOptions({touchZoom:Y.touch,bounceAtZoomLimits:!0});var Rx=di.extend({addHooks:function(){de(this._map._container,"leaflet-touch-zoom"),ce(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ut(this._map._container,"leaflet-touch-zoom"),Fe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var l=this._map;if(!(!o.touches||o.touches.length!==2||l._animatingZoom||this._zooming)){var h=l.mouseEventToContainerPoint(o.touches[0]),f=l.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(h.add(f)._divideBy(2))),this._startDist=h.distanceTo(f),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),ce(document,"touchmove",this._onTouchMove,this),ce(document,"touchend touchcancel",this._onTouchEnd,this),Dt(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var l=this._map,h=l.mouseEventToContainerPoint(o.touches[0]),f=l.mouseEventToContainerPoint(o.touches[1]),v=h.distanceTo(f)/this._startDist;if(this._zoom=l.getScaleZoom(v,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&v<1||this._zoom>l.getMaxZoom()&&v>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var w=h._add(f)._divideBy(2)._subtract(this._centerPoint);if(v===1&&w.x===0&&w.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),Le(this._animRequest);var A=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ae(A,this,!0),Dt(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Le(this._animRequest),Fe(document,"touchmove",this._onTouchMove,this),Fe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});xe.addInitHook("addHandler","touchZoom",Rx),xe.BoxZoom=Cx,xe.DoubleClickZoom=Ix,xe.Drag=Tx,xe.Keyboard=Ax,xe.ScrollWheelZoom=kx,xe.TapHold=bx,xe.TouchZoom=Rx,n.Bounds=X,n.Browser=Y,n.CRS=hn,n.Canvas=wx,n.Circle=Xp,n.CircleMarker=Nc,n.Class=je,n.Control=$n,n.DivIcon=vx,n.DivOverlay=fi,n.DomEvent=uL,n.DomUtil=aL,n.Draggable=ur,n.Evented=Mt,n.FeatureGroup=bi,n.GeoJSON=Pi,n.GridLayer=tl,n.Handler=di,n.Icon=ho,n.ImageOverlay=jc,n.LatLng=Ie,n.LatLngBounds=wt,n.Layer=Qn,n.LayerGroup=co,n.LineUtil=xL,n.Map=xe,n.Marker=Pc,n.Mixin=gL,n.Path=cr,n.Point=M,n.PolyUtil=EL,n.Polygon=fo,n.Polyline=Ri,n.Popup=Bc,n.PosAnimation=J0,n.Projection=SL,n.Rectangle=Sx,n.Renderer=Ni,n.SVG=il,n.SVGOverlay=gx,n.TileLayer=mo,n.Tooltip=Fc,n.Transformation=Ip,n.Util=Me,n.VideoOverlay=mx,n.bind=a,n.bounds=re,n.canvas=xx,n.circle=PL,n.circleMarker=RL,n.control=Xa,n.divIcon=UL,n.extend=r,n.featureGroup=AL,n.geoJSON=px,n.geoJson=ML,n.gridLayer=zL,n.icon=kL,n.imageOverlay=DL,n.latLng=we,n.latLngBounds=Be,n.layerGroup=TL,n.map=cL,n.marker=bL,n.point=F,n.polygon=LL,n.polyline=NL,n.popup=BL,n.rectangle=HL,n.setOptions=C,n.stamp=c,n.svg=Ex,n.svgOverlay=jL,n.tileLayer=yx,n.tooltip=FL,n.transformation=Ha,n.version=i,n.videoOverlay=OL;var $L=window.L;n.noConflict=function(){return window.L=$L,this},window.L=n})})(oy,oy.exports);var Sp=oy.exports;function w0(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function x0(t,e){return e==null?function(i,r){const s=T.useRef();return s.current||(s.current=t(i,r)),s}:function(i,r){const s=T.useRef();s.current||(s.current=t(i,r));const a=T.useRef(i),{instance:u}=s.current;return T.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),s}}function QH(t,e){T.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var s;(s=e.layerContainer)==null||s.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function _N(t){return function(n){const i=y0(),r=t(_0(n,i),i);return mN(i.map,n.attribution),yN(r.current,n.eventHandlers),QH(r.current,i),r}}function qH(t,e){const n=x0(t,e),i=_N(n);return WH(i)}function KH(t,e){const n=x0(t),i=$H(n,e);return HH(i)}function YH(t,e){const n=x0(t,e),i=_N(n);return GH(i)}function ZH(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function XH(){return y0().map}function wN(t,e){const n=XH();return T.useEffect(function(){return n.on(t,e),function(){n.off(t,e)}},[n,t,e]),n}function ay(){return ay=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ay.apply(this,arguments)}function JH({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:s,placeholder:a,style:u,whenReady:c,zoom:d,...p},g){const[y]=T.useState({className:r,id:s,style:u}),[_,x]=T.useState(null);T.useImperativeHandle(g,()=>(_==null?void 0:_.map)??null,[_]);const C=T.useCallback(S=>{if(S!==null&&_===null){const E=new Sp.Map(S,p);n!=null&&d!=null?E.setView(n,d):t!=null&&E.fitBounds(t,e),c!=null&&E.whenReady(c),x(zH(E))}},[]);T.useEffect(()=>()=>{_==null||_.map.remove()},[_]);const k=_?vn.createElement(vN,{value:_},i):a??null;return vn.createElement("div",ay({},y,{ref:C}),k)}const xN=T.forwardRef(JH),EN=qH(function({position:e,...n},i){const r=new Sp.Marker(e,n);return w0(r,VH(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),SN=KH(function(e,n){const i=new Sp.Popup(e,n.overlayContainer);return w0(i,n)},function(e,n,{position:i},r){T.useEffect(function(){const{instance:a}=e;function u(d){d.popup===a&&(a.update(),r(!0))}function c(d){d.popup===a&&r(!1)}return n.map.on({popupopen:u,popupclose:c}),n.overlayContainer==null?(i!=null&&a.setLatLng(i),a.openOn(n.map)):n.overlayContainer.bindPopup(a),function(){var p;n.map.off({popupopen:u,popupclose:c}),(p=n.overlayContainer)==null||p.unbindPopup(),n.map.removeLayer(a)}},[e,n,r,i])}),CN=YH(function({url:e,...n},i){const r=new Sp.TileLayer(e,_0(n,i));return w0(r,i)},function(e,n,i){ZH(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)}),eG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMXSURBVHgB7d1PSBRhGMfx3zs7K4mVEQVbKnTp0sV/XbrWPaj0FiQoekqpW+lhDxp0KdCoDAQh6BBUYHevnfLfoUMUVCIlXsLSLZydpxnp7PvO7ow86/4+pzk8q8x+mZld3oUXICIiIiIi2l8GFbh14UHjr+3SNYhcFhO2G5iW6E81oa7JlkDWTGiWTM7M7fwMXs1+Kf5BQomD9HeM34CYcQNpBe1lVYDRmeWx50le5BxksHs6HwYbj+JDkLPoipk2DSduPns/tOMy78NRFGMSjJGYeDKEYCMfHfa7zOdchuLbVHQpjYMq1dlVuPR5YX1+xTZovWX1nSke8pv9j9FhG6hyImtHmprOPnx3u7TXmAcLvznfA8aonjEtm6XSFduYNUj80RaUCuPwXlqDiIcuUCoEYadtxhokqloApcQ7bZ2AVb1/A09P9AnqsG3GIQjtJwZRhkGUYRBlGEQZBlGGQZRhEGUYRBkGUYZBlHFewq1YKC+Dcnlk9kPxB2pY37liwWvIT3kiPchQ5lfIQYgRi8/Bz2EYGeMtS5nMg/i+PznYPXEKNS4+h3JQnkLGsn+GGPSGgfQOtNf2j1aic4hOJfsbCm9ZyjCIMgyiDIMowyDKMIgyDKIMgyjDIMowiDIMogyDKMMgynDF0BFXDJXhimGd4oqhI64YKsMVwzrFIMowiDIMogyDKMMgyjCIMgyiDIMowyDKMIgyDKIMgyjDFUNHXDFUhiuGdYorho64YqgMVwzrFIMowyDKMIgyDKIMgyjDIMowiDIMogyDKMMgyth32AF+g1JhQmzaZhz2oMJ3UCrEs7+XLlseLYJSERos2GbsQXJmDpQKL8Rb64xtIN71WES+gaoj+Nq4ffS1bcwaZHcLamPGQFURz9yd+jT81zbntBfu4vr8SlfhYrx93nlQYiJ4PLM8dt9l1vl7iOefjH9x8RSUjDFP2o4HI87jSGigfeJ61PweuD/unnafu553Z2Zp9EWS1yUOEot3kM4dy1/9v7drR/TvW7kBpWyFkFUDs2TEzAWbwZvd5y8REREREZFy/wAZrgn9j0bYaAAAAABJRU5ErkJggg==";/*! js-cookie v3.0.5 | MIT */function Sh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}var tG={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function ly(t,e){function n(r,s,a){if(!(typeof document>"u")){a=Sh({},e,a),typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires&&(a.expires=a.expires.toUTCString()),r=encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var u="";for(var c in a)a[c]&&(u+="; "+c,a[c]!==!0&&(u+="="+a[c].split(";")[0]));return document.cookie=r+"="+t.write(s,r)+u}}function i(r){if(!(typeof document>"u"||arguments.length&&!r)){for(var s=document.cookie?document.cookie.split("; "):[],a={},u=0;u<s.length;u++){var c=s[u].split("="),d=c.slice(1).join("=");try{var p=decodeURIComponent(c[0]);if(a[p]=t.read(d,p),r===p)break}catch{}}return r?a[r]:a}}return Object.create({set:n,get:i,remove:function(r,s){n(r,"",Sh({},s,{expires:-1}))},withAttributes:function(r){return ly(this.converter,Sh({},this.attributes,r))},withConverter:function(r){return ly(Sh({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var zu=ly(tG,{path:"/"});const IN=({handleSidebarToggle:t})=>{const[e,n]=T.useState(!1),[i,r]=T.useState(!1),[s,a]=T.useState(null),{user:u}=so(),[c,d]=T.useState({latitude:0,longitude:0});T.useEffect(()=>{(async()=>{if(u&&u.userInstance){const R=Pe(ne,"drivers",u.userInstance.uid),j=await Gi(R);r(j.data().onJourney),a(j.data().currentTrip)}})()},[i,u]),T.useEffect(()=>{const I=zu.get("currentBus");if(I){const R=s0(NP(),`buses/${I}`);l0(R,j=>{const{latitude:V,longitude:W}=j.val();d({latitude:V,longitude:W})})}else d({latitude:14.587079,longitude:120.9844868})},[]);const p=()=>{n(!0)},g=async()=>{zu.set("currentBus","");const I=Pe(ne,"trips",s);await Lu(I,{timeEnd:new Date().toTimeString().slice(0,8)});const R=Pe(ne,"drivers",u.userInstance.uid);await Lu(R,{onJourney:!1,currentTrip:null}),r(!1)},y=()=>{n(!1)},_=N.div``,x=N.button`
    border outline-none bg-primary fixed z-999 bottom-0 left-1/2 ml-32 transform -translate-x-2/3 sm:-translate-x-1/2 mb-16 text-white font-inter rounded-full px-4 py-2 mt-5 font-semibold hover:bg-purple-900 transition-all h-[40px] w-[280px] sm:ml-0 md:ml-32
  `,C=N.div`
    fixed top-0 left-0 w-full h-full bg-gray-500 bg-opacity-50 flex items-center justify-center
  `,k=N.img`
    md:hidden cursor-pointer fixed z-999 left-0 h-[32px] w-[32px] mt-3 ml-3
  `,S=()=>{t()},E=({coords:I})=>{const R=wN("mouseover",()=>{R.flyTo(I,R.getZoom())});return null};return m.jsxs(_,{children:[m.jsxs(xN,{center:[c.latitude,c.longitude],zoom:40,scrollWheelZoom:!0,zoomControl:!1,className:"fixed z-0 h-screen md:w-frame sm:w-screen",children:[m.jsx(CN,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),c.latitude!==0&&c.longitude!==0&&m.jsxs(m.Fragment,{children:[m.jsx(E,{coords:[c.latitude,c.longitude]}),m.jsx(EN,{position:[c.latitude,c.longitude],children:m.jsx(SN,{children:"Bus Location"})})]})]}),m.jsx(k,{src:eG,alt:"drawer-button",onClick:S}),i?m.jsx(x,{onClick:g,children:"End Trip"}):m.jsx(x,{onClick:p,children:"Create a Trip"}),e&&m.jsx(C,{children:m.jsx(FH,{onClose:y})})]})},nG=N.div`
  flex flex-cols`,iG=()=>{const[t,e]=T.useState(!1),n=Ys();if(t==!1)var i="md:w-64 sm:w-0";else t==!0&&(i="md:w-64 sm:w-auto");const r=()=>{e(!t)};return m.jsxs(nG,{children:[m.jsx("div",{className:i,id:"sidebar",children:m.jsx(jH,{showSidebar:t,handleSidebarToggle:r})}),n.pathname!=="/driver"?m.jsx(u_,{}):m.jsx(IN,{handleSidebarToggle:r})]})},TN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAj0SURBVHgB7Z17bBRFHMd/bWk97PWKYAwKamJ5BSKSEKwQiRZKS1+EBihv/QMRCcTEGJQYiQQ0GlGIAeXpEzGIkmDxaBsLrYkBDCiGPxCMBTSi0PJuOS5t2vr9yTYhhO7s7u3OzJn5JJuZ683d7cx3ZvY3M7+ZEhkMBoPBYDAYDAaDwWAwGAzJQQppyJ49e+7o7OwclJKSkoOX9yDMxOsMfg/xywiuIfyjo6PjeHFxcRP9j9BCkNra2j6tra35KPQ8FPSTuAbgz2lOPovPXESwH5/Zh3BvUVHRUUpilAly+PDh9KamplJEn8ZVhCuD/OEYRPqsR48eWwsKCv6mJEO6IDt27MgIh8MzEF1mtYRAgCht+P7tiL6BVnOCkgSpglRVVc1Ev/9OamrqfSSPdoizGb/7Smlp6SXSHCmCVFdXD0ChbER0HKmjCS3mxYkTJ24ljQlcELSKchTERxCkF+nB56FQaGFeXl4LaUhggixfvjx11KhRa9A9PU+aweYyKkkpTOYG0oxABOFxBDLMXcM0ShC0LK7Jl/B9rQhT8Dob8bsQT6XEOIvvgibFR0gjfBfEEqMS0QJyDxd6PQpqH64D+J5fbzfwq6urC8VisYFpaWkjUNvzkLbQo6FwFZ8vKCkp+ZE0wVdBuJvKzc1lU9NVy0CBnkDhr01PT9+en59/gVwCUzotOzt7HAp3Pl5OIXet5zzEHFtYWHicNMBXQaLR6HtunhkowFOo5UsPHjz4NcTsIB+AETEYwUpyUSlQIf7MyMh4FJXhHCnGN0HQVU23BmJO6EDaVZguWTFp0qQYBQDuh7vMLfid+52kR+WoPXToUKFfFcMrvghijTN+QjQiSot0jWhFszEeqKWAsebIPmGLyuFHlmFU/zopJFFL5T+sQZ8TMU5jjulxGWIw/DxqaWmZDEHWO0mP+3sN3e7DpJCEWwhPhyD4wkHSk3hejFU14Yf7XI3gBVE6iFKPVjIOInaSAhISxDI/G0QmJ3dTCMaoHIjhHlLQtfLYaLaD5BUQ5StSQEJdVjwen+fA/u9Ay5ijelTMNR5TJs8gKhwIctfFJjwpwPOP8noGgiWidGxNwcb/jjQA81dxVKBZKPC4XTrc8zCMp5waAr7iWRAsLpUheNAuDdv3yNxK0ghrALjKQdJFpIBEmuVTogSojUtQANdIM2B5vYnK8o8g2fjdu3f3I8l4EoTte7qx7NotPB3CI3DSkIqKiusIVguSpcFEn0WS8SQIOySQYA2c56ZUj3oFbMIlmiUoIsl4EgSFLVr5a21ra/uSNAZWH8/0fmOXBq18NCYue5JEPAmCG31CkKQec1TnSXPwjLPtUlHxQpFI5DGSiGtBeDAo8hbh9QxKApCPegS23SryInUqxbUgvDBEAic21Lz9lARgTo2d7ETrIINJIq4FQWEPFKVBzUsaPyheXxe8P4gk4loQFHZvQZJmjD0aKUlABTtp976D/PqKa0HQp2YJklyhJAL5uSxIIsqvr3ixsjLt3kQGtRuZ24EWIvLPCpNEvHRZrXbvd20bSBYc3G8bScS1IHjINdt+YWqq1CaeKKIuGBVQaov30kKaBUl6yx7dJkh/wftSHbS9PENOC95PzczMDGybgd+ggtmatewHQBLxYmUJxxjsUUhJAC+yIT+P2KVBF3yKJOJaEHbtRCZsvQvZvZOSgMbGxpFoISIrSqrvr9cFqgN2b7KvLbt3kuag9guXaVG5pPr9ep1+t508ZMcH9rUljWEvFFwzBMka0CP8RRLx2kL2ihJYjs/aUlNTU4ggxy4NBPuWJONJEGvr8TFBsimW47OWoLBfEqVBT7CLJOPZyYG3HpP4u7XyOOkCFaUYgcjwaMD0/PckGc+C8D5wurHBxo5plhe6NliD1jUOkm5R4U7qWRDLR1e4oxWZ+rCysvJu0oRwOPw2AtEax9X29vaNpICE3CVR2G8haBck64/W9LEOZnB1dXUFOXCAY48ZVXvaExIEfezvvClflI73Z0QikbWkEDw3RuNeea+IrYM50pzDTIMTz8ZASNihmE9IQCA8kQcZXchbAtj+J8nAxB2D361CVDjpCb2WTpgwQdkim187qOY6sLq62Nbc3Dzf8h4MHN5qh4BbRkiUFnmogUlfpGpvCONbbUXt5wf8HIfJj2I0Pz3Ina9sTVkP8EWiboqBGFfwIB9WVlZ2hhTi2x4IPq5C5MFxE8OR+SOovSuCWDvhcUZWVtYv0GGxEzEsIjA+lGxBuBlf+3MUcA7y/wOifZ1+hr3Q0VrehZib2b2TEgBC8HTIyyQe9HV3L524/4XotZSYvIzvD9hoNDoCBcwjXOEm0FuIoTx2oUB2skeh5cRmS11dXY9YLDYS0VL8Ju91zKEEUS1KIBYPRMlFpqK4+pA32L3zuHVIzClcF6wzT+5EGMbrfrgGIj7CwXqGa1SKEpgJClNzCJ4TNcjYA5SEWKIshigfkEQC29jIFhQfV8EnJJBGsDXFhS1Kx8YAkq3Dc/FZkkigO0357BA+rgLRZXwGIimGxxmwpIZyd+RUFAQbZIoibdSMTA1F8D4fA0uS4ekQHoHDUPi0a9AHi2wB/r7e4RiFP/McrMBNFDBSpzGszftTEX0V13AKGO6eYH2t47mp202H6CiKknN7LWF4WzXPvI4nh4cmu4APKdgSj8c3lJeX2zpTW93RBl1EUX6yNW89Rg2eifIo5j19TuacuqGB18B52ZVX+tzMR+kkilZnv/M0Cu/p421kKJshsNDYA7I34r14/IH4dT6FAd3QRcuj8DTiP7OrTqLeIbqIouVh/KrAM2Ue3dguLbQ+gxqnGEFuQbUoRpDboFIUI0g3qBLFCGKDClGMIAJki2IEcYBMUYwgDvEwTpmLcco2cokRxAUQhT36Nzpcp7+OAetDJSUlZ8kFSg56TFZQ49kpcIGTqXvQE1NCU8klRhCXuBEFLeRecokRxANORUHP9hu5xAjiEQeinAmFQjvJJUaQBLBEmYvrVrfYM+iuJnv5P1fGyvKBaDTalx/g/Mzgbopbhq7/dMxgMBgMBoPBYDAYDAaDwWDwi38Bje0D1wrz3fEAAAAASUVORK5CYII=",rG=N.div`
  mt-3 ml-12 mr-3 md:mr-8 md:flex justify-end md:mt-5 md:ml-40
`,sG=N.div`
  relative
`,oG=N.div`
  absolute left-3 top-2
`,aG=N.img`
  w-[24px] h-[24px]
`,lG=N.input`
  border outline-none border-gray-400 rounded-xl px-12 py-2 h-10 w-full md:w-[470px] font-inter text-black text-sm
`,za=({type:t,id:e,placeholder:n,onChange:i})=>m.jsx(rG,{children:m.jsxs(sG,{children:[m.jsx(lG,{type:t,id:e,placeholder:n,onChange:i}),m.jsx(oG,{children:m.jsx(aG,{src:TN,alt:"search"})})]})});za.propTypes={type:Ct.string.isRequired,id:Ct.string.isRequired,placeholder:Ct.string.isRequired,onChange:Ct.func.isRequired};const Nn=({text:t})=>m.jsx("thead",{className:"bg-gray-100 border-b-2 border-gray-100",children:m.jsx("tr",{children:t.map((e,n)=>m.jsx("th",{className:"p-3 text-sm text-gray-500 font-inter tracking-wide text-center",children:e},n))})});Nn.propTypes={text:Ct.array.isRequired};function AN(t){for(var e=t+"=",n=decodeURIComponent(document.cookie),i=n.split(";"),r=0;r<i.length;r++){var s=i[r].trim();if(s.indexOf(e)===0)return s.substring(e.length,s.length)}return null}AN("name");const uG=t=>{if(t==="Pending")return"bg-[#FBFB79E0] text-[#A7A9AC]";if(t==="Approved")return"bg-[#77DD77E0] text-white";if(t==="Disapproved")return"bg-[#FF6961E0] text-white"},kN=({status:t,reportId:e,onStatusChange:n})=>{const[i,r]=T.useState(t),s=document.cookie.includes("persona=mechanic"),a=async u=>{if(!s||i!=="Pending")return;const c=u.target.value;r(c);try{const d=Pe(ne,"inspection_reports",e);await Lu(d,{status:c,mechanic:AN("name")}),console.log("Status updated successfully!"),n(e,c)}catch(d){console.log("Error updating status:",d)}};return m.jsx("div",{className:"inline-block",children:m.jsxs("select",{className:`rounded-full px-3 py-1 text-sm font-inter font-semibold border outline-none appearance-none text-center ${uG(i)}`,value:i,onChange:a,disabled:!s||i!=="Pending",children:[m.jsx("option",{value:"Pending",className:"bg-white text-[#A7A9AC] hidden",children:"Pending"}),m.jsx("option",{value:"Approved",className:"bg-white text-[#A7A9AC]",children:"Approved"}),m.jsx("option",{value:"Disapproved",className:"bg-white text-[#A7A9AC]",children:"Disapproved"})]})})},Va=({text:t,reportId:e,onStatusChange:n})=>m.jsx("tr",{children:t.map((i,r)=>{if(typeof i=="number"&&(i=i.toString()),i.includes("link=")){i=i.replace("link=","");const s="/mechanic/viewInspection/"+i;return m.jsx("td",{className:"p-3 text-sm text-gray-600 font-inter font-semibold text-center",children:m.jsx(Aa,{className:"underline text-blue-400",to:s,children:i})},r)}else return i.includes("status=")?(i=i.replace("status=",""),m.jsx("td",{className:"text-center",children:m.jsx(kN,{status:i,reportId:e,onStatusChange:n})},r)):m.jsx("td",{className:"p-3 text-sm text-gray-600 font-inter font-semibold text-center",children:i},r)})});Va.propTypes={text:Ct.array,reportId:Ct.string,onStatusChange:Ct.func};const cG=N.div`
  sm:w-full
`,hG=N.div`
  h-screen p-5 md:pl-44 md:pr-8 lg:pl-16
`,dG=N.div`
  overflow-auto rounded-sm shadow
`,fG=()=>{const{user:t}=so(),[e,n]=T.useState(""),[i,r]=T.useState([]),s=u=>{n(u.target.value)};T.useEffect(()=>{(async()=>{if(t){const c=await t.userInstance.uid,d=cp(st(ne,"inspection_reports"),dp("driver","==",c)),g=(await _t(d)).docs.map(y=>({id:y.id,...y.data()}));r(g)}})()},[t]);const a=i.filter(u=>Object.values(u).some(c=>String(c).toLowerCase().includes(e.toLowerCase())));return m.jsxs(cG,{children:[m.jsx(za,{type:"number",id:"number",placeholder:"Search Report ID",onChange:s}),m.jsx(hG,{children:m.jsx(dG,{children:m.jsxs("table",{className:"w-full",children:[m.jsx(Nn,{text:["Bus Number","Report ID","Date Submitted","Status"]}),m.jsx("tbody",{className:"divide-y divide-gray-200",children:a.map((u,c)=>m.jsx(Va,{text:[u.bus,"link="+u.id,u.date+" "+u.time,"status="+u.status]},c))})]})})})]})},pG=N.div`
  sm:w-full
`,mG=N.div`
  h-screen p-5 md:pl-40 md:pr-8 lg:pl-16
`,gG=N.div`
  overflow-auto rounded-sm shadow
`,vG=()=>{const[t,e]=T.useState(""),[n,i]=T.useState([]);T.useEffect(()=>{(async()=>{const c=(await _t(st(ne,"trips"))).docs.map(d=>({id:d.id,...d.data()}));i(c)})()},[]);const r=a=>{e(a.target.value)},s=n.filter(a=>a.id.includes(t)).map(a=>({text:[a.id,a.timeStart,a.timeEnd,a.date,a.route]}));return m.jsxs(pG,{children:[m.jsx(za,{type:"number",id:"number",placeholder:"Search Trip ID",onChange:r}),m.jsx(mG,{children:m.jsx(gG,{children:m.jsxs("table",{className:"w-full",children:[m.jsx(Nn,{text:["Trip ID","Time Started","Time Ended","Date","Route"]}),m.jsx("tbody",{className:"divide-y divide-gray-200",children:s.map((a,u)=>m.jsx(Va,{text:a.text},u))})]})})})]})};function yG(t,e,n){return t.substr(0,e)+t.substr(n+1)}const _G=({busIdError:t,routeIdError:e,handleBusIdChange:n,handleRouteIdChange:i,busId:r,routeId:s,setDate:a,setTime:u,busIdInputRef:c,routeIdInputRef:d,focusedInput:p})=>(T.useEffect(()=>{p=="bus"&&c.current.focus(),p=="route"&&d.current.focus();var g=new Date;const y=document.getElementById("dateInput"),_=document.getElementById("timeInput");y.value=new Date(g.getTime()-g.getTimezoneOffset()*6e4).toISOString().split("T")[0];const x=g.toTimeString().slice(0,8);_.value=yG(x,5,8),a(y.value),u(_.value)},[c,p,d,a,u]),m.jsxs("div",{className:"flex flex-col md:flex-row justify-between w-full px-4 md:px-16 xl:px-32 font-inter font-semibold text-fontColor text-sm md:text-base mb-7 md:mb-11 lg:mb-16",children:[m.jsxs("div",{className:"flex flex-col md:mb-3",children:[m.jsx("label",{htmlFor:"busIdInput",children:"Bus ID"}),m.jsx("input",{type:"text",id:"busIdInput",placeholder:"Enter Number",className:"inspectionInputs w-full md:w-48 lg:w-64 xl:w-80 focus:outline-none focus:border-fontColor",required:!0,value:r,onChange:n,ref:c}),t&&m.jsx("span",{className:"text-red-500",children:t})]}),m.jsxs("div",{className:"flex flex-col md:mb-3",children:[m.jsx("label",{htmlFor:"routeIdInput",children:"Route ID"}),m.jsx("input",{type:"text",id:"routeIdInput",placeholder:"Enter Route ID",className:"inspectionInputs w-full md:w-48 lg:w-64 xl:w-80 focus:outline-none focus:border-fontColor",required:!0,value:s,onChange:i,ref:d}),e&&m.jsx("span",{className:"text-red-500",children:e})]}),m.jsxs("div",{className:"flex flex-col md:flex-row md:gap-5",children:[m.jsxs("div",{className:"flex flex-col md:mb-3",children:[m.jsx("label",{htmlFor:"dateInput",children:"Date"}),m.jsx("input",{type:"date",id:"dateInput",className:"inspectionInputs",readOnly:"readonly"})]}),m.jsxs("div",{className:"flex flex-col md:mb-3",children:[m.jsx("label",{htmlFor:"timeInput",children:"Time"}),m.jsx("input",{type:"time",id:"timeInput",className:"inspectionInputs",readOnly:"readonly"})]})]})]})),wG=[{id:"frontSignage",title:"Front Signage LED"},{id:"frontWindshield",title:"Front Windshield"},{id:"plateLight",title:"Plate Light"},{id:"frontBumper",title:"Front Bumper"},{id:"frontLSPD",title:"Front Left Side Passenger Door"},{id:"frontLSLS",title:"Front Left Side LED Signage"},{id:"frontLT",title:"Front Left Tire"},{id:"hubCab",title:"Hub Cab"},{id:"ramp",title:"Ramp"}],xG=[{id:"clearanceLightR",title:"Clearance Light (R)"},{id:"sideMirrorRH",title:"Side Mirror (RH)"},{id:"wiperRH",title:"Wiper (RH)"},{id:"signalLightR",title:"Signal Light (R)"},{id:"headLightRHL",title:"Head Light (R) High/Low"},{id:"parkLightR",title:"Park Light (R)"},{id:"stopLightR",title:"Stop Light (R)"},{id:"reverseLightR",title:"Reverse Light (R)"},{id:"rearROTR",title:"Rear Right Outer Tire (R)"},{id:"rearRITR",title:"Rear Right Inner Tire (R)"},{id:"AdblueBCR",title:"Adblue Body Cover (R)"},{id:"passengerGWR",title:"Passenger Glass Window (R)"},{id:"clearanceLRR",title:"Clearance Light/Refractorize (R)"},{id:"frontRTR",title:"Front Right Tire (R)"},{id:"hubCabR",title:"Hub Cab (R)"},{id:"bodyMLR",title:"Body Marker Light (R)"}],EG=[{id:"windshield",title:"Windshield"},{id:"engineDoor",title:"Engine Door"},{id:"engineDoorL",title:"Engine Door Lock"},{id:"engineOilL",title:"Engine Oil Level"},{id:"waterLevel",title:"Water Level"},{id:"atfLevel",title:"ATF Level"},{id:"fanPulleyB",title:"Fan Pulley Belt"},{id:"mainDriveB",title:"Main Drive Belt"},{id:"alternatorBelt",title:"Alternator Belt"},{id:"airconBelt",title:"Aircon Belt"},{id:"engineLight",title:"Engine Light"},{id:"radiatorHorseC",title:"Radiator Horse Clamp"},{id:"oilFillerC",title:"Oil Filler Cap"},{id:"plateLight",title:"Plate Light"},{id:"rearSignageL",title:"Rear Signage LED"},{id:"radiatorCoverL",title:"Radiator Cover/Lock"},{id:"batteryCable",title:"Battery Cable"},{id:"batteryClamp",title:"Battery Clamp"},{id:"batteryCompartmentL",title:"Battery Compartment Lock"},{id:"bodySiding",title:"Body Siding"},{id:"airconSwitch",title:"Aircon Switch"}],SG=[{id:"clearanceLightL",title:"Clearance Light (L)"},{id:"sideMirrorLH",title:"Side Mirror (LH)"},{id:"wiperLH",title:"Wiper (LH)"},{id:"signalLightL",title:"Signal Light (L)"},{id:"headLightLHL",title:"Head Light (L) High/Low"},{id:"parkLightL",title:"Park Light (L)"},{id:"bodyMarkerSL",title:"Body Marker Side (L)"},{id:"bodySidingL",title:"Body Siding (L)"},{id:"passengerGWL",title:"Passenger Glass Window (L)"},{id:"clearanceLRL",title:"Clearance Light/Refractorize (L)"},{id:"middleDoorL",title:"Middle Door (L)"},{id:"dieselTankCL",title:"Diesel Tank Cap (L)"},{id:"dieselTankBCL",title:"Diesel Tank Body Cover (L)"},{id:"rearLOTR",title:"Rear Left Outer Tire (L)"},{id:"rearLITR",title:"Rear Left Inner Tire (L)"},{id:"hubCabL",title:"Hub Cab (L)"},{id:"stopLightL",title:"stop Light (L)"},{id:"reverseLightR",title:"Reverse Light (L)"}],CG=[{id:"driverSeatbelt",title:"Driver's Seatbelt"},{id:"interiorLight",title:"Interior Light"},{id:"inverterTV",title:"Inverter for TV"},{id:"parkingBreak",title:"Parking Break"},{id:"lightSwitch",title:"Light Switch"},{id:"doorSdoorL",title:"Door Switch/Door Light"},{id:"ledSC",title:"LED  Switch Control"},{id:"fogLS",title:"Fog Lamp Switch"},{id:"radiospeaker",title:"Radio/Speaker"},{id:"blowerMotor",title:"Blower Motor"},{id:"blowerMotorS",title:"Blower Motor Switch"},{id:"mopBroom",title:"Mop/Broom"},{id:"outlet",title:"Outlet"},{id:"busMallet",title:"Bus Mallet"},{id:"tvRemote",title:"TV/Remote"},{id:"digitalClock",title:"Digital Clock"},{id:"cctv",title:"CCTV"},{id:"carfi",title:"Car-Fi"},{id:"gps",title:"GPS"},{id:"usb",title:"USB"},{id:"driverLicense",title:"Driver's License"},{id:"orcr",title:"OR/CR"}],bN=T.createContext(),IG=({children:t})=>{const[e,n]=T.useState([]),[i,r]=T.useState(""),[s,a]=T.useState(""),[u,c]=T.useState(null),[d,p]=T.useState(null),g=y=>{const _=e,x=_.indexOf(y);x>-1?_.splice(x,1):_.push(y),n(_),console.log(_)};return m.jsx(bN.Provider,{value:{reportCount:d,setReportCount:p,damaged:e,toggleDamaged:g,busId:i,setBusId:r,routeId:s,setRouteId:a,newReportID:u,setNewReportID:c},children:t})},Wa=()=>T.useContext(bN),xc=({onClose:t,onUpload:e,itemId:n,itemTitle:i})=>{const[r,s]=T.useState(null),[a,u]=T.useState(null);function c(_){return"R"+String(_).padStart(5,"0")}const d=_=>{const x=_.target.files[0];s(x),u(URL.createObjectURL(x))},p=async()=>{if(r){const _=Pe(ne,"counters","reports"),C=(await Gi(_)).data().count,k=c(C),S=ZP(JP,"reports/"+k+"/"+i);IW(S,r).then(()=>{YP(S).then(E=>{console.log("File uploaded:",r.name),console.log("Download URL:",E),s(null),e(),t()}).catch(E=>{console.error("Error getting download URL:",E)})}).catch(E=>{console.error("Error uploading file:",E)})}},g=!r,y=(_,x)=>_.length<=x?_:_.substring(0,x)+"...";return m.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white p-7 rounded-2xl drop-shadow-lg items-center flex flex-col text-center w-64 md:w-96 lg:w-[420px] text-sm md:text-base",children:[m.jsx("h2",{className:"text-2xl md:text-4xl lg:text-[40px] font-bold mb-4 font-inter text-fontColor",children:"Upload Photo"}),a&&m.jsx("img",{src:a,alt:"Preview",className:"mb-4 max-w-full h-auto border-dashed border-2 border-gray-500"}),m.jsxs("div",{className:"relative mb-4",children:[m.jsx("input",{type:"file",onChange:d,accept:"image/*",className:"opacity-0 absolute text-[0px] inset-0 w-full h-full cursor-pointer"}),m.jsx("button",{className:"px-4 py-2 bg-primary text-white rounded-full font-inter text-xs md:text-sm font-semibold",children:r?m.jsxs(m.Fragment,{children:[m.jsx("span",{title:r.name,children:y(r.name,10)}),m.jsxs("span",{className:"text-xs md:text-sm",children:[".",r.name.split(".").pop()]})]}):"Choose File"})]}),m.jsxs("div",{className:"flex flex-row justify-around w-full font-inter text-xs md:text-sm font-semibold",children:[m.jsx("button",{onClick:p,disabled:g,className:`px-4 py-2 rounded-full ${g?"bg-primary/25 text-white cursor-not-allowed":"bg-primary text-white"}`,children:"Upload"}),m.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-500 text-white rounded-full",children:"Cancel"})]})]})})},TG=()=>{const[t,e]=T.useState({}),[n,i]=T.useState(!1),[r,s]=T.useState(null),{toggleDamaged:a}=Wa(),[u,c]=T.useState(null),d=_=>{t[_.title]?p(_.title):(s(_.id),c(_.title),i(!0))},p=_=>{e(x=>({...x,[_]:!x[_]})),a(_)},g=()=>{i(!1),s(null),c(null)},y=()=>{u&&(p(u),g())};return m.jsx("div",{children:m.jsxs("div",{className:"text-center w-80 sm:w-96 md:w-[30rem] lg:w-[40rem]  px-2 sm:px-6 md:px-12 pb-5 md:pt-5 lg:pt-10 md:pb-16 font-medium bg-white drop-shadow-xl",children:[m.jsx("h2",{className:"text-2xl md:text-3xl lg:text-4xl  text-inspectionTitle my-6",children:"FRONT"}),wG.map(_=>m.jsxs("div",{className:"flex justify-between items-center text-xs sm:text-sm md:text-lg lg:text-xl my-[14px]",children:[m.jsx("p",{className:"w-9/12 py-1 md:py-2 lg:py-[10px] pl-2 md:pl-4 lg:pl-8 text-start text-inspectionList bg-[#E6E3E3BA]",children:_.title}),m.jsx("button",{className:`border outline-none w-3/12 py-1 md:py-2 lg:py-[10px] px-1 ${t[_.title]?"bg-[#FF8B85] text-[#BF4842]":"bg-[#77DD77] text-[#106710E0]"}`,onClick:()=>d(_),children:t[_.title]?"Damaged":"Damage"}),n&&m.jsx(xc,{onClose:g,onUpload:y,itemId:r,itemTitle:u})]},_.id))]})})},AG=()=>{const[t,e]=T.useState({}),[n,i]=T.useState(!1),[r,s]=T.useState(null),[a,u]=T.useState(null),{toggleDamaged:c}=Wa(),d=_=>{t[_.title]?p(_.title):(s(_.id),u(_.title),i(!0))},p=_=>{e(x=>({...x,[_]:!x[_]})),c(_)},g=()=>{i(!1),s(null),u(null)},y=()=>{a&&(p(a),g())};return m.jsx("div",{children:m.jsxs("div",{className:"text-center w-80 sm:w-96 md:w-[30rem] lg:w-[40rem]  px-2 sm:px-6 md:px-12 pb-5 md:pt-5 lg:pt-10 md:pb-16 font-medium bg-white drop-shadow-xl",children:[m.jsx("h2",{className:"text-2xl md:text-3xl lg:text-4xl  text-inspectionTitle my-6",children:"RIGHT"}),xG.map(_=>m.jsxs("div",{className:"flex justify-between items-center text-xs sm:text-sm md:text-lg lg:text-xl my-[14px]",children:[m.jsx("p",{className:"w-9/12 py-1 md:py-2 lg:py-[10px] pl-2 md:pl-4 lg:pl-8 text-start text-inspectionList bg-[#E6E3E3BA]",children:_.title}),m.jsx("button",{className:`border outline-none w-3/12 py-1 md:py-2 lg:py-[10px] px-1 ${t[_.title]?"bg-[#FF8B85] text-[#BF4842]":"bg-[#77DD77] text-[#106710E0]"}`,onClick:()=>d(_),children:t[_.title]?"Damaged":"Damage"}),n&&m.jsx(xc,{onClose:g,onUpload:y,itemId:r,itemTitle:a})]},_.id))]})})},kG=()=>{const[t,e]=T.useState({}),[n,i]=T.useState(!1),[r,s]=T.useState(null),{toggleDamaged:a}=Wa(),[u,c]=T.useState(null),d=_=>{t[_.title]?p(_.title):(s(_.id),c(_.title),i(!0))},p=_=>{e(x=>({...x,[_]:!x[_]})),a(_)},g=()=>{i(!1),s(null),c(null)},y=()=>{u&&(p(u),g())};return m.jsx("div",{children:m.jsxs("div",{className:"text-center w-80 sm:w-96 md:w-[30rem] lg:w-[40rem]  px-2 sm:px-6 md:px-12 pb-5 md:pt-5 lg:pt-10 md:pb-16 font-medium bg-white drop-shadow-xl",children:[m.jsx("h2",{className:"text-2xl md:text-3xl lg:text-4xl  text-inspectionTitle my-6",children:"BACK"}),EG.map(_=>m.jsxs("div",{className:"flex justify-between items-center text-xs sm:text-sm md:text-lg lg:text-xl my-[14px]",children:[m.jsx("p",{className:"w-9/12 py-1 md:py-2 lg:py-[10px] pl-2 md:pl-4 lg:pl-8 text-start text-inspectionList bg-[#E6E3E3BA]",children:_.title}),m.jsx("button",{className:`border outline-none w-3/12 py-1 md:py-2 lg:py-[10px] px-1 ${t[_.title]?"bg-[#FF8B85] text-[#BF4842]":"bg-[#77DD77] text-[#106710E0]"}`,onClick:()=>d(_),children:t[_.title]?"Damaged":"Damage"}),n&&m.jsx(xc,{onClose:g,onUpload:y,itemId:r,itemTitle:u})]},_.id))]})})},bG=()=>{const[t,e]=T.useState({}),[n,i]=T.useState(!1),[r,s]=T.useState(null),{toggleDamaged:a}=Wa(),[u,c]=T.useState(null),d=_=>{t[_.title]?p(_.title):(s(_.id),c(_.title),i(!0))},p=_=>{e(x=>({...x,[_]:!x[_]})),a(_)},g=()=>{i(!1),s(null),c(null)},y=()=>{u&&(p(u),g())};return m.jsx("div",{children:m.jsxs("div",{className:"text-center w-80 sm:w-96 md:w-[30rem] lg:w-[40rem]  px-2 sm:px-6 md:px-12 pb-5 md:pt-5 lg:pt-10 md:pb-16 font-medium bg-white drop-shadow-xl",children:[m.jsx("h2",{className:"text-2xl md:text-3xl lg:text-4xl  text-inspectionTitle my-6",children:"LEFT"}),SG.map(_=>m.jsxs("div",{className:"flex justify-between items-center text-xs sm:text-sm md:text-lg lg:text-xl my-[14px]",children:[m.jsx("p",{className:"w-9/12 py-1 md:py-2 lg:py-[10px] pl-2 md:pl-4 lg:pl-8 text-start text-inspectionList bg-[#E6E3E3BA]",children:_.title}),m.jsx("button",{className:`border outline-none w-3/12 py-1 md:py-2 lg:py-[10px] px-1 ${t[_.title]?"bg-[#FF8B85] text-[#BF4842]":"bg-[#77DD77] text-[#106710E0]"}`,onClick:()=>d(_),children:t[_.title]?"Damaged":"Damage"}),n&&m.jsx(xc,{onClose:g,onUpload:y,itemId:r,itemTitle:u})]},_.id))]})})},RG=()=>{const[t,e]=T.useState({}),[n,i]=T.useState(!1),[r,s]=T.useState(null),{toggleDamaged:a}=Wa(),[u,c]=T.useState(null),d=_=>{t[_.title]?p(_.title):(s(_.id),c(_.title),i(!0))},p=_=>{e(x=>({...x,[_]:!x[_]})),a(_)},g=()=>{i(!1),s(null),c(null)},y=()=>{u&&(p(u),g())};return m.jsx("div",{children:m.jsxs("div",{className:"text-center w-80 sm:w-96 md:w-[30rem] lg:w-[40rem]  px-2 sm:px-6 md:px-12 pb-5 md:pt-5 lg:pt-10 md:pb-16 font-medium bg-white drop-shadow-xl",children:[m.jsx("h2",{className:"text-2xl md:text-3xl lg:text-4xl  text-inspectionTitle my-6",children:"INSIDE"}),CG.map(_=>m.jsxs("div",{className:"flex justify-between items-center text-xs sm:text-sm md:text-lg lg:text-xl my-[14px]",children:[m.jsx("p",{className:"w-9/12 py-1 md:py-2 lg:py-[10px] pl-2 md:pl-4 lg:pl-8 text-start text-inspectionList bg-[#E6E3E3BA]",children:_.title}),m.jsx("button",{className:`border outline-none w-3/12 py-1 md:py-2 lg:py-[10px] px-1 ${t[_.title]?"bg-[#FF8B85] text-[#BF4842]":"bg-[#77DD77] text-[#106710E0]"}`,onClick:()=>d(_),children:t[_.title]?"Damaged":"Damage"}),n&&m.jsx(xc,{onClose:g,onUpload:y,itemId:r,itemTitle:u})]},_.id))]})})};function PG(t){return"R"+String(t).padStart(5,"0")}function NG(t){return"T"+String(t).padStart(5,"0")}const LG=()=>{const{damaged:t,busId:e,setBusId:n,routeId:i,setRouteId:r,setNewReportID:s,setReportCount:a}=Wa(),[u,c]=T.useState(""),[d,p]=T.useState(""),[g,y]=T.useState(""),[_,x]=T.useState(""),[C,k]=T.useState(""),S=T.useRef(null),E=T.useRef(null),[I,R]=T.useState(null),{user:j}=so(),V=Me=>{n(Me.target.value),te(Me.target.value),k("bus")},W=Me=>{r(Me.target.value),ae(Me.target.value),k("route")};T.useEffect(()=>{(async()=>{j&&R(j.userInstance.uid)})()},[s,a,j]);const H=async()=>{const Me=document.getElementById("remarksInput"),je=Pe(ne,"counters","reports"),Ve=(await Gi(je)).data().count,Mt=PG(Ve);if(a(Ve),s(Mt),t.length===0&&i!==""){zu.set("currentBus",e);const J=Pe(ne,"counters","reports");await Di(J,{count:Ve+1}),await Di(Pe(ne,"inspection_reports",Mt),{date:g,damaged:t,bus:e,mechanic:"N/A",remarks:"",status:"Approved",time:_});const F=Pe(ne,"counters","trips");var M=(await Gi(F)).data().count+1;await Di(F,{count:M});const X=NG(M);await Di(Pe(ne,"trips",X),{date:g,timeStart:_,route:i,timeEnd:"On Journey",driver:zu.get("name")}),await Lu(Pe(ne,"drivers",I),{onJourney:!0,currentTrip:X}),fe("/driver")}else if(t.length!==0&&e!==""&&i!==""){const J=Pe(ne,"counters","reports");await Di(J,{count:Ve+1}),await Di(Pe(ne,"inspection_reports",Mt),{date:g,damaged:t,bus:e,mechanic:"N/A",remarks:"",status:"Pending",time:_}),fe("/driver")}else if(e===""){alert("Bus ID is required.");return}else if(!Me.value.trim()){alert("Remarks is required.");return}},fe=es(),te=async Me=>{try{const je=Pe(ne,"buses",Me);(await Gi(je)).exists()?c(""):c("Bus ID does not exist.")}catch(je){console.error("Error validating bus ID:",je)}},ae=async Me=>{try{(await _t(cp(st(ne,"routes"),dp("number","==",Me)))).empty?p("Route ID does not exist."):p("")}catch(je){console.error("Error validating route ID:",je)}},Le=N.div`
    flex flex-col justify-center items-center font-inter bg-[#F3F3F3] pb-14 md:pb-40 lg:pb-52
  `;return m.jsxs(Le,{children:[m.jsx("h1",{className:"w-full font-semibold text-center text-inspectionTitle  text-2xl sm:text-3xl md:text-4xl lg:text-[40px] border-b-2 pt-8 pb-6 border-secondary mb-8",children:"360-Degree Inspection Form"}),m.jsx(_G,{busIdError:u,routeIdError:d,handleBusIdChange:V,handleRouteIdChange:W,busId:e,routeId:i,setDate:y,setTime:x,busIdInputRef:S,routeIdInputRef:E,focusedInput:C}),m.jsxs("div",{className:"flex flex-col items-center gap-5 lg:gap-12",children:[m.jsx(TG,{}),m.jsx(AG,{}),m.jsx(kG,{}),m.jsx(bG,{}),m.jsxs("div",{className:"flex flex-col gap-8 items-center",children:[m.jsx(RG,{}),m.jsxs("div",{className:"remarksContainer",children:[m.jsx("label",{htmlFor:"remarksInput",className:"text-base sm:text-lg md:text-xl lg:text-2xl",children:"Remarks"}),m.jsx("input",{type:"text",id:"remarksInput",placeholder:"Enter your remarks",className:"remarkInputs focus:outline-none focus:border-fontColor w-full",required:!0})]}),m.jsx("button",{className:"border outline-none buttonTemplate self-stretch",onClick:H,children:"SUBMIT"})]})]}),u&&m.jsx("p",{className:"text-red-500",children:u})]})},uy="/assets/UbeLogo-b6eb1daa.png",MG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGPSURBVHgB1VM7SMNgEL7EFqFDRwcVSq24ODhbcFAc3BycHBzcMtrSB9gOQZSaPkS7uDg5irgViiAKtgHFzcUHDgEXB7cIkpDELyUJMdiSZLIfHHff3c/33/0Pov8Oxk04jhuLx+OHCBcMw1iq1WqvFBCsWxxiZ/DrsEmGYXYoBJwOc7ncPMuyoqe+Vq1WLygAnA4hNuEtYuzdZrM5SmEEMeKzt4jcjCRJSQojKAjCI1zHI3jSaDSeKADcl0K6ru/DGTaPRCKnFBC/BOv1egvuwOaqqnI4R4YCgPUmZFnmMeqdRTeKxeIeBcCfuxcKhXG4W9iUlRJisdg2z/O6SUqlUiIajX6Af/sSNFEul1OKolwhTFipc3R+hHNexRPbgn9BLoPfdOlL0EQ+n09BpI1wut8anHEbl5epVCq918AOEsTub3CLsPt+a7DhiqZp1zYfKGgCX+8dbhmdHJPrSXnwYAcj5APdblcRRbGVTqdvQGfRlfNNzZFhm6h/9TqmEMhms3MQTeJyPjFBB7FBQ4MfB0OAT3/PmH8AAAAASUVORK5CYII=",DG=()=>m.jsxs("div",{className:"py-5 px-3 lg:px-32 w-full flex flex-row justify-between",children:[m.jsxs("div",{className:"flex flex-row items-center  gap-1 lg:gap-4",children:[m.jsx("img",{src:uy,alt:"Ube Logo",className:"w-6 h-6 lg:w-9 lg:h-9"}),m.jsx("h3",{className:"text-black/90 font-semibold font-worksans text-xs lg:text-2xl ",children:"Ube Express"})]}),m.jsxs("div",{className:"lg:flex flex-row items-center text-navbarColorText font-inter font-semibold hidden lg:text-lg gap-1",children:[m.jsxs("div",{className:"flex flex-row items-center",children:[m.jsx("img",{src:MG,alt:"Phone Icon",className:"w-5 h-5"}),m.jsx("h4",{children:"+(02) 8879 4497"})]}),m.jsx("span",{children:"|"}),m.jsxs("div",{className:"flex flex-row items-center",children:[m.jsx("img",{src:r_,alt:"Mail Icon",className:"w-4 h-4 brightness-50"}),m.jsx("h4",{children:"inquiry@ubeexpress.com"})]})]})]}),OG="/assets/HeroPassenger-ae307773.png",jG=()=>m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"font-semibold text-black font-inter mb-3 lg:mb-5 text-xl lg:text-[40px]",children:"Your Ultimate Bus Experience"}),m.jsx("div",{children:m.jsx("img",{src:OG})})]}),BG=({busID:t,busData:e})=>{const[n,i]=T.useState(0),[r,s]=T.useState(0);T.useEffect(()=>{const u=s0(XP,`buses/${t}`);l0(u,c=>{const{latitude:d,longitude:p}=c.val();i(d),s(p)})},[t]);const a=({coords:u})=>{const c=wN("mouseover",()=>{c.flyTo(u,c.getZoom())});return null};return m.jsxs("div",{className:"bg-passengerBusLocation flex flex-col gap-6 lg:flex-row font-inter px-3 lg:px-32 pt-10 pb-16 justify-between",children:[m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsx("h3",{className:"font-medium text-center text-2xl md:text-3xl lg:text-[32px] text-[#303030]",children:"Bus Location Update"}),m.jsx("div",{className:"lg:w-[40vw] xl:w-[628px] h-96 lg:h-[451px] border-white border-8 rounded-lg",children:m.jsxs(xN,{id:"map",center:[n,r],zoom:40,scrollWheelZoom:!0,zoomControl:!1,className:"z-0 h-full w-full",children:[m.jsx(CN,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),m.jsx(a,{coords:[n,r]}),m.jsx(EN,{position:[n,r],children:m.jsx(SN,{children:"Hi! Annyeonghaseyo."})})]})})]}),m.jsxs("div",{className:"flex flex-col gap-3 lg:gap-6 xl:gap-8 text-white text-lg lg:text-xl xl:text-2xl justify-center",children:[m.jsxs("div",{className:"bg-primary/60 px-14 lg:px-18 xl:px-20 py-4 lg:py-6 xl:py-8 rounded-xl text-center",children:[m.jsx("h4",{className:"font-bold lg:mb-3 xl:mb-5",children:"Bus Details"}),m.jsxs("h4",{className:"font-medium lg:mb-3 xl:mb-5",children:["Bus Number: ",t]}),m.jsxs("h4",{className:"font-medium",children:["Plate Number: ",e.plate]})]}),m.jsxs("div",{className:"bg-primary/60 px-14 lg:px-18 xl:px-20 py-4 lg:py-6 xl:py-8 rounded-xl text-center",children:[m.jsx("h4",{className:"font-bold lg:mb-3 xl:mb-5",children:"Driver Details"}),m.jsxs("h4",{className:"font-medium",children:["Driver Name: ",e.driver]})]})]})]})},FG=()=>{const[t,e]=T.useState(0),[n,i]=T.useState(0),[r,s]=T.useState(""),a=_=>{e(_)},u=_=>{i(_)},c=()=>{i(0)},d=_=>{const x=_.target.value;s(x)},p=r.length,g=500,y=_=>{_.preventDefault(),console.log("Submitted rating:",t)};return m.jsx("div",{className:"bg-white py-6 px-3 md:px-8 xl:px-[358px] flex justify-center",children:m.jsx("div",{className:"bg-[#F1F1F1] py-4 lg:py-10 px-4 md:px-14 lg:px-16 xl:px-20 rounded-2xl shadow-rating w-5/6 lg:w-3/4 xl:w-[700px]",children:m.jsx("form",{onSubmit:y,children:m.jsxs("div",{className:"flex flex-col items-center gap-1 md:gap-[6px] lg:gap-3 font-inter",children:[m.jsx("h3",{className:"text-[#303030] font-medium text-lg md:text-2xl lg:text-3xl xl:text-[32px] text-center",children:"Leave a review to our service!"}),m.jsx("div",{className:"flex gap-3 items-center",children:[1,2,3,4,5].map(_=>m.jsx("button",{type:"button",onClick:()=>a(_),onMouseEnter:()=>u(_),onMouseLeave:c,className:`text-4xl md:text-5xl lg:text-6xl ${t>=_||n>=_?"text-yellow-500":"text-gray-400"}`,children:t>=_||n>=_?m.jsx("span",{children:""}):m.jsx("span",{children:""})},_))}),m.jsx("h4",{className:"text-[#4D4D4D] font-normal text-lg md:text-xl lg:text-2xl",children:"Rate your experience"}),m.jsx("input",{type:"text",placeholder:"Describe your experience (Optional)",value:r,onChange:d,maxLength:g,className:"w-5/6 lg:w-full text-sm md:text-base lg:text-xl px-2 lg:px-4 py-3 md:py-5 lg:py-7 border border-black rounded-2xl "}),m.jsxs("div",{className:"text-xs lg:text-sm self-end text-gray-500",children:[p,"/",g]}),m.jsx("button",{type:"submit",className:"border outline-none px-4 py-2 lg:py-[10px] bg-primary/90 text-white font-semibold text-base md:text-lg lg:text-xl rounded-2xl hover:bg-primary w-2/3",children:"Submit"})]})})})})},UG=()=>m.jsxs("div",{className:"bg-[#313131] font-work-sans font-medium  text-sm md:text-base text-center text-white lg:pb-8 lg:pt-11 px-3 py-4",children:[m.jsx("h4",{children:"3F Cargohaus Building Brgy. Vitalez NAIA Complex, Paraaque City"}),m.jsx("h4",{children:"@ UBE Express Inc."})]}),zG=()=>{const{busID:t}=eA(),[e,n]=T.useState(null),[i,r]=T.useState(!1);return T.useEffect(()=>{(async()=>{try{const a=Pe(ne,"buses",t),u=await Gi(a);u.exists()?n(u.data()):console.log("Bus document not found")}catch(a){console.error("Error fetching bus data:",a)}})()},[t]),T.useEffect(()=>{e!==null&&r(!0)},[e]),m.jsxs("div",{className:"w-full flex flex-col",children:[m.jsx(DG,{}),m.jsx(jG,{}),i&&m.jsx(BG,{busID:t,busData:e}),m.jsx(FG,{}),m.jsx(UG,{})]})},VG=N.div`
    fixed top-0 left-0 w-full h-full z-50 bg-gray-900 bg-opacity-50`,yI=N.div`
    fixed top-0 left-0 w-64 h-full bg-sidebar text-white transition-all duration-300 ease-in-out`,Ch=N.div`
    h-35 px-5 md:pt-6`,Ih=N.h2`
    text-sm font-inter font-semibold font-white`,_I=N.div`
    pt-4 flex md:pt-3`,wI=N.img`
    h-[80px] w-[80px]`,WG=N.button`
    focus:outline-none pl-[215px] pt-4`,HG=N.img`
    w-[28px] h-[28px]`,xI=N.div`
    flex flex-col`,EI=N.h4`
    text-white font-inter font-semibold text-[17px] pl-2 pt-3`,SI=N.h5`
    text-white font-inter font-semibold text-[15px] pl-2 pt-2`,CI=N.ul`
    py-0 pt-5 md:pt-0 `,GG=N.button`
    block lg:hidden text-gray-500 hover:text-white focus:outline-none focus:text-white transition duration-150 ease-in-out mt-6 ml-5`,$G=t=>{const e=document.cookie.split(";");for(let n=0;n<e.length;n++){const i=e[n].trim();if(i.startsWith(t+"="))return i.substring(t.length+1)}return""},QG=()=>{const[t,e]=T.useState(!1),n=$G("name"),i=()=>{e(!t)};return m.jsxs(m.Fragment,{children:[m.jsx(GG,{onClick:i,children:t?m.jsx(m0,{size:20}):m.jsx(p0,{size:20})}),t?m.jsx(VG,{id:"sidebar",children:m.jsxs(yI,{children:[m.jsx(WG,{onClick:i,children:m.jsx(HG,{src:v0,alt:"back"})}),m.jsxs(Ch,{children:[m.jsx(Ih,{children:"Profile"}),m.jsxs(_I,{children:[m.jsx(wI,{src:lf,alt:"image"}),m.jsxs(xI,{children:[m.jsx(EI,{children:n}),m.jsx(SI,{children:"Mechanic"})]})]})]}),m.jsxs(CI,{children:[m.jsx(Ch,{children:m.jsx(Ih,{children:"Menu"})}),m.jsx(De,{to:"/mechanic",iconSrc:gi,iconAlt:"folder",text:"Pending Reports"}),m.jsx(De,{to:"/mechanic/approved",iconSrc:gi,iconAlt:"folder",text:"Approved Reports"}),m.jsx(De,{to:"/mechanic/unapproved",iconSrc:gi,iconAlt:"folder",text:"Unapproved Reports"}),m.jsx(wa,{})]})]})}):m.jsxs(yI,{className:"hidden md:block",children:[m.jsxs(Ch,{children:[m.jsx(Ih,{children:"Profile"}),m.jsxs(_I,{children:[m.jsx(wI,{src:lf,alt:"image"}),m.jsxs(xI,{children:[m.jsx(EI,{children:n}),m.jsx(SI,{children:"Mechanic"})]})]})]}),m.jsxs(CI,{children:[m.jsx(Ch,{children:m.jsx(Ih,{children:"Menu"})}),m.jsx(De,{to:"/mechanic",iconSrc:gi,iconAlt:"folder",text:"Pending Reports"}),m.jsx(De,{to:"/mechanic/approved",iconSrc:gi,iconAlt:"folder",text:"Approved Reports"}),m.jsx(De,{to:"/mechanic/unapproved",iconSrc:gi,iconAlt:"folder",text:"Disapproved Reports"}),m.jsx(wa,{})]})]})]})},qG=N.div`
    flex flex-cols`,KG=N.div`
    absolute md:w-64 sm:w-auto`,YG=()=>m.jsxs(qG,{children:[m.jsx(KG,{children:m.jsx(QG,{})}),m.jsx(u_,{})]}),ZG=N.div`
  lg:ml-[220px] md:ml-[105px] sm:w-full
`,XG=N.div`
  h-screen p-5 md:pl-44 md:pr-8 lg:pl-16
`,JG=N.div`
  overflow-auto rounded-sm shadow
`,e$=()=>{const[t,e]=T.useState(""),[n,i]=T.useState([]),r=a=>{e(a.target.value)};T.useEffect(()=>{(async()=>{const u=st(ne,"inspection_reports"),d=(await _t(cp(u,dp("status","==","Approved")))).docs.map(p=>({id:p.id,...p.data()}));i(d)})()},[]);const s=n.filter(a=>Object.values(a).some(u=>String(u).toLowerCase().includes(t.toLowerCase())));return m.jsxs(ZG,{children:[m.jsx(za,{type:"number",id:"number",placeholder:"Search Report ID",onChange:r}),m.jsx(XG,{children:m.jsx(JG,{children:m.jsxs("table",{className:"w-full",children:[m.jsx(Nn,{text:["Bus Number","Report ID","Date Submitted","Status"]}),m.jsx("tbody",{className:"divide-y divide-gray-200",children:s.map(a=>m.jsx(Va,{text:[a.bus,"link="+a.id,a.date+" "+a.time,"status="+a.status]},a.id))})]})})})]})},t$=N.div`
  lg:ml-[220px] md:ml-[105px] sm:w-full
`,n$=N.div`
  h-screen p-5 md:pl-44 md:pr-8 lg:pl-16
`,i$=N.div`
  overflow-auto rounded-sm shadow
`,r$=()=>{const[t,e]=T.useState(""),[n,i]=T.useState([]),r=a=>{e(a.target.value)};T.useEffect(()=>{(async()=>{const u=st(ne,"inspection_reports"),d=(await _t(cp(u,dp("status","==","Disapproved")))).docs.map(p=>({id:p.id,...p.data()}));i(d)})()},[]);const s=n.filter(a=>Object.values(a).some(u=>String(u).toLowerCase().includes(t.toLowerCase())));return m.jsxs(t$,{children:[m.jsx(za,{type:"number",id:"number",placeholder:"Search Report ID",onChange:r}),m.jsx(n$,{children:m.jsx(i$,{children:m.jsxs("table",{className:"w-full",children:[m.jsx(Nn,{text:["Bus Number","Report ID","Date Submitted","Status"]}),m.jsx("tbody",{className:"divide-y divide-gray-200",children:s.map(a=>m.jsx(Va,{text:[a.bus,"link="+a.id,a.date+" "+a.time,"status="+a.status]},a.id))})]})})})]})},Th=({children:t})=>{const e=es(),{user:n,logout:i}=so();return T.useEffect(()=>{const r=()=>{(!document.cookie.includes("session=")||!document.cookie.includes("name="))&&i()};return document.body.addEventListener("mouseover",r),()=>{document.body.removeEventListener("mouseover",r)}},[i,e]),!n&&(!document.cookie.includes("session=")||!document.cookie.includes("name="))?m.jsx(iA,{to:"/"}):t},_o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAS3SURBVHgB7Z1LqFVVHMa/U1FZRgSlBT0RiuhBL4OSBnaJiMSC0hw0iGhUkyIKo5tJSGmDhKhpA0c9qCgSGxTZyzAoo6I0nNRANBtE5AMrd9+ffQ5cM+/ae6+lfu7z/eBjXfZj3X32d9bZ6/FfawPGGGOMMcYYc2QZ4DBQVdXxTOZRE9T51KnoB7uon6kPqQ2DweAfqEMz7qS2VP1nM7UQhSlWQnhxkdcq6jGMF89TS1laKhTgOJRjEuNnRvA49QQKUaSEsHRcyWQTyhp8LLGfuo6lZBMyKXUDn8b4mhHEZ38SBcguISwdM5nspE7GeLOHOoulZBcyKPGtvhw2I5hBXYZMShgyG2bEOcikhCEnwozIvhfj/CCWxIaIYUPEsCFi2BAxbIgYNkQMGyKGDRHDhohhQ8Q4ARrspZZSn1NTh0LjCxPBEs+hWY/ybuolai3qgIQU51EPULejL3A8ZFGVz7OJ/7GyQR5/UNeiAzzvqaoMi5CJyk/WN4n9XyPNcg4OfYVurKA2QgAVQ6rM/cFr6MgwYqTz+SXp00P9N+SxEwL0yZBLkUf28GsJVAxJ1aBmIM2j6AgfxmcwuR8CqBhyV1VHPh7EcPvdSHMvj11OtarK8/izmbxLzYIAKu2QO6hPeXM+QB1OMyJKxi3UjQ3zifiwMOZ9ptuo6YKhI+9LqAXUTIigYkgwb6hc5lAP4RjFXSdi2BAxbIgYNkQMGyKGDRFDqdr7F/UT6rGREdGCj7ZC2+vcPtR07ZDI+wIItUECFUO2UhPsdf3lvzvYyIubFrNe5zTI50vqwabd8Mw7gqOXUC9Sp0MAlZ+s1f9nRsDtMQ15NdJ8S81vMybCY/dRa/jnrdTfEEDFkFTX969IM8mbuxsd4HkxOPUqBOjTQ3098lgPAVzLEqNPhsxHHjdDABVDUmMRTeYxrmCtqdOaKjzvBiaLIYCKIY8Mq7cHwe0Xxn6kuYL6iMdfj4bw2JOo+/jnOog0AVTaIdHG2MqbswUHNgxjEOliNL/OudRG5hO1stQAVTQML6JOgRBKLfW4llKBBrMgMiTbFteyxLAhYtgQMWyIGDZEDBsihlK19zNqAw6MdI+oxbbxWjG2EoFyTSbsnEvFQpanoS9UZSbsvD1dKCn1TsN8llX1ErVtrn829UlVht5M2HnrUKt6Dre/iTRreOwzbdfS5fE7UJeSHRBAxZC9if17kOYFdISm/M7kFQjQp4f6ZuTxAwTokyFnIg+Jvi8VQwaZ+4Ml6MiwQnEPBFAx5OrE/muQJibrzEU3llGNx1EOJyrtkId5M6OWEwsH7J+yPb4wN8X+BnlEwNvHzOdlpu9RfzY4JwbFYuGA2yBCiYWUo+79OkywmDW2N5CBu07EsCFi2BAxbIgYNkQMGyKGDRHDhohhQ8SwIWLYEDFKGLIPZkT2vShhyHaYEduQSYne3gjnj0mbUmH9RwGN1+YNZ76ug1mba0ZQ6tWrMXspXjvaKiaqR0To0VU05HtkUqSWxQv5DvXyeuPKZAkzgpLV3lgufBXGj5VQ/tz8+VpY1S9/7zs/UgtQmGIvuJ9KVcfXxkqiE6gDCTpNVxYkAidi7ZVYDOeLtmGrxhhjjDHGGKPIvxzqSaO+iW6aAAAAAElFTkSuQmCC",II="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAV7SURBVHgB7Z1LiB1FFIb/9hkVTUBM1KCoGx+BGNFENy7EB/ggoCI6iboYQzSahYrZaYzrJOpGxMXM+IziQiToZHxuXBg1IokICurC4IgjqIka1Dxu/pPqMJeb6Ux3VXfV6bnng5++1L10162/u6q66nQ1YBiGYRiGYRiGYRiGYRjtIENDdDqdE7m5gjqXOpM6Ae3mP+pX6ifqiyzL/kcD1G4IjbiBm0HqRuo0zEx2U6PUMI35ADVSmyE0YhE3G6hr0V+IIWtozHbUQC2G0IwBboaok9CfSHX2AE15EYEcg0BoxjpuNqF/zRCkvRxhWaxFIEFXCDNwLzcvwehmBa+UIXjibUjeZmyFOzuMSf6lrqQpO+BBSJW1HmbGVMyinoUnXobkXdvrYBRxDcvIq3x8r5D7YEzHIDyo3Ibkd+ATmLk3fXWxi5pb9Y7e5wpZDDOjDLPhho4q4WPIOTDKUrmsfAw5G0ZZKpeVjyGnwijL7Iq/x3HQw1/UW9S71HdwQ92NDHHDTQXMoy6ibqZuRVtPNBm76tTLAeo56gwkgseeSz2f56VO1qEiwYOLgcgo6TJ2DR+ifkMieOwJahU/3p3nKRmpqywZiHsDSmBeNvGsPpYfX0YiUl4hIyyAV6EM5ukV9KEhMiL6BPTyOFweo5OqyhrjmfjzVF+wypDR0vvh7nKbGk2WdmIb9QLzcUTBM20n8/E+Py5FZFIZMjpVIgtBuqOfwGPIwQNpwJfxmFcXjDdJHqMbkqrK+rEgfTnimHGYJdRAwXc/IAGpDJkoSF+I+CwqSJ9AAlIZcqAg/XjEp+iY+5GA1DeGRg9miDLMEGXE7Pbuo76Cm9pMOl5UEsnjh3BD6JchUlnFMmScWsr+/pdoCczr99xcL595ryJd8c3UWWiYWFXWw20yoxfmXe7qH0EEYhlSa8h+It5DBKIYwjPsT7ScWP/BelnKMEOUYYYoI4oh7DbOR8vhf4gSIBjrCrmnzI/YcK7O4rMa5Sj1H0KJdWMooUMyMzdM7aE6LIgko6llyYMdJBj9ZLho/ycRgVhXiEzFPkP9Qf0NF6CmHcmj5FXy/DQiPWcfewpXToA2PXUVPa/Wy1KGGaIMTcHWh2BjOoebx6hLqW+p9ewA1DK/zX1LgPUa6kJqe77vXVCEKkNYYNKj+RSTjf4t1ADTF7LgfkcA3Mfp3MiI8/yufd/O9Mu57z1QgrYqS/r6vT0wKcBVCOdBTJpxGDnWcihCmyHnFaSfj+b2fQEUoc2QzwvSP0Nz+94KRWgz5G3q9Z60MWoE4cj6I72TTLJozmYoQlWjzsa1AxdvK4UnUYzyaNuWPD103/u4X1lUTSS9rB1M+wjKUNftFfKCqr2wcmNHURDsrQG7MVSGGaIMM0QZZogyVDbq7A0tgFuWIrh3VYBMPI2zkf8GylBpCLkDzc/QPUWpMyRVldXYito1kiSPqQy5eJrvF6B5Lgn8vhFSVVkb2U7IYjMSxNwd7HAKdSd1G5pHht4f5fZN6p+udAlukEXaNiABqQyRGKctSIvUDhtzqcGnytoNoyyVA7R9DBmHUZbKZeVjyE4YZalcVj7LxMpz3RJ0MAfG0YizTCwPsBdu0sg4Ou9kHm/h8b0PGYYxHV6znF6GZO41PzPhucGmGPOdjQx5XYUEskmAwCwY3UiU/xIa8jU88B46ydw7l1bC6EZGp1f4miEEjWVlbn3CKM9NtAAxYy3L5DUEUNdLwe6Ca+j7+aVgK2lG8OKZtYz2Zm6p16vQnw29xHotrsMMoYkXS8qbZQapm+Cx9nlLkDEqCSUaohEfo0aafPWqPAImi7bIyK4s2jIP7ZiYmgppH2Qt+l/gXr26Lb9BNgzDMAzDMAzDMAzDMIy+5SCJkd+VUPi4GQAAAABJRU5ErkJggg==",TI="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAARzSURBVHgB7Zw9i1VHGMefqxBCUgSSIotEAxFiQiQG0oR0KQKR3cSExNinSBOEBPINxMqPYKOtgm8rYqO7Nva+lDYqYqWFsrorso//8d4pXO95m3nmmZl7nx/8GS5zOS/z45w5M+eFyDAMwzAMw5BnRJXDzLtQ7J38vDUaje6ToQ9EfIOs8tusIPvI0AMNvoSscTOubpGM9KCh9yPPuZsN5Bcy0jFAhklJTYAMk5KKCBkmRRoBGSZFCkEZJiWWBDJMSigJZZiUoSjIMCl9UZRhUrrIIMOkNJFRhknZSgEyPCaFy5HhmV8pXJ4Mz/xJ4XJleLJJUb+Fix3dj+IM8i6VzQvkIG4JXyBFVIVUJMOjLkVNCGT8hOIs1SPDoypFRUjFMjxqUpILmQEZHhUpSYXMkAxPcinJhMygDE9SKdsoAZCxhOIclSvjEoXzDnKKa3nuyx0ZXPagz7EDOcFxlD+i5zpkOBaQbTzLUrgeGY6FyTYXJ0WkD+FKO3B0zJso/kJOUjiuTzktJSVaSK0yPKVJiRJSuwxPSVKChcyKDE+Jp6/eYIWLyDrn4zZyFPkB2YO8T0JgWduRkxyHaxudcQrnlXEN+Y4Sw7VI4XwyniKHSBEuXQrnk3GXM70ziPV+ijzjOOSlcL5B32Pkc8oA1rsTucMyyA0eOd+R8RL5kTLAsjI8vY6UUceGuVPFdeQ90uc4LkX/7voTtnE3ij3IkCutZSx7vWF5O1GsILtJnjXke6z7JoXA098D18C91ryjY9t+RW5yGAsNy0xxZGzlKgXK2MX5ON6xbcc4joVMMhybyCdN+9Y2Uv+K8nG2qQI7cxjF/yQIpz1NbcV1E3ubKpPcMYzkOXJlWgUa7kMUR0gQZRmdtAm5TXm4h05vo6HuN+QDEiKTDEZuNVU2Cpl8VWeV9HnYUvctCTGRsUr6R8YK2vZBU2XXKetf5Bnp8qil7iOSwcv4jHRxbflf2x9ahcDkDRRuDukF6bHZUif12NIy6ctwbXioawzS2aljARdRHEDWaXb4mHRxMv6ctGUrva6ysKDLNO5QZ0mKFl7G+T5/7n3Za1KCGCTDMWgcYlIGMViGY/DA0KT0IkiGI2ikblJaCZbhCJ46MSlTiZLhiJrLMilvEC3DET25aFJeIyLDITLbO+dSxGQ4xKbf51SKqAyH6P2QiZSDFDf3tT2wThu3j39IynCI36CazNf8TuFSvmip+5LKwMtYplrguGe5Fqcsb4nLwD1jdYBqhMeNuMHDeYL8w+N3AV0O8/hx0ty4ffmZEmIfDuiPeAc+Dfu0Rj9UZDjs4zPdqMlwaH+eqTYpqjIcOT5gVosUdRnZ4PLfaa/30jYULlfK/MnwcHlS5leGh8uRYjI8nF+KydhKRikmo4kMUkxGF4pSTEZfFKSYjKEklGIyQkkgxWTEIijFZEghIMVkSBMhxWSkIkCKyUjNACkmQwseP82y1iLD1S2RoQcafB+yMkXGVeRrqhT1W7jS8PhDLl7AjbaX8g3DMAzDMIx55RUfwWZFutnBnAAAAABJRU5ErkJggg==",s$=N.div`
    fixed top-0 left-0 w-full h-full z-50 bg-gray-900 bg-opacity-50`,AI=N.div`
    fixed top-0 left-0 w-64 h-full bg-sidebar text-white transition-all duration-300 ease-in-out`,Ah=N.div`
    h-35 px-5 md:pt-6`,kI=N.h2`
    text-sm font-inter font-semibold font-white`,bI=N.div`
    pt-4 flex md:pt-3`,RI=N.img`
    h-[37px] w-[37px]`,o$=N.button`
    focus:outline-none pl-[215px] pt-4`,a$=N.img`
    w-[28px] h-[28px]`,PI=N.h5`
    text-white font-inter font-semibold text-[16px] pl-3 pt-2`,NI=N.ul`
    py-0 pt-5 md:pt-0 `,l$=N.button`
    block lg:hidden text-gray-500 hover:text-white focus:outline-none focus:text-white transition duration-150 ease-in-out mt-6 ml-5`,u$=t=>{const e=document.cookie.split(";");for(let n=0;n<e.length;n++){const i=e[n].trim();if(i.startsWith(t+"="))return i.substring(t.length+1)}return""},c$=()=>{const t=u$("persona"),[e,n]=T.useState(!1),i=()=>{n(!e)};return m.jsxs(m.Fragment,{children:[m.jsx(l$,{onClick:i,children:e?m.jsx(m0,{size:20}):m.jsx(p0,{size:20})}),e?m.jsx(s$,{id:"sidebar",children:m.jsxs(AI,{children:[m.jsx(o$,{onClick:i,children:m.jsx(a$,{src:v0,alt:"back"})}),m.jsx(Ah,{children:m.jsxs(bI,{children:[m.jsx(RI,{src:uy,alt:"image"}),m.jsx(PI,{children:"Ube Express Inc."})]})}),m.jsxs(NI,{children:[m.jsx(Ah,{children:m.jsx(kI,{children:"Menu"})}),t=="superadmin"&&m.jsx(De,{to:"/admin/list",iconSrc:_o,iconAlt:"list",text:"Admin List"}),m.jsx(De,{to:"/admin",iconSrc:_o,iconAlt:"list",text:"Driver List"}),m.jsx(De,{to:"/admin/mechanic",iconSrc:_o,iconAlt:"list",text:"Mechanic List"}),m.jsx(De,{to:"/admin/bus",iconSrc:II,iconAlt:"bus",text:"Bus List"}),m.jsx(De,{to:"/admin/route",iconSrc:TI,iconAlt:"route",text:"Route List"}),m.jsx(De,{to:"/admin/reports",iconSrc:uf,iconAlt:"file",text:"Inspection Reports"}),m.jsx(De,{to:"/admin/trips",iconSrc:gi,iconAlt:"folder",text:"Trip Summary"}),m.jsx(wa,{})]})]})}):m.jsxs(AI,{className:"hidden md:block",children:[m.jsx(Ah,{children:m.jsxs(bI,{children:[m.jsx(RI,{src:uy,alt:"image"}),m.jsx(PI,{children:"Ube Express Inc."})]})}),m.jsxs(NI,{children:[m.jsx(Ah,{children:m.jsx(kI,{children:"Menu"})}),t=="superadmin"&&m.jsx(De,{to:"/admin/list",iconSrc:_o,iconAlt:"list",text:"Admin List"}),m.jsx(De,{to:"/admin",iconSrc:_o,iconAlt:"list",text:"Driver List"}),m.jsx(De,{to:"/admin/mechanic",iconSrc:_o,iconAlt:"list",text:"Mechanic List"}),m.jsx(De,{to:"/admin/bus",iconSrc:II,iconAlt:"bus",text:"Bus List"}),m.jsx(De,{to:"/admin/route",iconSrc:TI,iconAlt:"route",text:"Route List"}),m.jsx(De,{to:"/admin/reports",iconSrc:uf,iconAlt:"file",text:"Inspection Reports"}),m.jsx(De,{to:"/admin/trips",iconSrc:gi,iconAlt:"folder",text:"Trip Summary"}),m.jsx(wa,{})]})]})]})},h$="/assets/alert-672b0b82.mp3",d$=N.div`
    flex flex-cols`,f$=N.div`
    absolute md:w-64 sm:w-auto`,p$=()=>{const[t,e]=T.useState(null);return T.useEffect(()=>((async()=>{try{const i=st(ne,"buses");(await _t(i)).docs.map(a=>a.id).forEach(a=>{const u=s0(XP,`/buses/${a}/emergency`);l0(u,c=>{c.val()===1&&(t&&(t.loop=!0,t.play(),window.confirm(`Emergency detected for bus ${a}! Press OK to reset.`)&&a9(u,"notified")),t&&(t.loop=!1,t.pause(),t.currentTime=0))})})}catch(i){console.error("Error fetching bus IDs from Firestore:",i)}})(),()=>{t&&(t.pause(),t.currentTime=0)}),[t]),T.useEffect(()=>{const n=new Audio(h$);e(n)},[]),m.jsxs(d$,{children:[m.jsx(f$,{children:m.jsx(c$,{})}),m.jsx(u_,{})]})},m$=N.div`
    mt-4 ml-12 md:mt-6`,Ec=({text:t,clickfunc:e})=>m.jsx(m$,{children:m.jsx("button",{className:"border outline-none bg-sidebar text-gray-100 tex-sm font-inter rounded-full font-semibold h-[40px] sm:w-[90px] md:w-[130px] lg:[200px] hover:bg-purple-800",onClick:e,children:t})}),g$=N.div`
  mt-3 mr-3 md:mr-8 md:flex justify-end md:mt-5
`,v$=N.div`
  relative
`,y$=N.div`
  absolute left-3 top-2
`,_$=N.img`
  w-[24px] h-[24px]
`,w$=N.input`
  border outline-none border-gray-400 rounded-xl px-12 py-2 h-10 w-full md:w-[350px] lg:w-[480px] font-inter text-black text-sm
`,ss=({type:t,id:e,placeholder:n,onChange:i})=>m.jsx(g$,{children:m.jsxs(v$,{children:[m.jsx(w$,{type:t,id:e,placeholder:n,onChange:i}),m.jsx(y$,{children:m.jsx(_$,{src:TN,alt:"search"})})]})});ss.propTypes={type:Ct.string.isRequired,id:Ct.string.isRequired,placeholder:Ct.string.isRequired,onChange:Ct.func.isRequired};const x$="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAALDSURBVHgB7d2xi9NgHMbxX5Le4FT0LxBR0VGdBFFxcnbopkvTpLaT4OBmV0HRqaW1IK4itzrqpMKhuIlwqJsFwRN1sm3ik8P+Be/7Hk+b5wNHcsuRt9+8SZPAxUxERERERORgRbYGxuPxLSzOm5s3eZ4/NHL0QRBjgMVd8yCKontZlt0xYtRBfMZYYY9CGyREjBXmKN6ClGUZ4UO8gsGexXpsDvA3jmORWlhTbOeuOYjjeIltfZ+m6UssS/PAS5DpdHpkPp9vYwMvWQ0hxqvFYnGt1+vtmSOnPXkFG/O0rjEqmGmXG43GE/PAeYZMJpOT2KBPJpYkyQkcvtwOg+bulMk+HClOmyPnIEVRfDfZhxni/Fk4B5nNZjtYfDbZbTabO+bIOchgMFjgW8Z1nEd+W339wvhvtFqtpTnydh0yHA6PYcrexmp1HdKwGsCOuMBY32Hc9zudzhcTERERERFZQ96fGFYXiLgV/8xqAPfxWngG4vW2kfcrajwXOISr13NWA9VYzTMvD6jEHwUhoyBkFISMgpBREDIKQkZByCgIGQUhoyBkFISMgpBREDIKQkZByCgIGQUhoyBkFISMgpBREDIKQkZByCgIGQUhoyBkFISMgpBREDIKQkZByCgIGQUhoyBkFISMgpBREDIKQkZByCgIGQUhoyBkFISMgpBREDIKQkZByCgIGQUhoyBkFISM9yBFUfy1mggxVu9Btra2ZlYTy+Xym3nmPUi73a7etFOHt7Z97Pf7f8yzUOeQ57b5gowxSBBM5QdlWf6wDYVzx88kSR5ZAEGC/H8FaQdRvLwflkk1JsTI0zQNssMF+9rb7Xa3oyi6idW5bY55HMd5lmXB/rd90OuQPM/HGMBF7FRvbc3hMPUaPxcQ47EFdGDvUx+NRmcw1a8izlH8etjWwx5m+VcsXyDEBxMREREREdlA/wB5+8JfIGWY9AAAAABJRU5ErkJggg==",E$=N.div`
    mt-2.5`,RN=({onDelete:t})=>{const e=()=>{t()};return m.jsx(E$,{children:m.jsx("button",{className:"border outline-none",onClick:e,children:m.jsx("img",{src:x$,alt:"Delete",className:"w-[22px] h-[22px]"})})})};RN.propTypes={onDelete:Ct.func};const os=({text:t,onDelete:e})=>m.jsxs("tr",{children:[t.map((n,i)=>{if(typeof n=="number"&&(n=n.toString()),typeof n>"u"&&(n="N/A"),n.includes("status="))return n=n.replace("status=",""),m.jsx("td",{className:"text-center",children:m.jsx(kN,{status:n})},i);if(n.includes("link=")){n=n.replace("link=","");const r="/mechanic/viewInspection/"+n;return m.jsx("td",{className:"p-3 text-sm text-gray-600 font-inter font-semibold text-center",children:m.jsx(Aa,{className:"underline text-blue-400",to:r,children:n})},i)}else return m.jsx("td",{className:"p-3 text-sm text-gray-600 font-inter font-semibold text-center",children:n},i)}),m.jsx("td",{className:"text-center",children:m.jsx(RN,{onDelete:e})})]});os.propTypes={text:Ct.array.isRequired,onDelete:Ct.func};const S$="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACxSURBVHgB7ZQxCgIxEEUnwYjH8BIKllaewkpC+j2CvX0ISA4g2NtZaeExLGzE0iKJxr8LbivZ2Cy7D4b50/ximPlEnYN9hTGmiDFOITklwjk/SCm3taHWesYYO1EGMJ3D9DgoByHEw3t/hhxSM54hhDu1gmqH1tqxc24NOaJmvFCFUupW7RBmE7Ql5bFH7ZJP5Be94f8Ms68cr3ctex0O+OcVwmFBiSAD3qgLbnBD3eQDxoYvWFKgukgAAAAASUVORK5CYII=",C$="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAOCAYAAADNGCeJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFdSURBVHgBpZMxS8NAHMXf2VKEiuKgUKiQyclRHHRy9RMUXHRwk+IsHSKIUFy0KlRRGp3ERQRxEuKgQjvoYB10EI3UqBXaphG1NZ53l2KhaBPb3/TPJXl5712OJPZv6MzGJW71VzSJQuiHRmEVsLDnw+LOdTOiSgs8HaCWgalQL9SVYYyNSGgUQhm1i9zd+GwSR2dZ/APmrAb6NA+p24Ia60ciMgAp4IdbfpzR3DZEZPMUxNcDtPaBtA2Kh+T1tOgzXyzD2RnrDEzg6z4M+rJmC5NqenkUOF8NOvbpreYjIJXNEHwa9kc87eIyUMpBflQRvtrFHxErYvyFsgYSjAHMGema4LfFulUo4jmuIhvfYrMBV85IZ8ge3i9A/ENizB8cIjM9h5KWgRt+/TXM4yT06DLMkxTcwoQUL++FvqXFzvFIenSJRdpEI3j5UeLYIs691BUzUw+4m4y47qUe3zlSnwm+EIkWAAAAAElFTkSuQmCC",E0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAANqSURBVHgB7d1NjhJRFIbhC9UJU6NjNa0bcOLUn+gG3IKBESTGuA6jAxgQiGzDmLRtnDpxA8bYjnUMAaq8X6crIQaKv3PvPaf6e5JOp4EBxUtVNdQpcI6IiIiIiIiIiIiIiIiIrq+GC2A8Ht9cLBbjk5OT1+12+5erEb9sd/2yvfPL5het/dcJazphk8nkxnw+/9hoNF4sl8uvo9Ho1NXEcDi845fpM5bNRznr9/u3nDDRNQQxptPpp2az+XDl4gv/95NOp/PTGYYY/te5/7lXXlYUxXcf5nmv1/vjhIgF2RCjZDrKuhgl6Shim6zZbPZhQwzAqn6G7a8zBvfZP+hf3JoY4DdfD/z+ZOSEiAXxD/gr/+vHpuv9HT+1tk9Z2WdU3eeLLMveOCGi+5DBYHDbP1uwat+vuJmJzVfVZmqF+LKI/9tbhyipYkCQ1yGWo6SMAUGCgMUoqWNAsCBgKYqGGBA0CFiIoiUGBA8CmqNoigFRgoDGKNpiQLQgoCmKxhgQNQhoiKI1BkQPAimjaI4BSYJAiijaY0CyIBAzioUYkDQIxIhiJQYkDwIho1iKASqCQIgo1mKAmiAgGcViDFAVBCSiWI0B6oLAMVEsxwCVQeCQKNZjgNogsE+UPM+XzngMUB0ErkY3z6smP4qiuHyAt93Gx32qfbRVfRDYcU2pon7NKJkIAkdEMRMDzASBA6KYigGmgsAeUczFAPHTEULzMfAkMvdE2pWpBdvxdcYqbrJCOSBGiTt1aUfEKJmJon4fsu38DMCLvvLF4QZmzk9RHWSP8zOe+ds9djU4P0XtJuuQNwrrcCqEyiDHvGtrPYq6IBJvoVuOoiqI5PEMq1HUBAlxcMliFBVBQh7psxYleZAYh10tRUkaJOYxcCtRkgVJMZBgIUqSICmnQ7RHiR5Ew6iO5ihRg2iam9IaJVoQjUNsGqNECaJ5olBblOBBLIx3aooSNIilWVstUYIFsTj4rCFKkCCWp9BTRxEPUodTAlJGEQ1ShxilVFHEgtQpRilFFLGpk6Io3rstozpZlj2yNEXY7XZ/Y6JlhxGjt06IWJBWq/Uyz/NvG66+HNWx+DnwuM9VI0ZXH6TccUL4UeM7Wrf5Uv1R46X/otQiRmk1SogYwK+r2FPor6sgIiIiIiIiIiIiIiIiouvsHz2SK55x45IGAAAAAElFTkSuQmCC",I$="/assets/successGIF-fba3ef43.gif",T$=({onClose:t})=>m.jsxs("div",{className:"bg-white p-7 rounded-2xl drop-shadow-lg items-center flex flex-col text-center w-64 md:w-96 lg:w-[420px] text-sm md:text-base",children:[m.jsx("img",{src:I$,alt:"Inspection icon",className:"w-24 h-24 md:w-36 md:h-36"}),m.jsx("p",{children:"Successfully Created!"}),m.jsx("button",{className:"bg-primary w-full font-inter text-base md:text-xl text-white px-4 py-2 mt-5 text-center font-semibold rounded-2xl",onClick:t,children:"Close"})]}),S0=({onClose:t,onAddUser:e,persona:n})=>{const[i,r]=T.useState(""),[s,a]=T.useState(""),[u,c]=T.useState(""),[d,p]=T.useState(""),[g,y]=T.useState(""),[_,x]=T.useState(""),[C,k]=T.useState(!1),[S,E]=T.useState(!1),[I,R]=T.useState(!1),[j,V]=T.useState(!1);if(n==="admins")var W="hidden";else W="";const H=async ae=>{ae.preventDefault();try{V(!0);const{user:Le}=await $B(Jo,s,g),Me={name:i,email:s,...n!=="admins"&&{phone:u,license:d}},je=st(ne,n),Ln=Pe(je,Le.uid);await Di(Ln,Me),R(!0)}catch(Le){console.log("Error creating user:",Le)}finally{V(!1)}},fe=()=>{e(),R(!1),t()},te=()=>{t()};return I?m.jsx(T$,{onClose:fe}):m.jsxs("div",{className:"bg-primary pt-2 pb-8 pl-12 pr-12 rounded-2xl drop-shadow-lg items-center flex flex-col text-center w-5/6 md:w-4/5 lg:w-[800px]",children:[m.jsx("div",{children:m.jsx("button",{onClick:te,children:m.jsx("img",{src:E0,alt:"close",className:"w-[20px] h-[20px] absolute top-4 right-4 focus:outline-none"})})}),m.jsx("h2",{className:"text-2xl md:text-4xl lg:text-[40px] font-bold text-white font-work-sans",children:"Add an Account"}),m.jsx("p",{className:"text-white/50 font-inter text-xs md:text-sm mb-3 mt-3",children:"Fill up the information below"}),m.jsxs("form",{onSubmit:H,className:"w-full mt-4 flex flex-col md:grid md:grid-cols-2 gap-0 md:gap-3 text-start text-white font-inter",children:[m.jsxs("div",{className:"flex flex-col mb-4",children:[m.jsx("label",{htmlFor:"name",className:"text-white mb-1 text-xs md:text-sm font-semibold",children:"Name"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"text",id:"name",placeholder:"Enter the name",value:i,onChange:ae=>r(ae.target.value),className:"border outline-1 outline-gray-300 border-gray-300 rounded-lg h-10 pl-4 bg-transparent w-full text-xs md:text-sm",required:!0}),m.jsx("img",{src:eN,className:"absolute top-3 md:top-2 right-2 w-4 h-4 md:w-5 md:h-5"})]})]}),m.jsxs("div",{className:"flex flex-col mb-4",children:[m.jsx("label",{htmlFor:"email",className:"text-white mb-1 text-xs md:text-sm  font-semibold",children:"Email Address"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"email",placeholder:"Enter the email address",id:"email",value:s,onChange:ae=>a(ae.target.value),className:"border outline-1 outline-gray-300 border-gray-300 rounded-lg h-10 pl-4 bg-transparent w-full text-xs md:text-sm",required:!0}),m.jsx("img",{src:r_,className:"absolute top-3 md:top-2 right-2 w-4 h-4 md:w-5 md:h-5"})]})]}),m.jsxs("div",{className:`flex flex-col mb-4 ${W}`,children:[m.jsx("label",{htmlFor:"mobileNumber",className:"text-white mb-1 text-xs md:text-sm  font-semibold",children:"Mobile Number"}),m.jsxs("div",{className:"flex flex-row gap-2",children:[m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"text",defaultValue:"+63",disabled:!0,className:"border border-gray-300 rounded-md pl-7 md:pl-8 h-10 px-3 w-[66px] md:w-20 bg-transparent  text-xs md:text-base"}),m.jsx("img",{src:C$,className:"absolute top-3 md:top-2 left-2 w-4 h-4 md:w-5 md:h-5"})]}),m.jsx("input",{type:"tel",id:"mobileNumber",placeholder:"Enter number",value:u,onChange:ae=>c(ae.target.value),className:"border outline-1 outline-gray-300 border-gray-300 rounded-lg h-10 pl-4 bg-transparent w-full text-xs md:text-sm",pattern:"[0-9]{10}",maxLength:"10",...n==="admins"&&"required"})]})]}),m.jsxs("div",{className:`flex flex-col mb-4 ${W}`,children:[m.jsx("label",{htmlFor:"licenseNumber",className:"text-white mb-1 text-xs md:text-sm  font-semibold",children:"License Number"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"text",id:"licenseNumber",placeholder:"Enter license number",value:d,onChange:ae=>p(ae.target.value),className:"border outline-1 outline-gray-300 border-gray-300 rounded-lg h-10 pl-4 bg-transparent w-full text-xs md:text-sm",...n==="admins"&&"required"}),m.jsx("img",{src:S$,className:"absolute top-3 md:top-2 right-2 w-4 h-4 md:w-5 md:h-5"})]})]}),m.jsxs("div",{className:"flex flex-col mb-4",children:[m.jsx("label",{htmlFor:"password",className:"text-white mb-1 text-xs md:text-sm font-semibold",children:"Password"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:C?"text":"password",id:"password",placeholder:"Enter password",value:g,onChange:ae=>y(ae.target.value),className:"border outline-1 outline-gray-300 border-gray-300 rounded-lg h-10 pl-4 pr-10 bg-transparent w-full text-xs md:text-sm",required:!0}),m.jsx("button",{type:"button",onClick:()=>k(!C),className:"absolute top-2 right-2 focus:outline-none",children:m.jsx("img",{src:C?iy:ry,alt:"Toggle Password Visibility",className:"mt-1 md:mt-0 w-4 h-4 md:w-5 md:h-5"})})]})]}),m.jsxs("div",{className:"flex flex-col mb-4",children:[m.jsx("label",{htmlFor:"confirmPassword",className:"text-white mb-1 text-xs md:text-sm  font-semibold",children:"Confirm Password"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:S?"text":"password",id:"confirmPassword",placeholder:"Enter password",value:_,onChange:ae=>x(ae.target.value),className:"border outline-1 outline-gray-300 border-gray-300 rounded-lg h-10 pl-4 pr-10 bg-transparent w-full text-xs md:text-sm",required:!0}),m.jsx("button",{type:"button",onClick:()=>E(!S),className:"absolute top-2 right-2 focus:outline-none",children:m.jsx("img",{src:S?iy:ry,alt:"Toggle Password Visibility",className:"mt-1 md:mt-0 w-4 h-4 md:w-5 md:h-5"})})]})]}),m.jsx("button",{type:"submit",className:"bg-secondary place-self-center font-inter text-lg md:text-xl text-white px-4 py-2 mt-4 mb-2 text-center font-semibold rounded-2xl col-span-2 w-2/3",disabled:j,children:j?"Creating...":"Create"})]})]})},A$=N.div`
  lg:ml-[220px] md:ml-[105px] sm:w-full
`,k$=N.div`
  flex items-center justify-end gap-1 md:gap-2
`,b$=N.div`
  h-screen p-5 md:pl-44 md:pr-8 lg:pl-16
`,R$=N.div`
  overflow-auto rounded-sm shadow
`,P$=N.div`
  fixed top-0 left-0 w-full h-full bg-gray-500 bg-opacity-50 flex items-center justify-center
`,N$=()=>{const[t,e]=T.useState(!1),[n,i]=T.useState([]),[r,s]=T.useState(""),[a,u]=T.useState(!0),c=async x=>{try{u(!0);const C=Pe(ne,"drivers",x);await ja(C);const k=st(ne,"drivers"),S=await _t(k),E=[];S.forEach(I=>{const R={...I.data(),userId:I.id};E.push(R)}),i(E),u(!1)}catch(C){console.log("Error deleting user:",C)}},d=async()=>{try{g(),u(!0);const x=st(ne,"drivers"),C=await _t(x),k=[];C.forEach(S=>{const E={...S.data(),userId:S.id};k.push(E)}),i(k),u(!1)}catch(x){console.log("Error adding user:",x)}};T.useEffect(()=>{(async()=>{try{if(n.length>0){u(!1);return}const k=(await _t(st(ne,"drivers"))).docs.map(S=>({...S.data(),userId:S.id}));i(k),u(!1)}catch(C){console.log("Error fetching users:",C),u(!1)}})()},[n]);const p=()=>{e(!0)},g=()=>{e(!1)},y=x=>{s(x.target.value)},_=n.filter(x=>x.name.toLowerCase().includes(r.toLowerCase()));return m.jsxs(A$,{children:[m.jsxs(k$,{children:[m.jsx(Ec,{text:"Add User",clickfunc:p}),t&&m.jsx(P$,{children:m.jsx(S0,{onClose:g,onAddUser:d,persona:"drivers"})}),m.jsx(ss,{type:"text",id:"id",placeholder:"Search Name",onChange:y})]}),m.jsx(b$,{children:m.jsx(R$,{children:a?m.jsx("p",{children:"Loading..."}):m.jsxs("table",{className:"w-full",children:[m.jsx(Nn,{text:["Name","User ID","Email Address","Mobile No.","License No.",""]}),m.jsx("tbody",{className:"divide-y divide-gray-200",children:_.map(x=>m.jsx(os,{text:[x.name,x.userId,x.email,x.phone,x.license],onDelete:()=>c(x.userId)},x.userId))})]})})})]})},L$=N.div`
  lg:ml-[220px] md:ml-[105px] sm:w-full
`,M$=N.div`
  flex items-center justify-end gap-1 md:gap-2
`,D$=N.div`
  h-screen p-5 md:pl-44 md:pr-8 lg:pl-16
`,O$=N.div`
  overflow-auto rounded-sm shadow
`,j$=N.div`
  fixed top-0 left-0 w-full h-full bg-gray-500 bg-opacity-50 flex items-center justify-center
`,B$=()=>{const[t,e]=T.useState(!1),[n,i]=T.useState(""),[r,s]=T.useState([]),[a,u]=T.useState(!0),c=()=>{e(!0)},d=()=>{e(!1)},p=x=>{i(x.target.value)},g=async x=>{try{u(!0);const C=Pe(ne,"mechanics",x);await ja(C);const k=st(ne,"mechanics"),S=await _t(k),E=[];S.forEach(I=>{const R={...I.data(),userId:I.id};E.push(R)}),s(E),u(!1)}catch(C){console.log("Error deleting user:",C)}},y=async()=>{try{d(),u(!0);const x=st(ne,"mechanics"),C=await _t(x),k=[];C.forEach(S=>{const E={...S.data(),userId:S.id};k.push(E)}),s(k),u(!1)}catch(x){console.log("Error adding user:",x)}};T.useEffect(()=>{(async()=>{try{if(r.length>0){u(!1);return}const C=st(ne,"mechanics"),k=await _t(C),S=[];k.forEach(E=>{const I={...E.data(),userId:E.id};S.push(I)}),s(S),u(!1)}catch(C){console.log("Error fetching mechanics:",C),u(!1)}})()},[r]);const _=r.filter(x=>x.name.toLowerCase().includes(n.toLowerCase()));return m.jsxs(L$,{children:[m.jsxs(M$,{children:[m.jsx(Ec,{text:"Add User",clickfunc:c}),t&&m.jsx(j$,{children:m.jsx(S0,{onClose:d,onAddUser:y,persona:"mechanics"})}),m.jsx(ss,{type:"text",id:"id",placeholder:"Search Name",onChange:p})]}),m.jsx(D$,{children:m.jsx(O$,{children:a?m.jsx("p",{children:"Loading..."}):m.jsxs("table",{className:"w-full",children:[m.jsx(Nn,{text:["Name","User ID","Email Address","Mobile No.","License No.",""]}),m.jsx("tbody",{className:"divide-y divide-gray-200",children:_.map(x=>m.jsx(os,{text:[x.name,x.userId,x.email,x.phone,x.license],onDelete:()=>g(x.userId)},x.userId))})]})})})]})};function F$(t){return"B"+String(t).padStart(5,"0")}const U$=({onClose:t,onTableRefresh:e})=>{const[n,i]=T.useState(""),[r,s]=T.useState(""),[a,u]=T.useState(""),c=async p=>{p.preventDefault();try{const y=Pe(ne,"counters","buses");var g=(await Gi(y)).data().count+1;await Di(y,{count:g});const _=F$(g),x=Pe(ne,"buses",_);await Di(x,{plate:n,brand:r,capacity:a}),e(),t()}catch(y){console.log("Error adding bus:",y)}},d=()=>{t()};return m.jsxs("div",{className:"bg-primary pt-3 pb-0 pl-12 pr-12 md:pl-10 md:pr-10  rounded-2xl drop-shadow-lg items-center flex flex-col text-center w-9/12 md:w-[450px]",children:[m.jsx("div",{children:m.jsx("button",{onClick:d,children:m.jsx("img",{src:E0,alt:"close",className:"w-[20px] h-[20px] absolute top-4 right-4 focus:outline-none"})})}),m.jsx("h2",{className:"text-2xl md:text-4xl lg:text-[40px] font-bold text-white font-worksans",children:"Add New Bus"}),m.jsx("p",{className:"text-white/50 font-inter mb-5 md:mb-0 text-xs md:text-sm",children:"Fill up the information below:"}),m.jsxs("form",{onSubmit:c,className:"w-full  text-start text-white font-inter flex flex-col justify-center md:p-8 lg:p-10",children:[m.jsxs("div",{className:"flex flex-col mb-3 w-full",children:[m.jsx("label",{htmlFor:"name",className:"text-white mb-1 text-xs md:text-sm font-semibold",children:"Plate Number"}),m.jsx("input",{type:"text",id:"name",placeholder:"Enter the number",value:n,onChange:p=>i(p.target.value),className:"border outline-1 outline-gray-300 border-gray-300 rounded-lg h-10 pl-4 bg-transparent w-full text-xs md:text-sm",required:!0})]}),m.jsxs("div",{className:"flex flex-col mb-4 w-full",children:[m.jsx("label",{htmlFor:"name",className:"text-white mb-1 text-xs md:text-sm font-semibold",children:"Brand"}),m.jsx("input",{type:"text",id:"name",placeholder:"Enter the brand",value:r,onChange:p=>s(p.target.value),className:"border outline-1 outline-gray-300 border-gray-300 rounded-lg h-10 pl-4 bg-transparent w-full text-xs md:text-sm",required:!0})]}),m.jsxs("div",{className:"flex flex-col mb-8 w-full",children:[m.jsx("label",{htmlFor:"name",className:"text-white mb-1 text-xs md:text-sm font-semibold",children:"Sitting Capacity"}),m.jsx("input",{type:"text",id:"name",placeholder:"Enter the capacity",value:a,onChange:p=>u(parseInt(p.target.value)),className:"border outline-1 outline-gray-300 border-gray-300 rounded-lg h-10 pl-4 bg-transparent w-full text-xs md:text-sm",required:!0})]}),m.jsx("button",{type:"submit",className:"rounded-xl bg-[#008000] py-2 text-white text-center font-bold font-worksans text-xs md:text-sm hover:bg-green-700 mb-4 w-full",children:"Add Bus"})]})]})},z$=N.div`
  lg:ml-[220px] md:ml-[105px] sm:w-full
`,V$=N.div`
  flex items-center justify-end gap-1 md:gap-2
`,W$=N.div`
  h-screen p-5 md:pl-44 md:pr-8 lg:pl-16
`,H$=N.div`
  overflow-auto rounded-sm shadow
`,G$=N.div`
  fixed top-0 left-0 w-full h-full bg-gray-500 bg-opacity-50 flex items-center justify-center
`,$$=()=>{const[t,e]=T.useState(!1),[n,i]=T.useState(""),[r,s]=T.useState(!0),[a,u]=T.useState([]),[c,d]=T.useState(!1);T.useEffect(()=>{(async()=>{try{if(a.length>0&&!c){s(!1);return}const S=st(ne,"buses"),E=await _t(S),I=[];E.forEach(R=>{const j={id:R.id,...R.data()};I.push(j)}),u(I),s(!1),d(!1)}catch(S){console.log("Error fetching buses:",S),s(!1)}})()},[a,c]);const p=()=>{s(!0),u([])},g=()=>{e(!0)},y=()=>{e(!1),d(!0)},_=k=>{i(k.target.value)},x=async k=>{try{const S=Pe(ne,"buses",k);await ja(S);const E=a.filter(I=>I.id!==k);u(E)}catch(S){console.log("Error deleting bus:",S)}},C=a.filter(k=>k.plate.toLowerCase().includes(n.toLowerCase()));return m.jsxs(z$,{children:[m.jsxs(V$,{children:[m.jsx(Ec,{text:"Add Bus",clickfunc:g}),t&&m.jsx(G$,{children:m.jsx(U$,{onClose:y,onTableRefresh:p})}),m.jsx(ss,{type:"text",id:"id",placeholder:"Search Plate Number",onChange:_})]}),m.jsx(W$,{children:m.jsx(H$,{children:r?m.jsx("p",{children:"Loading..."}):m.jsxs("table",{className:"w-full",children:[m.jsx(Nn,{text:["Bus ID","Plate Number","Brand","Sitting Capacity",""]}),m.jsx("tbody",{className:"divide-y divide-gray-200",children:C.map(k=>m.jsx(os,{text:[k.id,k.plate,k.brand,k.capacity],onDelete:()=>x(k.id)},k.id))})]})})})]})},Q$=({onClose:t})=>{const[e,n]=T.useState(""),[i,r]=T.useState(""),[s,a]=T.useState(""),u=async d=>{d.preventDefault();try{const p={number:e,origin:i,destination:s},g=st(ne,"routes");await cV(g,p),console.log("Route added successfully"),t()}catch(p){console.log("Error adding route:",p)}},c=()=>{t()};return m.jsxs("div",{className:"bg-primary pt-4 pb-3 pl-10 pr-10 rounded-2xl drop-shadow-lg items-center flex flex-col text-center w-9/12 md:w-[450px]",children:[m.jsx("div",{children:m.jsx("button",{onClick:c,children:m.jsx("img",{src:E0,alt:"close",className:"w-[20px] h-[20px] absolute top-4 right-4 focus:outline-none"})})}),m.jsx("h2",{className:"text-2xl md:text-4xl lg:text-[40px] font-bold text-white font-work-sans",children:"Add New Route"}),m.jsx("p",{className:"text-white/50 font-inter mb-5 mt-3 md:mb-0 text-xs md:text-sm",children:"Fill up the information below"}),m.jsxs("form",{onSubmit:u,className:"w-full  text-start text-white font-inter flex flex-col justify-center  md:p-8 lg:p-10",children:[m.jsxs("div",{className:"flex flex-col mb-4 w-full",children:[m.jsx("label",{htmlFor:"name",className:"text-white mb-1 text-xs md:text-sm font-semibold",children:"Route Number"}),m.jsx("input",{type:"text",id:"name",placeholder:"Enter number",value:e,onChange:d=>n(d.target.value),className:"border outline-1 outline-gray-300 border-gray-300 rounded-lg h-10 pl-4 bg-transparent w-full text-xs md:text-sm",required:!0})]}),m.jsxs("div",{className:"flex flex-col mb-4 w-full",children:[m.jsx("label",{htmlFor:"name",className:"text-white mb-1 text-xs md:text-sm font-semibold",children:"Origin"}),m.jsx("input",{type:"text",id:"name",placeholder:"Enter origin",value:i,onChange:d=>r(d.target.value),className:"border outline-1 outline-gray-300 border-gray-300 rounded-lg h-10 pl-4 bg-transparent w-full text-xs md:text-sm",required:!0})]}),m.jsxs("div",{className:"flex flex-col mb-4 w-full",children:[m.jsx("label",{htmlFor:"name",className:"text-white mb-1 text-xs md:text-sm font-semibold",children:"Destination"}),m.jsx("input",{type:"text",id:"name",placeholder:"Enter destination",value:s,onChange:d=>a(d.target.value),className:"border outline-1 outline-gray-300 border-gray-300 rounded-lg h-10 pl-4 bg-transparent w-full text-xs md:text-sm",required:!0})]}),m.jsx("button",{type:"submit",className:"bg-secondary font-inter text-lg md:text-xl text-white px-4 py-2 mt-2 mb-8 md:mb-0 md:mt-7 text-center font-semibold rounded-2xl w-full",children:"Create"})]})]})},q$=N.div`
  lg:ml-[220px] md:ml-[105px] sm:w-full  
`,K$=N.div`
  flex items-center justify-end gap-1 md:gap-2
`,Y$=N.div`
  h-screen p-5 md:pl-44 md:pr-8 lg:pl-16
`,Z$=N.div`
  overflow-auto rounded-sm shadow
`,X$=N.div`
  fixed top-0 left-0 w-full h-full bg-gray-500 bg-opacity-50 flex items-center justify-center
`,J$=({onClose:t})=>{const[e,n]=T.useState(!1),[i,r]=T.useState(""),[s,a]=T.useState([]),[u,c]=T.useState(!0),d=()=>{n(!0)},p=()=>{n(!1),window.location.reload(!0),t()},g=x=>{r(x.target.value)},y=async x=>{try{await ja(Pe(ne,"routes",x)),a(C=>C.filter(k=>k.id!==x))}catch(C){console.log("Error deleting route:",C)}};T.useEffect(()=>{(async()=>{try{if(s.length>0){c(!1);return}const C=st(ne,"routes"),k=await _t(C),S=[];k.forEach(E=>{const I={...E.data(),id:E.id};S.push(I)}),a(S),c(!1)}catch(C){console.log("Error fetching routes:",C),c(!1)}})()},[s]);const _=s.filter(x=>x.number.toLowerCase().includes(i.toLowerCase()));return m.jsxs(q$,{children:[m.jsxs(K$,{children:[m.jsx(Ec,{text:"Add Route",clickfunc:d}),e&&m.jsx(X$,{children:m.jsx(Q$,{onClose:p})}),m.jsx(ss,{type:"text",id:"id",placeholder:"Search Route Number",onChange:g})]}),m.jsx(Y$,{children:m.jsx(Z$,{children:u?m.jsx("table",{children:m.jsx("tbody",{children:m.jsx("tr",{children:m.jsx("td",{colSpan:"4",children:"Loading..."})})})}):m.jsxs("table",{className:"w-full",children:[m.jsx(Nn,{text:["Route Number","Origin","Destination",""]}),m.jsx("tbody",{className:"divide-y divide-gray-200",children:_.map(x=>m.jsx(os,{text:[x.number,x.origin,x.destination],onDelete:()=>y(x.id)},x.id))})]})})})]})},e8=N.div`
  lg:ml-[220px] md:ml-[105px] sm:w-full  
`,t8=N.div`
  flex items-center justify-end gap-1 md:gap-2
`,n8=N.div`
  h-screen p-5 md:pl-44 md:pr-8 lg:pl-16
`,i8=N.div`
  overflow-auto rounded-sm shadow
`,r8=()=>{const[t,e]=T.useState(""),[n,i]=T.useState([]),[r,s]=T.useState(!0),a=d=>{e(d.target.value)};T.useEffect(()=>{(async()=>{try{const g=(await _t(st(ne,"inspection_reports"))).docs.map(y=>({id:y.id,...y.data()}));i(g),s(!1)}catch(p){console.log("Error fetching reports:",p),s(!1)}})()},[]);const u=async d=>{try{await ja(Pe(ne,"inspection_reports",d)),i(p=>p.filter(g=>g.id!==d))}catch(p){console.log("Error deleting report:",p)}},c=n.filter(d=>d.id.toLowerCase().includes(t.toLowerCase()));return m.jsxs(e8,{children:[m.jsx(t8,{children:m.jsx(ss,{type:"text",id:"id",placeholder:"Search Report ID",onChange:a})}),m.jsx(n8,{children:m.jsx(i8,{children:r?m.jsx("table",{children:m.jsx("tbody",{children:m.jsx("tr",{children:m.jsx("td",{colSpan:"5",children:"Loading..."})})})}):m.jsxs("table",{className:"w-full",children:[m.jsx(Nn,{text:["Bus Number","Report ID","Date Submitted","Status",""]}),m.jsx("tbody",{className:"divide-y divide-gray-200",children:c.map(d=>m.jsx(os,{text:[d.bus,"link="+d.id,d.date+" "+d.time,"status="+d.status],onDelete:()=>u(d.id)},d.id))})]})})})]})},s8=N.div`
  lg:ml-[220px] md:ml-[105px] sm:w-full  
`,o8=N.div`
  flex items-center justify-end gap-1 md:gap-2
`,a8=N.div`
  h-screen p-5 md:pl-44 md:pr-8 lg:pl-16
`,l8=N.div`
  overflow-auto rounded-sm shadow
`,u8=()=>{const[t,e]=T.useState(""),[n,i]=T.useState([]);T.useEffect(()=>{(async()=>{const u=(await _t(st(ne,"trips"))).docs.map(c=>({id:c.id,...c.data()}));i(u)})()},[]);const r=n.filter(s=>s.id.toLowerCase().includes(t.toLowerCase()));return m.jsxs(s8,{children:[m.jsx(o8,{children:m.jsx(ss,{type:"text",id:"id",placeholder:"Search Trip ID",onChange:s=>e(s.target.value)})}),m.jsx(a8,{children:m.jsx(l8,{children:m.jsxs("table",{className:"w-full",children:[m.jsx(Nn,{text:["Trip ID","Driver","Time Started","Time Ended","Date","Route",""]}),m.jsx("tbody",{className:"divide-y divide-gray-200",children:r.map(s=>m.jsx(os,{text:[s.id,s.driver,s.timeStart,s.timeEnd,s.date,s.route]},s.id))})]})})})]})},c8=N.div`
  lg:ml-[220px] md:ml-[105px] sm:w-full
`,h8=N.div`
  flex items-center justify-end gap-1 md:gap-2
`,d8=N.div`
  h-screen p-5 md:pl-44 md:pr-8 lg:pl-16
`,f8=N.div`
  overflow-auto rounded-sm shadow
`,p8=N.div`
  fixed top-0 left-0 w-full h-full bg-gray-500 bg-opacity-50 flex items-center justify-center
`,m8=()=>{const[t,e]=T.useState(!1),[n,i]=T.useState([]),[r,s]=T.useState(""),[a,u]=T.useState(!0);T.useEffect(()=>{(async()=>{try{if(n.length>0){u(!1);return}const k=(await _t(st(ne,"admins"))).docs.map(S=>({...S.data(),userId:S.id}));i(k),u(!1)}catch(C){console.log("Error fetching admins:",C),u(!1)}})()},[n]);const c=async x=>{try{u(!0);const C=Pe(ne,"admins",x);await ja(C);const k=st(ne,"admins"),S=await _t(k),E=[];S.forEach(I=>{const R={...I.data(),userId:I.id};E.push(R)}),i(E),u(!1)}catch(C){console.log("Error deleting user:",C)}},d=async()=>{try{g(),u(!0);const x=st(ne,"admins"),C=await _t(x),k=[];C.forEach(S=>{const E={...S.data(),userId:S.id};k.push(E)}),i(k),u(!1)}catch(x){console.log("Error adding user:",x)}},p=()=>{e(!0)},g=()=>{e(!1)},y=x=>{s(x.target.value)},_=n.filter(x=>x.name.toLowerCase().includes(r.toLowerCase()));return m.jsxs(c8,{children:[m.jsxs(h8,{children:[m.jsx(Ec,{text:"Add User",clickfunc:p}),t&&m.jsx(p8,{children:m.jsx(S0,{onClose:g,onAddUser:d,persona:"admins"})}),m.jsx(ss,{type:"text",id:"id",placeholder:"Search Name",onChange:y})]}),m.jsx(d8,{children:m.jsx(f8,{children:a?m.jsx("p",{children:"Loading..."}):m.jsxs("table",{className:"w-full",children:[m.jsx(Nn,{text:["Name","User ID","Email Address",""]}),m.jsx("tbody",{className:"divide-y divide-gray-200",children:_.map(x=>m.jsx(os,{text:[x.name,x.userId,x.email],onDelete:()=>c(x.userId)},x.userId))})]})})})]})},g8=({children:t})=>{const{user:e}=so();if(e){let n="/"+zu.get("persona");return m.jsx(iA,{to:n})}return t},v8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAysSURBVHgB7Z19bFfVGcefFsq71NK9MOecc05ATRSzLE5BC845Fp3osEPRTgaltGVF3pb5h1m3ZVEJ6MTSlraErIi6CgYG2WYcLxGG+2OGLQsIJMume2EmQlsE+0bbfb/tLdamvc859+13f/V+kpPza3/nd+895znnOec855zniiQkJCQkJCQkJCQkJERLhqQJ3d3dGTU1NV/IyMi4Bp+nIM5FPB5fXYowwUl2DqEJ351H/D7CSaQ5WVRU9K6kCbEVyMaNGydkZWXNRIHO6urqykMhX4swXjyAa5zPzMw8ivgAwv5x48YdLCgoOC8xJFYC2bRpUzaiB1DwC1Bwt+JzloRDB8Ih3GMb7rUdLahZYkIsBFJbWzsbrWAJCuheFNAYiZYWhF0INRDMfkkxKRUI+oRvQAg/w8evSzw4gvDkkiVLtqNidEsKSIlAnBbxDD7eIPHkCJ5vZXFx8QGJmEgFgo568siRI9eiVTyMGhj7ER6ec8+IESOKCwsL/y0REVmhoMMuQrQWYaKkF+zwV6N/qZMICF0gGzZsmDhq1KhaNIh8CQ6Okv6JGnwWoRG1uGcI29nZOR73yUGg0L+EMFICAtd8CfcpWrRo0QcSIqEKpKqqajrG/w34eLV4BAXeicJgZ7sPnw/jem8j/gdqbIfb79AisyCgq1CI0/DnLfjNbMQ34lojxCOcZCLKX7p06V8lJEITCEZQd6Fj3OFxMtfFSRx+W4/WtWvhwoVNEgCVlZU56MPuxbUL8OftCJlizzn8/n4I5XUJgVAEgtr5EB56Cwp0lM3v8JsP8JuqCxcuVJSWlv5LQgTPeAWiZQjF8pHpxQg8Zzta6vcxPH5ZAiZwgSCjzGCFWNQ+RxDroV6eX7x48RmJkLq6ukmoAMtx/5ViJxi24lK0lGoJkEAFUl1d/SAy9oLYCWMPflOaagPg5s2bL4NgnsLHR0x/g2fn5PFRCKVeAiIwgbDPwPPtFnP70/8giEfR7F+TGIF8zEHfR3X7WZP0VF+I7g6qTwlEIBxNIQMHLTrwvdDBCzDhek9iCNTu5xBtQ5hlkp4qF9HMIEZfXkYZH4PzDA5tTYWBh1936tSpb8ZVGATq81ROTs6dyNMzJumR7hJEDVB7l4hPfE+cMCytFIN5hqNvH0ctelrSgPz8/E5Eq6DC3sWjUzCulZcLZx0dHZzNf0984EtlOeYQdZThCKMQwtgsaQjyuRhZqDG0vxX6MbN4FohjKDyOj9laWuRjDTrvdZLGQCg/QmTSus8iTKXaEw947kOwvMpmrAqDfUa6C4OggGkYfdYgKe1oa8UjngSC+cZtGBrO19KhZRyYNGnSj2WYgMHIauT7DwZJH0aLMhqhDcRaINz9ATYY6FPOM+Y7nWPgIMNTsdB1s0RIeXl5F0aUBSgDkxHiOpaVWGItEBTE3WKw0sdJX1hDWwoD0T7U1tfQWiNd/nX6hh8YJL0JzzlHLPHSQkxU0K/DmoFjGHoNor0InLxRX79OFSoRgtHibxHtMEj6hFhiJRCuhaPJ3uKWhrNW1NxVEgJsGTTL4+Nlff/jhBRhd9QtBXavFdK7MW9I8Fw32/YlVgLhVh0tDa22xcXF/5GA6VNT0tsyBjIR9/19lEJxlgdMRl1qmfXHWCA0kSD6jpLsHGarFRIwA9TUUESuvrBc8EvHjjUk+H6uswHQCGOBjB49mmviY93SoJZuXLZs2WkJkMHUlMv9qb6KJCK4doP7uVoquPEP4btiiLFAuL1TScIFm0oJEEVNDcZuGAUXSoSglWxE1OWWBqpeK7uLGAmEG5+dvbZu7A9ykclQTV0Emf5dW1vbA5j3tEuEoJW8g8r6hpJsRn19vZE13Egg3IUu+sLTVgkICoO71MVATREKA33XfWVlZW2SGlzzzr0FLS0tWoXuwUggPBKgfN/J3SESADZ9hsPu3NzcuSkUhmAqsFMUtQWhzBaTa5kk4vkMcb/ZkSC26njsM+ZFraYG4mzM+ItbGlSyPDFAFQjtMagB09zSQCB7xSfp0me4oB1luM7EtqUKpLKy8nJRtsegcN4UH6SjmhoIKuUflSQTMEdS86cKBMO6qepFMjPfFo8Mg5bRAwRyXEuDBb0pahotAQr7K70rsEPSwb224gGnZdj0GceQ8Z+PHTv2etjVJEw6OztbYEQ8Zpo+Ozv7742NjRfEpUxxTVa+fW7XMdnk8Cnl+3e0jc+D4aEDJzz4eRitRCLgKML1ponZYpEnzsOuGioNnv3ToqCqLGTedWsLbmK99dNWTaULPBqhJFG3qqoCcfYcDQkE5mqCHojtpC+dgHrXzo6o+7ZMhr0TfD7ERYazMAgPEClJ/AskIVpMVJarStL6mP5gWfckrkczzH9lGOIcpXND1SYmKsv1IlBZVoddhrNQDCqnf4FofQQENkksoVAQ3YHgaXdfXOGBU7fvtcpNTOYh7yvfX8kDlrZzEaQ/jt/RAmo1MUSmFsN6EPosnRNDm/QNDQ2jMDG8QkmmlaWRQE5q1+BpV8QnxBIKBSOvPIuR17VI+wRMEPfDutwqMeLMmTNXo4W4lie+V8tIVVlY+NEvkpmp2ruGwlZ94V5z2tvbG1gjJUbguVQ7FfoYrXLrAikpKaFbCW3/keteLQ22FFwjT8w7+ntOnz69c8uWLVF7DhoSbYmb/QdsY2r+TIa93Mx7TLnZHeKTYdBStBXBoyYehkyXcA8oSW7koXzxCVuK9GbMdPR1DzrS7akWSkVFRa4o+515EkAMMBXIfuVmI+ghQQIgHdVXVlbWfaKUpbPMoGIkEPoodI7/Dgk6LOPz3Rq2k0eqr9bW1ldTKBTXvLPsUIaHxQAjgdBhpLZEyVpdV1f3RQmIdOlTqqqqrkSBz3RLwyPjpk43bTwubNOuhflIqQSIxz5li0QIvVBoh5cMyu4ixgJB7XsF0YfifuMSzL61FUYrLPuUs2gpz0tEOJ25tpe4Bc//qhhiLJCysjLa+n/jloabnSGUH0rAGKovOjP7VmFh4Z8kItCZr9AW8PD9Ths3tLbrITVaAnrVqa2tvVwCRlFfPcLAxMvXdiQb6N4J93xMSwc1rpZZf6wEQr+2JvuP8KAmB1msGUJ9UU3dFaUwHJ4zcCfypq1nUy9nDJ80SDOPXnUkBAaor8jVFEHeePB1rpaOW5bEEutju45T/LfwcbqS7j080HSvHg00uI0ILePSqIXh+NWiD8jPuKVD/t9Cq/2qWGLdQmiPQUEs71Z2z9HfFCaLL2Fe4NnppBtUX1ELo7y8PBPCqBddGGS1eMDTJgcUxEFEL2rpILjbm5qaPLuZiBuTJ0+mOxHVkIp8b/XqFdvzrhOs2q1CC1CPIKCmrIR6WSNpDtT042j1yw2SNhue5R8UzwKhlwbUBKOCxgM+TRdHkqZAGIWofL8wSYu8rvDTb/ral+X4hXpBS0fTAv1NQSjlkmZAGMshjE2aecThZXTkvkw3vj3KwexegmXer9Gjmls6J0M/gVAm5uTkrAnLKU1QcDCCdfL1qEjLzWQhx9HhF4pPAnGCWV1dfQMe+pCY+73l+sqCsIbEfuHQFra7FzkoMfwJzUozkJ+/iU8C2UpKb5x0v62tmfRjFtIegSC/LTGDkz7OMyyE0ca8ByEMEqgjZWRmvmNqtnKkDLW3jOe9JYVgXePzEAKtEDYLbV3QDA/CetAgARG4q3HU+qV0sSF2rY+7Wp5FX/Rc0K45NJzlgsdoKMywe3EATw2VoGVskgAJxRk/WwpGJr+ydcYvvYKpQqgI2/U4VzdhieVSAdczrPYngzbkrSDIltFHaK+rQEu501mYsc0soSp4A0KthzrbFZSDfi4o4Xpz0RoewfVvMxzKDuSs87oK30fBByPUF7pw9IWoQRsSK1A18FB+j+mfp115wFI7hcu19ebm5i+jFUxD33Cr442Cz+NnIMM1mfygOvDBCP2VR3S/jVELXRg9JMHB0670ON0IATX1nWFxjgNkO7vQufE5sFcega3IR0lpaanVET5bonwpGE0n9N9r7MwrJjRC8Kv8zsBNiexIG80sqGHclL1VM93HiFfoViQqYZCUvEsQY/48ZHQ9Pt4k8eTPeL6VzjJDpKT05Y5QYzPQWH5q6roobNAHHcazPIXWvCfjk/Tq1YE4rlTpvZP7g8dKtHDf1E7uDknFq1YHEqvXn9Lz6ZgxY+Y5PgpneJhYGkGbG7d30swDI+IOZ89ZLIjt+2jpo7C1tXWG9Boi8xBfJ94mmX2HLY86RwJoaT4EtfShxJDYvyC4P9yAB9UyhRNNFHIuj2QjzkHosUFxPsJ5Cd19ID6N709gZHciDMfOCQkJCQkJCQkJCQkJw4X/A7Hy2c7Xrz98AAAAAElFTkSuQmCC",y8=N.div`
  w-full md:w-3/5 sm:mx-auto md:mx-auto lg:ml-[300px] sm:mt-16 sm:mr-5 sm:ml-5 pb-10 rounded-lg shadow-lg
`,_8=N.div`
  flex gap-2 mb-3 p-5 border-b-2
`,kh=N.div`
  flex pl-6 mb-2
`,w8=N.div`
  flex items-center gap-2 pl-6 pr-12 pb-3
`,x8=N.h2`
  pr-2
`,E8=N.div`
  flex-grow border border-gray-200
`,S8=N.div`
  ml-3 lg:flex gap-36 md:ml-[59px] p-2 border border-gray-300 rounded-lg
`,C8=()=>{const{reportID:t}=eA(),[e,n]=T.useState(!1),[i,r]=T.useState(null),[s,a]=T.useState("");T.useEffect(()=>{(async()=>{try{const p=Pe(ne,"inspection_reports",t),g=await Gi(p);a(g.id),g.exists()?r(g.data()):console.log("Inspection report document not found")}catch(p){console.error("Error fetching inspection data:",p)}})()},[t]);const u=()=>{n(!e)},c=async d=>{try{const p=ZP(JP,"reports/"+s+"/"+d),g=await YP(p);window.open(g)}catch(p){console.error("Error fetching photo:",p)}};return i?m.jsxs(y8,{children:[m.jsxs(_8,{children:[m.jsx(Aa,{className:"border outline-none",to:"/mechanic",children:m.jsx("img",{src:v8,alt:"back",className:"w-[27px] h-[27px]"})}),m.jsx("h1",{className:"font-inter text-lg font-bold",children:"Inspection Overview"})]}),m.jsxs(w8,{children:[m.jsx(x8,{className:"font-inter text-[17px] font-medium",children:"Inspection Details"}),m.jsx(E8,{})]}),m.jsxs(kh,{children:[m.jsx("h3",{className:"font-inter font-medium text-[15px] text-gray-500",children:"Report ID:"}),m.jsx("p",{className:"ml-16 md:ml-28 font-inter font-semibold text-[15px] text-gray-500",children:s})]}),m.jsxs(kh,{children:[m.jsx("h3",{className:"font-inter font-medium text-[15px] text-gray-500",children:"Inspection Date:"}),m.jsx("p",{className:"ml-[18px] md:ml-[66px] font-inter font-semibold text-[15px] text-gray-500",children:i.date})]}),m.jsxs(kh,{children:[m.jsx("h3",{className:"font-inter font-medium text-[15px] text-gray-500",children:"Inspection Time:"}),m.jsx("p",{className:"ml-[15px] md:ml-[64px] font-inter font-semibold text-[15px] text-gray-500",children:i.time})]}),m.jsxs(kh,{children:[m.jsx("h3",{className:"font-inter font-medium text-[15px] text-gray-500",children:"Inspected Items:"}),m.jsx("div",{children:i.damaged.map(d=>m.jsxs(vn.Fragment,{children:[m.jsx("h3",{className:"ml-4 md:ml-16 font-inter font-medium text-[15px] text-gray-700 mb-2"}),m.jsxs(S8,{children:[m.jsx("h4",{className:"font-inter text-sm text-gray-500 mt-1 sm:mb-2",children:d}),m.jsx("button",{className:`sm:ml-3 px-4 py-1 rounded-lg font-inter text-sm border outline-none ${e?"bg-primary text-white":"bg-[#FF8B85] text-white"} hover:bg-primary hover:text-white transition-colors duration-300`,onMouseEnter:u,onMouseLeave:u,onClick:()=>c(d),children:e?"View Photo":"Damaged"})]})]},d))})]})]}):null},I8=N.div`
  lg:ml-[220px] md:ml-[105px] sm:w-full
`,T8=N.div`
  h-screen mx-auto p-5 md:pl-44 md:pr-8 lg:pl-16
`,A8=N.div`
  overflow-auto rounded-sm shadow
`,k8=()=>{const[t,e]=T.useState(""),[n,i]=T.useState([]),[r,s]=T.useState(!0),a=p=>{e(p.target.value)},u=p=>{i(g=>g.filter(y=>y.id!==p))};T.useEffect(()=>{(async()=>{try{const y=(await _t(st(ne,"inspection_reports"))).docs.map(_=>({id:_.id,..._.data()})).filter(_=>_.status==="Pending");i(y),s(!1)}catch(g){console.log("Error fetching reports:",g),s(!1)}})()},[]);const c=async(p,g)=>{try{const y=Pe(ne,"inspection_reports",p);await Lu(y,{status:g}),console.log("Status updated successfully!"),u(p)}catch(y){console.log("Error updating status:",y)}},d=n.filter(p=>p.id.toLowerCase().includes(t.toLowerCase()));return m.jsxs(I8,{children:[m.jsx(za,{type:"number",id:"number",placeholder:"Search Report ID",onChange:a}),m.jsx(T8,{children:m.jsx(A8,{children:r?m.jsx("div",{children:"Loading..."}):m.jsxs("table",{className:"w-full",children:[m.jsx(Nn,{text:["Bus Number","Report ID","Date Submitted","Status"]}),m.jsx("tbody",{className:"divide-y divide-gray-200",children:d.map(p=>m.jsx(Va,{text:[p.bus,"link="+p.id,p.date+" "+p.time,"status="+p.status],reportId:p.id,onStatusChange:c},p.id))})]})})})]})};function b8(){return m.jsx(MW,{children:m.jsxs(m2,{children:[m.jsx(nt,{path:"/",element:m.jsx(DW,{})}),m.jsx(nt,{path:"/forgot",element:m.jsx(PW,{})}),m.jsxs(nt,{path:"/driver/*",element:m.jsx(Th,{children:m.jsx(iG,{})}),children:[m.jsx(nt,{index:!0,element:m.jsx(IN,{})}),m.jsx(nt,{path:"reports",element:m.jsx(fG,{})}),m.jsx(nt,{path:"trips",element:m.jsx(vG,{})})]}),m.jsx(nt,{path:"inspection",element:m.jsx(Th,{children:m.jsx(IG,{children:m.jsx(LG,{})})})}),m.jsxs(nt,{path:"/mechanic/*",element:m.jsxs(Th,{children:[m.jsx(YG,{})," "]}),children:[m.jsx(nt,{index:!0,element:m.jsx(k8,{})}),m.jsx(nt,{path:"approved",element:m.jsx(e$,{})}),m.jsx(nt,{path:"unapproved",element:m.jsx(r$,{})}),m.jsx(nt,{path:"viewInspection/:reportID",element:m.jsx(C8,{})})]}),m.jsxs(nt,{path:"/admin/*",element:m.jsx(Th,{children:m.jsx(p$,{})}),children:[m.jsx(nt,{index:!0,element:m.jsx(N$,{})}),m.jsx(nt,{path:"list",element:m.jsx(m8,{})}),m.jsx(nt,{path:"mechanic",element:m.jsx(B$,{})}),m.jsx(nt,{path:"bus",element:m.jsx($$,{})}),m.jsx(nt,{path:"route",element:m.jsx(J$,{})}),m.jsx(nt,{path:"reports",element:m.jsx(r8,{})}),m.jsx(nt,{path:"trips",element:m.jsx(u8,{})})]}),m.jsx(nt,{path:":busID",element:m.jsx(g8,{children:m.jsx(zG,{})})})]})})}hg.createRoot(document.getElementById("root")).render(m.jsx(vn.StrictMode,{children:m.jsx(w2,{children:m.jsx(b8,{})})}));
